<?xml version="1.0" encoding="utf-8"?>






<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>WSS.COOL</title>
        <link>https://wss.cool/</link>
        <description>ç°åœ¨æ˜¯ä¸€åå‰ç«¯ï¼Œå¸Œæœ›è½¬åˆ°åç«¯ï¼Œæœ€ååšæ¶æ„å¸ˆã€‚è¿™é‡Œè®°å½•äº†å¸¸ç”¨åˆ°çš„å‰ç«¯ã€åç«¯ã€æœåŠ¡å™¨å’Œå„ç§å·¥å…·çš„å¸¸ç”¨apiã€çŸ¥è¯†ç‚¹ç­‰ã€‚è®°å½•çš„apiæ–¹ä¾¿æŸ¥æ‰¾ï¼Œè®°å½•çš„çŸ¥è¯†ç‚¹ä½œä¸ºä¸€ç§è¾“å‡ºå¯ä»¥å¢åŠ ç†è§£ã€‚</description>
        <generator>Hugo 0.68.3 https://gohugo.io/</generator>
        
            <language>zh-CN</language>
        
        
            <managingEditor>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</managingEditor>
        
        
            <webMaster>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</webMaster>
        
        
            <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
        
        <lastBuildDate>Wed, 22 Apr 2020 11:28:12 +0000</lastBuildDate>
        
            <atom:link rel="self" type="application/rss+xml" href="https://wss.cool/rss.xml" />
        
        
            <item>
                <title>å¸¸ç”¨DOMæ“ä½œ</title>
                <link>https://wss.cool/%E5%B8%B8%E7%94%A8dom%E6%93%8D%E4%BD%9C.html</link>
                <guid isPermaLink="true">https://wss.cool/%E5%B8%B8%E7%94%A8dom%E6%93%8D%E4%BD%9C.html</guid>
                <pubDate>Wed, 22 Apr 2020 19:20:48 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ä¸Šä¼ å›¾ç‰‡æ—¶æ€ä¹ˆæ‹¿åˆ°å›¾ç‰‡çš„srcåœ°å€">ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œæ€ä¹ˆæ‹¿åˆ°å›¾ç‰‡çš„srcåœ°å€ï¼Ÿ</h2>
<p>inputé€‰ä¸­å›¾ç‰‡ä»¥åï¼Œåªæ˜¯å¾—åˆ°äº†fileå¯¹è±¡ï¼Œå¦‚æœæƒ³åœ¨imgä¸­æ˜¾ç¤ºè¯¥å›¾ç‰‡çš„è¯ï¼Œå¹¶ä¸çŸ¥é“srcï¼Œæ‰€ä»¥æƒ³å¾—åˆ°srcè¿˜éœ€è¦é¢å¤–çš„æ“ä½œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">getObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">createObjectURL</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// basic
</span><span class="c1"></span>    <span class="nx">url</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">URL</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// mozilla(firefox)
</span><span class="c1"></span>    <span class="nx">url</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">webkitURL</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// webkit or chrome
</span><span class="c1"></span>    <span class="nx">url</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitURL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="jsæ“ä½œæ ·å¼class">JSæ“ä½œæ ·å¼class</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&#34;c&#34;</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&#34;c&#34;</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&#34;c&#34;</span><span class="p">);</span>    <span class="c1">// false å› ä¸º&#34;c&#34;ä¸Šé¢removeæ‰äº†
</span><span class="c1"></span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">===</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="åŸç”Ÿè·å–çœŸæ˜¯å®½é«˜">åŸç”Ÿè·å–çœŸæ˜¯å®½é«˜</h2>
<p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆç”¨#${divID}ä¼šæŠ¥é”™ï¼Œåªèƒ½ç”¨div[]é€‰æ‹©å™¨äº†ï¼Œid=åé¢è¦ç”¨å•å¼•å·ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">textElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="sb">`div[id=&#39;</span><span class="si">${</span><span class="nx">divID</span><span class="si">}</span><span class="sb">&#39;] .ckeditor`</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">textElement</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">textElement</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="promise-asyncawait-è·å–å›¾ç‰‡åŸå§‹å°ºå¯¸">promise async/await è·å–å›¾ç‰‡åŸå§‹å°ºå¯¸</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="nx">async</span> <span class="nx">funciton</span> <span class="nx">getImageInfo</span><span class="p">(</span><span class="nx">image_res_url</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="p">{</span><span class="nx">width</span>: <span class="kt">number</span><span class="p">,</span> <span class="nx">height</span>: <span class="kt">number</span><span class="p">}</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">image</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
    <span class="nx">image</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">image_res_url</span><span class="p">;</span>
    <span class="kr">const</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="p">{</span><span class="nx">width</span>: <span class="kt">number</span><span class="p">,</span> <span class="nx">height</span>: <span class="kt">number</span><span class="p">}</span><span class="o">&gt;</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">image</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">resolve</span><span class="p">({</span><span class="nx">width</span>: <span class="kt">image.naturalWidth</span><span class="p">,</span> <span class="nx">height</span>: <span class="kt">image.naturalHeight</span><span class="p">});</span>
        <span class="p">};</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">promise</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="jså¤åˆ¶åˆ°å‰ªåˆ‡æ¿chrome-66-æ”¯æŒ">JSå¤åˆ¶åˆ°å‰ªåˆ‡æ¿(chrome 66+ æ”¯æŒ)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">navigator</span><span class="p">.</span><span class="nx">clipboard</span><span class="p">.</span><span class="nx">writeText</span><span class="p">(</span><span class="s1">&#39;888&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Async: Copying to clipboard was successful!&#39;</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Async: Could not copy text: &#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>  
</code></pre></td></tr></table>
</div>
</div><h2 id="å¤„ç†ç²˜è´´äº‹ä»¶paste">å¤„ç†ç²˜è´´äº‹ä»¶(paste)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">xxxElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;paste&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">clipboardData</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clipboardData</span><span class="p">.</span><span class="nx">getData</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">text</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clipboardData</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="s2">&#34;text/plain&#34;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">clipboardData</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">clipboardData</span><span class="p">.</span><span class="nx">getData</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">text</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">clipboardData</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="s2">&#34;Text&#34;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s2">&#34;insertHTML&#34;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">text</span><span class="p">);</span>
<span class="p">});</span>  

</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%88%86%E7%B1%BB/">åˆ†ç±»</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/%E6%98%BE%E7%A4%BA%E5%9C%A8%E5%BA%95%E9%83%A8/">æ˜¾ç¤ºåœ¨åº•éƒ¨</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>ç†µä¸ä»£ç </title>
                <link>https://wss.cool/posts/%E5%BF%83%E5%BE%97/%E7%86%B5%E4%B8%8E%E4%BB%A3%E7%A0%81/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%BF%83%E5%BE%97/%E7%86%B5%E4%B8%8E%E4%BB%A3%E7%A0%81/</guid>
                <pubDate>Wed, 22 Apr 2020 10:29:53 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>çœ‹äº†é˜®ä¸€å³°çš„åšå®¢<a href="http://www.ruanyifeng.com/blog/2017/04/entropy.html">ã€Šç†µï¼šå®‡å®™çš„ç»ˆæè§„åˆ™ã€‹</a>ï¼Œç•¥åšè®°å½•ğŸ“ã€‚</p>
<h2 id="ç†µæ˜¯ä»€ä¹ˆ">ç†µæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç§‘å­¦å®¶ä»¬å‘ç°ï¼Œèƒ½é‡è½¬æ¢æ€»æ˜¯ä¼´éšè¿™æŸè€—ï¼Œä¸”æ— æ³•é¿å…ã€‚æŸè€—æ‰çš„è¿™éƒ¨åˆ†èƒ½é‡å°±å«åšç†µã€‚åæ¥æ€»ç»“æˆæ¥çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹ï¼šèƒ½é‡è½¬æ¢æ€»æ˜¯äº§ç”Ÿç†µã€‚</p>
<blockquote>
<p>æ¯”å¦‚ç”µèƒ½è½¬åŒ–æœºæ¢°èƒ½ä¸èƒ½å®Œå…¨è½¬åŒ–ï¼Œæ¯”å¦‚è®¾è®¡çš„ä»£ç è½¬åŒ–ä¸ºå®é™…çš„ä»£ç æ€»ä¼šäº§ç”Ÿbugã€‚</p>
</blockquote>
<p>è¿™é‡Œè¯´çš„æŸè€—æ˜¯è¯´èƒ½é‡è½¬æ¢æˆæ¥é¢„æœŸå¤–çš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯å‡­ç©ºæ¶ˆå¤±æ¥ã€‚è½¬åŒ–è¶Šå¤šï¼Œæ–°çš„çŠ¶æ€å°±è¶Šå¤šï¼ŒçŠ¶æ€å¤šå°±æ˜¯å¯èƒ½æ€§å¤šï¼Œè¡¨ç¤ºæ··ä¹±ã€‚æ¢ä¸€ç§è¯´æ³•ï¼šèƒ½é‡è½¬æ¢å°±ä¼šè®©ç³»ç»Ÿçš„æ··ä¹±åº¦å¢åŠ ï¼Œç†µå°±æ˜¯ç³»ç»Ÿçš„æ··ä¹±åº¦ã€‚</p>
<p>å¯ä»¥æ€»ç»“å‡ºä¸€ä¸ªé“ç†ã€‚å¦‚æœä¸æ–½åŠ å¤–åŠ›å½±å“ï¼Œäº‹ç‰©æ°¸è¿œå‘ç€æ›´æ··ä¹±çš„çŠ¶æ€å‘å±•ã€‚</p>
<h2 id="ç†µä¸ä»£ç ">ç†µä¸ä»£ç </h2>
<p>å¦‚æœæŠŠç†µå¼•å…¥åˆ°è½¯ä»¶å¼€å‘ä¸­ã€‚ä»éœ€æ±‚è½¬æ¢ä¸ºç¨‹åºè®¾è®¡ï¼Œå†ä»ç¨‹åºè®¾è®¡è½¬æ¢æˆä»£ç ï¼Œè¿™éƒ½æƒ³åˆ°ä¸èƒ½é‡è½¬æ¢ï¼Œå°±ä¼šäº§ç”Ÿç†µï¼Œè¿™é‡Œçš„ç†µå°±æ˜¯bugï¼Œæˆ–è€…å¤æ‚åº¦ï¼Œæˆ–è€…é˜…è¯»éš¾åº¦ã€‚</p>
<p>è½¯ä»¶è¡Œä¸šä¸­å·²ç»æœ‰äº†ä¸€äº›æ‰‹æ®µæ¥æ²»ç†è¿™äº›ç†µã€‚å†™ä»£ç è¦æœ‰è§„èŒƒï¼Œè¦æœ‰reviewæ‰§è¡Œè§„èŒƒã€‚è¦æœ‰æµ‹è¯•æµç¨‹ï¼Œå‘ç°å¹¶æ²»ç†bugã€‚å¦‚æœæ”¾æ¾æ¥å¯¹ç†µçš„è­¦æƒ•ï¼Œç†µä¼šåœ¨ç³»ç»Ÿä¸­è¶Šæ¥è¶Šå¤šï¼Œç³»ç»Ÿè¶Šæ¥è¶Šæ··ä¹±ï¼Œæœ€åä¼šç ´åç³»ç»Ÿã€‚ä¹Ÿå°±æ˜¯ä»£ç è¶Šæ¥è¶Šæ··ä¹±ï¼Œå˜å¾—éš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•ï¼Œæœ€åç³»ç»Ÿæ— æ³•ä½¿ç”¨ã€‚</p>
<p>æ‰€ä»¥ï¼Œç”±äºçƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹ï¼Œå†™ä»£ç æœ‰bugæ˜¯ä¸€ä»¶å¾ˆæ­£å¸¸çš„äº‹ã€‚ä¸ºäº†æ²»ç†ç†µæ¥è®©ç³»ç»Ÿé•¿æ²»ä¹…å®‰ï¼Œé‡‡å–â€œè§„èŒƒã€reviewå’Œæµ‹è¯•â€ç­‰æ²»ç†ç†µçš„å¤–åŠ›ä¹Ÿæ˜¯å¾ˆå¿…è¦çš„ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">è¯»ä¹¦ç¬”è®°</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>è·å–æ»šåŠ¨é«˜åº¦</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/javascript/%E8%8E%B7%E5%8F%96%E6%BB%9A%E5%8A%A8%E9%AB%98%E5%BA%A6/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/javascript/%E8%8E%B7%E5%8F%96%E6%BB%9A%E5%8A%A8%E9%AB%98%E5%BA%A6/</guid>
                <pubDate>Sat, 18 Apr 2020 01:45:53 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="è·å–æ»šåŠ¨é«˜åº¦">è·å–æ»šåŠ¨é«˜åº¦</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">getPageScrollY</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">yScroll</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">yScroll</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Explorer 6 Strict
</span><span class="c1"></span>        <span class="nx">yScroll</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span><span class="c1">// all other Explorers
</span><span class="c1"></span>        <span class="nx">yScroll</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">yScroll</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥window.scrollY</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/javascript/">JavaScript</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>Git:Perission-Denied</title>
                <link>https://wss.cool/posts/%E5%B7%A5%E5%85%B7/git/gitperission-denied/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%B7%A5%E5%85%B7/git/gitperission-denied/</guid>
                <pubDate>Sat, 18 Apr 2020 01:43:23 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="gitperission-denied">git:Perission denied</h2>
<p>åˆšä½¿ç”¨äº†ä¸€ä¸‹vuecliçš„mochaæµ‹è¯•æ’ä»¶ï¼Œç„¶ååˆ‡æ¢åˆ†æ”¯ï¼Œåˆåˆ‡æ¢å›é‚£ä¸ªåˆ†æ”¯ï¼Œå°±æŠ¥äº†è¿™ä¸ªé”™è¯¯ã€‚æŠŠè¿è¡Œvueæµ‹è¯•çš„å‘½ä»¤è¡Œï¼ˆçª—å£ï¼‰å…³æ‰å°±å¯ä»¥äº†ã€‚
![666][image1]</p>
<p>å¤§æ¦‚æ˜¯ç”±äºvuecliçš„è¿›ç¨‹è¿˜åœ¨æ§åˆ¶ç€testsæ–‡ä»¶ï¼Œæˆ‘ä¹‹å‰æ²¡æœ‰å…³é—­å®ƒã€‚ç°åœ¨åˆ‡æ¢åˆ†æ”¯ï¼Œè¦å¯¹è¿™ä¸ªtestsæ–‡ä»¶å¤¹æ“ä½œï¼Œè€Œwindowsä¸å…è®¸2ä¸ªè¿›ç¨‹æ“ä½œä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥åªè¦å…³é—­åŸæ¥çš„é‚£ä¸ªå‘½ä»¤è¡Œçª—å£ä¹Ÿå°±å…³é—­äº†åŸæ¥çš„æ§åˆ¶è¿›ç¨‹ã€‚å†æ“ä½œå°±å¯ä»¥äº†ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/git/">git</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Npmä¸yarn</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/npm%E4%B8%8Eyarn/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/npm%E4%B8%8Eyarn/</guid>
                <pubDate>Sat, 18 Apr 2020 01:31:26 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="yarn">yarn</h2>
<h3 id="æ·˜å®çš„é•œåƒ">æ·˜å®çš„é•œåƒ</h3>
<pre><code>yarn config set registry https://registry.npm.taobao.org --global
yarn config set disturl https://npm.taobao.org/dist --global

// é¢å¤–è®¾ç½®ä¸€äº›å¸¸ç”¨çš„åº“
yarn config set electron_mirror https://npm.taobao.org/mirrors/electron/ -g
yarn config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/ -g
yarn config set phantomjs_cdnurl https://npm.taobao.org/mirrors/phantomjs/ -g
yarn config set chromedriver_cdnurl https://cdn.npm.taobao.org/dist/chromedriver -g
yarn config set operadriver_cdnurl https://cdn.npm.taobao.org/dist/operadriver -g
yarn config set fse_binary_host_mirror https://npm.taobao.org/mirrors/fsevents -g
</code></pre><h2 id="npm">npm</h2>
<pre><code>npm config set registry https://registry.npm.taobao.org
npm config set disturl https://npm.taobao.org/dist

npm config set electron_mirror https://npm.taobao.org/mirrors/electron/
npm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/
npm config set phantomjs_cdnurl https://npm.taobao.org/mirrors/phantomjs/
</code></pre><h3 id="npmè®¾ç½®ä»£ç†">npmè®¾ç½®ä»£ç†</h3>
<pre><code>npm config set proxy http://127.0.0.1:1080
</code></pre>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>åº”è¯¥çŸ¥é“çš„</title>
                <link>https://wss.cool/posts/%E5%BF%83%E5%BE%97/%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%BF%83%E5%BE%97/%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84/</guid>
                <pubDate>Sat, 18 Apr 2020 01:28:32 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<ul>
<li>Bad architecture causes more problems than bad code.</li>
<li>You will spend more time thinking than coding.</li>
<li>The best programmers are always building things.</li>
<li>Thereâ€™s always a better way.</li>
<li>Code reviews by your peers will make all of you better.</li>
<li>Fewer features for better code is always the right answer in the end.</li>
<li>Donâ€™t reinvent the wheel, library code is there to help.</li>
<li>If itâ€™s not tested, it doesnâ€™t work.</li>
<li>Code thatâ€™s hard to understand is hard to maintain.</li>
<li>Code thatâ€™s hard to maintain is next to useless.</li>
<li>Always know how your business makes money, that determines who gets paid what.</li>
<li>If you want to feel important as a software developer, work at a tech company.</li>
</ul>
<ol>
<li>æ‚¨å°†èŠ±è´¹æ›´å¤šçš„æ—¶é—´æ€è€ƒè€Œä¸æ˜¯ç¼–ç ã€‚</li>
<li>ä¸è‰¯çš„ä½“ç³»ç»“æ„æ¯”ä¸è‰¯çš„ä»£ç å¼•èµ·æ›´å¤šçš„é—®é¢˜ã€‚</li>
<li>æœ€å¥½çš„ç¨‹åºå‘˜æ€»æ˜¯åœ¨æ„å»ºä¸œè¥¿ã€‚</li>
<li>æ€»ä¼šæœ‰æ›´å¥½çš„æ–¹æ³•ã€‚</li>
<li>åŒè¡Œçš„ä»£ç å®¡æŸ¥å°†ä½¿æ‰€æœ‰äººå˜å¾—æ›´å¥½ã€‚</li>
<li>æœ€ç»ˆï¼Œæ­£ç¡®çš„ç­”æ¡ˆå°±æ˜¯æ›´å°‘çš„åŠŸèƒ½æ¥è·å¾—æ›´å¥½çš„ä»£ç ã€‚</li>
<li>å¦‚æœæœªæµ‹è¯•ï¼Œå®ƒå°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚</li>
<li>ä¸è¦é‡æ–°å‘æ˜è½®å­ï¼Œåº“ä»£ç å¯ä»¥ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚</li>
<li>éš¾ä»¥ç†è§£çš„ä»£ç éš¾ä»¥ç»´æŠ¤ã€‚</li>
<li>éš¾ä»¥ç»´æŠ¤çš„ä»£ç å‡ ä¹æ˜¯æ— ç”¨çš„ã€‚</li>
<li>å§‹ç»ˆçŸ¥é“æ‚¨çš„ä¼ä¸šæ˜¯å¦‚ä½•èµšé’±çš„ï¼Œè¿™å†³å®šäº†è°èƒ½å¾—åˆ°é…¬åŠ³ã€‚</li>
<li>å¦‚æœæ‚¨æƒ³ä»¥è½¯ä»¶å¼€å‘äººå‘˜çš„èº«ä»½æ„Ÿåˆ°é‡è¦ï¼Œè¯·åœ¨æŠ€æœ¯å…¬å¸å·¥ä½œã€‚</li>
</ol>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E8%A1%8C%E4%B8%9A%E6%88%90%E9%95%BF/">è¡Œä¸šæˆé•¿</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Nginxå¯¼è‡´çš„bug</title>
                <link>https://wss.cool/posts/%E5%90%8E%E7%AB%AF/spring/nginx%E5%AF%BC%E8%87%B4%E7%9A%84bug/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%90%8E%E7%AB%AF/spring/nginx%E5%AF%BC%E8%87%B4%E7%9A%84bug/</guid>
                <pubDate>Sat, 18 Apr 2020 01:24:25 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°äº†bug">ä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°äº†bugï¼Ÿ</h2>
<p>åç«¯ä»£ç ä½¿ç”¨ spring boot å®ç°äº†ä¸€ä¸ª github oauth2 è®¤è¯ç™»å½•çš„ client ã€‚å°†ä»£ç é™„å±åˆ°æœåŠ¡å™¨ä»¥åï¼Œè¯·æ±‚ç»è¿‡ nginx åå‘ä»£ç†ï¼Œjavaç¨‹åºæŠ¥é”™ã€‚</p>
<h2 id="è¡¨ç°">è¡¨ç°</h2>
<p>æŠ¥é”™</p>
<pre><code>Authentication request failed: org.springframework.security.oauth2.core.OAuth2AuthenticationException: [invalid_redirect_uri_parameter]
</code></pre><h2 id="åŸå› ">åŸå› </h2>
<p>æ˜¯nginxçš„å¯¼è‡´çš„ï¼Œå¯èƒ½æ˜¯ nginx è½¬å‘è¯·æ±‚çš„æ—¶å€™ä¸ä¼šå¸¦ç€3ä¸ªè‡ªå®šä¹‰header</p>
<h2 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h2>
<p>ä¿®æ”¹ nginx é…ç½®å’Œ spring boot çš„ tomcat é…ç½®ï¼Œå¤„ç†3ä¸ª header ã€‚</p>
<p>nginxé…ç½®</p>
<pre><code>proxy_set_header HOST $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
</code></pre><p>application.yml</p>
<pre><code>server:
  tomcat:
    remote-ip-header: &quot;X-Forwarded-For&quot;
    protocol-header: &quot;X-Forwarded-Proto&quot;
    protocol-header-https-value: &quot;https&quot;
</code></pre>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/spring/">spring</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/bug/">bug</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>JavaScript</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/javascript/javascript/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/javascript/javascript/</guid>
                <pubDate>Sat, 04 Apr 2020 02:13:49 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="é¿å…é«˜é¢‘ç‡è°ƒç”¨">é¿å…é«˜é¢‘ç‡è°ƒç”¨</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">throttle</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">method</span><span class="p">.</span><span class="nx">tId</span><span class="p">)</span> <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">method</span><span class="p">.</span><span class="nx">tId</span><span class="p">);</span>
  <span class="nx">method</span><span class="p">.</span><span class="nx">tId</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">method</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
  <span class="p">},</span> <span class="mi">200</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="es6æ–°è¯­æ³•--æ‰©å±•è¿ç®—ç¬¦ä¸‰ä¸ªç‚¹">ES6æ–°è¯­æ³•--æ‰©å±•è¿ç®—ç¬¦ï¼ˆä¸‰ä¸ªç‚¹ï¼‰</h2>
<h3 id="ç¬¬äºŒä¸ªå‚æ•°ä»¥åŠä¹‹åçš„ä»»æ„å¤šä¸ªå‚æ•°éƒ½ä¼šè¢«æ”¾åˆ°valuesæ•°ç»„ä¸­">ç¬¬äºŒä¸ªå‚æ•°ä»¥åŠä¹‹åçš„ä»»æ„å¤šä¸ªå‚æ•°éƒ½ä¼šè¢«æ”¾åˆ°valuesæ•°ç»„ä¸­</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">a</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="p">...</span><span class="nx">values</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="nx">values</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">a</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">],</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>

<span class="c1">// [&#34;a&#34;, &#34;b&#34;]
</span><span class="c1">// [1, 2, 3]
</span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆå¹¶æ•°ç»„">åˆå¹¶æ•°ç»„</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ES5 çš„åˆå¹¶æ•°ç»„
</span><span class="c1"></span><span class="nx">arr1</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">arr2</span><span class="p">,</span> <span class="nx">arr3</span><span class="p">);</span>

<span class="c1">// ES6 çš„åˆå¹¶æ•°ç»„
</span><span class="c1"></span><span class="p">[...</span><span class="nx">arr1</span><span class="p">,</span> <span class="p">...</span><span class="nx">arr2</span><span class="p">,</span> <span class="p">...</span><span class="nx">arr3</span><span class="p">]</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="ä¸è§£æ„èµ‹å€¼ç»“åˆ">ä¸è§£æ„èµ‹å€¼ç»“åˆ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">111</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">333</span><span class="p">,</span><span class="mi">444</span><span class="p">]</span>

<span class="c1">// ES5
</span><span class="c1"></span><span class="nx">a</span> <span class="o">=</span> <span class="nx">list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">rest</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">//a 111
</span><span class="c1">//b [111,222,333,444]
</span><span class="c1"></span>
<span class="c1">// ES6
</span><span class="c1"></span><span class="p">[</span><span class="nx">a</span><span class="p">,</span> <span class="p">...</span><span class="nx">rest</span><span class="p">]</span> <span class="o">=</span> <span class="nx">list</span>
<span class="c1">//a 111
</span><span class="c1">//b [111,222,333,444]
</span></code></pre></td></tr></table>
</div>
</div><h2 id="jsæ­£åˆ™">jsæ­£åˆ™</h2>
<p>åˆ¶è¡¨ç¬¦tab  \t<br>
æ¢è¡Œç¬¦  \r<br>
æ±‰å­—  \S<br>
ä»»æ„ .<br>
å°å†™å­—æ¯ [a-z]</p>
<h2 id="æ•°ç»„æ’åº">æ•°ç»„æ’åº</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="nx">numbers</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="æ•°ç»„çš„everyæ–¹æ³•">æ•°ç»„çš„everyæ–¹æ³•</h2>
<p>everyæ–¹æ³•å¯ä»¥ä¸­æ–­å¾ªç¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">contentList</span><span class="p">.</span><span class="nx">every</span><span class="p">((</span><span class="nx">content</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">content</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">contentList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="äº‹ä»¶">äº‹ä»¶</h2>
<pre><code>// å–æ¶ˆé»˜è®¤è¡Œä¸ºï¼š
e.preventDefault()
// åœæ­¢å†’æ³¡ï¼š
e.stopPropagation();  
</code></pre><h2 id="å°†promiseæ”¹è£…æˆawait">å°†promiseæ”¹è£…æˆawait</h2>
<p>å°†ä¸€ä¸ªelement UIåº“çš„confirmæ”¹è£…æˆawaitï¼šè¿™ä¸ªconfirmæ–¹æ³•åŸæ¥è¿”å›çš„æ˜¯promiseï¼Œresolveåœ¨tryä¸­returnï¼Œrejectåœ¨catchä¸­returnã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">public</span> <span class="nx">async</span> <span class="nx">confirm_async</span><span class="p">(</span><span class="nx">message</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">title</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">vue</span><span class="p">.</span><span class="nx">$confirm</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">title</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è°ƒç”¨confirm_asyncæ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">isConfirm</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">ed_showConfirm_async</span><span class="p">(</span><span class="s1">&#39;xx&#39;</span><span class="p">,</span><span class="s1">&#39;xx&#39;</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="nx">isConfirm</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸¤ä¸ªè¯­å¥æ‰€åœ¨æ–¹æ³•æˆ–å‡½æ•°ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªasyncçš„å‡½æ•°æˆ–æ–¹æ³•ã€‚è¿™æ ·å°±ä¸éœ€è¦æŠŠåç»­çš„æ“ä½œéƒ½å†™åœ¨ä¸€ä¸ªthenæ–¹æ³•ä¸­äº†ã€‚</p>
<h2 id="array-reduceæ•°ç»„çš„reduceæ–¹æ³•">Array reduceï¼Œæ•°ç»„çš„reduceæ–¹æ³•</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">memo</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">memo</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">{});</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ä¸¥æ ¼æ¨¡å¼">ä¸¥æ ¼æ¨¡å¼</h2>
<pre><code>&quot;use strict&quot;;
</code></pre><ol>
<li>ç¦æ­¢thiså…³é”®å­—æŒ‡å‘å…¨å±€å¯¹è±¡</li>
</ol>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/javascript/">JavaScript</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>å¼€å¹³æ–¹</title>
                <link>https://wss.cool/square-root-dichotomy-and-newton-iteration.html</link>
                <guid isPermaLink="true">https://wss.cool/square-root-dichotomy-and-newton-iteration.html</guid>
                <pubDate>Fri, 03 Apr 2020 11:36:01 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>è®¡ç®—å¼€å¹³æ–¹å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥è®¡ç®—ã€‚
å¦‚ï¼šæ±‚æ ¹å·10</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œç²¾åº¦0.0001
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">äºŒåˆ†å¼€æ ¹å·</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span><span class="nx">count</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">mid</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="p">(</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">sq</span> <span class="o">=</span> <span class="nx">mid</span> <span class="o">*</span> <span class="nx">mid</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">sq</span> <span class="o">-</span> <span class="nx">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">mid</span><span class="p">,</span><span class="nx">count</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">sq</span> <span class="o">&lt;</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">start</span> <span class="o">=</span> <span class="nx">mid</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">sq</span> <span class="o">&gt;</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">end</span> <span class="o">=</span> <span class="nx">mid</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">mid</span><span class="p">,</span><span class="nx">count</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">äºŒåˆ†å¼€æ ¹å·</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="c1">// 3.1622695922851562  18æ¬¡å¾ªç¯
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ç”¨ç‰›é¡¿è¿­ä»£ï¼Œç²¾åº¦0.0001
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">ç‰›é¡¿å¼€æ ¹å·</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// n_ = (n+a/n)/2;
</span><span class="c1"></span>  <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">n_</span> <span class="o">=</span> <span class="p">(</span><span class="nx">n</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">/</span> <span class="nx">n</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="nx">n_</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">n</span> <span class="o">=</span> <span class="nx">n_</span><span class="p">;</span>
    <span class="nx">n_</span> <span class="o">=</span> <span class="p">(</span><span class="nx">n</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">/</span> <span class="nx">n</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">n_</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">ç‰›é¡¿å¼€æ ¹å·</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="c1">// 3.162277660168379   6æ¬¡å¾ªç¯
</span></code></pre></td></tr></table>
</div>
</div><h1 id="ç‰›é¡¿è¿­ä»£æ³•é€‚ç”¨æ¡ä»¶">ç‰›é¡¿è¿­ä»£æ³•é€‚ç”¨æ¡ä»¶</h1>
<p>æ±‚å‡½æ•°f(x)=0çš„è§£Î±ã€‚<br>
å¿…é¡»æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ‰èƒ½ç”¨ç‰›é¡¿è¿­ä»£æ³•æ±‚æ–¹ç¨‹çš„è¿‘ä¼¼è§£ã€‚<br>
å‡½æ•°çš„å¯¼æ•°ä¸ä¸º0ï¼›xå±äºåŒºé—´[Î±âˆ’r, Î±+r]ï¼›x0ä¸ºÎ±çš„è¿‘ä¼¼å€¼ï¼Œå³r&gt;=|a-x0|;<br>
å‡½æ•°åœ¨[Î±âˆ’r, Î±+r]å†…äºŒé˜¶å¯¼æ•°è¿ç»­ï¼›<br>
x0è¶³å¤Ÿæ¥è¿‘æ ¹ Î±ã€‚</p>
<p><a href="https://zh.wikipedia.org/wiki/%E7%89%9B%E9%A1%BF%E6%B3%95">ç‰›é¡¿æ³•çš„ç»´åŸºç™¾ç§‘</a></p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/">çŸ¥è¯†ç‚¹</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>MySQL</title>
                <link>https://wss.cool/mysql.html</link>
                <guid isPermaLink="true">https://wss.cool/mysql.html</guid>
                <pubDate>Thu, 02 Apr 2020 22:24:03 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="å®‰è£…mysql">å®‰è£…MySQL</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">sudo apt-get â€“y install mysql-server mysql-client
sudo apt-get install mysql-server mysql-client
</code></pre></td></tr></table>
</div>
</div><p>æœåŠ¡å™¨ç¯å¢ƒä¸ºè…¾è®¯äº‘Ubuntu 16.04.1 LTSï¼Œä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤å®‰è£…mysqlæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ã€‚å®‰è£…å®Œæˆåä¼šå‡ºç°ä¸€ä¸ªè®¾ç½®å¯†ç çš„ç•Œé¢ï¼Œè¾“å…¥ä¸¤æ¬¡å¯†ç å³å®Œæˆäº†å®‰è£…ï¼Œç„¶åä½¿ç”¨ <code>netstat -anp</code> å‘½ä»¤ï¼Œä¼šå‘ç° <code>3306</code> ç«¯å£æ­£åœ¨è¢«ç›‘å¬ï¼Œå³è¯´æ˜å®‰è£…æˆåŠŸä¸”å·²è¿è¡Œã€‚</p>
<h2 id="æ£€æŸ¥mysqlæ˜¯å¦å¯åŠ¨">æ£€æŸ¥MySQLæ˜¯å¦å¯åŠ¨</h2>
<p><code>ps -ef | grep mysqld</code>
ä¼šçœ‹åˆ°ç±»ä¼¼ç»“æœè¯´æ˜æ­£åœ¨è¿è¡Œï¼š</p>
<pre><code>mysql      519     1  0 17:44 ?        00:00:00 /usr/sbin/mysqld
</code></pre><h2 id="å¼€å…³mysql">å¼€å…³MySQL</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># å¼€å¯</span>
sudo /etc/init.d/mysql start
<span class="c1"># å…³é—­å‘½ä»¤:</span>
sudo /etc/init.d/mysql stop
<span class="c1"># é‡å¯</span>
sudo /etc/init.d/mysql restart
</code></pre></td></tr></table>
</div>
</div><h2 id="å‘½ä»¤è¡Œä¸­è¿æ¥æ•°æ®åº“">å‘½ä»¤è¡Œä¸­è¿æ¥æ•°æ®åº“ï¼š</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">-</span><span class="n">p</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="é€€å‡ºæ•°æ®åº“">é€€å‡ºæ•°æ®åº“ï¼š</h2>
<pre><code>exit
</code></pre><h2 id="å»ºåº“åˆ åº“">å»ºåº“/åˆ åº“</h2>
<p>CREATE DATABASE <code>yys</code> DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
DROP DATABASE <code>yys</code>;</p>
<h2 id="å»ºè¡¨">å»ºè¡¨</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">yuhun</span><span class="o">`</span><span class="p">(</span>
<span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">INT</span><span class="p">,</span>
<span class="o">`</span><span class="k">position</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">400</span><span class="p">),</span>
<span class="o">`</span><span class="k">type</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">400</span><span class="p">),</span>
<span class="o">`</span><span class="n">v</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">&#39;è¡¨æ³¨é‡Š&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">bs</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">&#39;çˆ†ä¼¤&#39;</span><span class="p">,</span>
<span class="o">`</span><span class="n">bj</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">&#39;è¡¨æ³¨é‡Š&#39;</span><span class="p">,</span>
 <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span> <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="p">)</span>
<span class="p">)</span><span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å¢åˆ æ”¹æŸ¥">å¢åˆ æ”¹æŸ¥</h2>
<h3 id="where">where</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Customers</span>
<span class="k">WHERE</span> <span class="n">CustomerID</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>Equal</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>Not equal. Note: In some versions of SQL this operator may be written as !=</td>
</tr>
<tr>
<td>&gt;</td>
<td>Greater than</td>
</tr>
<tr>
<td>&lt;</td>
<td>Less than</td>
</tr>
<tr>
<td>&gt;=</td>
<td>Greater than or equal</td>
</tr>
<tr>
<td>&lt;=</td>
<td>Less than or equal</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>Between an inclusive range</td>
</tr>
<tr>
<td>LIKE</td>
<td>Search for a pattern</td>
</tr>
<tr>
<td>IN</td>
<td>To specify multiple possible values for a column</td>
</tr>
</tbody>
</table>
<h3 id="update">update</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">UPDATE</span> <span class="k">table_name</span>
<span class="k">SET</span> <span class="n">column1</span> <span class="o">=</span> <span class="n">value1</span><span class="p">,</span> <span class="n">column2</span> <span class="o">=</span> <span class="n">value2</span><span class="p">,</span> <span class="p">...</span>
<span class="k">WHERE</span> <span class="n">condition</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="delete">delete</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">DELETE</span> <span class="k">FROM</span> <span class="k">table_name</span>
<span class="k">WHERE</span> <span class="n">condition</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="insert">insert</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table_name</span> <span class="p">(</span><span class="n">column1</span><span class="p">,</span> <span class="n">column2</span><span class="p">,</span> <span class="n">column3</span><span class="p">,</span> <span class="p">...)</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">,</span> <span class="n">value3</span><span class="p">,</span> <span class="p">...);</span>
</code></pre></td></tr></table>
</div>
</div><p>use demo
select zhuanye from runoob_tbl where id=1;
insert into pe (id,name) values (1,'å‰');</p>
<h2 id="å¯¼å…¥">å¯¼å…¥</h2>
<p>å…ˆå°†æ•°æ®å¤„ç†æˆä¸€å®šæ ¼å¼ï¼Œæ¯”å¦‚å°†excelä¸­çš„æ•°æ®å¤åˆ¶åˆ°æ–‡æ¡£ä¸­ï¼Œè¿™äº›æ•°æ®æ¯ä¸€è¡Œçš„å­—æ®µé—´æ˜¯è¢«åˆ¶è¡¨ç¬¦\tåˆ†éš”ï¼Œè¡Œä¸è¡ŒæŒ‡é—´è¢«æ¢è¡Œç¬¦\r\nåˆ†éš”ã€‚<br>
å¦‚æœexcelä¸­çš„æ•°æ®ä¸æ˜¯å¾ˆå¤æ‚ï¼Œæ²¡æœ‰å¤æ‚çš„æ–‡æœ¬ï¼Œæ²¡æœ‰æ¢è¡Œä¹‹ç±»çš„å­—ç¬¦ï¼Œå°±å¯ä»¥ç›´æ¥ä¿å­˜ï¼Œç„¶åå°†ä¿å­˜çš„æ–‡ä»¶å¯¼å…¥æ•°æ®åº“ã€‚å¦‚æœæ–‡æœ¬æ¯”è¾ƒå¤æ‚ï¼Œæ¯”å¦‚æ‹›å…¬åŠ¡å‘˜çš„å²—ä½çš„excelçš„æ–‡æœ¬ä¸­å°±æœ‰å¾ˆå¤šæ¢è¡Œç¬¦ï¼Œè¿™æ—¶éœ€è¦è‡ªå·±å¤„ç†ä¸€ä¸‹ï¼Œæ˜¯æ•´ä¸ªæ–‡æœ¬ä»¥ç‰¹å®šçš„å­—ç¬¦ä»£æ›¿\t\r\næ¥åˆ†éš”æ–‡æœ¬ï¼Œå› ä¸ºå¯¼å…¥æ•°æ®çš„æ—¶å€™ï¼Œmysqlä¼šè€ƒ\t\nä¹‹ç±»çš„å­—ç¬¦æ¥åˆ’åˆ†æ•°æ®ã€‚æ¯”å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">load</span> <span class="k">data</span> <span class="k">local</span> <span class="n">infile</span> <span class="s2">&#34;~/yuhun.txt&#34;</span> <span class="k">into</span> <span class="k">table</span> <span class="n">yuhun</span>  <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">UTF8</span> <span class="n">fields</span> <span class="n">terminated</span> <span class="k">by</span> <span class="s2">&#34;\t&#34;</span> <span class="n">lines</span> <span class="n">terminated</span> <span class="k">by</span> <span class="s2">&#34;\n&#34;</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘å°†çœŸæ­£æ¢è¡Œçš„åœ°æ–¹æ›¿æ¢æˆäº†&amp;ç¬¦å·ã€‚<br>
å‘æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶
scp /Users/wangshushuo/Desktop/yuhun.txt <a href="mailto:ubuntu@58.87.109.73">ubuntu@58.87.109.73</a>:~/yuhun.txt</p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html">å¯¼å…¥å®˜æ–¹è¯­æ³•å¦‚ä¸‹</a>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">LOAD</span> <span class="k">DATA</span> <span class="p">[</span><span class="n">LOW_PRIORITY</span> <span class="o">|</span> <span class="n">CONCURRENT</span><span class="p">]</span> <span class="p">[</span><span class="k">LOCAL</span><span class="p">]</span> <span class="n">INFILE</span> <span class="s1">&#39;file_name&#39;</span>
    <span class="p">[</span><span class="k">REPLACE</span> <span class="o">|</span> <span class="k">IGNORE</span><span class="p">]</span>
    <span class="k">INTO</span> <span class="k">TABLE</span> <span class="n">tbl_name</span>
    <span class="p">[</span><span class="n">PARTITION</span> <span class="p">(</span><span class="n">partition_name</span> <span class="p">[,</span> <span class="n">partition_name</span><span class="p">]</span> <span class="p">...)]</span>
    <span class="p">[</span><span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">charset_name</span><span class="p">]</span>
    <span class="p">[</span><span class="err">{</span><span class="n">FIELDS</span> <span class="o">|</span> <span class="n">COLUMNS</span><span class="err">}</span>
        <span class="p">[</span><span class="n">TERMINATED</span> <span class="k">BY</span> <span class="s1">&#39;string&#39;</span><span class="p">]</span>
        <span class="p">[[</span><span class="n">OPTIONALLY</span><span class="p">]</span> <span class="n">ENCLOSED</span> <span class="k">BY</span> <span class="s1">&#39;char&#39;</span><span class="p">]</span>
        <span class="p">[</span><span class="n">ESCAPED</span> <span class="k">BY</span> <span class="s1">&#39;char&#39;</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="p">[</span><span class="n">LINES</span>
        <span class="p">[</span><span class="n">STARTING</span> <span class="k">BY</span> <span class="s1">&#39;string&#39;</span><span class="p">]</span>
        <span class="p">[</span><span class="n">TERMINATED</span> <span class="k">BY</span> <span class="s1">&#39;string&#39;</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="p">[</span><span class="k">IGNORE</span> <span class="nb">number</span> <span class="err">{</span><span class="n">LINES</span> <span class="o">|</span> <span class="k">ROWS</span><span class="err">}</span><span class="p">]</span>
    <span class="p">[(</span><span class="n">col_name_or_user_var</span>
        <span class="p">[,</span> <span class="n">col_name_or_user_var</span><span class="p">]</span> <span class="p">...)]</span>
    <span class="p">[</span><span class="k">SET</span> <span class="n">col_name</span><span class="o">=</span><span class="err">{</span><span class="n">expr</span> <span class="o">|</span> <span class="k">DEFAULT</span><span class="err">}</span><span class="p">,</span>
        <span class="p">[,</span> <span class="n">col_name</span><span class="o">=</span><span class="err">{</span><span class="n">expr</span> <span class="o">|</span> <span class="k">DEFAULT</span><span class="err">}</span><span class="p">]</span> <span class="p">...]</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸€ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">LOAD</span> <span class="k">DATA</span> <span class="n">INFILE</span> <span class="s1">&#39;file&#39;</span>
<span class="k">IGNORE</span> <span class="k">INTO</span> <span class="k">TABLE</span> <span class="k">table</span>
<span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">UTF8</span>
<span class="n">FIELDS</span> <span class="n">TERMINATED</span> <span class="k">BY</span> <span class="s1">&#39;;&#39;</span>
<span class="n">OPTIONALLY</span> <span class="n">ENCLOSED</span> <span class="k">BY</span> <span class="s1">&#39;&#34;&#39;</span>
<span class="n">LINES</span> <span class="n">TERMINATED</span> <span class="k">BY</span> <span class="s1">&#39;\n&#39;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="è¿œç¨‹è¿æ¥æ–°å»ºä¸€ä¸ªå¸å·å¸å·åä¸èƒ½ä¸ºroot">è¿œç¨‹è¿æ¥æ–°å»ºä¸€ä¸ªå¸å·ï¼ˆå¸å·åä¸èƒ½ä¸ºrootï¼‰</h2>
<p>å¦‚ï¼šæ·»åŠ ä¸€ä¸ªç”¨æˆ·åä¸ºdb_userï¼Œå¯†ç ä¸ºdb_passï¼Œæˆæƒä¸º% ï¼ˆ%è¡¨ç¤ºæ‰€æœ‰å¤–å›´IPèƒ½è¿æ¥ï¼‰å¯¹db_nameæ•°æ®åº“æ‰€æœ‰æƒé™ï¼Œå‘½ä»¤å¦‚ä¸‹
/# mysql -uroot -p
MySQL [(none)]&gt; grant all privileges on db_name.* to db_user@â€™%â€™ identified by â€˜db_passâ€™; #æˆæƒè¯­å¥ï¼Œç‰¹åˆ«æ³¨æ„æœ‰åˆ†å·
MySQL [(none)]&gt; flush privileges;
MySQL [(none)]&gt; exit; #é€€å‡ºæ•°æ®åº“æ§åˆ¶å°ï¼Œç‰¹åˆ«æ³¨æ„æœ‰åˆ†å·</p>
<h2 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</h2>
<h3 id="varchar">varchar</h3>
<p><code>varchar(666)</code>ï¼Œå…¶ä¸­å‚æ•°<code>666</code>ä¸ºå­—èŠ‚æ•°ã€‚</p>
<p><code>varchar</code>æ˜¯å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå¤§å°ä¸º<code>0-65535</code>å­—èŠ‚ã€‚å¯¹åº”çš„å­—ç¬¦ä¸²é•¿åº¦ä¼šå—åˆ°å­—ç¬¦é›†å½±å“ï¼Œè‹¥ä½¿ç”¨<code>utf-8</code>å­˜å‚¨æ±‰å­—ï¼Œä¸€ä¸ªæ±‰å­—å­—ç¬¦å¯¹åº”<code>3</code>ä¸ªå­—èŠ‚ã€‚</p>
<p><code>varchar</code>è¿˜éœ€è¦å­˜å‚¨æ•°æ®é•¿åº¦ï¼Œå½“å°äºç­‰äº<code>255</code>ä¸ªå­—èŠ‚æ—¶ï¼Œä½¿ç”¨<code>1</code>ä¸ªå­—èŠ‚å­˜å‚¨é•¿åº¦ã€‚å¤§äº<code>255</code>é•¿åº¦æ—¶ï¼Œä½¿ç”¨<code>2</code>ä¸ªå­—èŠ‚å­˜å‚¨é•¿åº¦ã€‚</p>
<p>æ¯”å¦‚<code>varchar(666)</code>ï¼Œä½¿ç”¨<code>2</code>ä¸ªå­—èŠ‚å­˜å‚¨é•¿åº¦ï¼Œå‰©ä¸‹çš„<code>664</code>ä¸ªå­—èŠ‚å­˜å‚¨å®é™…å†…å®¹ï¼Œ</p>
<h3 id="text">text</h3>
<p>TEXTæ•°æ®ä¸å­˜å‚¨åœ¨æ•°æ®åº“æœåŠ¡å™¨çš„å†…å­˜ä¸­ï¼Œå› æ­¤ï¼Œæ¯å½“æŸ¥è¯¢TEXTæ•°æ®æ—¶ï¼ŒMySQLéƒ½å¿…é¡»ä»ç£ç›˜è¯»å–å®ƒï¼Œè¿™ä¸CHARå’ŒVARCHARç›¸æ¯”è¦æ…¢å¾—å¤šã€‚
<img src="/images/mysql-1.png" alt="mysqlæ–‡æ¡£"></p>
<blockquote>
<p>mysqlçš„æ€§èƒ½åªæœ‰åœ¨ä¸Šåƒä¸‡æ¡çºªå¾‹çš„æ—¶å€™æ‰éœ€è¦è€ƒè™‘ã€‚
â€”â€”æ½˜è€å¸ˆ</p>
</blockquote>
<h3 id="datetime">DATETIME</h3>
<p>å°†jsçš„Dateå¯¹è±¡ä¼ è¿›å»ï¼Œä¼šç›´æ¥ä¿å­˜ï¼ŒæŸ¥å‡ºæ¥è¿”å›åˆ°å‰ç«¯é¡µé¢æ—¶ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨<code>new Date(props.time)</code>è½¬æ¢æˆDateå¯¹è±¡ã€‚</p>
<h3 id="æ²¡æœ‰å¸ƒå°”å€¼ä½¿ç”¨tinyint">æ²¡æœ‰å¸ƒå°”å€¼ï¼Œä½¿ç”¨tinyint</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">ed_class_price_user</span><span class="o">`</span><span class="p">(</span>
   <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">INT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
   <span class="o">`</span><span class="n">user_name</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">unique</span><span class="p">,</span>
   <span class="o">`</span><span class="n">password</span><span class="o">`</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
   <span class="o">`</span><span class="n">disable</span><span class="o">`</span> <span class="n">TINYINT</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
   <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span> <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="p">)</span>
<span class="p">)</span><span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="è¡¨ç»“æ„">è¡¨ç»“æ„</h2>
<h3 id="ä¿®æ”¹è¡¨ç»“æ„">ä¿®æ”¹è¡¨ç»“æ„</h3>
<ol>
<li>æŸ¥çœ‹åˆ—ï¼š<code>desc è¡¨å;</code></li>
<li>ä¿®æ”¹è¡¨åï¼š<code>alter table t_book rename to bbb;</code></li>
<li>æ·»åŠ åˆ—ï¼š<code>alter table è¡¨å add column åˆ—å varchar(30);</code></li>
<li>åˆ é™¤åˆ—ï¼š<code>alter table è¡¨å drop column åˆ—å;</code></li>
<li>ä¿®æ”¹åˆ—åMySQLï¼š <code>alter table bbb change nnnnn hh int;</code></li>
<li>ä¿®æ”¹åˆ—åSQLServerï¼š<code>exec sp_rename't_student.name','nn','column';</code></li>
<li>ä¿®æ”¹åˆ—åOracleï¼š<code>lter table bbb rename column nnnnn to hh int;</code></li>
<li>ä¿®æ”¹åˆ—å±æ€§ï¼š<code>alter table t_book modify name varchar(22);</code></li>
</ol>
<h3 id="å”¯ä¸€æ€§çº¦æŸ">å”¯ä¸€æ€§çº¦æŸ</h3>
<h4 id="å»ºè¡¨æ—¶åŠ ä¸Šå”¯ä¸€æ€§çº¦æŸ">å»ºè¡¨æ—¶åŠ ä¸Šå”¯ä¸€æ€§çº¦æŸï¼š</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">t_user</span><span class="o">`</span> <span class="p">(</span>
Â  Â  <span class="o">`</span><span class="n">Id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>Â 
Â  Â  <span class="o">`</span><span class="n">username</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">unique</span><span class="p">,</span>Â 
Â  Â  <span class="o">`</span><span class="n">password</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>Â 
Â  Â  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="o">`</span><span class="n">Id</span><span class="o">`</span><span class="p">)</span>Â 
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">1018</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">gbk</span><span class="p">;</span>Â 
</code></pre></td></tr></table>
</div>
</div><h4 id="ç»™å·²ç»å»ºå¥½çš„è¡¨åŠ ä¸Šå”¯ä¸€æ€§çº¦æŸ">ç»™å·²ç»å»ºå¥½çš„è¡¨åŠ ä¸Šå”¯ä¸€æ€§çº¦æŸï¼š</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">t_user</span><span class="o">`</span> <span class="k">ADD</span> <span class="k">unique</span><span class="p">(</span><span class="o">`</span><span class="n">username</span><span class="o">`</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">create</span> <span class="k">unique</span> <span class="k">index</span> <span class="n">UserNameIndex</span> <span class="k">on</span> <span class="s1">&#39;t_user&#39;</span> <span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ç´¢å¼•">ç´¢å¼•</h3>
<h4 id="mysqlç´¢å¼•ç±»å‹">mysqlç´¢å¼•ç±»å‹</h4>
<ul>
<li>primaryï¼šå”¯ä¸€ç´¢å¼•ï¼Œä¸å…è®¸ä¸ºnullã€‚</li>
<li>keyï¼šæ™®é€šéå”¯ä¸€ç´¢å¼•ã€‚</li>
<li>uniqueï¼šè¡¨ç¤ºå”¯ä¸€çš„ï¼Œä¸å…è®¸é‡å¤çš„ç´¢å¼•ï¼Œå¯ä»¥ä¸ºnullã€‚</li>
<li>fulltext: è¡¨ç¤ºå…¨æ–‡æœç´¢çš„ç´¢å¼•ã€‚ FULLTEXTç”¨äºæœç´¢å¾ˆé•¿ä¸€ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæ•ˆæœæœ€å¥½ã€‚ç”¨åœ¨æ¯”è¾ƒçŸ­çš„æ–‡æœ¬ï¼Œå¦‚æœå°±ä¸€ä¸¤è¡Œå­—çš„ï¼Œæ™®é€šçš„INDEX ä¹Ÿå¯ä»¥ã€‚</li>
<li>spatialï¼šç©ºé—´ç´¢å¼•ã€‚</li>
</ul>
<h2 id="è¡¨è¿æ¥">è¡¨è¿æ¥</h2>
<p>ä½¿ç”¨äº†è¿æ¥è¯­å¥ä»¥åï¼Œè¿™ä¸¤å¼ è¡¨å°±è¢«æ‹¼æˆäº†ä¸€å¼ è¡¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">A</span>  
<span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">B</span> <span class="k">ON</span> <span class="n">A</span><span class="p">.</span><span class="n">book_id</span><span class="o">=</span><span class="n">B</span><span class="p">.</span><span class="n">book_id</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>å››ç§è¿æ¥ä¼šåƒä¸‹å›¾ä¸€æ ·æ‹¼è£…2ä¸ªè¡¨ï¼Œç©ºç™½çš„åœ°æ–¹ä¼šè¢«å¡«å……null</p>
<p><img src="/images/mysql-1.png" alt="è¡¨è¿æ¥1"></p>
<p>ç„¶åwhereç­‰è¯­å¥å°±å¯ä»¥åƒæ“ä½œä¸€å¼ è¡¨ä¸€æ ·äº†ã€‚</p>
<h2 id="æ•°æ®">æ•°æ®</h2>
<h3 id="crud">CRUD</h3>
<h4 id="create">create</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tasks</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span><span class="p">,</span><span class="n">description</span><span class="p">)</span>
<span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Learn MySQL INSERT&#39;</span><span class="p">,</span><span class="s1">&#39;2017-07-21&#39;</span><span class="p">,</span><span class="s1">&#39;2017-07-22&#39;</span><span class="p">,</span><span class="s1">&#39;Start learning..&#39;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="read-å·¦å³é“¾æ¥">read å·¦å³é“¾æ¥</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span>
    <span class="n">plugin_of_user</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="n">plugin_of_user</span><span class="p">.</span><span class="n">user_plugin_name</span><span class="p">,</span>
    <span class="n">plugin_info</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">plugin_info</span><span class="p">.</span><span class="n">avatar</span><span class="p">,</span> <span class="n">plugin_info</span><span class="p">.</span><span class="n">link</span><span class="p">,</span> <span class="n">plugin_info</span><span class="p">.</span><span class="k">type</span>
<span class="k">FROM</span> <span class="n">plugin_of_user</span>
<span class="k">RIGHT</span> <span class="k">JOIN</span> <span class="n">plugin_info</span>
<span class="k">ON</span> <span class="n">plugin_of_user</span><span class="p">.</span><span class="n">plugin_id</span><span class="o">=</span><span class="n">plugin_info</span><span class="p">.</span><span class="n">id</span>
<span class="k">WHERE</span> <span class="n">plugin_of_user</span><span class="p">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="o">?</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="update-1">update</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">UPDATE</span> <span class="p">[</span><span class="n">LOW_PRIORITY</span><span class="p">]</span> <span class="p">[</span><span class="k">IGNORE</span><span class="p">]</span> <span class="k">table_name</span> 
<span class="k">SET</span> 
    <span class="n">column_name1</span> <span class="o">=</span> <span class="n">expr1</span><span class="p">,</span>
    <span class="n">column_name2</span> <span class="o">=</span> <span class="n">expr2</span><span class="p">,</span>
    <span class="p">...</span>
<span class="k">WHERE</span>
    <span class="n">condition</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="æ— åˆ™æ·»åŠ æœ‰åˆ™ä¿®æ”¹">æ— åˆ™æ·»åŠ ï¼Œæœ‰åˆ™ä¿®æ”¹</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">insert</span> <span class="k">into</span> <span class="n">student</span>
  <span class="p">(</span><span class="nb">number</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> 
<span class="k">values</span>
  <span class="p">(</span><span class="mi">45</span><span class="p">,</span><span class="err">â€˜å¼ ä¸‰â€™</span><span class="p">)</span>
<span class="k">ON</span> <span class="n">DUPLICATE</span> <span class="k">KEY</span> <span class="k">UPDATE</span> 
<span class="nb">number</span> <span class="o">=</span> <span class="mi">46</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="err">â€˜æå››â€™</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="delete-1">delete</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">DELETE</span> <span class="k">FROM</span> <span class="k">table_name</span>
<span class="k">WHERE</span> <span class="n">condition</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å®è·µ">å®è·µ</h2>
<p>è¯„è®ºå›å¸–è¡¨</p>
<p>è½®å­å“¥ vczh
ä¸“ä¸šé€ è½®å­ï¼Œæ‹‰é»‘æŠ¢å‰æ’ã€‚gaclib.net
75 äººèµåŒäº†è¯¥å›ç­”
CommentID: GUID (primary key)
UnderWhichAnswer: GUID (index + foreign key)
ReplyWhichComment: GUID (nullable + foreign key)
Author: GUID (foreign key)
Time: datetime (ascend)
Content: string</p>
<h2 id="æ€§èƒ½æµ‹è¯•">æ€§èƒ½æµ‹è¯•</h2>
<p>mysqlslapæ˜¯mysqlè‡ªå¸¦çš„æµ‹è¯•å·¥å…·</p>
<p>ä¸‹é¢ä¸ºæµ‹è¯•ä¸€æ¡sqlçš„æ•ˆç‡</p>
<pre><code>mysqlslap --create-schema mind -q &quot;select * from test1&quot; --number-of-queries=100 -uroot -p123456
</code></pre><p>å…¶ä¸­<code>--create-schema</code>åä¸ºæ•°æ®åº“åï¼Œ<code>-q</code>åä¸ºsqlè¯­å¥ï¼Œ<code>--number-of-queries</code>ä¸ºé‡å¤æ¬¡æ•°ã€‚</p>
<h2 id="å·¥å…·">å·¥å…·</h2>
<h3 id="phpmyadmin">phpmyadmin</h3>
<p>é€šè¿‡dockerä½¿ç”¨ï¼šæ‹‰é•œåƒï¼Œç„¶åè¿è¡Œï¼Œç„¶åè®¿é—®æœ¬åœ°çš„<a href="http://localhost:8080">localhost:8080</a></p>
<pre><code>docker pull phpmyadmin/phpmyadmin
docker run --name myphpadmin -d -e PMA_ARBITRARY=1 -p 8080:80 phpmyadmin/phpmyadmin
</code></pre><h4 id="è¿æœ¬åœ°çš„mysqlubuntu">è¿æœ¬åœ°çš„mysql(ubuntu)</h4>
<p>å°†<code>/etc/mysql/mysql.conf.d/mysql.cnf</code>ä¸­çš„<code>bind-address=127.0.0.1</code>æ”¹æˆ<code>bind-address=0.0.0.0</code>ï¼Œä½¿å¯ä»¥è¿œç¨‹è®¿é—®ã€‚</p>
<p>ç„¶åä½¿ç”¨æœ¬æœºipè®¿é—®(192.168.<em>.</em>)ï¼Œç™»å½•çš„ä¸»æœºåœ°å€ä¹Ÿæ˜¯å‰é¢é‚£ä¸ªip</p>
<h2 id="èµ„æ–™">èµ„æ–™</h2>
<p><a href="https://www.yiibai.com/mysql/update-data.html">æ˜“ç™¾æ•™ç¨‹MySQL</a>
<a href="https://www.kancloud.cn/thinkphp/mysql-design-optimalize/39325">Mysqlè®¾è®¡ä¸ä¼˜åŒ–ä¸“é¢˜</a>
<a href="/images/mysql-1.png">image1</a>:/images/mysql-1.jpg</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%90%8E%E7%AB%AF/">åç«¯</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/mysql/">mysql</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>é‡æ„æ—§é¡¹ç›®-1</title>
                <link>https://wss.cool/refactoring-old-projects-part-1.html</link>
                <guid isPermaLink="true">https://wss.cool/refactoring-old-projects-part-1.html</guid>
                <pubDate>Thu, 02 Apr 2020 15:17:52 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>è¿™ä¸ªé¡¹ç›®æœ‰ç‚¹è€æ—§</p>
<pre><code>&quot;dva&quot;: &quot;2.1.0&quot;,
&quot;react&quot;: &quot;^16.2.0&quot;,
</code></pre><p>æˆ‘æ‰“ç®—ç”¨æœ€æ–°çš„reactå’Œ@reduxjs/toolkitå¼€å§‹é‡æ„ï¼Œæ—§çš„ä¾èµ–åªèƒ½ä½¿ç”¨connectæ–¹å¼æ¥è·å–storeï¼Œä½¿ç”¨useSelectorå’ŒuseDispatchå¾ˆæ–¹ä¾¿ä¹Ÿå¾ˆæ˜“è¯»ã€‚<code>@reduxjs/toolkit</code>æä¾›çš„immerå’ŒactionCreaterä¹Ÿå¾ˆå¥½ç”¨ã€‚</p>
<p>é¦–å…ˆé‡æ„çš„æ˜¯ä¸€ä¸ª643è¡Œçš„ç»„ä»¶ï¼Œå®ƒçš„renderæ–¹æ³•æœ‰580è¡Œã€‚</p>
<h2 id="é‡å¤ä»£ç ">é‡å¤ä»£ç </h2>
<p>å¾ˆå®¹æ˜“çš„å‘ç°äº†ä¸€å¤§æ®µé‡å¤ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">numbers_wrapper</span><span class="p">}&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number_item</span><span class="p">}&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number</span><span class="p">}&gt;{</span><span class="nx">detail</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">member_count</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;</span><span class="nx">ç­çº§æ€»äººæ•°</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number_item</span><span class="p">}&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number</span><span class="p">}&gt;{</span><span class="nx">detail</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">male_count</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;</span><span class="nx">ç”·ç”Ÿäººæ•°</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number_item</span><span class="p">}&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number</span><span class="p">}&gt;{</span><span class="nx">detail</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">female_count</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;</span><span class="nx">å¥³ç”Ÿäººæ•°</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number_item</span><span class="p">}&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number</span><span class="p">}&gt;{</span><span class="nx">detail</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">group_count</span> <span class="o">&amp;&amp;</span><span class="p">(</span> <span class="nx">detail</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">group_count</span><span class="p">[</span><span class="nx">userDetail</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;</span><span class="nx">åˆ†ç»„æ•°</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number_item</span><span class="p">}&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number</span><span class="p">}&gt;{(</span><span class="nx">detail</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">user_lecture_count</span> <span class="o">?</span> <span class="p">(</span><span class="nx">detail</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">user_lecture_count</span><span class="p">[</span><span class="nx">userDetail</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;</span><span class="nx">æˆè¯¾æ¬¡æ•°</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥å°†ä»–ä»¬ç»„ç»‡æˆ2ä¸ªç»„ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kd">function</span> <span class="nx">NumberWithLabel</span><span class="p">({</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">count</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number_item</span><span class="p">}&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">number</span><span class="p">}&gt;{</span><span class="nx">count</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;{</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">numbers_wrapper</span><span class="p">}&gt;</span>
    <span class="p">&lt;</span><span class="nt">NumberWithLabel</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;ç­çº§æ€»äººæ•°&#34;</span> <span class="na">count</span><span class="o">=</span><span class="p">{</span><span class="nx">member_count</span><span class="p">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">NumberWithLabel</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;ç”·ç”Ÿäººæ•°&#34;</span> <span class="na">count</span><span class="o">=</span><span class="p">{</span><span class="nx">male_count</span><span class="p">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">NumberWithLabel</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;å¥³ç”Ÿäººæ•°&#34;</span> <span class="na">count</span><span class="o">=</span><span class="p">{</span><span class="nx">female_count</span><span class="p">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">NumberWithLabel</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;åˆ†ç»„æ•°&#34;</span> <span class="na">count</span><span class="o">=</span><span class="p">{</span><span class="nx">group_count</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">group_count</span><span class="p">[</span><span class="nx">userId</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">NumberWithLabel</span> <span class="na">label</span><span class="o">=</span><span class="s">&#34;æˆè¯¾æ¬¡æ•°&#34;</span> <span class="na">count</span><span class="o">=</span><span class="p">{(</span><span class="nx">user_lecture_count</span> <span class="o">?</span> <span class="p">(</span><span class="nx">user_lecture_count</span><span class="p">[</span><span class="nx">userId</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)}</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>æ•°æ®ä½¿ç”¨useSelectorè·å–ï¼Œè¿™æ ·ä»£ç çœ‹èµ·æ¥ç®€å•è¯»äº†ã€‚</p>
<h2 id="å°è£…ç»„ä»¶">å°è£…ç»„ä»¶</h2>
<p>ç„¶åå‘ç°äº†ä¸€å¤§æ®µä»£ç å¯ä»¥å°è£…æˆä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">card_body</span><span class="p">}&gt;</span>
<span class="p">{</span>
    <span class="nx">groupList</span> <span class="o">&amp;&amp;</span> <span class="nx">groupList</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">group</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">group_item</span><span class="p">}</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span> <span class="na">onDrop</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">handleStudentDrop</span><span class="p">(</span><span class="nx">group</span><span class="p">)}</span> <span class="na">onDragOver</span><span class="o">=</span><span class="p">{</span><span class="nx">handleStudentDragOver</span><span class="p">}</span>                                                <span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">group_item_header</span><span class="p">}&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">group_item_info</span><span class="p">}&gt;</span>
                    <span class="p">{</span><span class="nx">group</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
                    <span class="p">&lt;</span><span class="nt">i</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">trophy_icon</span><span class="p">}</span> <span class="p">/&gt;</span>
                <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">group_item_btns</span><span class="p">}&gt;</span>
                <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">Radio</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">group_student_list_radio</span><span class="p">}</span> <span class="na">checked</span><span class="o">=</span><span class="p">{</span><span class="nx">group</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">curGroup</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">selectCurGroup</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">id</span><span class="p">)}</span> <span class="p">/&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">group_student_list</span><span class="p">}&gt;</span>
                <span class="p">{</span>
                    <span class="nx">group</span><span class="p">.</span><span class="nx">members</span> <span class="o">&amp;&amp;</span> <span class="nx">group</span><span class="p">.</span><span class="nx">members</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="p">(</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="p">{{</span>
                            <span class="nx">textAlign</span><span class="o">:</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                            <span class="nx">fontSize</span><span class="o">:</span><span class="mi">14</span><span class="p">,</span>
                            <span class="nx">color</span><span class="o">:</span><span class="s1">&#39;#666&#39;</span><span class="p">,</span>
                        <span class="p">}}&gt;</span><span class="nx">è¯¥å°ç»„æ²¡æœ‰å­¦ç”Ÿ</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;)</span> <span class="o">:</span> <span class="p">(</span>
                        <span class="nx">group</span><span class="p">.</span><span class="nx">members</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">stu</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(&lt;</span><span class="nt">StudentItem</span>
                            <span class="na">isDrage</span>
                            <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">i</span><span class="p">}</span>
                            <span class="na">stu</span><span class="o">=</span><span class="p">{</span><span class="nx">stu</span><span class="p">}</span>
                            <span class="na">group</span><span class="o">=</span><span class="p">{</span><span class="nx">group</span><span class="p">}</span>
                            <span class="na">gender</span><span class="o">=</span><span class="p">{</span><span class="nx">stu</span><span class="p">.</span><span class="nx">gender</span><span class="p">}</span>
                            <span class="na">headimg_res_url</span><span class="o">=</span><span class="p">{</span><span class="nx">stu</span><span class="p">.</span><span class="nx">headimg_res_url</span><span class="p">}</span>
                            <span class="na">name</span><span class="o">=</span><span class="p">{</span><span class="nx">stu</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
                            <span class="na">groupStuStyle</span>
                            <span class="na">onDragStart</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">handleDragStart</span><span class="p">(</span><span class="nx">stu</span><span class="p">,</span> <span class="nx">group</span><span class="p">.</span><span class="nx">id</span><span class="p">)}</span>
                            <span class="na">onSetLeader</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="p">=&gt;</span> <span class="nx">handleSetLeader</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">stu</span><span class="p">,</span><span class="nx">group</span><span class="p">)}</span>
                            <span class="na">onSetHeader</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="p">=&gt;</span> <span class="nx">handleSetHeader</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">stu</span><span class="p">)}</span>
                        <span class="p">/&gt;))</span>
                    <span class="p">)</span>
                <span class="p">}</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">))</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿˜æœ‰å®ƒç›¸å…³çš„æ–¹æ³•éƒ½æ˜¯åƒè¿™æ ·çš„dispatchï¼Œå¤§æ¦‚æœ‰äº”å…­ä¸ªï¼Œå®ƒä»¬éƒ½å†™åœ¨renderå‡½æ•°å†…ï¼Œè¿™éå¸¸ç³Ÿç³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">handleDragStart</span> <span class="o">=</span> <span class="p">(</span><span class="nx">stu</span><span class="p">,</span> <span class="nx">org_id</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;classDetail/updateState&#39;</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">onDragStudent</span><span class="o">:</span> <span class="p">{</span>
                <span class="p">...</span><span class="nx">stu</span><span class="p">,</span>
                <span class="nx">org_id</span><span class="p">,</span>
                <span class="nx">type</span><span class="o">:!!</span><span class="nx">org_id</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘è¦è®²è¿™ä¸ª<code>dispatch</code>ä¸­çš„<code>action</code>æ”¾åˆ°ä¸€ä¸ª<code>action_creater.js</code>æ–‡ä»¶ä¸­ï¼Œå°†ç»„å»ºæ”¾åœ¨<code>GroupItem.jsx</code>æ–‡ä»¶ä¸­ã€‚è¿™å¯ä»¥è®©æ¬¡è¦çš„ä¿¡æ¯ä¸å ç”¨ç¯‡å¹…ï¼Œä¸»è¦çš„ä¿¡æ¯å°±ä¼šä¸€ç›®äº†ç„¶äº†ã€‚
è¿™æ®µä»£ç å°±ç¼–ç¨‹äº†2ä¸ªç»„ä»¶å’Œ1ä¸ª<code>action creater</code>æ–‡ä»¶ã€‚ç›¸å…³çš„ä»£ç å°è£…åœ¨ä¸€èµ·ï¼Œå†ä¹Ÿä¸ç”¨ä¸ºäº†çœ‹ä¸€ä¸ªå‡½æ•°è€Œæ»šåŠ¨300è¡Œä»£ç æˆ–è€…è¦ç”¨æœç´¢æ‰èƒ½æ‰¾åˆ°äº†ã€‚</p>
<blockquote>
<p>è¿™3ä¸ªæ–‡ä»¶ç›®å‰éƒ½åªæœ‰40-50è¡Œã€‚</p>
</blockquote>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>vim</title>
                <link>https://wss.cool/vim.html</link>
                <guid isPermaLink="true">https://wss.cool/vim.html</guid>
                <pubDate>Wed, 01 Apr 2020 21:27:14 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="æ›¿æ¢">æ›¿æ¢</h2>
<div class="shortcodes_withTitle" title="buiiuiuiu">abbnbnbn</div>
<pre><code>:[range]s/search/replace/optioins 1ï¸âƒ£
:%s/aa/bb/g 2ï¸âƒ£
:%s/aa/bb/gc 3ï¸âƒ£
</code></pre><ul>
<li>1ï¸âƒ£ rangeè¡¨ç¤ºæœç´¢çš„èŒƒå›´ï¼Œ <code>:8,10 s/</code> è¡¨ç¤ºç¬¬8-10è¡Œï¼Œ<code>:%s/</code> è¡¨ç¤ºå…¨æ–‡ã€‚</li>
<li>2ï¸âƒ£ <code>g</code> æ˜¯ä¸€ä¸ªoption(global)ï¼Œè¡¨ç¤ºè¦æ›¿æ¢æ‰€æœ‰åŒ¹é…é¡¹ï¼Œä¸åŠ å®ƒçš„è¯åªä¼šæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚</li>
<li>3ï¸âƒ£ <code>c</code> æ˜¯ä¸€ä¸ªoption(confirm)ï¼Œè¡¨ç¤ºæ›¿æ¢å‰éœ€è¦ç¡®è®¤ã€‚</li>
</ul>
<h3 id="confirm">confirm</h3>
<p>åŠ äº†confirmé€‰é¡¹åï¼Œæ›¿æ¢æ—¶ä¼šå‡ºç°è¿™æ ·çš„æç¤ºï¼Œéœ€è¦ä½ å›å¤ã€‚</p>
<pre><code>replace with foo (y/n/a/q/l/^E/^Y)?
</code></pre><table>
<thead>
<tr>
<th align="center">å›å¤</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">y</td>
<td align="left">yes</td>
</tr>
<tr>
<td align="center">n</td>
<td align="left">no</td>
</tr>
<tr>
<td align="center">a</td>
<td align="left">go aheadï¼Œæ›¿æ¢æ‰€æœ‰</td>
</tr>
<tr>
<td align="center">q</td>
<td align="left">quit å–æ¶ˆã€é€€å‡ºæ“ä½œ</td>
</tr>
<tr>
<td align="center">l</td>
<td align="left">æ›¿æ¢å½“å‰è¿™ä¸ªï¼Œç„¶åé€€å‡ºæ“ä½œ</td>
</tr>
<tr>
<td align="center">^E/^Y</td>
<td align="left">scroll the text using Ctrl-e and Ctrl-y</td>
</tr>
</tbody>
</table>
<h2 id="é…ç½®">é…ç½®</h2>
<pre><code>set nocompatible 
set number
set relativenumber
set cursorline
set wrap
set laststatus=2
set ruler

syntax on
set showmode
set showcmd

set shiftwidth=4
set tabstop=2
set expandtab
set softtabstop=2
</code></pre><p>ä¾æ¬¡ï¼šä¸å…¼å®¹viï¼Œæ˜¾ç¤ºè¡Œå·ï¼Œè¡Œå·æ˜¯ç›¸å¯¹å½“å‰è¡Œçš„ï¼Œå…‰æ ‡æ‰€åœ¨çš„å½“å‰è¡Œé«˜äº®ï¼Œæ¢è¡Œï¼Œæ˜¾ç¤ºçŠ¶æ€æ ï¼ŒçŠ¶æ€æ ä¸­æ˜¾ç¤ºå…‰æ ‡çš„ä½ç½®ï¼Œè¯­æ³•é«˜äº®å¼€å¯ï¼Œæ¨¡å¼ï¼ŒæŒ‡ä»¤ï¼Œ<code>&gt;&gt;&lt;&lt;==</code> æ“ä½œçš„ç©ºæ ¼æ•°ï¼Œtabé”®çš„ç©ºæ ¼æ•°ï¼Œç¼©ç´§ä½¿ç”¨ç©ºæ ¼ï¼Œtabç­‰äºå‡ ä¸ªç©ºæ ¼</p>
<h2 id="ç¼©ç´§">ç¼©ç´§</h2>
<p>åœ¨æ–‡æœ¬ä¸ŠæŒ‰ä¸‹&gt;&gt;ï¼ˆå¢åŠ ä¸€çº§ç¼©è¿›ï¼‰ã€&lt;&lt;ï¼ˆå–æ¶ˆä¸€çº§ç¼©è¿›ï¼‰æˆ–è€…==ï¼ˆå–æ¶ˆå…¨éƒ¨ç¼©è¿›ï¼‰æ—¶ï¼Œæ¯ä¸€çº§çš„å­—ç¬¦æ•°ã€‚</p>
<h2 id="reference">reference</h2>
<ul>
<li>æœç´¢ä¸æ›¿æ¢ï¼š<a href="https://www.linux.com/training-tutorials/vim-tips-basics-search-and-replace/">https://www.linux.com/training-tutorials/vim-tips-basics-search-and-replace/</a></li>
<li>é…ç½®ï¼š<a href="http://vim.spf13.com/">http://vim.spf13.com/</a></li>
<li>æ”»ç•¥1ï¼š<a href="https://github.com/vim-china/hello-vim">https://github.com/vim-china/hello-vim</a></li>
<li>æ”»ç•¥2ï¼š<a href="https://github.com/oldratlee/vim-practice">https://github.com/oldratlee/vim-practice</a></li>
<li>æ”»ç•¥3ï¼š<a href="https://github.com/wsdjeg/vim-galore-zh_cn">https://github.com/wsdjeg/vim-galore-zh_cn</a></li>
<li>é˜®ä¸€å³°ï¼š<a href="https://www.ruanyifeng.com/blog/2018/09/vimrc.html">https://www.ruanyifeng.com/blog/2018/09/vimrc.html</a></li>
</ul>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>ReactRouterçš„å“²å­¦</title>
                <link>https://wss.cool/reactrouter-philosophy.html</link>
                <guid isPermaLink="true">https://wss.cool/reactrouter-philosophy.html</guid>
                <pubDate>Tue, 31 Mar 2020 13:11:28 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="å“²å­¦">å“²å­¦</h2>
<p>æœ¬æŒ‡å—çš„ç›®çš„æ˜¯è§£é‡Šä½¿ç”¨React Routeræ—¶çš„å¿ƒæ™ºæ¨¡å‹ã€‚ æˆ‘ä»¬å°†å…¶ç§°ä¸ºâ€œåŠ¨æ€è·¯ç”±â€ï¼Œè¿™ä¸æ‚¨å¯èƒ½æ›´ç†Ÿæ‚‰çš„â€œé™æ€è·¯ç”±â€å®Œå…¨ä¸åŒã€‚</p>
<h3 id="é™æ€è·¯ç”±">é™æ€è·¯ç”±</h3>
<p>å¦‚æœæ‚¨ä½¿ç”¨è¿‡Railsï¼ŒExpressï¼ŒEmberï¼ŒAngularç­‰ï¼Œé‚£ä¹ˆæ‚¨å·²ç»ä½¿ç”¨äº†é™æ€è·¯ç”±ã€‚ åœ¨è¿™äº›æ¡†æ¶ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨è¿›è¡Œä»»ä½•æ¸²æŸ“ä¹‹å‰å°†è·¯ç”±å£°æ˜ä¸ºåº”ç”¨ç¨‹åºåˆå§‹åŒ–çš„ä¸€éƒ¨åˆ†ã€‚ React Router pre-v4ä¹Ÿæ˜¯é™æ€çš„ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹ï¼‰ã€‚<br>
è¯·æ³¨æ„åœ¨åº”ç”¨ä¾¦å¬ä¹‹å‰å¦‚ä½•å£°æ˜è·¯ç”±ã€‚ æˆ‘ä»¬ä½¿ç”¨çš„å®¢æˆ·ç«¯è·¯ç”±å™¨æ˜¯ç±»ä¼¼çš„ã€‚ åœ¨Angularä¸­ï¼Œæ‚¨å¯ä»¥é¢„å…ˆå£°æ˜æ‚¨çš„è·¯ç”±ï¼Œç„¶ååœ¨æ¸²æŸ“ä¹‹å‰å°†å®ƒä»¬å¯¼å…¥é¡¶çº§AppModule.<br>
Emberæœ‰ä¸€ä¸ªä¼ ç»Ÿçš„routes.jsæ–‡ä»¶ï¼Œæ„å»ºä¼šè¯»å–å¹¶å¯¼å…¥åˆ°åº”ç”¨ç¨‹åºä¸­ã€‚ åŒæ ·ï¼Œè¿™ä¼šåœ¨æ‚¨çš„åº”ç”¨å‘ˆç°ä¹‹å‰å‘ç”Ÿã€‚<br>
å°½ç®¡APIä¸åŒï¼Œä½†å®ƒä»¬éƒ½å…±äº«â€œé™æ€è·¯ç”±â€æ¨¡å‹ã€‚ React Routerä¹Ÿä½¿ç”¨â€œé™æ€è·¯ç”±â€ç›´åˆ°v4ã€‚è¦æˆåŠŸä½¿ç”¨React Routerï¼Œæ‚¨éœ€è¦å¿˜è®°è¿™ä¸€åˆ‡ï¼ï¼šo</p>
<h3 id="èƒŒæ™¯æ•…äº‹">èƒŒæ™¯æ•…äº‹</h3>
<p>å¦ç‡åœ°è¯´ï¼Œæˆ‘ä»¬å¯¹æˆ‘ä»¬åœ¨React Routerçš„v2ç‰ˆæœ¬ä¸­æ–¹å‘æ„Ÿåˆ°éå¸¸æ²®ä¸§ã€‚ æˆ‘ä»¬ï¼ˆMichaelå’ŒRyanï¼‰è§‰å¾—å—åˆ°APIçš„é™åˆ¶ï¼Œè®¤è¯†åˆ°æˆ‘ä»¬é‡æ–°å®ç°äº†Reactï¼ˆç”Ÿå‘½å‘¨æœŸç­‰ï¼‰çš„éƒ¨åˆ†ï¼Œè€Œä¸”å®ƒä¸Reactç»™æˆ‘ä»¬åˆ›ä½œUIçš„å¿ƒç†æ¨¡å‹ä¸ç¬¦ã€‚æˆ‘ä»¬èµ°è¿‡èµ°å»Šåœ¨ç ”è®¨ä¼šè®¨è®ºå¦‚ä½•åº”å¯¹ä¹‹å‰çš„é…’åº—ã€‚æˆ‘ä»¬äº’ç›¸é—®é“ï¼šâ€œå¦‚æœæˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬åœ¨å·¥ä½œå®¤æ•™æˆçš„æ¨¡å¼æ„å»ºè·¯ç”±å™¨ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿâ€å¼€å‘åªéœ€è¦å‡ ä¸ªå°æ—¶ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªæ¦‚å¿µéªŒè¯ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒæ˜¯æœªæ¥ æˆ‘ä»¬æƒ³è¦è·¯ç”±ã€‚ æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„APIå¹¶ä¸æ˜¯Reactçš„â€œå¤–éƒ¨â€ï¼Œè¿™æ˜¯ä¸€ä¸ªç”±Reactçš„å…¶ä½™éƒ¨åˆ†ç»„æˆæˆ–è‡ªç„¶è½å®åˆ°ä½çš„APIã€‚ æˆ‘ä»¬è®¤ä¸ºä½ ä¼šå–œæ¬¢å®ƒã€‚</p>
<h3 id="åŠ¨æ€è·¯ç”±">åŠ¨æ€è·¯ç”±</h3>
<p>å½“æˆ‘ä»¬è¯´åŠ¨æ€è·¯ç”±æ—¶ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯åœ¨æ‚¨çš„åº”ç”¨å‘ˆç°æ—¶å‘ç”Ÿçš„è·¯ç”±ï¼Œè€Œä¸æ˜¯åœ¨æ­£åœ¨è¿è¡Œçš„åº”ç”¨ä¹‹å¤–çš„é…ç½®æˆ–çº¦å®šä¸­ã€‚ è¿™æ„å‘³ç€å‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯React Routerä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚ ä»¥ä¸‹æ˜¯å¯¹APIçš„60ç§’å›é¡¾ï¼Œäº†è§£å®ƒçš„å·¥ä½œåŸç†ï¼šé¦–å…ˆï¼Œä¸ºè‡ªå·±å®šä½çš„ç¯å¢ƒæŠ“ä½è‡ªå·±çš„è·¯ç”±å™¨ç»„ä»¶ï¼Œå¹¶å°†å…¶å‘ˆç°åœ¨åº”ç”¨çš„é¡¶éƒ¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">BrowserRouter</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-router-dom&#39;</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">((</span>
  <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">App</span><span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="err">/BrowserRouter&gt;</span>
<span class="p">),</span> <span class="nx">el</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹æ¥ï¼ŒæŠ“å–é“¾æ¥ç»„ä»¶ä»¥é“¾æ¥åˆ°æ–°ä½ç½®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">nav</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&#34;/dashboard&#34;</span><span class="o">&gt;</span><span class="nx">Dashboard</span><span class="o">&lt;</span><span class="err">/Link&gt;</span>
    <span class="o">&lt;</span><span class="err">/nav&gt;</span>
  <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>æœ€åï¼Œå½“ç”¨æˆ·è®¿é—®/ä»ªè¡¨æ¿æ—¶æ¸²æŸ“Routeæ¥æ˜¾ç¤ºä¸€äº›UIã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">nav</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&#34;/dashboard&#34;</span><span class="o">&gt;</span><span class="nx">Dashboard</span><span class="o">&lt;</span><span class="err">/Link&gt;</span>
    <span class="o">&lt;</span><span class="err">/nav&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&#34;/dashboard&#34;</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Dashboard</span><span class="p">}</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Routeå°†å‘ˆç°<code>&lt;Dashboard {... props} /&gt;</code>ï¼Œå…¶ä¸­<code>props</code>æ˜¯ä¸€äº›ç‰¹å®šäºè·¯ç”±å™¨çš„ä¸œè¥¿ï¼Œçœ‹èµ·æ¥åƒ<code>{matchï¼Œlocationï¼Œhistory}</code>ã€‚ å¦‚æœç”¨æˆ·ä¸åœ¨<code>/dashboard</code>ï¼Œåˆ™Routeå°†å‘ˆç°ä¸ºnullã€‚ è¿™å°±æ˜¯å®ƒçš„å…¨éƒ¨å†…å®¹ã€‚</p>
<h3 id="åµŒå¥—è·¯ç”±">åµŒå¥—è·¯ç”±</h3>
<p>å¾ˆå¤šè·¯ç”±å™¨éƒ½æœ‰ä¸€äº›â€œåµŒå¥—è·¯ç”±â€çš„æ¦‚å¿µã€‚å¦‚æœæ‚¨åœ¨v4ä¹‹å‰ä½¿ç”¨è¿‡React Routerçš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæ‚¨ä¹Ÿä¼šçŸ¥é“å®ƒä¹Ÿæ˜¯å¦‚æ­¤ï¼å½“æ‚¨ä»é™æ€è·¯ç”±é…ç½®ç§»åŠ¨åˆ°åŠ¨æ€æ¸²æŸ“è·¯ç”±æ—¶ï¼Œå¦‚ä½•â€œåµŒå¥—è·¯ç”±â€ï¼Ÿé‚£ä¹ˆï¼Œä½ å¦‚ä½•æ½œé€ƒä¸€ä¸ªdivï¼Ÿ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="cm">/* here&#39;s a div */</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="cm">/* here&#39;s a Route */</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&#34;/tacos&#34;</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Tacos</span><span class="p">}</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="o">&lt;</span><span class="err">/BrowserRouter&gt;</span>
<span class="p">)</span>

<span class="c1">// when the url matches `/tacos` this component renders
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">Tacos</span>  <span class="o">=</span> <span class="p">({</span> <span class="nx">match</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">(</span>
  <span class="c1">// here&#39;s a nested div
</span><span class="c1"></span>  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="cm">/* here&#39;s a nested Route,
</span><span class="cm">        match.url helps us make a relative path */</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">Route</span>
      <span class="nx">path</span><span class="o">=</span><span class="p">{</span><span class="nx">match</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;/carnitas&#39;</span><span class="p">}</span>
      <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Carnitas</span><span class="p">}</span>
    <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>çœ‹çœ‹è·¯ç”±å™¨æ²¡æœ‰â€œåµŒå¥—â€APIï¼Ÿ è·¯ç”±åªæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±åƒdivä¸€æ ·ã€‚ å› æ­¤ï¼Œä¸ºäº†ç­‘å·¢è·¯çº¿æˆ–divï¼Œä½ åªéœ€......åšå®ƒã€‚è®©æˆ‘å˜å¾—æ›´åŠ æ£˜æ‰‹ã€‚</p>
<h3 id="å“åº”è·¯çº¿">å“åº”è·¯çº¿</h3>
<p>è€ƒè™‘ç”¨æˆ·å¯¼èˆªåˆ°<code>/invoices</code>ã€‚ æ‚¨çš„åº”ç”¨é€‚ç”¨äºä¸åŒçš„å±å¹•å°ºå¯¸ï¼Œå®ƒä»¬å…·æœ‰è¾ƒçª„çš„è§†å£ï¼Œå› æ­¤æ‚¨åªéœ€å‘å…¶æ˜¾ç¤ºå‘ç¥¨åˆ—è¡¨å’Œå‘ç¥¨ä»ªè¡¨æ¿çš„é“¾æ¥ã€‚ä»–ä»¬å¯ä»¥ä»é‚£é‡Œæ›´æ·±å…¥åœ°å¯¼èˆªã€‚<br>
åœ¨å¤§å±å¹•ä¸Šï¼Œ<code>/invoices</code>ä¸æ˜¯æœ‰æ•ˆçš„è·¯çº¿ï¼Œä½†åœ¨å°å±å¹•ä¸Šå®ƒæ˜¯ï¼ ä¸ºäº†è®©äº‹æƒ…å˜å¾—æ›´æœ‰è¶£ï¼Œè¯·è€ƒè™‘ä¸€ä¸ªæ‹¥æœ‰å·¨å‹æ‰‹æœºçš„äººã€‚ ä»–ä»¬å¯ä»¥çºµå‘æŸ¥çœ‹/å‘ç¥¨ï¼Œç„¶åå°†æ‰‹æœºæ—‹è½¬åˆ°æ¨ªå‘ã€‚ çªç„¶é—´ï¼Œæˆ‘ä»¬æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥æ˜¾ç¤ºä¸» - ç»†èŠ‚ç”¨æˆ·ç•Œé¢ï¼Œæ‰€ä»¥ä½ åº”è¯¥ç«‹å³é‡å®šå‘ï¼</p>
<pre><code>
</code></pre><p>å½“ç”¨æˆ·å°†æ‰‹æœºä»çºµå‘æ—‹è½¬åˆ°æ¨ªå‘æ—¶ï¼Œæ­¤ä»£ç ä¼šè‡ªåŠ¨å°†å…¶é‡å®šå‘åˆ°ä»ªè¡¨æ¿ã€‚ è¯¥ç»„æœ‰æ•ˆè·¯ç”±æ ¹æ®ç”¨æˆ·æ‰‹ä¸­çš„ç§»åŠ¨è®¾å¤‡çš„åŠ¨æ€ç‰¹æ€§è€Œæ”¹å˜ã€‚
è¿™åªæ˜¯ä¸€ä¸ªä¾‹å­ã€‚ è¿˜æœ‰å¾ˆå¤šå…¶ä»–æˆ‘ä»¬å¯ä»¥è®¨è®ºçš„å†…å®¹ï¼Œä½†æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹è¿™ä¸ªå»ºè®®ï¼šä¸ºäº†è®©ä½ çš„ç›´è§‰ä¸React Routerçš„ä¸€è‡´ï¼Œè€ƒè™‘ç»„ä»¶ï¼Œè€Œä¸æ˜¯é™æ€è·¯ç”±ã€‚ è€ƒè™‘å¦‚ä½•ä½¿ç”¨Reactçš„å£°æ˜å¯ç»„åˆæ€§æ¥è§£å†³é—®é¢˜ï¼Œå› ä¸ºå‡ ä¹æ¯ä¸ªâ€œReact Routeré—®é¢˜â€éƒ½å¯èƒ½æ˜¯â€œReacté—®é¢˜â€ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/knowledge/">knowledge</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>æ¸å˜è‰²</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/css/linear-gradient/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/css/linear-gradient/</guid>
                <pubDate>Tue, 31 Mar 2020 08:41:24 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="å…ˆè¯´è‰å›¾å¸ƒå±€">å…ˆè¯´è‰å›¾å¸ƒå±€</h2>
<p>ç°åœ¨å·¥ä½œçš„å…¬å¸è®¾è®¡çš„é¡µé¢ä¼¼ä¹ä»æ¥ä¸è€ƒè™‘ä½“éªŒã€‚æ¯”å¦‚è¯´åŠ è½½æ•°æ®çš„loadingç•Œé¢ï¼Œç›®å‰æˆ‘å‘ç°Bç«™ã€çŸ¥ä¹ç­‰å¾ˆå¤šçš„APPã€ç½‘é¡µéƒ½åœ¨ç”¨ä¸‹é¢å›¾ç‰‡è¿™ç§æ•ˆæœã€‚å°±æ˜¯åœ¨æ²¡æœ‰æ‹¿åˆ°æ•°æ®å‰ï¼Œé¡µé¢ç”¨æ¡æ¡æ¡†æ¡†çš„å›¾å½¢æ¥ä»£è¡¨å†…å®¹å’Œæ•°æ®ã€‚<br>
<img src="/images/linear-gradient-1.jpg" alt="è‰å›¾å¸ƒå±€"><br>
è¿™ä¸ªæ•ˆæœå…¶å®å¥½åƒè¿˜æ²¡æœ‰ä¸€ä¸ªæ­£å¼çš„åå­—ï¼Œâ€œè‰å›¾å¸ƒå±€â€è¿™ä¸ªåå­—æ˜¯ä»<a href="https://weibo.com/1400854834/FAbzPbKqE?type=comment#_rnd1531902658334">é˜®ä¸€å³°çš„å¾®åš</a>çœ‹æ¥çš„ï¼Œæˆ‘è®¤ä¸ºæŒºæ°å½“çš„å°±è¿™ä¹ˆå«å§ã€‚ä¸‹å›¾æ¥è‡ªä»–çš„å¾®åšï¼Œå¾®åšé‡Œè¿˜æœ‰demoå¯ä»¥å‚è€ƒã€‚</p>
<p>è¿™ä¸ªdemoçš„å®ç°åŸå§‹æ˜¯ï¼Œåœ¨<code>background-image</code>ä¸­ä½¿ç”¨å„ç§<code>gradient</code>æ¥ç”»åœ†å½¢ã€çŸ©å½¢ï¼Œä½¿ç”¨<code>background-size</code>æ§åˆ¶å„ä¸ªå›¾å½¢çš„å°ºå¯¸ï¼Œä¸»è¦æ˜¯å®½åº¦ã€‚å†ä½¿ç”¨<code>background-position</code>æ§åˆ¶å„ä¸ªå›¾å½¢çš„ä½ç½®æ¥å¸ƒå±€ã€‚è¿™é‡Œå°±ç”¨åˆ°çš„æ¸å˜è‰²ï¼Œåªä¸è¿‡ç”¨æ¥ç”»äº†éæ¸å˜çš„å›¾å½¢ã€‚</p>
<p>demoä¸­æœ‰ä¸€ä¸ªé«˜äº®çš„åŠ¨ç”»æ•ˆæœï¼Œæ˜¯ä½¿ç”¨ä¸€ä¸ªæœ‰æ—‹è½¬äº†100åº¦çš„<code>linear-gradient</code>åŠ ä¸€ä¸ªä½ç½®åŠ¨ç”»çš„æ•ˆæœå®ç°çš„ã€‚æˆ‘åœ¨æˆ‘çš„é¡¹ç›®ä¸­å®ç°è¿™ä¸ªæ•ˆæœæ—¶é‡åˆ°äº†é—®é¢˜â€”â€”æ€ä¹ˆç¡®å®šè¿™ä¸ªæ¸å˜è‰²çš„èµ·å§‹ä½ç½®ã€‚æ¯”å¦‚ï¼Œä¸‹å›¾è¿™æ¡ç™½è‰²çš„çº¿ï¼Œå’Œå¦ä¸€æ¡çº¢çº¿ã€‚<br>
<img src="/images/linear-gradient-3.gif" alt="è‰å›¾å¸ƒå±€">
<img src="/images/linear-gradient-4.gif" alt="è‰å›¾å¸ƒå±€"></p>
<p>çº¢çº¿çš„æ•ˆæœç”±è¿™æ®µä»£ç å®ç°çš„ï¼šï¼ˆç™½çº¿ä¹Ÿç±»ä¼¼ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">background-image</span><span class="o">:</span> <span class="nt">linear-gradient</span><span class="o">(</span><span class="nt">120deg</span><span class="o">,</span> <span class="nt">transparent</span> <span class="nt">308px</span><span class="o">,</span> <span class="nt">red</span> <span class="nt">323px</span> <span class="o">,</span><span class="nt">transparent</span> <span class="nt">338px</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>ä»£ç ä¸­çš„308pxæ˜¯çº¢çº¿çš„èµ·å§‹ä½ç½®ï¼Œ338æ˜¯ç»“æŸä½ç½®ï¼Œä»–ä»¬çš„å·®æ˜¯çº¿çš„å®½åº¦ã€‚ä½†æ˜¯308è¿™ä¸ªæ•°æ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„å‘¢ï¼Ÿ</p>
<h2 id="æ¸å˜è‰²çš„æ–¹å‘ä¸ä½ç½®">æ¸å˜è‰²çš„æ–¹å‘ä¸ä½ç½®</h2>
<p>å¦‚æœæƒ³ä½¿ç”¨<code>linear-gradient</code>ç”»å‡ºé‚£æ¡çº¢çº¿ï¼Œè®¡ç®—èµ·å§‹ä½ç½®æ˜¯å…³é”®ï¼ˆ308pxï¼‰ã€‚æƒ³è®¡ç®—èµ·å§‹ä½ç½®éœ€è¦å…ˆäº†è§£å‡ ä¸ªæ¦‚å¿µï¼šæ¸å˜çº¿ã€èµ·å§‹ç‚¹å’Œç»ˆç‚¹ã€‚<br>
<img src="/images/linear-gradient-2.png" alt="æ¸å˜è‰²" title="æ¸å˜çº¿ã€èµ·å§‹ç‚¹å’Œç»ˆç‚¹"></p>
<blockquote>
<p>æ¸å˜çº¿ç”±åŒ…å«æ¸å˜å›¾å½¢çš„å®¹å™¨çš„ä¸­å¿ƒç‚¹å’Œä¸€ä¸ªè§’åº¦æ¥å®šä¹‰çš„ã€‚æ¸å˜çº¿ä¸Šçš„é¢œè‰²å€¼æ˜¯ç”±ä¸åŒçš„ç‚¹æ¥å®šä¹‰ï¼ŒåŒ…æ‹¬èµ·å§‹ç‚¹ï¼Œç»ˆç‚¹ï¼Œä»¥åŠä¸¤è€…ä¹‹é—´çš„å¯é€‰çš„ä¸­é—´ç‚¹ï¼ˆä¸­é—´ç‚¹å¯ä»¥æœ‰å¤šä¸ªï¼‰ã€‚<br>
èµ·å§‹ç‚¹æ˜¯æ¸å˜çº¿ä¸Šä»£è¡¨èµ·å§‹é¢œè‰²å€¼çš„ç‚¹ã€‚èµ·å§‹ç‚¹ç”±æ¸å˜çº¿å’Œè¿‡å®¹å™¨é¡¶ç‚¹çš„å‚ç›´çº¿ä¹‹é—´çš„äº¤å‰ç‚¹æ¥å®šä¹‰ã€‚ï¼ˆå‚ç›´çº¿è·Ÿæ¸å˜çº¿åœ¨åŒä¸€è±¡é™å†…ï¼‰<br>
åŒæ ·çš„ï¼Œç»ˆç‚¹æ˜¯æ¸å˜çº¿ä¸Šä»£è¡¨æœ€ç»ˆé¢œè‰²å€¼çš„ç‚¹ã€‚ç»ˆç‚¹ä¹Ÿæ˜¯ç”±æ¸å˜çº¿å’Œä»æœ€è¿‘çš„é¡¶ç‚¹å‘å‡ºçš„å‚ç›´çº¿ä¹‹é—´çš„äº¤å‰ç‚¹å®šä¹‰çš„ï¼Œç„¶è€Œä»èµ·å§‹ç‚¹çš„å¯¹ç§°ç‚¹æ¥å®šä¹‰ç»ˆç‚¹æ˜¯æ›´å®¹æ˜“ç†è§£çš„ä¸€ç§æ–¹å¼ï¼Œå› ä¸ºç»ˆç‚¹æ˜¯èµ·ç‚¹å…³äºå®¹å™¨çš„ä¸­å¿ƒç‚¹çš„åå°„ç‚¹ã€‚</p>
</blockquote>
<p>ä¸Šé¢çš„å›¾ç‰‡å’Œå®šä¹‰æ¥è‡ª<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/linear-gradient">MDZæ–‡æ¡£</a></p>
<p>ç”±è¿™äº›æ¦‚å¿µå¯ä»¥çŸ¥é“æ¸å˜è‰²æ˜¯ä»èµ·å§‹ç‚¹å¼€å§‹æ²¿ç€æ¸å˜çº¿çš„æ–¹å‘ç»˜åˆ¶ï¼Œæ¸å˜è‰²çš„äº¤ç•Œä¼šå‚ç›´ä¸æ¸å˜çº¿ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æƒ³åšçš„çº¢çº¿æ˜¯å‚ç›´äºæ¸å˜çº¿çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬çœ‹ä¸‹å›¾
<img src="/images/linear-gradient-5.gif" alt="æ¸å˜è‰²"> <br>
å·²çŸ¥çº¢çº¿ä¸ä¸Šè¾¹æˆ60åº¦è§’ï¼ˆè‡ªå·±å®šä¹‰çš„ï¼‰ï¼Œæ‰€ä»¥æ¸å˜çº¿åº”è¯¥æ˜¯120degï¼Œè¿‡ç‚¹Båš120degæ¸å˜çº¿çš„å‚ç›´çº¿ï¼Œç›¸äº¤äºç‚¹Cï¼Œç‚¹Aç‚¹Cçš„çº¿æ®µAçš„é•¿åº¦å°±æ˜¯çº¢è‰²çš„èµ·å§‹ä½ç½®ï¼Œå¦‚æœä¸Šè¾¹é•¿åº¦ä¸º375ï¼Œç”±å‹¾è‚¡å®šç†å¯çŸ¥çº¿æ®µAé•¿åº¦ä¸º309ï¼Œæ‰€ä»¥çº¢çº¿çš„èµ·å§‹ä½ç½®å°±æ˜¯309pxï¼Œï¼ˆæˆ‘çš„ä»£ç é‡Œå–äº†308pxæ²¡ä»€ä¹ˆåŒºåˆ«ï¼‰<br>
ç”±æ­¤å¯ä»¥å†™å‡ºä¸Šé¢çš„ä»£ç æ¥å®ç°çº¢çº¿ã€‚ï¼ˆå…¶å®å°±æ˜¯é¡¶ç‚¹åˆ°çº¢çº¿çš„è·ç¦»ï¼‰<br>
æ‰€ä»¥å½“æˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ªæœ‰è§’åº¦çš„æ¸å˜è‰²çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹æ³•æ¥è®¡ç®—é¢œè‰²çš„èµ·å§‹ä½ç½®ã€‚</p>
<p>å¦‚æœæ¸å˜æ–¹å‘æ˜¯å¹³è¡Œä¸ä¸Šä¸‹è¾¹æˆ–è€…å·¦å³è¾¹ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">background-image</span><span class="o">:</span> <span class="nt">linear-gradient</span><span class="o">(</span><span class="nt">to</span> <span class="nt">bottom</span><span class="o">,</span><span class="nt">red</span> <span class="nt">25px</span> <span class="o">,</span><span class="nt">blue</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">background-image</span><span class="o">:</span> <span class="nt">linear-gradient</span><span class="o">(</span><span class="nt">to</span> <span class="nt">right</span><span class="o">,</span> <span class="nt">red</span> <span class="nt">25px</span> <span class="o">,</span><span class="nt">blue</span> <span class="nt">0</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦å¤–ä¸‹é¢ä»£ç çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">background-image</span><span class="o">:</span> <span class="nt">linear-gradient</span><span class="o">(</span><span class="nt">red</span> <span class="nt">25px</span> <span class="o">,</span><span class="nt">blue</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">background-image</span><span class="o">:</span> <span class="nt">linear-gradient</span><span class="o">(</span><span class="nt">180deg</span><span class="o">,</span> <span class="nt">red</span> <span class="nt">25px</span> <span class="o">,</span><span class="nt">blue</span> <span class="nt">0</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦å¤–ï¼Œç¬¬äºŒä¸ªé¢œè‰²åé¢çš„æ•°å€¼ä¾¿æ˜¯æ¸å˜ç»“æŸçš„ä½ç½®ï¼Œå¦‚æœå°é›¨å‰é¢é¢œè‰²çš„ä½ç½®å°±ä¸ä¼šæœ‰æ¸å˜æ•ˆæœï¼Œåˆ©ç”¨è¿™ç‚¹å¯ä»¥ç”¨æ¥å®ç°è‰å›¾å¸ƒå±€ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">body</span><span class="o">,</span><span class="nt">html</span><span class="p">{</span>
	<span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">empty</span><span class="p">:</span><span class="nd">empty</span> <span class="p">{</span>
	<span class="k">margin</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
	<span class="k">width</span><span class="p">:</span> <span class="mi">702</span><span class="kt">px</span><span class="p">;</span>
	<span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
	
	<span class="k">background-image</span><span class="p">:</span>
		<span class="nb">linear-gradient</span><span class="p">(</span><span class="mi">100</span><span class="kt">deg</span><span class="p">,</span> 
			<span class="kc">transparent</span> <span class="mi">600</span><span class="kt">px</span><span class="p">,</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span> <span class="mi">630</span><span class="kt">px</span> <span class="p">,</span><span class="kc">transparent</span> <span class="mi">660</span><span class="kt">px</span><span class="p">),</span>
		<span class="nb">linear-gradient</span><span class="p">(</span> <span class="kc">lightgray</span> <span class="mi">150</span><span class="kt">px</span><span class="p">,</span> <span class="kc">transparent</span> <span class="mi">0</span> <span class="p">),</span>
		<span class="nb">linear-gradient</span><span class="p">(</span> <span class="kc">lightgray</span> <span class="mi">150</span><span class="kt">px</span><span class="p">,</span> <span class="kc">transparent</span> <span class="mi">0</span> <span class="p">),</span>
		<span class="nb">linear-gradient</span><span class="p">(</span> <span class="kc">lightgray</span> <span class="mi">30</span><span class="kt">px</span><span class="p">,</span> <span class="kc">transparent</span> <span class="mi">0</span> <span class="p">),</span>
		<span class="nb">linear-gradient</span><span class="p">(</span> <span class="kc">lightgray</span> <span class="mi">88</span><span class="kt">px</span><span class="p">,</span> <span class="kc">transparent</span> <span class="mi">0</span> <span class="p">);</span>

	<span class="k">background-size</span><span class="p">:</span>
		<span class="mi">100</span><span class="kt">%</span> <span class="mi">100</span><span class="kt">%</span><span class="p">,</span> <span class="c">/* highlight */</span>
		<span class="mi">336</span><span class="kt">px</span> <span class="mi">150</span><span class="kt">px</span><span class="p">,</span>
		<span class="mi">336</span><span class="kt">px</span> <span class="mi">150</span><span class="kt">px</span><span class="p">,</span>
		<span class="mi">570</span><span class="kt">px</span> <span class="mi">30</span><span class="kt">px</span><span class="p">,</span>
		<span class="mi">720</span><span class="kt">px</span> <span class="mi">88</span><span class="kt">px</span><span class="p">;</span>

	<span class="k">background-position</span><span class="p">:</span>
		<span class="mi">-700</span><span class="kt">px</span> <span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span> <span class="mi">24</span><span class="kt">px</span><span class="p">,</span>
		<span class="mi">387</span><span class="kt">px</span> <span class="mi">24</span><span class="kt">px</span><span class="p">,</span>
		<span class="mi">0</span> <span class="mi">230</span><span class="kt">px</span><span class="p">,</span>
		<span class="mi">0</span> <span class="mi">284</span><span class="kt">px</span><span class="p">;</span>
	
	<span class="k">background-repeat</span><span class="p">:</span> <span class="kc">no-repeat</span><span class="p">;</span>

	<span class="k">animation</span><span class="p">:</span> <span class="n">shine</span> <span class="mi">2</span><span class="kt">s</span> <span class="kc">infinite</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">keyframes</span> <span class="nt">shine</span> <span class="p">{</span>
	<span class="nt">to</span> <span class="p">{</span>
		<span class="k">background-position</span><span class="p">:</span>
			<span class="mi">160</span><span class="kt">px</span> <span class="mi">0</span><span class="p">,</span>
			<span class="mi">0</span> <span class="mi">24</span><span class="kt">px</span><span class="p">,</span>
			<span class="mi">387</span><span class="kt">px</span> <span class="mi">24</span><span class="kt">px</span><span class="p">,</span>
			<span class="mi">0</span> <span class="mi">230</span><span class="kt">px</span><span class="p">,</span>
			<span class="mi">0</span> <span class="mi">284</span><span class="kt">px</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/css/">CSS</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>SSH</title>
                <link>https://wss.cool/ssh.html</link>
                <guid isPermaLink="true">https://wss.cool/ssh.html</guid>
                <pubDate>Tue, 31 Mar 2020 08:37:31 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šç”Ÿæˆå…¬é’¥ã€å¯†é’¥ã€‚å…¬é’¥æ”¾åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œå¯†é’¥åœ¨è‡ªå·±ç”µè„‘é‡Œä¸ç”¨ç®¡ã€‚è¿æ¥è¿œç¨‹æœåŠ¡å™¨æ—¶å°±ä¸ç”¨è¾“å…¥å¯†ç äº†ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>æ–°è£…çš„ç³»ç»Ÿå¯èƒ½æ²¡æœ‰sshæœåŠ¡ï¼Œéœ€è¦è‡ªå·±å®‰è£…</p>
<pre><code>sudo apt-get install openssh-server
</code></pre><h2 id="é…ç½®">é…ç½®</h2>
<p>æ–°å®‰è£…çš„ <code>ssh server</code> éœ€è¦ä¸€ç‚¹é…ç½®ï¼šå¼€å¯å¯†ç ç™»å½•ï¼Œå¼€å¯å…¬é’¥ç™»å½•ã€‚</p>
<ol>
<li>ç¼–è¾‘é…ç½®æ–‡ä»¶
<pre><code>sudo vim /etc/ssh/sshd_config
</code></pre></li>
<li>å¼€å¯å¯†ç ç™»å½•ã€å…¬é’¥ç™»å½•
<pre><code>PasswordAuthentication yes
PubkeyAuthentication yes
</code></pre></li>
<li>é‡å¯ <code>ssh server</code>
<pre><code>service ssh reload <span class="shortcodes_tag">é€€å‡ºvimé‡å¯ssh</span>
</code></pre></li>
</ol>
<h2 id="ç”Ÿæˆkey">ç”Ÿæˆkey</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">ssh-keygen -t rsa
</code></pre></td></tr></table>
</div>
</div><h2 id="å¤åˆ¶å…¬é’¥">å¤åˆ¶å…¬é’¥</h2>
<p>å°†æœ¬æœºçš„å…¬é’¥copyåˆ°è¿œç¨‹æœºå™¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">ssh-copy-id username@remote_host_B
</code></pre></td></tr></table>
</div>
</div><p>ç„¶åè¾“å…¥å¯†ç ã€‚</p>
<blockquote>
<p>è¯¥å‘½ä»¤ä¼šæŠŠæœ¬æœºçš„å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨çš„ .ssh/authorized_keys æ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<h2 id="ç™»é™†æœåŠ¡å™¨">ç™»é™†æœåŠ¡å™¨</h2>
<p>é…ç½®å¥½å…¬é’¥ä»¥åå°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç™»å½•äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">ssh username@hostname
</code></pre></td></tr></table>
</div>
</div><h2 id="é…ç½®åˆ«å">é…ç½®åˆ«å</h2>
<p>æ¯æ¬¡éƒ½ä½¿ç”¨ <code>ssh username@hostname</code> ç™»å½•ä¼šæœ‰ç‚¹éº»çƒ¦ï¼Œå¯ä»¥é€šè¿‡é…ç½®å°†å‘½ä»¤ç®€åŒ–ã€‚æ¯”å¦‚ä¸‹é¢çš„é…ç½®ï¼Œå¯ä»¥å°†ç™»å½•çš„å‘½ä»¤ç®€åŒ–ä¸º <code>ssh azu</code> ã€‚é…ç½®æ–‡ä»¶ä¸º <code>~/.ssh/config</code> ã€‚</p>
<pre><code>Host azu
   HostName 192.168.1.5
   User azu
   IdentityFile /homt/xx/.ssh/id_rsa
</code></pre><h2 id="aliaså‘½ä»¤">aliaså‘½ä»¤</h2>
<p>åœ¨ç»ˆç«¯ä¸­å®šä¹‰ç¼©å†™çš„å‘½ä»¤ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code>alias totx='ssh username@hostname'
</code></pre><p>è¿™æ ·å°±å¯ä»¥ä½¿ç”¨<code>totx</code>å‘½ä»¤ç›´æ¥ç™»é™†è¿œç¨‹æœåŠ¡å™¨äº†ï¼Œä½†æ˜¯aliaså‘½ä»¤ä¼šåœ¨é‡å¯ç»ˆç«¯æ—¶</p>
<h2 id="æ°¸ä¹…ä¿ç•™aliaså‘½ä»¤">æ°¸ä¹…ä¿ç•™aliaså‘½ä»¤</h2>
<p>æ¯æ¬¡ç™»é™†æ—¶.bash_profileæ–‡ä»¶æ˜¯ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œæ­¤è¿‡ç¨‹ä¼šè°ƒç”¨.bashrcï¼Œå°†aliaså‘½ä»¤å†™å…¥.bashrcæ–‡ä»¶å°±å¯ä»¥å°†aliaså‘½ä»¤æ°¸ä¹…ç”Ÿæ•ˆäº†ã€‚ï¼ˆå¦‚æœæ²¡æœ‰æ­¤æ–‡ä»¶å°±åˆ›å»ºä¸€ä¸ªï¼‰</p>
<h2 id="æŠ¥é”™">æŠ¥é”™</h2>
<pre><code>WARNING: UNPROTECTED PRIVATE KEY FILE!
Permissions 0644 '' are too open.
...
</code></pre><p>æˆ‘è£…äº†windowæ˜¯10å’ŒubuntuåŒç³»ç»Ÿï¼Œå°†windowsçš„ä¸€ä¸ªå…¬é’¥æ–‡ä»¶å¤åˆ¶åˆ°ubuntuåï¼Œä½¿ç”¨sshçš„configé…ç½®äº†å®ƒã€‚åœ¨ä½¿ç”¨sshç™»å½•æ—¶ï¼Œå°±æŠ¥äº†è¿™ä¸ªé”™ã€‚</p>
<p>æ˜¯æ–‡ä»¶æƒé™çš„é—®é¢˜ï¼Œæ”¹æˆåªè¯»çš„æƒé™å³å¯è§£å†³ã€‚</p>
<pre><code>chmod 400 ï½/.ssh/id_rsa
</code></pre><h2 id="æŒ‡å®šç§é’¥è¯ä¹¦ç™»å½•">æŒ‡å®šç§é’¥(è¯ä¹¦)ç™»å½•</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ssh name@6.6.6.6 -i ./identity_file.pem

scp -i ./identity_file.pem file_a name@1.1.1.1:~/
</code></pre></td></tr></table>
</div>
</div><h2 id="é…ç½®å¯†é’¥æ–‡ä»¶">é…ç½®å¯†é’¥æ–‡ä»¶</h2>
<p>é€šå¸¸ä½¿ç”¨sshç”Ÿæˆçš„ç§˜é’¥æ–‡ä»¶åæ˜¯â€œid_rsaâ€ï¼Œé€šå¸¸è¿™ä¸€å¯¹å…¬é’¥ç§é’¥ä¹Ÿæ˜¯å¤Ÿç”¨çš„ã€‚å¦‚æœæœ‰ç¬¬äºŒä»½ç§˜é’¥çš„è¯ï¼ˆè…¾è®¯äº‘ç”Ÿæˆçš„ï¼‰ï¼Œéœ€è¦ä¸€ä¸ª&quot;config&quot;æ–‡ä»¶ã€‚
è¯¥æ–‡ä»¶å­˜æ”¾åœ¨&quot;.ssh&quot;ç›®å½•ä¸‹ï¼ˆä¸éœ€è¦åç¼€æ‰©å±•åï¼‰ï¼Œå†…å®¹ä¸ºï¼š</p>
<pre><code>Host 128.128.666.666
   IdentityFile C:\Users\anrui\.ssh\pc_pc  
</code></pre>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">æœåŠ¡å™¨</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/linux/">LINUX</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>è·¨åŸŸCORS</title>
                <link>https://wss.cool/%E8%B7%A8%E5%9F%9Fcors.html</link>
                <guid isPermaLink="true">https://wss.cool/%E8%B7%A8%E5%9F%9Fcors.html</guid>
                <pubDate>Tue, 31 Mar 2020 08:33:05 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜">ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜</h2>
<p>åœ¨ç½‘é¡µä¸­ä½¿ç”¨AJAXæ—¶ï¼ŒAJAXè¯·æ±‚çš„URLä¸ç½‘é¡µçš„URLç›¸æ¯”è¾ƒï¼Œå¦‚æœæ˜¯å±äºåŒä¸€ä¸ªåŸŸåæ‰å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œå¦‚æœä¸å±äºä¸€ä¸ªåŸŸåå°±ä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚æ‰€ä»¥ï¼Œæ€ä¹ˆåˆ¤æ–­ä¸¤ä¸ªURLæ˜¯ä¸æ˜¯å±äºåŒä¸€ä¸ªåŸŸåå‘¢ï¼Ÿ</p>
<p>æ¯”å¦‚ä¸€ä¸ªç½‘é¡µçš„URLæ˜¯&quot;https://segmentfault.com/a/1190000011145364?aaa=666&quot;ï¼Œå¯ä»¥æŠŠå®ƒæ‹†åˆ†å¼€ï¼š<br>
origin: &quot;https://segmentfault.com&quot;<br>
pathname: &quot;/a/1190000011145364&quot;<br>
search: &quot;?aaa=666&quot;</p>
<p>åªæœ‰å½“ä¸¤ä¸ªURLçš„originå®Œå…¨ç›¸åŒæ—¶ï¼Œæ‰ä¸ä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚æ‰€ä»¥ä»¥ä¸‹originéƒ½ä¼šå‡ºç°è·¨åŸŸé—®é¢˜ï¼š<br>
å­åŸŸåï¼šhttps://abc.segmentfault.com<br>
ä¸åŒåè®®ï¼šhttp://segmentfault.com<br>
ä¸åŒç«¯å£ï¼šhttps://segmentfault.com:8080<br>
IPåœ°å€ï¼šhttps://192.168.4.12</p>
<p>å½“å‡ºç°è·¨åŸŸé—®é¢˜æ—¶ï¼ŒAJAXè¯·æ±‚è¿”å›åæµè§ˆå™¨æ§åˆ¶å°ä¼šæŠ¥é”™ï¼ŒAJAXçš„å›è°ƒæ‹¿ä¸åˆ°è¿”å›å€¼ã€‚</p>
<h2 id="ä¸¤ç§å¸¸ç”¨çš„è§£å†³æ–¹æ³•jsonpå’Œcors">ä¸¤ç§å¸¸ç”¨çš„è§£å†³æ–¹æ³•ï¼šJSONPå’ŒCORS</h2>
<h3 id="jsonp">JSONP</h3>
<p>åŸç†æ˜¯åˆ©ç”¨æµè§ˆå™¨å…è®¸è·¨åŸŸå¼•ç”¨JavaScriptèµ„æºã€‚<br>
å‘é€è¯·æ±‚æ—¶ï¼Œé€šè¿‡URLå‘Šè¯‰æœåŠ¡å™¨å‡½æ•°åï¼Œå¦‚ï¼š<code>http://some.com?callback=handle</code>.<br>
æœåŠ¡å™¨çš„é€šå¸¸æ˜¯å‡½æ•°è°ƒç”¨çš„å½¢å¼ï¼Œå¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">handle</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>é¡µé¢ä¸­éœ€è¦å…ˆå‡†å¤‡å¥½å‡½æ•°<code>handle</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="cors">CORS</h3>
<p>è¿™ä¸ªæ–¹æ¡ˆå¥½åƒä¸éœ€è¦åœ¨JSä»£ç ä¸­çš„é¢å¤–æ“ä½œã€‚å¦å¤–ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒCookieä¸åŒ…æ‹¬åœ¨CORSè¯·æ±‚ä¹‹ä¸­ï¼Œå¦‚æœéœ€è¦è¯·æ±‚ä¸­å¸¦ç€cookieï¼Œè®¾ç½®withCredentialså‚æ•°å³å¯ã€‚<br>
<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html">é˜®ä¸€å³°â€”â€”è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£</a></p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/">çŸ¥è¯†ç‚¹</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/javascript/">JavaScript</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>AJAX</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/javascript/ajax/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/javascript/ajax/</guid>
                <pubDate>Tue, 31 Mar 2020 08:20:17 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>AJAXâ€”â€”å¼‚æ­¥çš„JavaScriptå’ŒXMLï¼Œå°±æ˜¯ä½¿ç”¨<code>XMLHttpRequest</code>å¯¹è±¡ä¸æœåŠ¡å™¨é€šä¿¡ã€‚</p>
<h2 id="å‘é€httpè¯·æ±‚">å‘é€httpè¯·æ±‚</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">httpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">httpRequest</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){};</span>
<span class="nx">httpRequest</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;http://www.example.org/some.file&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">httpRequest</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><ol>
<li>åˆ›å»ºXMLHttpRequestå¯¹è±¡</li>
<li>å‘Šè¯‰å®ƒ</li>
<li>ä¸å“ªä¸ªæœåŠ¡å™¨äº¤äº’</li>
<li>ä»¥å“ªç§æ–¹æ³•äº¤äº’</li>
<li>ç»™æœåŠ¡å™¨çš„æ•°æ®</li>
</ol>
<h2 id="openæ–¹æ³•">open()æ–¹æ³•</h2>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯é€‰æ‹©äº’åŠ¨çš„ç›®æ ‡ï¼Œæ¯”å¦‚ç©æ¸¸æˆæ—¶ï¼Œä½ è¦å‘Šè¯‰æœåŠ¡å™¨æˆ‘è¦ç”¨è¿™ä¸ªè´¦å·ç©ï¼Œç”¨å¾®ä¿¡è¦å…ˆé€‰æ‹©ä¸€ä¸ªäººæ‰èƒ½å‘æ¶ˆæ¯ã€‚</p>
<p>ç”±äº<a href="/2018/06/22/cors.html">è·¨åŸŸé—®é¢˜</a>ï¼Œ<code>open()</code> æ–¹æ³•çš„ <code>URL</code> å‚æ•°é»˜è®¤*..ä¸èƒ½..*ä½¿ç”¨ç¬¬ä¸‰æ–¹åŸŸåã€‚<br>
ç¬¬ä¸€ä¸ªå‚æ•°å¦‚æœä¸å¤§å†™æŸäº›æµè§ˆå™¨å¯èƒ½æ— æ³•å¤„ç†ï¼ˆæ¯”å¦‚FireFoxï¼Œä¸çŸ¥é“å“ªäº›ç‰ˆæœ¬ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Ÿï¼‰</p>
<h2 id="sendæ–¹æ³•">send()æ–¹æ³•</h2>
<p>é€‰æ‹©äº†ç›®æ ‡åï¼Œå°±å¯ä»¥å‘æ¶ˆæ¯äº†ã€‚å‘å¾®ä¿¡æ˜¯è¯´äººç±»çš„è¯­è¨€ï¼Œè¿™ä¸ªsendæ–¹æ³•å°±æ˜¯è¯´æœºå™¨èƒ½å¬æ‡‚çš„è¯­è¨€ã€‚</p>
<h3 id="æŒ‡å®šå‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®">æŒ‡å®šå‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®</h3>
<p><code>send()</code> æ–¹æ³•çš„å‚æ•°å°±æ˜¯è¦å‘é€çš„æ•°æ®ï¼Œå°†ä¼šå‘é€åˆ°æœåŠ¡å™¨ã€‚åƒæŸ¥è¯¢è¯­å¥ï¼š<code>&quot;name=wss&amp;age=66&quot;</code>ï¼Œ<br>
æˆ–è€…å…¶ä»–æ ¼å¼, ä¾‹å¦‚multipart/form-dataï¼ŒJSONï¼ŒXMLç­‰ã€‚</p>
<h3 id="æŒ‡å®šè¿”å›æ•°æ®çš„æ ¼å¼">æŒ‡å®šè¿”å›æ•°æ®çš„æ ¼å¼</h3>
<p>æœåŠ¡åŒºæ”¶åˆ°äº†æˆ‘ä»¬çš„è¯·æ±‚åï¼Œä¼šç»™æˆ‘ä»¬ä¸€ä¸ªå“åº”ã€‚æˆ‘ä»¬è¦äº‹å…ˆå‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»¬æƒ³è¦çš„æ•°æ®çš„æ ¼å¼ã€‚</p>
<p>å½“ä»¥POSTæ–¹å¼è·å–æ•°æ®æ—¶ï¼Œéœ€è¦è®¾ç½®è¯·æ±‚çš„<em>MIMEç±»å‹</em>ã€‚</p>
<blockquote>
<p>ç”¨äºå®šä¹‰ç½‘ç»œæ–‡ä»¶çš„ç±»å‹å’Œç½‘é¡µçš„ç¼–ç ï¼Œå†³å®šæµè§ˆå™¨å°†ä»¥ä»€ä¹ˆå½¢å¼ã€ä»€ä¹ˆç¼–ç è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼‰</p>
</blockquote>
<p>æ¯”å¦‚è¡¨å•æ•°æ®ï¼š<code>httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');</code></p>
<h2 id="å¤„ç†æœåŠ¡å™¨å“åº”">å¤„ç†æœåŠ¡å™¨å“åº”</h2>
<p><code>httpRequest.onreadystatechange</code>å‡½æ•°è´Ÿè´£å¤„ç†å“åº”ï¼Œå‡½æ•°å†…åº”è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥è¯·æ±‚çš„çŠ¶æ€ã€‚</p>
<p>è¯·æ±‚çš„çŠ¶æ€ä¼šç»å†å¦‚ä¸‹å˜åŒ–ï¼šï¼ˆæ¯å½“çŠ¶æ€å˜åŒ–æ˜¯éƒ½ä¼šè°ƒç”¨onreadystatechangeæ–¹æ³•ï¼Ÿï¼‰</p>
<ul>
<li>0 (æœªåˆå§‹åŒ–) or (è¯·æ±‚è¿˜æœªåˆå§‹åŒ–) UNSENT</li>
<li>1 (æ­£åœ¨åŠ è½½) or (å·²å»ºç«‹æœåŠ¡å™¨é“¾æ¥) OPENED</li>
<li>2 (åŠ è½½æˆåŠŸ) or (è¯·æ±‚å·²æ¥å—) HEADERS_RECEIVED</li>
<li>3 (äº¤äº’) or (æ­£åœ¨å¤„ç†è¯·æ±‚) LOADING</li>
<li>4 (å®Œæˆ) or (è¯·æ±‚å·²å®Œæˆå¹¶ä¸”å“åº”å·²å‡†å¤‡å¥½) DONE</li>
</ul>
<p>ç¬¬äºŒæ­¥ï¼šè¯·æ±‚å®Œæˆæ—¶ï¼Œæ£€æŸ¥httpçŠ¶æ€ç ã€‚</p>
<p>å½“è¯·æ±‚å®Œæˆï¼Œæ„å‘³ç€å®Œæˆäº†ä¸æœåŠ¡å™¨çš„äº¤äº’ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥æ£€æŸ¥ <a href="http://www.runoob.com/http/http-status-codes.html">HTTPçŠ¶æ€ç </a> äº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">if</span> <span class="p">(</span><span class="nx">httpRequest</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="nx">XMLHttpRequest</span><span class="p">.</span><span class="nx">DONE</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Everything is good, the response was received.
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">httpRequest</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Perfect!
</span><span class="c1"></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// There was a problem with the request.
</span><span class="c1"></span>        <span class="c1">// For example, the response may have a 404 (Not Found)
</span><span class="c1"></span>        <span class="c1">// or 500 (Internal Server Error) response code.
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Not ready yet.
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>åœ¨æ£€æŸ¥å®ŒHTTPå“åº”ç åï¼Œå°±å¯ä»¥ä½¿ç”¨æœåŠ¡å™¨è¿”å›çš„æ•°æ®äº†ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•å»è®¿é—®è¿™äº›æ•°æ®ï¼š</p>
<ul>
<li><code>httpRequest.responseText</code> â€“ æœåŠ¡å™¨ä»¥æ–‡æœ¬å­—ç¬¦çš„å½¢å¼è¿”å›</li>
<li><code>httpRequest.responseXML</code> â€“ ä»¥ XMLDocument å¯¹è±¡æ–¹å¼è¿”å›ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨JavaScriptæ¥å¤„ç†
ï¼ˆè¿”å›JSONæ€ä¹ˆå¤„ç†ï¼Ÿï¼‰</li>
</ul>
<h2 id="responsetypeå±æ€§">responseTypeå±æ€§</h2>
<p>å¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ª XMLHttpRequest å¯¹è±¡çš„ responseType å±æ€§æ¥æ”¹å˜ä¸€ä¸ªä»æœåŠ¡å™¨ä¸Šè¿”å›çš„å“åº”çš„<em>æ•°æ®ç±»å‹</em><br>
æ¯”å¦‚äºŒè¿›åˆ¶æ•°æ®:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">httpRequest</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;GET&#34;</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">httpRequest</span><span class="p">.</span><span class="nx">responseType</span> <span class="o">=</span> <span class="s2">&#34;arraybuffer&#34;</span><span class="p">;</span>
<span class="nx">httpRequest</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ç›‘æµ‹è¿›åº¦">ç›‘æµ‹è¿›åº¦</h2>
<p>XMLHttpRequest æä¾›äº†å„ç§åœ¨è¯·æ±‚è¢«å¤„ç†æœŸé—´å‘ç”Ÿçš„äº‹ä»¶ä»¥ä¾›ç›‘å¬ã€‚åŒ…æ‹¬å®šæœŸè¿›åº¦é€šçŸ¥ã€é”™è¯¯é€šçŸ¥ï¼Œç­‰ç­‰ã€‚(è¿™äº›äº‹ä»¶ä¸ä¸Šé¢è¯´çš„â€œè¯·æ±‚çŠ¶æ€readyStateâ€æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;progress&#34;</span><span class="p">,</span> <span class="nx">updateProgress</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;load&#34;</span><span class="p">,</span> <span class="nx">transferComplete</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="nx">transferFailed</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;abort&#34;</span><span class="p">,</span> <span class="nx">transferCanceled</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>

<span class="c1">// å¦‚æœ lengthComputable å±æ€§çš„å€¼æ˜¯ falseï¼Œé‚£ä¹ˆæ„å‘³ç€æ€»å­—èŠ‚æ•°æ˜¯æœªçŸ¥å¹¶ä¸” total çš„å€¼ä¸ºé›¶ã€‚
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">updateProgress</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">lengthComputable</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">percentComplete</span> <span class="o">=</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">/</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">total</span><span class="p">;</span>
  <span class="p">}</span> 
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p>progress äº‹ä»¶åŒæ—¶å­˜åœ¨äºä¸‹è½½å’Œä¸Šä¼ çš„ä¼ è¾“ã€‚ä¸Šä¼ ç›¸å…³äº‹ä»¶åœ¨ XMLHttpRequest.upload å¯¹è±¡ä¸Šè¢«è§¦å‘ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">req</span><span class="p">.</span><span class="nx">upload</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;progress&#34;</span><span class="p">,</span> <span class="nx">updateProgress</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">upload</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;load&#34;</span><span class="p">,</span> <span class="nx">transferComplete</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">upload</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;error&#34;</span><span class="p">,</span> <span class="nx">transferFailed</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">upload</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;abort&#34;</span><span class="p">,</span> <span class="nx">transferCanceled</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ loadend äº‹ä»¶å¯ä»¥ä¾¦æµ‹åˆ°æ‰€æœ‰çš„ä¸‰ç§åŠ è½½ç»“æŸæ¡ä»¶ï¼ˆabortã€loadã€errorï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">req</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;loadend&#34;</span><span class="p">,</span> <span class="nx">loadEnd</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/AJAX/Getting_Started">MDN AJAX Getting Started</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data">ä½¿ç”¨JavaScriptç±»å‹æ•°ç»„æ¥å—äºŒè¿›åˆ¶æ•°æ®</a></p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/javascript/">JavaScript</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>DOM</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/dom/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/dom/</guid>
                <pubDate>Mon, 30 Mar 2020 23:25:37 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="è·å–dataset">è·å–dataset</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="o">+</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>React</title>
                <link>https://wss.cool/react.html</link>
                <guid isPermaLink="true">https://wss.cool/react.html</guid>
                <pubDate>Mon, 30 Mar 2020 23:19:26 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h2>
<p>ç”¨äºåˆå§‹åŒ– state  constructor() {}</p>
<p>ç”¨äºæ›¿æ¢ <code>componentWillReceiveProps</code> ï¼Œè¯¥å‡½æ•°ä¼šåœ¨åˆå§‹åŒ–å’Œ <code>update</code> æ—¶è¢«è°ƒç”¨ï¼Œ</p>
<p>å¦‚æœéœ€è¦å¯¹æ¯” <code>prevProps</code> éœ€è¦å•ç‹¬åœ¨ <code>state</code> ä¸­ç»´æŠ¤  <code>static getDerivedStateFromProps(nextProps, prevState) {}</code> ï¼Œå› ä¸ºè¯¥å‡½æ•°æ˜¯é™æ€å‡½æ•°ï¼Œæ‰€ä»¥å–ä¸åˆ° <code>this</code> ã€‚</p>
<p>åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶ï¼Œå¤šç”¨äºç»„ä»¶æ€§èƒ½ä¼˜åŒ–  <code>shouldComponentUpdate(nextProps, nextState) {}</code></p>
<p>ç”¨äºè·å¾—æœ€æ–°çš„ <code>DOM</code> æ•°æ®  <code>getSnapshotBeforeUpdate() {}</code></p>
<p>ä»¥ä¸‹å‡½æ•°ä¸å»ºè®®ä½¿ç”¨  <code>UNSAFE_componentWillMount() {}</code>ï¼Œ<code>UNSAFE_componentWillUpdate(nextProps, nextState) {}</code>ï¼Œ<code>UNSAFE_componentWillReceiveProps(nextProps) {}</code></p>
<h2 id="propsä¸­æ²¡æœ‰historylocationmatchwithrouterå¯ä»¥è§£å†³">propsä¸­æ²¡æœ‰history,location,matchï¼ŸwithRouterå¯ä»¥è§£å†³</h2>
<p>å¦‚æœAç»„ä»¶çš„çˆ¶ç»„ä»¶æ˜¯Routeï¼ˆreact-router-domï¼‰,Açš„propså‚æ•°ä¼šå«æœ‰history,location,matchï¼Œä½†æ˜¯Aç»„ä»¶çš„å­ç»„ä»¶Bçš„propså‚æ•°å°±ä¸åŒ…å«history,location,matchã€‚<br>
å¦‚æœæƒ³åœ¨Bç»„ä»¶ä¸­ä½¿ç”¨historyçš„APIï¼Œä½†æ˜¯æ²¡æœ‰historyå¯¹è±¡è¯¥æ€ä¹ˆåŠå‘¢ã€‚è¿™æ—¶å°±ç”¨åˆ°withRouteräº†<a href="https://reacttraining.com/react-router/web/api/withRouter">æ–‡æ¡£</a>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">withRouter</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-router&#39;</span><span class="p">;</span>
<span class="kr">class</span> <span class="nx">ShowTheLocation</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="c1">// this.propsä¸­ä¼šåŒ…å«history,location,match
</span><span class="c1"></span><span class="p">}</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">withRouter</span><span class="p">(</span><span class="nx">ShowTheLocation</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>åšå®¢æ–‡ç« åˆ†ç±»</title>
                <link>https://wss.cool/posts/%E5%8D%9A%E5%AE%A2%E5%88%86%E7%B1%BB/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%8D%9A%E5%AE%A2%E5%88%86%E7%B1%BB/</guid>
                <pubDate>Mon, 30 Mar 2020 22:49:40 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2>
<p>åˆ†ç±»ä»¥æ ‘çŠ¶å±•å¼€ï¼Œèƒ½ä½“ç°å‡ºéš¾æ˜“ç¨‹åº¦å’Œå…³ç³»ï¼Œä½“ç°å‡ºè‡ªå·±çš„çŸ¥è¯†ç»“æ„ã€‚</p>
<p>æœ€ç®€å•å’ŒåŸºç¡€çš„æ˜¯â€œapiâ€åˆ†ç±»ï¼Œå®ƒæ˜¯ä¸€äº›ç®€å•çš„è¯­æ³•ï¼Œæˆ–è€…ç®€å•çš„APIçš„ç”¨æ³•çš„æ±‡æ€»ï¼Œä»¥å‰åç«¯ã€æœåŠ¡å™¨ç­‰åˆ’åˆ†å­ç±»ï¼Œä¸‹é¢å†å±•å¼€å…·ä½“çš„è¯­è¨€ã€ç±»åº“ã€æ¡†æ¶çš„APIã€‚ä½¿ç”¨è¿™äº›APIå¯ä»¥å®Œæˆä¸€äº›ç®€å•çš„æ—¥å¸¸å·¥ä½œã€‚</p>
<p>è¿›é˜¶ä¸€ç‚¹çš„æ˜¯â€œçŸ¥è¯†ç‚¹â€åˆ†ç±»ï¼Œå®ƒæ˜¯åœ¨APIçš„èƒŒåçš„å·¥ä½œåŸç†ã€‚æŒæ¡åŸç†å¯ä»¥è®©å·¥ä½œä¸­å°‘è¸©å‘ã€‚å·¥ä½œåŸç†ä¹Ÿå¯ä»¥åœ¨æ¡†æ¶ä¹‹é—´ï¼Œåœ¨è¯­è¨€ä¹‹é—´è¿ç§»ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªåˆ†ç±»æ˜¯â€œæŠ˜è…¾â€ï¼Œå®ƒæ˜¯ç”±ä¸€äº›åˆ—çš„APIã€çŸ¥è¯†ç‚¹ç»è¿‡ä¸€äº›æ­¥éª¤ç»„åˆè€Œæˆï¼Œä¸€èˆ¬æ˜¯ä¸ºäº†è§£å†³é—®é¢˜ã€‚</p>
<blockquote>
<p>æŠ˜è…¾è¿™ä¸ªåå­—ä¸å¤§å¥½ï¼Œå«â€œå®è·µâ€ï¼Ÿ</p>
</blockquote>
<p>å†ç„¶åå°±æ˜¯â€œå¿ƒå¾—ä¸ç»éªŒâ€åˆ†ç±»ï¼ŒæŠ˜è…¾å®è·µå¤šäº†ï¼Œè‚¯å®šä¼šæœ‰å¥½çš„ç»éªŒå’Œåçš„æ•™è®­ï¼Œå°±éœ€è¦æ€è€ƒæ€»ç»“ï¼ŒæŠŠå®ƒä»¬æ²‰æ·€ä¸ºç»éªŒå’Œå¥—è·¯ã€‚</p>
<h2 id="åˆ†ç±»">åˆ†ç±»</h2>
<ul>
<li>api ï¼ˆç®€å•çš„APIæ“ä½œçš„è®°å½•ï¼‰
<ul>
<li>å‰ç«¯
<ul>
<li>css</li>
<li>react</li>
<li>axios</li>
</ul>
</li>
<li>åç«¯
<ul>
<li>java hashmap ä½¿ç”¨</li>
<li>spring security</li>
<li>Spring mvc</li>
<li>Spring oauth2</li>
</ul>
</li>
<li>æœåŠ¡å™¨
<ul>
<li>nginx
<ul>
<li>é™æ€ç½‘ç«™</li>
<li>åå‘ä»£ç†</li>
</ul>
</li>
<li>linux
<ul>
<li>ä½¿ç”¨æºç å®‰è£…è½¯ä»¶</li>
<li>ssh ç™»å½•ï¼ŒæŒ‡å®šç§é’¥æ–‡ä»¶ï¼ˆè¯ä¹¦ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>å·¥å…·
<ul>
<li>git</li>
</ul>
</li>
</ul>
</li>
<li>çŸ¥è¯†ç‚¹ ï¼ˆæŠ€æœ¯åŸç†ï¼‰
<ul>
<li>react
<ul>
<li>diff</li>
<li>å…ƒç´ </li>
<li>virtual dom</li>
<li>hooks</li>
<li>ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
</li>
<li>nginx
<ul>
<li>è´Ÿè½½å‡è¡¡</li>
</ul>
</li>
<li>java
<ul>
<li>hashmapåŸç†</li>
</ul>
</li>
</ul>
</li>
<li>æŠ˜è…¾ï¼ˆéœ€è¦è‹¥å¹²æ­¥éª¤ã€è‹¥å¹²çŸ¥è¯†ç‚¹ã€è‹¥å¹²APIæ“ä½œç»„åˆè€Œè§£å†³é—®é¢˜ï¼‰
<ul>
<li>åšå®¢æ”¯æŒæœåŠ¡</li>
<li>gitlabçš„ci</li>
</ul>
</li>
<li>å¿ƒå¾—ä¸ç»éªŒï¼ˆç»å†äº†ä¸€äº›äº‹æƒ…åçš„æƒ³æ³•ï¼Œæ€»ç»“è§„å¾‹ï¼Œæ€è€ƒç»“æœã€‚æ€æƒ³æ´»åŠ¨ï¼‰
<ul>
<li>å¦‚ä½•æ”¹bug</li>
<li>è€æ¿è¯„ä»·å‘˜å·¥çš„é€»è¾‘</li>
<li>å¦‚ä½•åº”ä»˜éœ€æ±‚å˜åŠ¨</li>
<li>å¦‚ä½•å†™å‡ºå¥½çš„ä»£ç </li>
<li>å¦‚ä½•å°‘åŠ ç­</li>
<li>é¢è¯•æ—¶æ€»æ˜¯æ²¡ä»€ä¹ˆèŠçš„æ€ä¹ˆåŠï¼Ÿ</li>
</ul>
</li>
<li>å…¶ä»–</li>
</ul>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%85%B6%E4%BB%96/">å…¶ä»–</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>css</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/css/css/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/css/css/</guid>
                <pubDate>Sun, 29 Mar 2020 22:10:30 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="å±…ä¸­">å±…ä¸­</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css">  <span class="nt">top</span><span class="p">:</span><span class="nd">50</span><span class="o">%;</span>
  <span class="nt">left</span><span class="p">:</span><span class="nd">50</span><span class="o">%;</span>
  <span class="nt">transform</span><span class="o">:</span> <span class="nt">translate</span><span class="o">(</span><span class="nt">-50</span><span class="o">%,</span> <span class="nt">-50</span><span class="o">%);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="flex">Flex</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">class</span><span class="p">{</span>
  <span class="k">display</span><span class="p">:</span><span class="kc">flex</span><span class="p">;</span>
  <span class="k">justify-content</span><span class="p">:</span><span class="kc">flex</span><span class="o">-</span><span class="kc">start</span><span class="p">;</span>
  <span class="k">align-items</span><span class="p">:</span><span class="kc">center</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ç®€æ˜“é•‚ç©ºæ•ˆæœ">ç®€æ˜“é•‚ç©ºæ•ˆæœ</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">outline</span><span class="o">:</span>  <span class="nt">9999px</span> <span class="nt">solid</span> <span class="nt">rgba</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span><span class="nt">0</span><span class="o">,</span><span class="nt">0</span><span class="o">,</span><span class="p">.</span><span class="nc">76</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å¤šè¡Œæ–‡å­—è‹±æ–‡æ•°å­—æ¢è¡Œé™åˆ¶è¡Œæ•°">å¤šè¡Œæ–‡å­—ï¼ˆè‹±æ–‡ã€æ•°å­—æ¢è¡Œã€é™åˆ¶è¡Œæ•°ï¼‰</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css">  <span class="nt">overflow</span><span class="o">:</span> <span class="nt">hidden</span><span class="o">;</span>
  <span class="nt">text-overflow</span><span class="p">:</span><span class="nd">ellipsis</span><span class="o">;</span>
  <span class="nt">white-space</span><span class="o">:</span> <span class="nt">nowrap</span><span class="o">;</span>
  <span class="nt">word-wrap</span><span class="p">:</span><span class="nd">break-word</span><span class="o">;</span>
  <span class="nt">word-break</span><span class="p">:</span><span class="nd">break-all</span><span class="o">;</span>

  <span class="nt">display</span><span class="p">:</span><span class="nd">-webkit-box</span><span class="o">;</span>
  <span class="nt">-webkit-box-orient</span><span class="p">:</span><span class="nd">vertical</span><span class="o">;</span>
  <span class="nt">-webkit-line-clamp</span><span class="p">:</span><span class="nd">2</span><span class="o">;</span>
  <span class="nt">overflow</span><span class="p">:</span><span class="nd">hidden</span><span class="o">;</span>
  <span class="nt">word-wrap</span><span class="p">:</span><span class="nd">break-word</span><span class="o">;</span>
  <span class="nt">word-break</span><span class="p">:</span><span class="nd">break-all</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="flexå¸ƒå±€æ—¶ä½¿å­å…ƒç´ ä¸è¢«ç¼©æ”¾">flexå¸ƒå±€æ—¶ä½¿å­å…ƒç´ ä¸è¢«ç¼©æ”¾</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css">  <span class="nt">flex-grow</span><span class="o">:</span> <span class="nt">0</span><span class="o">;</span>
  <span class="nt">flex-shrink</span><span class="p">:</span><span class="nd">0</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="iosæ»šåŠ¨ä¸æµç•…">iosæ»šåŠ¨ä¸æµç•…</h2>
<pre><code>-webkit-overflow-scrolling : touch; 
</code></pre><h2 id="placeholderçš„æ ·å¼">placeholderçš„æ ·å¼</h2>
<pre><code>.className::-webkit-input-placeholder {
  color: #B7B7B7;
}
</code></pre><h2 id="æ¸å˜è‰²">æ¸å˜è‰²</h2>
<p>å„ä¸ªå‚æ•°çš„å«ä¹‰ï¼š<code>linear-gradient(æ–¹å‘, å¼€å§‹é¢œè‰² å¤§å°, ç»“æŸé¢œè‰² å¤§å°);</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">node</span> <span class="p">{</span>
    <span class="k">background-image</span><span class="p">:</span> <span class="nb">linear-gradient</span><span class="p">(</span><span class="kc">to</span> <span class="kc">right</span><span class="p">,</span> <span class="mh">#000</span> <span class="mi">1</span><span class="kt">px</span><span class="p">,</span> <span class="kc">transparent</span> <span class="mi">0</span><span class="kt">px</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ä½¿ç”¨cssç”»ä¸è§„åˆ™è¾¹æ¡†">ä½¿ç”¨cssç”»ä¸è§„åˆ™è¾¹æ¡†</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">node</span> <span class="p">{</span>
    <span class="k">background-image</span><span class="p">:</span> <span class="nb">linear-gradient</span><span class="p">(</span><span class="kc">to</span> <span class="kc">right</span><span class="p">,</span> <span class="mh">#000</span> <span class="mi">1</span><span class="kt">px</span><span class="p">,</span> <span class="kc">transparent</span> <span class="mi">0</span><span class="kt">px</span><span class="p">);</span>
    <span class="k">background-size</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
    <span class="n">background-position-y</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
    <span class="k">background-repeat</span><span class="p">:</span> <span class="kc">no-repeat</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™æ®µæ ·å¼å¯ä»¥ç”»åŠä¸ªå·¦è¾¹æ¡†ã€‚å…¶ä¸­ç”¨åˆ°äº†æ¸å˜è‰²å±æ€§ã€‚</p>
<h2 id="æ¸å˜è‰²æ–‡å­—">æ¸å˜è‰²æ–‡å­—</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">text</span><span class="p">{</span>
  <span class="k">background-image</span><span class="p">:</span> <span class="kp">-webkit-</span><span class="nf">gradient</span><span class="p">(</span><span class="kc">linear</span><span class="p">,</span><span class="mi">0</span><span class="kt">%</span> <span class="mi">0</span><span class="kt">%</span><span class="p">,</span><span class="mi">25</span><span class="kt">%</span> <span class="mi">100</span><span class="kt">%</span><span class="p">,</span><span class="nf">from</span><span class="p">(</span><span class="mh">#ff2c2c</span><span class="p">),</span><span class="nf">to</span><span class="p">(</span><span class="mh">#7a5e91</span><span class="p">));</span>
  <span class="kp">-webkit-</span><span class="k">background-clip</span><span class="p">:</span> <span class="kc">text</span><span class="p">;</span>
  <span class="kp">-webkit-</span><span class="n">text-fill-color</span><span class="p">:</span> <span class="kc">transparent</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">span</span> <span class="p">{</span>
  <span class="k">background</span><span class="p">:</span> <span class="nb">linear-gradient</span><span class="p">(</span><span class="kc">to</span> <span class="kc">right</span><span class="p">,</span> <span class="kc">red</span><span class="p">,</span> <span class="kc">blue</span><span class="p">);</span>
  <span class="kp">-webkit-</span><span class="k">background-clip</span><span class="p">:</span> <span class="kc">text</span><span class="p">;</span>
  <span class="k">color</span><span class="p">:</span> <span class="kc">transparent</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ios-é˜´å½±-input-textarea">IOS é˜´å½± input textarea</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">input</span><span class="o">,</span><span class="nt">textarea</span><span class="p">{</span>
	<span class="kp">-webkit-</span><span class="k">appearance</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="marginå¡Œé™·">marginå¡Œé™·</h2>
<p>åœ¨æ ‡å‡†æ–‡æ¡£æµä¸­ï¼Œç«–ç›´æ–¹å‘çš„marginä¼šå‡ºç°å åŠ ç°è±¡ï¼Œå³è¾ƒå¤§çš„marginä¼šè¦†ç›–æ‰è¾ƒå°çš„marginï¼Œç«–ç›´æ–¹å‘çš„ä¸¤ä¸ªç›’å­ä¸­é—´åªæœ‰ä¸€ä¸ªè¾ƒå¤§çš„marginï¼Œè¿™å°±æ˜¯marginçš„å¡Œé™·ç°è±¡ã€‚<br>
marginçš„å¡Œé™·ç°è±¡åˆ†ä¸¤ç§æƒ…å†µï¼š
1.å…„å¼Ÿå…³ç³»çš„ç›’å­ï¼š
æ¯”å¦‚ulçš„liï¼Œç›¸é‚»çš„liä¹‹é—´çš„marginä¼šé‡å å–è¾ƒå¤§çš„ä¸€ä¸ª;
2.çˆ¶å­å…³ç³»çš„ç›’å­ã€‚
å­ç›’å­çš„margin-topå¤§äºçˆ¶ç›’å­æ—¶ï¼Œå­çš„margin-topä¼šè¦†ç›–çˆ¶çš„ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼š<br>
å½“ç»™çˆ¶ç›’å­è®¾ç½®è¾¹æ¡†æˆ–paddingæ—¶ï¼Œä¸ä¼šå‡ºç°çˆ¶å­ç›’å­çš„å¡Œé™·ç°è±¡ã€‚<br>
å½“çˆ¶ç›’å­è®¾ç½®display:flex;æ—¶ï¼Œä¸ä¼šå‡ºç°è¿™2ç§åå¡Œç°è±¡ã€‚</p>
<h2 id="ç›’å­æ¨¡å‹">ç›’å­æ¨¡å‹</h2>
<h2 id="æ¸…é™¤æµ®åŠ¨">æ¸…é™¤æµ®åŠ¨</h2>
<h2 id="cssä¼˜å…ˆçº§">cssä¼˜å…ˆçº§</h2>
<p>!importantæœ€é«˜
è¡Œå†…styleå±æ€§ &gt; å†…è”styleæ ‡ç­¾ &gt; å¤–è”cssæ–‡ä»¶
id &gt; class &gt; tag
è®¡ç®—ï¼š
è¡Œå†…styleå±æ€§ = 1000
IDé€‰æ‹©å™¨ = 100
ç±»é€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨ã€ä¼ªç±» = 10
å…ƒç´ /ä¼ªå…ƒç´  = 1
*é€šé…é€‰æ‹©å™¨ = 0</p>
<h2 id="ä¼ªç±»ä¼ªå…ƒç´ ">ä¼ªç±»&amp;ä¼ªå…ƒç´ </h2>
<p>ä¼ªå…ƒç´ ï¼š
::before
::after
::placeholder
::first-line
ä¼ªç±»ï¼š
:first-child
:nth-child
:empty</p>
<h2 id="inline-blockå…ƒç´ æœ‰é—´éš™">inline-blockå…ƒç´ æœ‰é—´éš™</h2>
<p>è§£å†³æ–¹æ³•ï¼šåœ¨è¿™äº›inline-blockå…ƒç´ çš„çˆ¶å…ƒç´ è®¾ç½®æ ·å¼â€”â€”fontsizeï¼š0ï¼›</p>
<h2 id="å±…ä¸­-1">å±…ä¸­</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">#</span><span class="nn">wrapper</span> <span class="p">{</span>
  <span class="k">display</span><span class="p">:</span> <span class="kc">table</span><span class="p">;</span>
  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">#</span><span class="nn">centred</span> <span class="p">{</span>
  <span class="k">display</span><span class="p">:</span> <span class="kc">table</span><span class="o">-</span><span class="kc">cell</span><span class="p">;</span>
  <span class="k">vertical-align</span><span class="p">:</span> <span class="kc">middle</span><span class="p">;</span>
  <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
<span class="p">}</span>  
</code></pre></td></tr></table>
</div>
</div><h2 id="å·¦å³å¯¹é½æ–‡å­—">å·¦å³å¯¹é½æ–‡å­—ï¼š</h2>
<pre><code>.a{
    width:596px;
    text-align:justify;
    text-align-last:justify;  
}
</code></pre><h2 id="å›ºå®šä½ç½®æ˜¾ç¤ºèƒŒæ™¯å›¾ç‰‡">å›ºå®šä½ç½®æ˜¾ç¤ºèƒŒæ™¯å›¾ç‰‡</h2>
<p>background-attachment: fixed;</p>
<h2 id="cssæ»¤é•œ">cssæ»¤é•œ</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">filter</span><span class="o">:</span> <span class="nt">grayscale</span><span class="o">(</span><span class="nt">100</span><span class="o">%);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="sassç»§æ‰¿">sassç»§æ‰¿</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="nc">.error</span> <span class="p">{</span>
  <span class="nt">border</span><span class="nd">:</span> <span class="nt">1px</span> <span class="nn">#f00</span><span class="p">;</span>
  <span class="nt">background-color</span><span class="nd">:</span> <span class="nn">#fdd</span><span class="p">;</span>

  <span class="k">&amp;</span><span class="nt">--serious</span> <span class="p">{</span>
    <span class="k">@extend</span> <span class="nc">.error</span><span class="p">;</span>
    <span class="nt">border-width</span><span class="nd">:</span> <span class="nt">3px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/css/">CSS</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>vscode</title>
                <link>https://wss.cool/vscode.html</link>
                <guid isPermaLink="true">https://wss.cool/vscode.html</guid>
                <pubDate>Sat, 28 Mar 2020 05:02:40 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="gitè‡ªåŠ¨åˆ·æ–°">Gitè‡ªåŠ¨åˆ·æ–°</h2>
<p>git æ’ä»¶ä¼šä¸åœçš„åˆ·æ–°æ–‡ä»¶çš„çŠ¶æ€ï¼Œé—´éš”å¤§æ¦‚5ç§’ã€‚å¯ä»¥åœ¨è®¾ç½®ä¸­å…³æ‰å®ƒã€‚</p>
<pre><code>Autorefresh
æ˜¯å¦å¯ç”¨è‡ªåŠ¨åˆ·æ–°ã€‚
</code></pre><h2 id="debugger-for-chrome">debugger for chrome</h2>
<p>å½“ä½¿ç”¨parcelæ—¶ï¼Œå®é™…å¼•ç”¨jsæ–‡ä»¶ä¼šå¸¦æœ‰hashï¼Œè€Œç¼–è¾‘å™¨ä¸­çš„æ–‡ä»¶æ²¡æœ‰hashï¼Œå¯¼è‡´æ’ä»¶è®¤ä¸ºjsæ–‡ä»¶æ²¡æœ‰è¢«æŒ‚è½½ï¼Œæ–­ç‚¹ä¹Ÿå°±æ— æ•ˆäº†ã€‚<br>
æŒ‰ç…§å¦‚ä¸‹è°ƒæ•´launch.jsonï¼Œå¯è§£å†³æ­¤é—®é¢˜ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;sourceMapPathOverrides&#34;</span><span class="err">:</span> <span class="p">{</span>
	<span class="nt">&#34;../*&#34;</span><span class="p">:</span> <span class="s2">&#34;${webRoot}/*&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>hugoå¸¸ç”¨æ ¼å¼</title>
                <link>https://wss.cool/hugo%E5%B8%B8%E7%94%A8%E6%A0%BC%E5%BC%8F.html</link>
                <guid isPermaLink="true">https://wss.cool/hugo%E5%B8%B8%E7%94%A8%E6%A0%BC%E5%BC%8F.html</guid>
                <pubDate>Sat, 28 Mar 2020 02:52:52 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="è‡ªå®šä¹‰shortcodes">è‡ªå®šä¹‰shortcodes</h2>
<pre><code><span>{</span>{< tag nihao >}}</code></pre>
<p><strong>æ•ˆæœ</strong>â¬‡ï¸</p>
<span class="shortcodes_tag">nihao</span>
<h2 id="å›¾ç‰‡">å›¾ç‰‡</h2>
<p>ä¸‹é¢å¼•å·å†…çš„æ–‡å­—æ˜¯å¯ä»¥ä¸åŠ çš„ï¼ŒåŠ äº†çš„è¯ï¼Œä¼šæ˜¾ç¤ºåœ¨å›¾ç‰‡ä¸‹æ–¹ï¼Œä½œä¸ºè¯´æ˜æ–‡å­—ã€‚</p>
<pre><code>![alt](/images/xx.png &quot;è¯´æ˜æ–‡å­—&quot;)
</code></pre><p><strong>æ•ˆæœ</strong>â¬‡ï¸
<img src="/images/hugo01.jpg" alt="52åŒº" title="å¤–åŸŸ52åŒº"></p>
<h2 id="å¼•ç”¨-reference">å¼•ç”¨ reference</h2>
<p>å¼•ç”¨å›¾ç‰‡ã€ç½‘å€ç­‰ï¼Œåœ¨å†…å®¹å‡ºæ ‡å‡ºã€‚åœ¨æ–‡ç« æœ€ååˆ—å‡ºæ‰€æœ‰å¼•ç”¨ã€‚å¼•ç”¨å’Œæ ‡è®°å¯ä»¥äº’ç›¸è·³è½¬ã€‚</p>
<pre><code>æŸæ–‡ç« [^1]è¯´åˆ°æŸæŠ€æœ¯éå¸¸å‰å®³

[^1]: https://github.com/wangshushuo/abc.html
</code></pre><p><strong>æ•ˆæœ</strong>â¬‡ï¸</p>
<p>æŸæ–‡ç« <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>è¯´åˆ°æŸæŠ€æœ¯éå¸¸å‰å®³</p>
<h2 id="é“¾æ¥">é“¾æ¥</h2>
<p><strong>ç¬¬ä¸€ç§ï¼šè¡Œå†…</strong></p>
<p><strong>æ•ˆæœ</strong>â¬‡ï¸</p>
<pre><code>[é“¾æ¥çš„æ–‡å­—](https://www.wss.cool)
</code></pre><p><a href="https://wss.cool">é“¾æ¥çš„æ–‡å­—</a></p>
<p><strong>ç¬¬äºŒç§ï¼šç®€å†™</strong></p>
<pre><code>[é“¾æ¥çš„æ–‡å­—][a1]

[a1]: https://wss.cool
</code></pre><p><strong>æ•ˆæœ</strong>â¬‡ï¸</p>
<p><a href="https://wss.cool">é“¾æ¥çš„æ–‡å­—</a></p>
<h2 id="è¡¨æ ¼">è¡¨æ ¼</h2>
<pre><code>æ“ä½œ | ä»£ç  
:---:|:---:
æš‚å­˜ | git stash
åˆ—è¡¨ | git stash list
å–å‡º | git stash pop 1
</code></pre><pre><code>:---: è¡¨ç¤ºæ–‡å­—å±…ä¸­
:---  å±…å·¦
---:  å±€å³ï¼Œ
</code></pre><p><strong>æ•ˆæœ</strong>â¬‡ï¸</p>
<table>
<thead>
<tr>
<th align="center">æ“ä½œ</th>
<th align="center">ä»£ç </th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">æš‚å­˜</td>
<td align="center">git stash</td>
</tr>
<tr>
<td align="center">åˆ—è¡¨</td>
<td align="center">git stash list</td>
</tr>
<tr>
<td align="center">å–å‡º</td>
<td align="center">git stash pop 1</td>
</tr>
</tbody>
</table>
<h2 id="è¡Œå†…ä»£ç ">è¡Œå†…ä»£ç </h2>
<p>è¿™æ˜¯ä¸€æ®µä»£ç  <code>a = b + c</code> å®ƒæ˜¯è¿™æ ·çš„ã€‚</p>
<hr>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><a href="https://github.com/wangshushuo/abc.html">https://github.com/wangshushuo/abc.html</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%85%B6%E4%BB%96/">å…¶ä»–</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>ä»£ç å¤§å…¨</title>
                <link>https://wss.cool/%E4%BB%A3%E7%A0%81%E5%A4%A7%E5%85%A8.html</link>
                <guid isPermaLink="true">https://wss.cool/%E4%BB%A3%E7%A0%81%E5%A4%A7%E5%85%A8.html</guid>
                <pubDate>Thu, 26 Mar 2020 10:37:50 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>è¿™æœ¬ä¹¦çš„åŸåæ˜¯ã€ŠCode Completeã€‹ï¼ŒæŒ‡çš„æ˜¯è½¯ä»¶é¡¹ç›®ä¸­çš„â€œæ„å»ºâ€è¿™ä¸ªæ­¥ã€‚</p>
<blockquote>
<p>éœ€æ±‚è®¾è®¡ï¼Œæ¶æ„è®¾è®¡ï¼Œæ„å»ºï¼ˆå†™ä»£ç ï¼‰ï¼Œæµ‹è¯•ï¼Œå‘å¸ƒã€‚</p>
</blockquote>
<p>å†…å®¹çš„ä¸»è¦æ˜¯å¦‚ä½•æŠŠä»£ç å†™å¥½ï¼Œå¯ä»¥åº”å¯¹éœ€æ±‚å˜åŠ¨ï¼Œç®¡ç†å¤æ‚åº¦ç­‰ç­‰ã€‚</p>
<h1 id="ä»ç›®å½•çœ‹ä¹¦çš„ç»“æ„">ä»ç›®å½•çœ‹ä¹¦çš„ç»“æ„</h1>
<p>ç›®å½•ä¸ŠæŠŠä¹¦åˆ†æˆäº†7ä¸ªéƒ¨åˆ†</p>
<ol>
<li>æ‰“å¥½æ„å»ºçš„åŸºç¡€</li>
<li>é«˜è´¨é‡çš„ä»£ç </li>
<li>å˜é‡</li>
<li>è¯­å¥</li>
<li>æ”¹å–„ä»£ç </li>
<li>ç³»ç»Ÿè€ƒè™‘</li>
<li>è½¯ä»¶å·¥è‰º</li>
</ol>
<p>é¦–å…ˆï¼Œè¦åœ¨æ„å»ºå‰æ‰“å¥½åŸºç¡€ã€‚æ„å»ºè¿‡ç¨‹çš„ç›®æ ‡ä¹‹ä¸€å°±æ˜¯é«˜è´¨é‡çš„ä»£ç ã€‚æ›´è¿›ä¸€æ­¥ï¼Œä»¥é«˜è´¨é‡çš„ä»£ç ä¸ºå‰æï¼Œå¦‚ä½•å†™å¥½å˜é‡å’Œè¯­å¥ã€‚ä¸è®ºæ˜¯æ–°ä»£ç çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯å·²æœ‰ä»£ç çš„æ”¹é€ ï¼Œæˆ–è€…æ˜¯ä¿®å¤bugï¼Œéƒ½ä¼šæ¶‰åŠåˆ°å¯¹å·²æœ‰ä»£ç çš„æ”¹å–„ã€‚æœ€åæ˜¯ä¸€äº›æ›´é«˜è§’åº¦çš„è€ƒè™‘ã€‚</p>
<p>ç¬¬äºŒä¸‰å››éƒ¨åˆ†æ˜¯è¯´å¦‚ä½•å†™å‡ºé«˜è´¨é‡çš„ä»£ç ï¼Œ</p>
<blockquote>
<p>è¿™æœ¬ä¹¦ä¸»è¦æ˜¯è¯´å¦‚ä½•æŠŠä»£ç å†™å¥½ã€‚è¿™ä»¶äº‹çš„æ„ä¹‰åœ¨äºï¼Œé«˜è´¨é‡çš„ä»£ç ï¼Œèƒ½ä½¿ç»´æŠ¤å¼€å‘æˆæœ¬å˜ä½ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¿«é€Ÿçš„å“åº”æ–°çš„éœ€æ±‚ã€‚å¦‚æœä»£ç è´¨é‡ä½ï¼Œå¯èƒ½ä¼šè®©ç»´æŠ¤æˆæœ¬å¾ˆé«˜ï¼Œç”šè‡³é™åˆ¶å…¬å¸çš„å‘å±•ã€‚
å¯¹è‡ªå·±æ¥è¯´ï¼Œé«˜è´¨é‡çš„ä»£ç æ˜¯æ˜“äºç»´æŠ¤çš„ï¼Œå¯ä»¥è¾ƒå°‘åŠ ç­çš„æ—¶é—´ã€‚å°±ç®—æ˜¯996ä¹Ÿå¯ä»¥æœ‰æ›´å¤šçš„æ—¶é—´åšåˆ«çš„äº‹ï¼Œæ¯”å¦‚åˆ·ç®—æ³•é¢˜ã€å­¦å…¶ä»–æŠ€æœ¯ã€‚
åŒæ—¶ä¹Ÿæ˜¯è®­ç»ƒè‡ªå·±çš„ç¼–ç¨‹æ€ç»´ï¼Œé«˜è´¨é‡çš„ä»£ç çš„æ€ç»´å¯èƒ½ä¹Ÿé€‚ç”¨äºæ¶æ„ã€‚é«˜è´¨é‡ä»£ç å¾—å¿ƒåº”æ‰‹ä¹‹åï¼Œå†æ€è€ƒå’Œå­¦ä¹ æ¶æ„ã€‚
ä¸ç®¡å“ªç§è¯­è¨€å“ªç§æŠ€æœ¯çš„ç¨‹åºå‘˜ï¼Œéƒ½åº”è¯¥æŠŠè¿™æœ¬ä¹¦ä½œä¸ºä¸€ä¸ªæ‰‹å†Œå¸¸æ”¾åœ¨èº«è¾¹ï¼Œç»å¸¸çš„ç¿»é˜…ã€‚
åœ¨ç¨‹åºå‘˜å·¥ä½œçš„å¤´å‡ å¹´ï¼Œåœ¨å­¦ä¹ å’Œå®è·µæŠ€æœ¯çš„åŒæ—¶ï¼Œä¹Ÿä¸æ–­å­¦ä¹ è¿™æœ¬ä¹¦æ¥æé«˜èƒ½åŠ›ã€‚éšç€æŠ€æœ¯å’Œèƒ½åŠ›çš„ä¸æ–­å®Œå–„å’Œæé«˜ï¼Œé€æ¸å½¢æˆæ¶æ„çš„æ„è¯†ã€‚</p>
</blockquote>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%BF%83%E5%BE%97%E4%B8%8E%E7%BB%8F%E9%AA%8C/">å¿ƒå¾—ä¸ç»éªŒ</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>React ç»„ä»¶æ‰“åŒ…ä¸º library</title>
                <link>https://wss.cool/react-component-be-libiary.html</link>
                <guid isPermaLink="true">https://wss.cool/react-component-be-libiary.html</guid>
                <pubDate>Thu, 27 Feb 2020 12:10:28 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>åœ¨å¼€å‘å¤šä¸ªé¡¹ç›®æ—¶ï¼Œä¸ºäº†æåˆ°ä»£ç çš„å¤ç”¨ï¼Œå°†ä¸€ä¸ª <code>React</code> ç»„ä»¶å‘ä¸æˆä¸€ä¸ªç‹¬ç«‹çš„ <code>npm</code> åŒ…æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹å¼ã€‚</p>
<p>è¿™é‡Œå‚è€ƒ <code>reactjs-popup</code> è¿™ä¸ªåº“ã€‚å®ƒçš„ç¼–è¯‘æ²¡æœ‰ä½¿ç”¨webpackç­‰æ‰“åŒ…å·¥å…·ï¼Œå®ƒæ˜¯ä½¿ç”¨ <code>bili</code> å’Œ <code>babel</code> è¿™ä¸¤ä¸ªåº“å’Œè‡ªå·±å†™çš„è„šæœ¬ <code>build.js</code> æ–‡ä»¶è¿›è¡Œçš„ç¼–è¯‘å’Œæ‰“åŒ…ã€‚ä¸‹é¢æ˜¯ <code>build.js</code> æ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">del</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;del&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">Bili</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;bili&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">pkg</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./package.json&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">input</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">outDir</span><span class="o">:</span> <span class="s1">&#39;lib&#39;</span><span class="p">,</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;reactjs-popup&#39;</span><span class="p">,</span>
  <span class="nx">format</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;es&#39;</span><span class="p">,</span> <span class="s1">&#39;cjs&#39;</span><span class="p">,</span> <span class="s1">&#39;umd&#39;</span><span class="p">,</span> <span class="s1">&#39;umd-min&#39;</span><span class="p">],</span>
  <span class="nx">banner</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;browser&#39;</span><span class="p">,</span>
  <span class="nx">external</span><span class="o">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">pkg</span><span class="p">.</span><span class="nx">peerDependencies</span><span class="p">),</span>
<span class="p">};</span>

<span class="c1">// some confuse between babel config for parcel that use v6 and Bili that&#39;s use V7
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">babelBiliConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">presets</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">modules</span><span class="o">:</span> <span class="kc">false</span><span class="p">}],</span> <span class="s1">&#39;@babel/preset-react&#39;</span><span class="p">],</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;@babel/plugin-proposal-class-properties&#39;</span><span class="p">],</span>
<span class="p">};</span>
<span class="kr">const</span> <span class="nx">babelParcelConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">[</span>
      <span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="nx">targets</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">node</span><span class="o">:</span> <span class="s1">&#39;current&#39;</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">],</span>
    <span class="s1">&#39;@babel/preset-react&#39;</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;@babel/plugin-proposal-class-properties&#39;</span><span class="p">],</span>
<span class="p">};</span>

<span class="c1">// Copy package.json, LICENSE,README and npmignore files
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">writePackageFiles</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">delete</span> <span class="nx">pkg</span><span class="p">.</span><span class="nx">devDependencies</span><span class="p">;</span>
  <span class="k">delete</span> <span class="nx">pkg</span><span class="p">.</span><span class="nx">scripts</span><span class="p">;</span>

  <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
    <span class="s1">&#39;./lib/package.json&#39;</span><span class="p">,</span>
    <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">pkg</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span><span class="p">),</span>
    <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
  <span class="p">);</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
    <span class="s1">&#39;./lib/LICENSE&#39;</span><span class="p">,</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;LICENSE&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
    <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
  <span class="p">);</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
    <span class="s1">&#39;./lib/README.md&#39;</span><span class="p">,</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;README.md&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
    <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
  <span class="p">);</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
    <span class="s1">&#39;lib/.npmignore&#39;</span><span class="p">,</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;.npmignore&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
    <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
  <span class="p">);</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
    <span class="s1">&#39;./lib/index.d.ts&#39;</span><span class="p">,</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;src/index.d.ts&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
    <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="c1">// and use babel config V7
</span><span class="c1">// Clean up the output directory
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">Build</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Delete old build Folder ....&#39;</span><span class="p">);</span>
  <span class="nx">del</span><span class="p">([</span><span class="s1">&#39;lib/*&#39;</span><span class="p">]).</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
      <span class="s1">&#39;./.babelrc&#39;</span><span class="p">,</span>
      <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">babelBiliConfig</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span><span class="p">),</span>
      <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
    <span class="p">);</span>
    <span class="nx">Bili</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
        <span class="s1">&#39;./.babelrc&#39;</span><span class="p">,</span>
        <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">babelParcelConfig</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span><span class="p">),</span>
        <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
      <span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">writePackageFiles</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
<span class="nx">promise</span> <span class="o">=</span> <span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">Build</span><span class="p">);</span>

<span class="c1">// catch errors
</span><span class="c1"></span><span class="nx">promise</span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">));</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="æ‰“åŒ…å’Œä½¿ç”¨">æ‰“åŒ…å’Œä½¿ç”¨</h2>
<ol>
<li>å¤åˆ¶äº†ä¸€ä»½è¿™ä¸ªé¡¹ç›®</li>
<li>ä¿®æ”¹ <code>package.json</code> ã€ <code>build.js</code> å’Œç»„ä»¶çš„ä»£ç </li>
<li>æˆ‘çš„ç»„ä»¶å«åš <code>Test</code> åŒ…å«åš <code>react-test-comp</code></li>
<li>ç”¨å®ƒçš„æ–¹å¼æ‰“åŒ…</li>
<li>ä¸Šä¼ é¡¹ç›®åˆ° git ä»“åº“</li>
<li>åœ¨é¡¹ç›®ä¸­å®‰è£…ä¾èµ–
<pre><code>yarn add git+https://xxx.xxx/react-test-comp.git
</code></pre></li>
<li>åœ¨ä»£ç ä¸­ä½¿ç”¨
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">Test</span> <span class="nx">from</span> <span class="s1">&#39;react-test-comp/lib&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Test</span> <span class="nx">text</span><span class="o">=</span><span class="s2">&#34;wangshushuo&#34;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>æœ‰ä¸€ä¸ªç‚¹éœ€è¦æ³¨æ„ã€‚ä» <code>git</code> å’Œ <code>npm</code> å®‰è£…ä¾èµ–æ˜¯æœ‰åŒºåˆ«çš„. <code>git</code> ä»“åº“çš„æ‰“åŒ…åçš„æ–‡ä»¶æ˜¯åœ¨ <code>react-test-comp/lib</code> ç›®å½•ä¸‹ï¼Œè€Œ <code>npm</code> åˆ™æ˜¯å°† <code>lib</code> ç›®å½•ä¸Šä¼ åˆ°ä»“åº“ï¼Œå¼•ç”¨çš„æ—¶å€™å°±ä¸éœ€è¦ <code>/lib</code> ç›®å½•</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/handbook/">handbook</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>åˆ›å»º React é¡¹ç›®</title>
                <link>https://wss.cool/create-react-app.html</link>
                <guid isPermaLink="true">https://wss.cool/create-react-app.html</guid>
                <pubDate>Thu, 27 Feb 2020 11:10:50 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®</h2>
<pre><code>yarn create react-app my-app
</code></pre><pre><code>npx create-react-app my-app
</code></pre><pre><code>npm init react-app my-app
</code></pre><h2 id="åˆ›å»ºtypescripté¡¹ç›®">åˆ›å»ºtypescripté¡¹ç›®</h2>
<p>åœ¨ä¸Šé¢çš„å‘½ä»¤çš„åŸºç¡€ä¸Šï¼ŒåŠ <code>--template typescript</code></p>
<h2 id="ç¯å¢ƒå˜é‡">ç¯å¢ƒå˜é‡</h2>
<p>åœ¨ create-react-app é¡¹ç›®ä¸­ï¼Œå˜é‡åå¿…é¡»ä»¥ <code>REACT_APP_</code> å¼€å§‹ã€‚</p>
<p>åœ¨ <code>.env</code> æ–‡ä»¶ä¸­å®šä¹‰å˜é‡ <code>REACT_APP_NOT_SECRET_CODE=123</code>ã€‚</p>
<p><strong>åœ¨ <code>js</code> ä¸­ä½¿ç”¨</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">small</span><span class="o">&gt;</span><span class="nx">You</span> <span class="nx">are</span> <span class="nx">running</span> <span class="k">this</span> <span class="nx">application</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">b</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/b&gt; mode.&lt;/small&gt;</span>
      <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;hidden&#34;</span> <span class="nx">defaultValue</span><span class="o">=</span><span class="p">{</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REACT_APP_NOT_SECRET_CODE</span><span class="p">}</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="err">/form&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>åœ¨ <code>html</code> ä¸­ä½¿ç”¨</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>%REACT_APP_WEBSITE_NAME%<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>åˆ¤æ–­å½“å‰ç¯å¢ƒ <code>process.env.NODE_ENV !== 'production'</code>ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/handbook/">handbook</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>å¤šå¿«å¥½çœ</title>
                <link>https://wss.cool/%E5%A4%9A%E5%BF%AB%E5%A5%BD%E7%9C%81.html</link>
                <guid isPermaLink="true">https://wss.cool/%E5%A4%9A%E5%BF%AB%E5%A5%BD%E7%9C%81.html</guid>
                <pubDate>Wed, 26 Feb 2020 13:45:16 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>ç»å¸¸ä¼šæœ‰ä¸€äº›ä¸æ‡‚è½¯ä»¶å¼€å‘çš„é¢†å¯¼ï¼Œå¹»æƒ³ç€å¯ä»¥â€œå¤šå¿«å¥½çœâ€åœ°å¼€å‘å‡ºè½¯ä»¶ã€‚ä½†é€šå¸¸æ˜¯ä¸ç°å®çš„ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å¹»æƒ³</th>
<th align="left">å¹»æƒ³</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">å¤š</td>
<td align="left">å¼€å‘çš„åŠŸèƒ½å¤š</td>
</tr>
<tr>
<td align="left">å¿«</td>
<td align="left">å¼€å‘çš„æ—¶é—´çŸ­</td>
</tr>
<tr>
<td align="left">å¥½</td>
<td align="left">è½¯ä»¶bugå°‘</td>
</tr>
<tr>
<td align="left">çœ</td>
<td align="left">åˆå°‘åˆä¾¿å®œçš„äººåŠ›</td>
</tr>
</tbody>
</table>
<h2 id="å¿«å’Œçœ">å¿«å’Œçœ</h2>
<p>å¿«å’Œçœæ˜¯æœ€è¯±äººçš„ï¼Œå› ä¸ºè¿™æ„å‘³ç€æˆæœ¬ä½ï¼Œå®ƒä»¬çš„å¯¹ç«‹é¢å°±æ˜¯â€œå¤šã€å¥½â€ã€‚å°‘äººåŠ›ã€å°‘æ—¶é—´å¼€å‘å‡ºæ¥çš„ä¸œè¥¿å¦‚æœæƒ³â€œå¥½â€ï¼Œé‚£ä¹ˆåŠŸèƒ½å°±è¦å°‘ï¼Œå¦‚æœè¦åŠŸèƒ½å¤šï¼Œé‚£å°±å¥½ä¸äº†ï¼Œä¼šæœ‰å¾ˆå¤šbugã€‚</p>
<h2 id="å¥½ä¸å¤š">å¥½ä¸å¤š</h2>
<p>è¦æƒ³å¼€å‘å¤šä¸ªåŠŸèƒ½ï¼Œè´¨é‡åˆå¥½çš„è½¯ä»¶ã€‚è¦ä¹ˆå¤šèŠ±é’±ï¼Œè¯·ç‰›äººè®¾è®¡å¼€å‘ï¼Œè¶Šæƒ³å¿«å°±å¤šæ‹›äººï¼Œå°±ä¸èƒ½çœé’±ã€‚æƒ³çœé’±å°±å¿«ä¸èµ·æ¥ã€‚</p>
<p>éè¦å¤šå¿«å¥½çœçš„è¯ï¼Œæœ€åçš„ç»“æœè‚¯å®šæ˜¯â€œå¤šå¿«çœâ€çš„åšå‡ºæ¥äº†ï¼Œç„¶åè½¯ä»¶å¾ˆå¤šé—®é¢˜ï¼Œå¾ˆä¸å¥½ç”¨ï¼Œä½“éªŒå·®ã€‚ç”Ÿæ„å°±ä¼šå¾ˆéš¾åšï¼Œè½¯ä»¶ä¹Ÿç»´æŠ¤ä¸ä¸‹å»ï¼Œæœ€åé’±èµ”å…‰äº†ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%BF%83%E5%BE%97%E4%B8%8E%E7%BB%8F%E9%AA%8C/">å¿ƒå¾—ä¸ç»éªŒ</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Spring MVCä¸æ¨¡ç‰ˆ thymeleaf å¼€å‘ç½‘ç«™</title>
                <link>https://wss.cool/posts/%E5%90%8E%E7%AB%AF/spring/spring-mvc%E4%B8%8E%E6%A8%A1%E7%89%88thymeleaf%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%90%8E%E7%AB%AF/spring/spring-mvc%E4%B8%8E%E6%A8%A1%E7%89%88thymeleaf%E5%BC%80%E5%8F%91%E7%BD%91%E7%AB%99/</guid>
                <pubDate>Tue, 25 Feb 2020 23:39:38 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ä¸€ä¸ªç®€å•çš„-controller-æŒ‡å‘ä¸€ä¸ªæ¨¡ç‰ˆ">ä¸€ä¸ªç®€å•çš„ controller æŒ‡å‘ä¸€ä¸ªæ¨¡ç‰ˆ</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/greeting&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">greeting</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#34;name&#34;</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">&#34;World&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
    <span class="k">return</span> <span class="s">&#34;greeting&#34;</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>return &quot;greeting&quot;</code> å¯¹åº” <code>src/main/resources/templates/greeting.html</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">p</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;&#39;hello &#39;+${name}&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="home-pageä¸éœ€è¦é…ç½®">Home Pageï¼Œä¸éœ€è¦é…ç½®</h2>
<p><code>src/main/resources/static/index.html</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Getting Started: Serving Web Content<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=UTF-8&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Get your greeting <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/greeting&#34;</span><span class="p">&gt;</span>here<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="é…ç½®-spring-mvc">é…ç½® Spring MVC</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.example.securingweb</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.ViewControllerRegistry</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.WebMvcConfigurer</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MvcConfig</span> <span class="kd">implements</span> <span class="n">WebMvcConfigurer</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addViewControllers</span><span class="o">(</span><span class="n">ViewControllerRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">registry</span><span class="o">.</span><span class="na">addViewController</span><span class="o">(</span><span class="s">&#34;/home&#34;</span><span class="o">).</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;home&#34;</span><span class="o">);</span>
		<span class="n">registry</span><span class="o">.</span><span class="na">addViewController</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">).</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;home&#34;</span><span class="o">);</span>
		<span class="n">registry</span><span class="o">.</span><span class="na">addViewController</span><span class="o">(</span><span class="s">&#34;/hello&#34;</span><span class="o">).</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span>
		<span class="n">registry</span><span class="o">.</span><span class="na">addViewController</span><span class="o">(</span><span class="s">&#34;/login&#34;</span><span class="o">).</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;login&#34;</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/spring/">spring</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Javaåç«¯å¼€å‘å¸¸ç”¨å·¥å…·</title>
                <link>https://wss.cool/java%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7.html</link>
                <guid isPermaLink="true">https://wss.cool/java%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7.html</guid>
                <pubDate>Thu, 30 Jan 2020 01:19:02 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="spring-web-mvc-reference">Spring Web MVC Reference</h2>
<p><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html">Spring Web MVC Reference</a></p>
<h2 id="spring-security-reference">Spring Security Reference</h2>
<p><a href="https://docs.spring.io/spring-security/site/docs/5.2.2.BUILD-SNAPSHOT/reference/htmlsingle/">Spring Security Reference</a>ï¼Œå†…å®¹å¾ˆå¤šã€‚OAuth2ç›¸å…³çš„å†…å®¹ï¼Œä¸åŒ…å«æˆæƒæœåŠ¡å™¨ã€‚</p>
<h2 id="spring-security-oauth2-boot">Spring Security OAuth2 Boot</h2>
<p><a href="https://docs.spring.io/spring-security-oauth2-boot/docs/current-SNAPSHOT/reference/htmlsingle/">Spring Security OAuth2 Boot</a>ï¼Œè¿™é‡Œä»‹ç»äº†ï¼šæˆæƒæœåŠ¡å™¨ã€èµ„æºæœåŠ¡å™¨ã€å®¢æˆ·ç«¯ã€å•ç‚¹ç™»å½•ç­‰</p>
<h2 id="spring-boot-reference">Spring Boot Reference</h2>
<p><a href="https://docs.spring.io/spring-boot/docs/2.2.4.RELEASE/reference/html/spring-boot-features.html">Spring Boot Reference</a>ï¼Œå†…å®¹å¾ˆå¤šã€‚</p>
<h2 id="apachecommonslogging">apache.commons.logging</h2>
<p><a href="https://commons.apache.org/proper/commons-logging/guide.html">https://commons.apache.org/proper/commons-logging/guide.html</a></p>
<h2 id="mavenä»“åº“">Mavenä»“åº“</h2>
<p><a href="https://mvnrepository.com/">Mavenä»“åº“</a>ï¼Œæ ¹æ®åå­—æœç´¢ä¾èµ–åŒ…ï¼Œå¯ä»¥å¾—åˆ°ç‰ˆæœ¬pomç­‰ä¿¡æ¯ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%90%8E%E7%AB%AF/">åç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>æˆ‘çš„åšå®¢æ”¯æŒæœåŠ¡</title>
                <link>https://wss.cool/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%94%AF%E6%8C%81%E6%9C%8D%E5%8A%A1.html</link>
                <guid isPermaLink="true">https://wss.cool/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%94%AF%E6%8C%81%E6%9C%8D%E5%8A%A1.html</guid>
                <pubDate>Wed, 29 Jan 2020 17:20:32 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h1 id="èƒŒæ™¯éœ€æ±‚">èƒŒæ™¯éœ€æ±‚</h1>
<p>æˆ‘çš„åšå®¢æ˜¯ä½¿ç”¨Hugoå¼€å‘çš„ï¼Œä»£ç å­˜æ”¾åœ¨Giteeä¸Šï¼Œæ¯æ¬¡å†™æ¥æ–°çš„ä¸œè¥¿å<code>git push</code>ä¸Šå»ï¼Œç„¶ååˆ°æœåŠ¡å™¨ä¸Š<code>git pull &amp;&amp; hugo</code>æ¥æ›´æ–°ã€‚</p>
<p>è¿™é‡Œä¼šæœ‰ä¸€ä¸ªéœ€æ±‚â€”â€”é€šè¿‡ç¨‹åºæ¥æ‰§è¡Œè¿™ä¸ªæ›´æ–°ä»£ç å¹¶ç¼–è¯‘çš„æ“ä½œã€‚Giteeæœ‰WebHookåŠŸèƒ½ï¼Œæˆ‘éœ€è¦å¼€å‘ä¸€ä¸ªæ¥å£ç»‘å®šåˆ°WebHookï¼Œæ¥å£å†…æ‰§è¡Œæ›´æ–°æ“ä½œå³å¯ã€‚</p>
<h1 id="è®¾è®¡æ€è·¯">è®¾è®¡æ€è·¯</h1>
<h2 id="éœ€æ±‚1è¿‡æ»¤éæ³•è¯·æ±‚">éœ€æ±‚1.è¿‡æ»¤éæ³•è¯·æ±‚</h2>
<p>WebHookä¼šå‘èµ·ä¸€ä¸ªPostè¯·æ±‚ï¼Œåœ¨Request Headerä¸­é€šè¿‡<code>X-Gitee-Token</code>æºå¸¦ä»¤ç‰Œã€‚æ‰€ä»¥éœ€è¦ä¸€ä¸ªInterceptorè¿‡æ»¤æ‰æ²¡æœ‰å¸¦æœ‰è¿™ä¸ªHeaderçš„è¯·æ±‚ã€‚</p>
<h2 id="éœ€æ±‚2é€šè¿‡javaæ‰§è¡Œshellå‘½ä»¤">éœ€æ±‚2.é€šè¿‡Javaæ‰§è¡ŒShellå‘½ä»¤</h2>
<p>åŸæ¥æ˜¯æ‰‹åŠ¨åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ<code>git pull &amp;&amp; hugo</code>ã€‚ç°åœ¨éœ€è¦åœ¨Javaç¨‹åºä¸­æ‰§è¡ŒShellå‘½ä»¤ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå·¥å…·æ¥åšè¿™ä¸ªäº‹ï¼Œ<code>Apache Commons Exec</code>æ˜¯ä¸€ä¸ªè¿™æ ·çš„åº“ã€‚<a href="https://wowfriday.cn/java%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4.html">è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­</a>ã€‚</p>
<h1 id="æŠ€æœ¯æ–¹æ¡ˆ">æŠ€æœ¯æ–¹æ¡ˆ</h1>
<ul>
<li><code>Spring Boot</code>åˆ›å»ºé¡¹ç›®</li>
<li><code>Spring Web</code>æä¾›Webæ¥å£</li>
<li><code>Apache Commons Exec</code>æä¾›æ‰§è¡Œshellå‘½ä»¤çš„èƒ½åŠ›ã€‚<a href="https://commons.apache.org/proper/commons-exec/">execå®˜ç½‘</a>ï¼Œ<a href="https://commons.apache.org/proper/commons-exec/apidocs/index.html">APIæ–‡æ¡£</a></li>
</ul>
<h1 id="æµç¨‹å›¾">æµç¨‹å›¾</h1>
<p><img src="/images/blogServer.svg" alt="æµç¨‹å›¾"></p>
<p>è¿™å…¶ä¸­æœ‰ä¸¤ä¸ªç‚¹æ˜¯æˆ‘æ²¡æœ‰åšè¿‡çš„ï¼Œä¸€ä¸ªæ˜¯æ‹¦æˆªå™¨ï¼ˆæ£€æŸ¥æ˜¯å¦å¸¦æœ‰X-Gitee-Tokençš„ï¼‰ï¼Œä¸€ä¸ªæ˜¯æ‰§è¡Œshellå‘½ä»¤ã€‚</p>
<h1 id="ä»£ç å®ç°">ä»£ç å®ç°</h1>
<h2 id="æ‹¦æˆªå™¨">æ‹¦æˆªå™¨</h2>
<p>æ‰¾åˆ°äº†<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-handlermapping-interceptor">Spring Web MVCçš„æ–‡æ¡£</a>ï¼Œåˆ†ä¸¤æ­¥ï¼Œä¸€æ˜¯å®ç°<code>org.springframework.web.servlet</code>çš„<code>HandlerInterceptor</code>æ‹¦æˆªå™¨æ¥å£ï¼ŒäºŒæ˜¯é…ç½®æ‹¦æˆªå™¨ã€‚</p>
<h3 id="å®ç°æ‹¦æˆªå™¨">å®ç°æ‹¦æˆªå™¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GiteeInterceptorAdapter</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">){</span>
        <span class="c1">// ...
</span><span class="c1"></span>        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="é…ç½®æ‹¦æˆªå™¨">é…ç½®æ‹¦æˆªå™¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MvcConfig</span> <span class="kd">implements</span> <span class="n">WebMvcConfigurer</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addInterceptors</span><span class="o">(</span><span class="n">InterceptorRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">addInterceptor</span><span class="o">(</span><span class="k">new</span> <span class="n">GiteeInterceptorAdapter</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="æ‰§è¡Œshellå‘½ä»¤">æ‰§è¡Œshellå‘½ä»¤</h2>
<p>æˆ‘æŠŠè¿™éƒ¨åˆ†å•ç‹¬å†™äº†ä¸€ç¯‡åšå®¢â€”â€”<a href="https://wowfriday.cn/java%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4.html">ã€ŠJavaæ‰§è¡ŒShellå‘½ä»¤ã€‹</a>ã€‚</p>
<h1 id="éƒ¨ç½²">éƒ¨ç½²</h1>
<ol>
<li>æ‰“åŒ…â€”â€”ä½¿ç”¨mavençš„packageæ‰“åŒ…</li>
<li>ä¸Šä¼ åˆ°æœåŠ¡å™¨â€”â€”mavençš„deployç”¨ä¸å¥½ï¼Œéœ€è¦èŠ±äº›æ—¶é—´å­¦ä¹ ä¸€ä¸‹ã€‚æš‚æ—¶ä½¿ç”¨scpå‘½ä»¤ä¸Šä¼ ã€‚</li>
<li>è¿è¡ŒJaråŒ…â€”â€”ä½¿ç”¨systemdè¿è¡Œï¼Œå‚è€ƒè¿™ç¯‡åšå®¢<a href="https://wowfriday.cn/posts/linux-base/#%E4%BD%BF%E7%94%A8systemd%E5%90%AF%E5%8A%A8%E5%85%B3%E9%97%ADjava%E7%A8%8B%E5%BA%8F">ã€Šä½¿ç”¨systemdå¯åŠ¨å…³é—­Javaç¨‹åºã€‹</a>ã€‚</li>
</ol>
<h1 id="æ”¶è·">æ”¶è·</h1>
<ol>
<li>æŠŠä¸€ä¸ªæ‰‹åŠ¨å·¥ä½œå®ç°äº†è‡ªåŠ¨åŒ–ã€‚</li>
<li>é€šè¿‡æŸ¥çœ‹<code>Spring Web MVC</code>çš„æ–‡æ¡£ï¼Œæ‰¾åˆ°å¹¶å®ç°äº†æ‹¦æˆªå™¨çš„ä»£ç ã€‚</li>
<li>å‘ç°äº†ä¸€ä¸ªå·¥å…·åº“ï¼Œé€šè¿‡æŸ¥çœ‹å®ƒçš„æ–‡æ¡£ï¼Œå°†å®ƒè¿ç”¨äº†èµ·æ¥ã€‚</li>
<li>ç¬¬ä¸€æ¬¡æ¥è§¦<code>OutputStream</code>å’Œ<code>ByteArrayOutputStream</code>ã€‚</li>
<li>JaråŒ…çš„éƒ¨ç½²â—ï¸</li>
</ol>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>ä»è¿™ä¸ªæœåŠ¡çš„å®ç°å¯ä»¥æç‚¼å‡ºä¸€ç§è§£å†³é—®é¢˜çš„æ–¹æ³•å—ï¼Ÿ</p>
<ul>
<li>é¦–å…ˆæ˜¯ç¡®å®šç›®æ ‡ï¼Œä¹Ÿå°±æ˜¯éœ€æ±‚â€”â€”è‡ªåŠ¨åŒ–ã€‚</li>
<li>ç„¶åæ€è€ƒå¦‚ä½•å®ç°å®ƒâ€”â€”WebHook + è‡ªå·±å®ç°æœåŠ¡ç«¯åŠŸèƒ½â€”â€”ç¡®å®šä¸€ä¸ªæ–¹æ¡ˆã€‚</li>
<li>è®¾è®¡æµç¨‹ã€‚</li>
<li>åŠŸèƒ½ç‚¹å’ŒæŠ€æœ¯éš¾é¢˜ã€‚</li>
<li>è§£å†³æŠ€æœ¯éš¾é¢˜â€”â€”æŸ¥æ–‡æ¡£/google/stackoverflowç­‰ã€‚</li>
<li>æ•´ä¸ªè¿‡ç¨‹éœ€è¦å¤§é‡æ€è€ƒï¼Œéœ€è¦å¤šå†™ï¼Œè½å®åˆ°çº¸ä¸Šï¼Œä»¥å…é—å¿˜å’Œç–æ¼ã€‚</li>
<li>å°¤å…¶æ˜¯å¯¹æµç¨‹çš„æ€è€ƒã€‚</li>
<li>å°¤å…¶æ˜¯å¯¹éš¾é¢˜çš„è®°å½•ã€‚</li>
<li>å®Œæˆå</li>
<li>è¦æ€»ç»“å­¦ä¹ åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œè®¡ä½œâ€œæ”¶è·â€</li>
<li>è¦æ€»ç»“æç‚¼æ–¹æ³•ï¼Œä½¿å…¶èƒ½æ²‰æ·€ä¸ºç»éªŒï¼Œè®¡ä½œâ€œæ€»ç»“â€</li>
<li>æ›´æ–°æŠ€èƒ½æ ‘</li>
</ul>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Spring Security JWT</title>
                <link>https://wss.cool/spring-security-jwt.html</link>
                <guid isPermaLink="true">https://wss.cool/spring-security-jwt.html</guid>
                <pubDate>Sun, 19 Jan 2020 13:51:29 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h1 id="spring-security-architecture">Spring Security Architecture</h1>
<p>Spring Security æ¶æ„ï¼Œå…¥é—¨ä»‹ç»ï¼š<a href="https://spring.io/guides/topicals/spring-security-architecture/">ç½‘å€</a></p>
<h2 id="authentication-and-access-control">Authentication and Access Control</h2>
<p>åº”ç”¨ç¨‹åºå®‰å…¨æ€§å½’ç»“ä¸ºæˆ–å¤šæˆ–å°‘çš„ä¸¤ä¸ªç‹¬ç«‹é—®é¢˜ï¼šèº«ä»½éªŒè¯ï¼ˆæ‚¨æ˜¯è°ï¼Ÿï¼‰å’Œæˆæƒï¼ˆæ‚¨å¯ä»¥åšä»€ä¹ˆï¼Ÿï¼‰ã€‚æœ‰æ—¶äººä»¬ä¼šè¯´â€œè®¿é—®æ§åˆ¶â€è€Œä¸æ˜¯â€œæˆæƒâ€ï¼Œè¿™å¯èƒ½ä¼šé€ æˆæ··æ·†ï¼Œä½†æ˜¯ä»¥è¿™ç§æ–¹å¼æ€è€ƒå¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œå› ä¸ºâ€œæˆæƒâ€åœ¨å…¶ä»–åœ°æ–¹è¶…è½½ã€‚ Spring Securityçš„ä½“ç³»ç»“æ„æ—¨åœ¨å°†èº«ä»½éªŒè¯ä¸æˆæƒåˆ†å¼€ï¼Œå¹¶å…·æœ‰ç­–ç•¥å’Œæ‰©å±•ç‚¹ã€‚</p>
<h3 id="authentication">Authentication</h3>
<p>èº«ä»½éªŒè¯çš„ä¸»è¦ç­–ç•¥æ¥å£æ˜¯AuthenticationManagerï¼Œå®ƒåªæœ‰ä¸€ç§æ–¹æ³•ï¼š</p>
<hr>
<h1 id="oauth-20-resource-server">Â OAuth 2.0 Resource Server</h1>
<p>Spring Security supports protecting endpoints using two forms of OAuth 2.0 <a href="https://tools.ietf.org/html/rfc6750.html">Bearer Tokens</a>:</p>
<ul>
<li><a href="https://tools.ietf.org/html/rfc7519">JWT</a></li>
<li>Opaque Tokens</li>
</ul>
<p>This is handy in circumstances where an application has delegated its authority management to an <a href="https://tools.ietf.org/html/rfc6749">authorization server</a> (for example, Okta or Ping Identity). This authorization server can be consulted by resource servers to authorize requests.</p>
<blockquote>
<p>Working samples for both <a href="https://github.com/spring-projects/spring-security/tree/master/samples/boot/oauth2resourceserver">JWTs</a> and <a href="https://github.com/spring-projects/spring-security/tree/master/samples/boot/oauth2resourceserver-opaque">Opaque Tokens</a> are available in the <a href="https://github.com/spring-projects/spring-security/tree/master/samples">Spring Security repository</a>.</p>
</blockquote>
<h2 id="1dependencies">1Â Dependencies</h2>
<p>Most Resource Server support is collected into <code>spring-security-oauth2-resource-server</code>. However, the support for decoding and verifying JWTs is in <code>spring-security-oauth2-jose</code>, meaning that both are necessary in order to have a working resource server that supports JWT-encoded Bearer Tokens.</p>
<h2 id="2minimal-configuration-for-jwts">2Â Minimal Configuration for JWTs</h2>
<p>When using <a href="https://spring.io/projects/spring-boot">Spring Boot</a>, configuring an application as a resource server consists of two basic steps. First, include the needed dependencies and second, indicate the location of the authorization server.</p>
<h3 id="specifying-the-authorization-server">Specifying the Authorization Server</h3>
<p>In a Spring Boot application, to specify which authorization server to use, simply do:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">spring</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">security</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">oauth2</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="k">resourceserver</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="k">jwt</span><span class="p">:</span><span class="w">
</span><span class="w">          </span><span class="k">issuer-uri</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//idp.example.com/issuer<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>Where <a href="https://idp.example.com/issuer"><code>https://idp.example.com/issuer</code></a> is the value contained in the <code>iss</code> claim for JWT tokens that the authorization server will issue. Resource Server will use this property to further self-configure, discover the authorization serverâ€™s public keys, and subsequently validate incoming JWTs.</p>
<blockquote>
<p>To use the <code>issuer-uri</code> property, it must also be true that one of <code>https://idp.example.com/issuer/.well-known/openid-configuration</code>, <code>https://idp.example.com/.well-known/openid-configuration/issuer</code>, or <code>https://idp.example.com/.well-known/oauth-authorization-server/issuer</code> is a supported endpoint for the authorization server. This endpoint is referred to as a <a href="https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig">Provider Configuration</a> endpoint or a <a href="https://tools.ietf.org/html/rfc8414#section-3">Authorization Server Metadata</a> endpoint.</p>
</blockquote>
<p>And thatâ€™s it!</p>
<h3 id="startup-expectations">Startup Expectations</h3>
<p>When this property and these dependencies are used, Resource Server will automatically configure itself to validate JWT-encoded Bearer Tokens. It achieves this through a deterministic startup process:</p>
<ol>
<li>Hit the Provider Configuration or Authorization Server Metadata endpoint, processing the response for the <code>jwks_url</code> property</li>
<li>Configure the validation strategy to query <code>jwks_url</code> for valid public keys</li>
<li>Configure the validation strategy to validate each JWTs <code>iss</code> claim against <a href="https://idp.example.com"><code>https://idp.example.com</code></a>.</li>
</ol>
<p>A consequence of this process is that the authorization server must be up and receiving requests in order for Resource Server to successfully start up.</p>
<blockquote>
<p>If the authorization server is down when Resource Server queries it (given appropriate timeouts), then startup will fail.</p>
</blockquote>
<h3 id="runtime-expectations">Runtime Expectations</h3>
<p>Once the application is started up, Resource Server will attempt to process any request containing an <code>Authorization: Bearer</code> header:</p>
<pre><code>GET / HTTP/1.1
Authorization: Bearer some-token-value # Resource Server will process this
</code></pre><p>So long as this scheme is indicated, Resource Server will attempt to process the request according to the Bearer Token specification. Given a well-formed JWT, Resource Server will:</p>
<ol>
<li>Validate its signature against a public key obtained from the <code>jwks_url</code> endpoint during startup and matched against the JWTs header</li>
<li>Validate the JWTs <code>exp</code> and <code>nbf</code> timestamps and the JWTs <code>iss</code> claim, and</li>
<li>Map each scope to an authority with the prefix <code>SCOPE_</code>.</li>
</ol>
<blockquote>
<p>As the authorization server makes available new keys, Spring Security will automatically rotate the keys used to validate the JWT tokens.</p>
</blockquote>
<p>The resulting <code>Authentication#getPrincipal</code>, by default, is a Spring Security <code>Jwt</code> object, and <code>Authentication#getName</code> maps to the JWTâ€™s <code>sub</code> property, if one is present. From here, consider jumping to:</p>
<ul>
<li><a href="#oauth2resourceserver-jwt-jwkseturi" title="12.3.3Â Specifying the Authorization Server JWK Set Uri Directly">How to Configure without Tying Resource Server startup to an authorization serverâ€™s availability</a></li>
<li><a href="#oauth2resourceserver-jwt-sansboot" title="12.3.4Â Overriding or Replacing Boot Auto Configuration">How to Configure without Spring Boot</a></li>
</ul>
<h2 id="3specifying-the-authorization-server-jwk-set-uri-directly">3Â Specifying the Authorization Server JWK Set Uri Directly</h2>
<p>If the authorization server doesnâ€™t support any configuration endpoints, or if Resource Server must be able to start up independently from the authorization server, then the <code>jwk-set-uri</code> can be supplied as well:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">spring</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">security</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">oauth2</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">resourceserver</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">jwt</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">issuer-uri</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//idp.example.com<span class="w">
</span><span class="w"> </span><span class="k">jwk-set-uri</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//idp.example.com/.well-known/jwks.json<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>The JWK Set uri is not standardized, but can typically be found in the authorization serverâ€™s documentation</p>
</blockquote>
<p>Consequently, Resource Server will not ping the authorization server at startup. We still specify the <code>issuer-uri</code> so that Resource Server still validates the <code>iss</code> claim on incoming JWTs.</p>
<blockquote>
<p>This property can also be supplied directly on the <a href="#oauth2resourceserver-jwt-jwkseturi-dsl" title="Using jwkSetUri()">DSL</a>.</p>
</blockquote>
<h2 id="4overriding-or-replacing-boot-auto-configuration">4Â Overriding or Replacing Boot Auto Configuration</h2>
<p>There are two <code>@Bean</code> s that Spring Boot generates on Resource Serverâ€™s behalf. The first is a <code>WebSecurityConfigurerAdapter</code> that configures the app as a resource server. When including <code>spring-security-oauth2-jose</code>, this <code>WebSecurityConfigurerAdapter</code> looks like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">http</span>
        <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
            <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
            <span class="o">.</span><span class="na">and</span><span class="o">()</span>
        <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">(</span><span class="n">OAuth2ResourceServerConfigurer</span><span class="o">::</span><span class="n">jwt</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>If the application doesnâ€™t expose a <code>WebSecurityConfigurerAdapter</code> bean, then Spring Boot will expose the above default one. Replacing this is as simple as exposing the bean within the application:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyCustomSecurityConfiguration</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                <span class="o">.</span><span class="na">mvcMatchers</span><span class="o">(</span><span class="s">&#34;/messages/**&#34;</span><span class="o">).</span><span class="na">hasAuthority</span><span class="o">(</span><span class="s">&#34;SCOPE_message:read&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
                <span class="o">.</span><span class="na">jwt</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">jwtAuthenticationConverter</span><span class="o">(</span><span class="n">myConverter</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The above requires the scope of <code>message:read</code> for any URL that starts with <code>/messages/</code>. Methods on the <code>oauth2ResourceServer</code> DSL will also override or replace auto configuration. For example, the second <code>@Bean</code> Spring Boot creates is a <code>JwtDecoder</code>, which decodes <code>String</code> tokens into validated instances of <code>Jwt</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">JwtDecoders</span><span class="o">.</span><span class="na">fromIssuerLocation</span><span class="o">(</span><span class="n">issuerUri</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Calling <a href="https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/jwt/JwtDecoders.html#fromIssuerLocation-java.lang.String-"><code>JwtDecoders#fromIssuerLocation</code></a> is what invokes the Provider Configuration or Authorization Server Metadata endpoint in order to derive the JWK Set Uri.</p>
</blockquote>
<p>If the application doesnâ€™t expose a <code>JwtDecoder</code> bean, then Spring Boot will expose the above default one. And its configuration can be overridden using <code>jwkSetUri()</code> or replaced using <code>decoder()</code>.</p>
<h3 id="using-jwkseturi">Using <code>jwkSetUri()</code></h3>
<p>An authorization serverâ€™s JWK Set Uri can be configured <a href="#oauth2resourceserver-jwt-jwkseturi" title="12.3.3Â Specifying the Authorization Server JWK Set Uri Directly">as a configuration property</a> or it can be supplied in the DSL:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DirectlyConfiguredJwkSetUri</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
                <span class="o">.</span><span class="na">jwt</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">jwkSetUri</span><span class="o">(</span><span class="s">&#34;https://idp.example.com/.well-known/jwks.json&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Using <code>jwkSetUri()</code> takes precedence over any configuration property.</p>
<h3 id="using-decoder">Using <code>decoder()</code></h3>
<p>More powerful than <code>jwkSetUri()</code> is <code>decoder()</code>, which will completely replace any Boot auto configuration of <code>JwtDecoder</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DirectlyConfiguredJwtDecoder</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
                <span class="o">.</span><span class="na">jwt</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">decoder</span><span class="o">(</span><span class="n">myCustomDecoder</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>This is handy when deeper configuration, like <a href="#oauth2resourceserver-jwt-validation" title="12.3.9Â Configuring Validation">validation</a>, <a href="#oauth2resourceserver-jwt-claimsetmapping" title="12.3.10Â Configuring Claim Set Mapping">mapping</a>, or <a href="#oauth2resourceserver-jwt-timeouts" title="12.3.11Â Configuring Timeouts">request timeouts</a>, is necessary.</p>
<h3 id="exposing-a-jwtdecoder-bean">Exposing a <code>JwtDecoder</code> <code>@Bean</code></h3>
<p>Or, exposing a <code>JwtDecoder</code> <code>@Bean</code> has the same effect as <code>decoder()</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">withJwkSetUri</span><span class="o">(</span><span class="n">jwkSetUri</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="5configuring-trusted-algorithms">5Â Configuring Trusted Algorithms</h2>
<p>By default, <code>NimbusJwtDecoder</code>, and hence Resource Server, will only trust and verify tokens using <code>RS256</code>. You can customize this via <a href="#oauth2resourceserver-jwt-boot-algorithm" title="Via Spring Boot">Spring Boot</a>, <a href="#oauth2resourceserver-jwt-decoder-builder" title="Using a Builder">the NimbusJwtDecoder builder</a>, or from the <a href="#oauth2resourceserver-jwt-decoder-jwk-response" title="From JWK Set response">JWK Set response</a>.</p>
<h3 id="via-spring-boot">Via Spring Boot</h3>
<p>The simplest way to set the algorithm is as a property:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">spring</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">security</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">oauth2</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="k">resourceserver</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="k">jwt</span><span class="p">:</span><span class="w">
</span><span class="w">          </span><span class="k">jws-algorithm</span><span class="p">:</span><span class="w"> </span>RS512<span class="w">
</span><span class="w">          </span><span class="k">jwk-set-uri</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//idp.example.org/.well-known/jwks.json<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="using-a-builder">Using a Builder</h3>
<p>For greater power, though, we can use a builder that ships with <code>NimbusJwtDecoder</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">fromJwkSetUri</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">jwkSetUri</span><span class="o">)</span>
            <span class="o">.</span><span class="na">jwsAlgorithm</span><span class="o">(</span><span class="n">RS512</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Calling <code>jwsAlgorithm</code> more than once will configure <code>NimbusJwtDecoder</code> to trust more than one algorithm, like so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">fromJwkSetUri</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">jwkSetUri</span><span class="o">)</span>
            <span class="o">.</span><span class="na">jwsAlgorithm</span><span class="o">(</span><span class="n">RS512</span><span class="o">).</span><span class="na">jwsAlgorithm</span><span class="o">(</span><span class="n">EC512</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Or, you can call <code>jwsAlgorithms</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">fromJwkSetUri</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">jwkSetUri</span><span class="o">)</span>
            <span class="o">.</span><span class="na">jwsAlgorithms</span><span class="o">(</span><span class="n">algorithms</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">algorithms</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">RS512</span><span class="o">);</span>
                    <span class="n">algorithms</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">EC512</span><span class="o">);</span>
            <span class="o">}).</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="from-jwk-set-response">From JWK Set response</h3>
<p>Since Spring Securityâ€™s JWT support is based off of Nimbus, you can use all itâ€™s great features as well. For example, Nimbus has a <code>JWSKeySelector</code> implementation that will select the set of algorithms based on the JWK Set URI response. You can use it to generate a <code>NimbusJwtDecoder</code> like so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// makes a request to the JWK Set endpoint
</span><span class="c1"></span>    <span class="n">JWSKeySelector</span> <span class="o">&lt;</span><span class="n">securitycontext</span><span class="o">&gt;</span><span class="n">jwsKeySelector</span> <span class="o">=</span>
            <span class="n">JWSAlgorithmFamilyJWSKeySelector</span><span class="o">.</span><span class="na">fromJWKSetURL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">jwkSetUrl</span><span class="o">);</span>

    <span class="n">DefaultJWTProcessor</span> <span class="o">&lt;</span><span class="n">securitycontext</span><span class="o">&gt;</span><span class="n">jwtProcessor</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">DefaultJWTProcessor</span><span class="o">&lt;&gt;();</span>
    <span class="n">jwtProcessor</span><span class="o">.</span><span class="na">setJWSKeySelector</span><span class="o">(</span><span class="n">jwsKeySelector</span><span class="o">);</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">NimbusJwtDecoder</span><span class="o">(</span><span class="n">jwtProcessor</span><span class="o">);</span>
<span class="o">}&lt;/</span><span class="n">securitycontext</span><span class="o">&gt;&lt;/</span><span class="n">securitycontext</span><span class="o">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="6trusting-a-single-asymmetric-key">6Â Trusting a Single Asymmetric Key</h2>
<p>Simpler than backing a Resource Server with a JWK Set endpoint is to hard-code an RSA public key. The public key can be provided via <a href="#oauth2resourceserver-jwt-decoder-public-key-boot" title="Via Spring Boot">Spring Boot</a> or by <a href="#oauth2resourceserver-jwt-decoder-public-key-builder" title="Using a Builder">Using a Builder</a>.</p>
<h3 id="via-spring-boot-1">Via Spring Boot</h3>
<p>Specifying a key via Spring Boot is quite simple. The keyâ€™s location can be specified like so:</p>
<pre><code>spring:
 security:
 oauth2:
 resourceserver:
 jwt:
 public-key-location: classpath:my-key.pub
</code></pre><p>Or, to allow for a more sophisticated lookup, you can post-process the <code>RsaKeyConversionServicePostProcessor</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">BeanFactoryPostProcessor</span> <span class="nf">conversionServiceCustomizer</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">beanFactory</span> <span class="o">-&gt;</span>
        <span class="n">beanFactory</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">RsaKeyConversionServicePostProcessor</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setResourceLoader</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomResourceLoader</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Specify your keyâ€™s location:</p>
<pre><code>key.location: hfds://my-key.pub
</code></pre><p>And then autowire the value:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${key.location}&#34;</span><span class="o">)</span>
<span class="n">RSAPublicKey</span> <span class="n">key</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="using-a-builder-1">Using a Builder</h3>
<p>To wire an <code>RSAPublicKey</code> directly, you can simply use the appropriate <code>NimbusJwtDecoder</code> builder, like so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">withPublicKey</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">key</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="7trusting-a-single-symmetric-key">7Â Trusting a Single Symmetric Key</h2>
<p>Using a single symmetric key is also simple. You can simply load in your <code>SecretKey</code> and use the appropriate <code>NimbusJwtDecoder</code> builder, like so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">withSecretKey</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">key</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="8configuring-authorization">8Â Configuring Authorization</h2>
<p>A JWT that is issued from an OAuth 2.0 Authorization Server will typically either have a <code>scope</code> or <code>scp</code> attribute, indicating the scopes (or authorities) itâ€™s been granted, for example: <code>{ â€¦â€‹, &quot;scope&quot; : &quot;messages contacts&quot;}</code> When this is the case, Resource Server will attempt to coerce these scopes into a list of granted authorities, prefixing each scope with the string &quot;SCOPE_&quot;. This means that to protect an endpoint or method with a scope derived from a JWT, the corresponding expressions should include this prefix:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DirectlyConfiguredJwkSetUri</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">(</span><span class="n">authorizeRequests</span> <span class="o">-&gt;</span> <span class="n">authorizeRequests</span>
                <span class="o">.</span><span class="na">mvcMatchers</span><span class="o">(</span><span class="s">&#34;/contacts/**&#34;</span><span class="o">).</span><span class="na">hasAuthority</span><span class="o">(</span><span class="s">&#34;SCOPE_contacts&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">mvcMatchers</span><span class="o">(</span><span class="s">&#34;/messages/**&#34;</span><span class="o">).</span><span class="na">hasAuthority</span><span class="o">(</span><span class="s">&#34;SCOPE_messages&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
            <span class="o">)</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">(</span><span class="n">OAuth2ResourceServerConfigurer</span><span class="o">::</span><span class="n">jwt</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Or similarly with method security:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@PreAuthorize</span><span class="o">(</span><span class="s">&#34;hasAuthority(&#39;SCOPE_messages&#39;)&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">List</span> <span class="o">&lt;</span><span class="n">message</span><span class="o">&gt;</span><span class="n">getMessages</span><span class="o">(...)</span> <span class="o">{}&lt;/</span><span class="n">message</span><span class="o">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="extracting-authorities-manually">Extracting Authorities Manually</h3>
<p>However, there are a number of circumstances where this default is insufficient. For example, some authorization servers donâ€™t use the <code>scope</code> attribute, but instead have their own custom attribute. Or, at other times, the resource server may need to adapt the attribute or a composition of attributes into internalized authorities. To this end, the DSL exposes <code>jwtAuthenticationConverter()</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DirectlyConfiguredJwkSetUri</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
                <span class="o">.</span><span class="na">jwt</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">jwtAuthenticationConverter</span><span class="o">(</span><span class="n">grantedAuthoritiesExtractor</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">Converter</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">,</span> <span class="n">AbstractAuthenticationToken</span><span class="o">&gt;</span> <span class="nf">grantedAuthoritiesExtractor</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">JwtAuthenticationConverter</span> <span class="n">jwtAuthenticationConverter</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">JwtAuthenticationConverter</span><span class="o">();</span>
    <span class="n">jwtAuthenticationConverter</span><span class="o">.</span><span class="na">setJwtGrantedAuthoritiesConverter</span>
            <span class="o">(</span><span class="k">new</span> <span class="n">GrantedAuthoritiesExtractor</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">jwtAuthenticationConveter</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>which is responsible for converting a <code>Jwt</code> into an <code>Authentication</code>. As part of its configuration, we can supply a subsidiary converter to go from <code>Jwt</code> to a <code>Collection</code> of granted authorities. That final converter might be something like <code>GrantedAuthoritiesExtractor</code> below:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">static</span> <span class="kd">class</span> <span class="nc">GrantedAuthoritiesExtractor</span>
        <span class="kd">implements</span> <span class="n">Converter</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">,</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">GrantedAuthority</span><span class="o">&gt;&gt;</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">GrantedAuthority</span><span class="o">&gt;</span> <span class="nf">convert</span><span class="o">(</span><span class="n">Jwt</span> <span class="n">jwt</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">authorities</span> <span class="o">=</span> <span class="o">(</span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;)</span>
                <span class="n">jwt</span><span class="o">.</span><span class="na">getClaims</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;mycustomclaim&#34;</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">authorities</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">SimpleGrantedAuthority</span><span class="o">::</span><span class="k">new</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>For more flexibility, the DSL supports entirely replacing the converter with any class that implements <code>Converter&lt;jwt, abstractauthenticationtoken=&quot;&quot;&gt;</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">static</span> <span class="kd">class</span> <span class="nc">CustomAuthenticationConverter</span> <span class="kd">implements</span> <span class="n">Converter</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">,</span> <span class="n">AbstractAuthenticationToken</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">AbstractAuthenticationToken</span> <span class="nf">convert</span><span class="o">(</span><span class="n">Jwt</span> <span class="n">jwt</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">CustomAuthenticationToken</span><span class="o">(</span><span class="n">jwt</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="9configuring-validation">9Â Configuring Validation</h2>
<p>Using <a href="#oauth2resourceserver-jwt-minimalconfiguration" title="12.3.2Â Minimal Configuration for JWTs">minimal Spring Boot configuration</a>, indicating the authorization serverâ€™s issuer uri, Resource Server will default to verifying the <code>iss</code> claim as well as the <code>exp</code> and <code>nbf</code> timestamp claims. In circumstances where validation needs to be customized, Resource Server ships with two standard validators and also accepts custom <code>OAuth2TokenValidator</code> instances.</p>
<h3 id="customizing-timestamp-validation">Customizing Timestamp Validation</h3>
<p>JWTâ€™s typically have a window of validity, with the start of the window indicated in the <code>nbf</code> claim and the end indicated in the <code>exp</code> claim. However, every server can experience clock drift, which can cause tokens to appear expired to one server, but not to another. This can cause some implementation heartburn as the number of collaborating servers increases in a distributed system. Resource Server uses <code>JwtTimestampValidator</code> to verify a tokenâ€™s validity window, and it can be configured with a <code>clockSkew</code> to alleviate the above problem:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">NimbusJwtDecoder</span> <span class="n">jwtDecoder</span> <span class="o">=</span> <span class="o">(</span><span class="n">NimbusJwtDecoder</span><span class="o">)</span>
             <span class="n">JwtDecoders</span><span class="o">.</span><span class="na">fromIssuerLocation</span><span class="o">(</span><span class="n">issuerUri</span><span class="o">);</span>

     <span class="n">OAuth2TokenValidator</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">&gt;</span> <span class="n">withClockSkew</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingOAuth2TokenValidator</span><span class="o">&lt;&gt;(</span>
            <span class="k">new</span> <span class="n">JwtTimestampValidator</span><span class="o">(</span><span class="n">Duration</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="n">60</span><span class="o">)),</span>
            <span class="k">new</span> <span class="n">IssuerValidator</span><span class="o">(</span><span class="n">issuerUri</span><span class="o">));</span>

     <span class="n">jwtDecoder</span><span class="o">.</span><span class="na">setJwtValidator</span><span class="o">(</span><span class="n">withClockSkew</span><span class="o">);</span>

     <span class="k">return</span> <span class="n">jwtDecoder</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>By default, Resource Server configures a clock skew of 30 seconds.</p>
</blockquote>
<h3 id="configuring-a-custom-validator">Configuring a Custom Validator</h3>
<p>Adding a check for the <code>aud</code> claim is simple with the <code>OAuth2TokenValidator</code> API:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AudienceValidator</span> <span class="kd">implements</span> <span class="n">OAuth2TokenValidator</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="n">OAuth2Error</span> <span class="n">error</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OAuth2Error</span><span class="o">(</span><span class="s">&#34;invalid_token&#34;</span><span class="o">,</span> <span class="s">&#34;The required audience is missing&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>

    <span class="kd">public</span> <span class="n">OAuth2TokenValidatorResult</span> <span class="nf">validate</span><span class="o">(</span><span class="n">Jwt</span> <span class="n">jwt</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">jwt</span><span class="o">.</span><span class="na">getAudience</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;messaging&#34;</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">OAuth2TokenValidatorResult</span><span class="o">.</span><span class="na">success</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">OAuth2TokenValidatorResult</span><span class="o">.</span><span class="na">failure</span><span class="o">(</span><span class="n">error</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Then, to add into a resource server, itâ€™s a matter of specifying the <code>JwtDecoder</code> instance:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">NimbusJwtDecoder</span> <span class="n">jwtDecoder</span> <span class="o">=</span> <span class="o">(</span><span class="n">NimbusJwtDecoder</span><span class="o">)</span>
        <span class="n">JwtDecoders</span><span class="o">.</span><span class="na">fromIssuerLocation</span><span class="o">(</span><span class="n">issuerUri</span><span class="o">);</span>

    <span class="n">OAuth2TokenValidator</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">&gt;</span> <span class="n">audienceValidator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AudienceValidator</span><span class="o">();</span>
    <span class="n">OAuth2TokenValidator</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">&gt;</span> <span class="n">withIssuer</span> <span class="o">=</span> <span class="n">JwtValidators</span><span class="o">.</span><span class="na">createDefaultWithIssuer</span><span class="o">(</span><span class="n">issuerUri</span><span class="o">);</span>
    <span class="n">OAuth2TokenValidator</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">&gt;</span> <span class="n">withAudience</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingOAuth2TokenValidator</span><span class="o">&lt;&gt;(</span><span class="n">withIssuer</span><span class="o">,</span> <span class="n">audienceValidator</span><span class="o">);</span>

    <span class="n">jwtDecoder</span><span class="o">.</span><span class="na">setJwtValidator</span><span class="o">(</span><span class="n">withAudience</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">jwtDecoder</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="10configuring-claim-set-mapping">10Â Configuring Claim Set Mapping</h2>
<p>Spring Security uses the <a href="https://bitbucket.org/connect2id/nimbus-jose-jwt/wiki/Home">Nimbus</a> library for parsing JWTs and validating their signatures. Consequently, Spring Security is subject to Nimbusâ€™s interpretation of each field value and how to coerce each into a Java type. For example, because Nimbus remains Java 7 compatible, it doesnâ€™t use <code>Instant</code> to represent timestamp fields. And itâ€™s entirely possible to use a different library or for JWT processing, which may make its own coercion decisions that need adjustment. Or, quite simply, a resource server may want to add or remove claims from a JWT for domain-specific reasons. For these purposes, Resource Server supports mapping the JWT claim set with <code>MappedJwtClaimSetConverter</code>.</p>
<h3 id="customizing-the-conversion-of-a-single-claim">Customizing the Conversion of a Single Claim</h3>
<p>By default, <code>MappedJwtClaimSetConverter</code> will attempt to coerce claims into the following types:</p>
<table>
<thead>
<tr>
<th>Claim</th>
<th>Java Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>aud</code></td>
<td><code>Collection</code></td>
</tr>
<tr>
<td><code>exp</code></td>
<td><code>Instant</code></td>
</tr>
<tr>
<td><code>iat</code></td>
<td><code>Instant</code></td>
</tr>
<tr>
<td><code>iss</code></td>
<td><code>String</code></td>
</tr>
<tr>
<td><code>jti</code></td>
<td><code>String</code></td>
</tr>
<tr>
<td><code>nbf</code></td>
<td><code>Instant</code></td>
</tr>
<tr>
<td><code>sub</code></td>
<td><code>String</code></td>
</tr>
</tbody>
</table>
<p>An individual claimâ€™s conversion strategy can be configured using <code>MappedJwtClaimSetConverter.withDefaults</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">NimbusJwtDecoder</span> <span class="n">jwtDecoder</span> <span class="o">=</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">withJwkSetUri</span><span class="o">(</span><span class="n">jwkSetUri</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>

    <span class="n">MappedJwtClaimSetConverter</span> <span class="n">converter</span> <span class="o">=</span> <span class="n">MappedJwtClaimSetConverter</span>
            <span class="o">.</span><span class="na">withDefaults</span><span class="o">(</span><span class="n">Collections</span><span class="o">.</span><span class="na">singletonMap</span><span class="o">(</span><span class="s">&#34;sub&#34;</span><span class="o">,</span> <span class="k">this</span><span class="o">::</span><span class="n">lookupUserIdBySub</span><span class="o">));</span>
    <span class="n">jwtDecoder</span><span class="o">.</span><span class="na">setClaimSetConverter</span><span class="o">(</span><span class="n">converter</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">jwtDecoder</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>This will keep all the defaults, except it will override the default claim converter for <code>sub</code>.</p>
<h3 id="adding-a-claim">Adding a Claim</h3>
<p><code>MappedJwtClaimSetConverter</code> can also be used to add a custom claim, for example, to adapt to an existing system:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">MappedJwtClaimSetConverter</span><span class="o">.</span><span class="na">withDefaults</span><span class="o">(</span><span class="n">Collections</span><span class="o">.</span><span class="na">singletonMap</span><span class="o">(</span><span class="s">&#34;custom&#34;</span><span class="o">,</span> <span class="n">custom</span> <span class="o">-&gt;</span> <span class="s">&#34;value&#34;</span><span class="o">));</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="removing-a-claim">Removing a Claim</h3>
<p>And removing a claim is also simple, using the same API:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">MappedJwtClaimSetConverter</span><span class="o">.</span><span class="na">withDefaults</span><span class="o">(</span><span class="n">Collections</span><span class="o">.</span><span class="na">singletonMap</span><span class="o">(</span><span class="s">&#34;legacyclaim&#34;</span><span class="o">,</span> <span class="n">legacy</span> <span class="o">-&gt;</span> <span class="kc">null</span><span class="o">));</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="renaming-a-claim">Renaming a Claim</h3>
<p>In more sophisticated scenarios, like consulting multiple claims at once or renaming a claim, Resource Server accepts any class that implements <code>Converter&lt;map&lt;string, object=&quot;&quot;&gt;, Map&lt;string,object&gt;&gt;</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UsernameSubClaimAdapter</span> <span class="kd">implements</span> <span class="n">Converter</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">MappedJwtClaimSetConverter</span> <span class="n">delegate</span> <span class="o">=</span>
            <span class="n">MappedJwtClaimSetConverter</span><span class="o">.</span><span class="na">withDefaults</span><span class="o">(</span><span class="n">Collections</span><span class="o">.</span><span class="na">emptyMap</span><span class="o">());</span>

    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="nf">convert</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">claims</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">convertedClaims</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">delegate</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="n">claims</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">convertedClaims</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;user_name&#34;</span><span class="o">);</span>
        <span class="n">convertedClaims</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;sub&#34;</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">convertedClaims</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>And then, the instance can be supplied like normal:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">NimbusJwtDecoder</span> <span class="n">jwtDecoder</span> <span class="o">=</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">withJwkSetUri</span><span class="o">(</span><span class="n">jwkSetUri</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
    <span class="n">jwtDecoder</span><span class="o">.</span><span class="na">setClaimSetConverter</span><span class="o">(</span><span class="k">new</span> <span class="n">UsernameSubClaimAdapter</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">jwtDecoder</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="11configuring-timeouts">11Â Configuring Timeouts</h2>
<p>By default, Resource Server uses connection and socket timeouts of 30 seconds each for coordinating with the authorization server. This may be too short in some scenarios. Further, it doesnâ€™t take into account more sophisticated patterns like back-off and discovery. To adjust the way in which Resource Server connects to the authorization server, <code>NimbusJwtDecoder</code> accepts an instance of <code>RestOperations</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">(</span><span class="n">RestTemplateBuilder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">RestOperations</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">builder</span>
            <span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">60000</span><span class="o">)</span>
            <span class="o">.</span><span class="na">setReadTimeout</span><span class="o">(</span><span class="n">60000</span><span class="o">)</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>

    <span class="n">NimbusJwtDecoder</span> <span class="n">jwtDecoder</span> <span class="o">=</span> <span class="n">NimbusJwtDecoder</span><span class="o">.</span><span class="na">withJwkSetUri</span><span class="o">(</span><span class="n">jwkSetUri</span><span class="o">).</span><span class="na">restOperations</span><span class="o">(</span><span class="n">rest</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">jwtDecoder</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="12minimal-configuration-for-introspection">12Â Minimal Configuration for Introspection</h2>
<p>Typically, an opaque token can be verified via an <a href="https://tools.ietf.org/html/rfc7662">OAuth 2.0 Introspection Endpoint</a>, hosted by the authorization server. This can be handy when revocation is a requirement. When using <a href="https://spring.io/projects/spring-boot">Spring Boot</a>, configuring an application as a resource server that uses introspection consists of two basic steps. First, include the needed dependencies and second, indicate the introspection endpoint details.</p>
<h3 id="specifying-the-authorization-server-1">Specifying the Authorization Server</h3>
<p>To specify where the introspection endpoint is, simply do:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">security</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">oauth2</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">resourceserver</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">opaque-token</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">introspection-uri</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//idp.example.com/introspect<span class="w">
</span><span class="w"> </span><span class="k">client-id</span><span class="p">:</span><span class="w"> </span>client<span class="w">
</span><span class="w"> </span><span class="k">client-secret</span><span class="p">:</span><span class="w"> </span>secret<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>Where <a href="https://idp.example.com/introspect"><code>https://idp.example.com/introspect</code></a> is the introspection endpoint hosted by your authorization server and <code>client-id</code> and <code>client-secret</code> are the credentials needed to hit that endpoint. Resource Server will use these properties to further self-configure and subsequently validate incoming JWTs.</p>
<blockquote>
<p>When using introspection, the authorization serverâ€™s word is the law. If the authorization server responses that the token is valid, then it is.</p>
</blockquote>
<p>And thatâ€™s it!</p>
<h3 id="startup-expectations-1">Startup Expectations</h3>
<p>When this property and these dependencies are used, Resource Server will automatically configure itself to validate Opaque Bearer Tokens. This startup process is quite a bit simpler than for JWTs since no endpoints need to be discovered and no additional validation rules get added.</p>
<h3 id="runtime-expectations-1">Runtime Expectations</h3>
<p>Once the application is started up, Resource Server will attempt to process any request containing an <code>Authorization: Bearer</code> header:</p>
<pre><code>GET / HTTP/1.1
Authorization: Bearer some-token-value # Resource Server will process this
</code></pre><p>So long as this scheme is indicated, Resource Server will attempt to process the request according to the Bearer Token specification. Given an Opaque Token, Resource Server will</p>
<ol>
<li>Query the provided introspection endpoint using the provided credentials and the token</li>
<li>Inspect the response for an <code>{ 'active' : true }</code> attribute</li>
<li>Map each scope to an authority with the prefix <code>SCOPE_</code></li>
</ol>
<p>The resulting <code>Authentication#getPrincipal</code>, by default, is a Spring Security <a href="https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/core/OAuth2AuthenticatedPrincipal.html"><code>OAuth2AuthenticatedPrincipal</code></a> object, and <code>Authentication#getName</code> maps to the tokenâ€™s <code>sub</code> property, if one is present. From here, you may want to jump to:</p>
<ul>
<li><a href="#oauth2resourceserver-opaque-attributes" title="12.3.13Â Looking Up Attributes Post-Authentication">Looking Up Attributes Post-Authentication</a></li>
<li><a href="#oauth2resourceserver-opaque-authorization-extraction" title="Extracting Authorities Manually">Extracting Authorities Manually</a></li>
<li><a href="#oauth2resourceserver-opaque-jwt-introspector" title="12.3.17Â Using Introspection with JWTs">Using Introspection with JWTs</a></li>
</ul>
<h2 id="13looking-up-attributes-post-authentication">13Â Looking Up Attributes Post-Authentication</h2>
<p>Once a token is authenticated, an instance of <code>BearerTokenAuthentication</code> is set in the <code>SecurityContext</code>. This means that itâ€™s available in <code>@Controller</code> methods when using <code>@EnableWebMvc</code> in your configuration:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/foo&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">foo</span><span class="o">(</span><span class="n">BearerTokenAuthentication</span> <span class="n">authentication</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">authentication</span><span class="o">.</span><span class="na">getTokenAttributes</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;sub&#34;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; is the subject&#34;</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Since <code>BearerTokenAuthentication</code> holds an <code>OAuth2AuthenticatedPrincipal</code>, that also means that itâ€™s available to controller methods, too:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/foo&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">foo</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="n">principal</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">principal</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&#34;sub&#34;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; is the subject&#34;</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="looking-up-attributes-via-spel">Looking Up Attributes Via SpEL</h3>
<p>Of course, this also means that attributes can be accessed via SpEL. For example, if using <code>@EnableGlobalMethodSecurity</code> so that you can use <code>@PreAuthorize</code> annotations, you can do:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@PreAuthorize</span><span class="o">(</span><span class="s">&#34;principal?.attributes[&#39;sub&#39;] == &#39;foo&#39;&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">forFoosEyesOnly</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">&#34;foo&#34;</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="14overriding-or-replacing-boot-auto-configuration">14Â Overriding or Replacing Boot Auto Configuration</h2>
<p>There are two <code>@Bean</code> s that Spring Boot generates on Resource Serverâ€™s behalf. The first is a <code>WebSecurityConfigurerAdapter</code> that configures the app as a resource server. When use Opaque Token, this <code>WebSecurityConfigurerAdapter</code> looks like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">http</span>
        <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
            <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
            <span class="o">.</span><span class="na">and</span><span class="o">()</span>
        <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">(</span><span class="n">OAuth2ResourceServerConfigurer</span><span class="o">::</span><span class="n">opaqueToken</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>If the application doesnâ€™t expose a <code>WebSecurityConfigurerAdapter</code> bean, then Spring Boot will expose the above default one. Replacing this is as simple as exposing the bean within the application:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyCustomSecurityConfiguration</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                <span class="o">.</span><span class="na">mvcMatchers</span><span class="o">(</span><span class="s">&#34;/messages/**&#34;</span><span class="o">).</span><span class="na">hasAuthority</span><span class="o">(</span><span class="s">&#34;SCOPE_message:read&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
                <span class="o">.</span><span class="na">opaqueToken</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">introspector</span><span class="o">(</span><span class="n">myIntrospector</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>The above requires the scope of <code>message:read</code> for any URL that starts with <code>/messages/</code>. Methods on the <code>oauth2ResourceServer</code> DSL will also override or replace auto configuration. For example, the second <code>@Bean</code> Spring Boot creates is an <code>OpaqueTokenIntrospector</code>, which decodes <code>String</code> tokens into validated instances of <code>OAuth2AuthenticatedPrincipal</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">OpaqueTokenIntrospector</span> <span class="nf">introspector</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">NimbusOpaqueTokenIntrospector</span><span class="o">(</span><span class="n">introspectionUri</span><span class="o">,</span> <span class="n">clientId</span><span class="o">,</span> <span class="n">clientSecret</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>If the application doesnâ€™t expose a <code>OpaqueTokenIntrospector</code> bean, then Spring Boot will expose the above default one. And its configuration can be overridden using <code>introspectionUri()</code> and <code>introspectionClientCredentials()</code> or replaced using <code>introspector()</code>.</p>
<h3 id="using-introspectionuri">Using <code>introspectionUri()</code></h3>
<p>An authorization serverâ€™s Introspection Uri can be configured <a href="#">as a configuration property</a> or it can be supplied in the DSL:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DirectlyConfiguredIntrospectionUri</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
                <span class="o">.</span><span class="na">opaqueToken</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">introspectionUri</span><span class="o">(</span><span class="s">&#34;https://idp.example.com/introspect&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">introspectionClientCredentials</span><span class="o">(</span><span class="s">&#34;client&#34;</span><span class="o">,</span> <span class="s">&#34;secret&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Using <code>introspectionUri()</code> takes precedence over any configuration property.</p>
<h3 id="using-introspector">Using <code>introspector()</code></h3>
<p>More powerful than <code>introspectionUri()</code> is <code>introspector()</code>, which will completely replace any Boot auto configuration of <code>OpaqueTokenIntrospector</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DirectlyConfiguredIntrospector</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
                <span class="o">.</span><span class="na">opaqueToken</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">introspector</span><span class="o">(</span><span class="n">myCustomIntrospector</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>This is handy when deeper configuration, like <a href="#oauth2resourceserver-opaque-authorization-extraction" title="Extracting Authorities Manually">authority mapping</a>, <a href="#oauth2resourceserver-opaque-jwt-introspector" title="12.3.17Â Using Introspection with JWTs">JWT revocation</a>, or <a href="#oauth2resourceserver-opaque-timeouts" title="12.3.16Â Configuring Timeouts">request timeouts</a>, is necessary.</p>
<h3 id="exposing-a-opaquetokenintrospector-bean">Exposing a <code>OpaqueTokenIntrospector</code> <code>@Bean</code></h3>
<p>Or, exposing a <code>OpaqueTokenIntrospector</code> <code>@Bean</code> has the same effect as <code>introspector()</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">OpaqueTokenIntrospector</span> <span class="nf">introspector</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">NimbusOpaqueTokenIntrospector</span><span class="o">(</span><span class="n">introspectionUri</span><span class="o">,</span> <span class="n">clientId</span><span class="o">,</span> <span class="n">clientSecret</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="15configuring-authorization">15Â Configuring Authorization</h2>
<p>An OAuth 2.0 Introspection endpoint will typically return a <code>scope</code> attribute, indicating the scopes (or authorities) itâ€™s been granted, for example: <code>{ â€¦â€‹, &quot;scope&quot; : &quot;messages contacts&quot;}</code> When this is the case, Resource Server will attempt to coerce these scopes into a list of granted authorities, prefixing each scope with the string &quot;SCOPE_&quot;. This means that to protect an endpoint or method with a scope derived from an Opaque Token, the corresponding expressions should include this prefix:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MappedAuthorities</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span>
            <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">(</span><span class="n">authorizeRequests</span> <span class="o">-&gt;</span> <span class="n">authorizeRequests</span>
                <span class="o">.</span><span class="na">mvcMatchers</span><span class="o">(</span><span class="s">&#34;/contacts/**&#34;</span><span class="o">).</span><span class="na">hasAuthority</span><span class="o">(</span><span class="s">&#34;SCOPE_contacts&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">mvcMatchers</span><span class="o">(</span><span class="s">&#34;/messages/**&#34;</span><span class="o">).</span><span class="na">hasAuthority</span><span class="o">(</span><span class="s">&#34;SCOPE_messages&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
            <span class="o">)</span>
            <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">(</span><span class="n">OAuth2ResourceServerConfigurer</span><span class="o">::</span><span class="n">opaqueToken</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Or similarly with method security:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@PreAuthorize</span><span class="o">(</span><span class="s">&#34;hasAuthority(&#39;SCOPE_messages&#39;)&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Message</span><span class="o">&gt;</span> <span class="nf">getMessages</span><span class="o">(...)</span> <span class="o">{}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="extracting-authorities-manually-1">Extracting Authorities Manually</h3>
<p>By default, Opaque Token support will extract the scope claim from an introspection response and parse it into individual <code>GrantedAuthority</code> instances. For example, if the introspection response were:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;active&#34;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&#34;scope&#34;</span> <span class="p">:</span> <span class="s2">&#34;message:read message:write&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Then Resource Server would generate an <code>Authentication</code> with two authorities, one for <code>message:read</code> and the other for <code>message:write</code>. This can, of course, be customized using a custom <code>OpaqueTokenIntrospector</code> that takes a look at the attribute set and converts in its own way:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomAuthoritiesOpaqueTokenIntrospector</span> <span class="kd">implements</span> <span class="n">OpaqueTokenIntrospector</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">OpaqueTokenIntrospector</span> <span class="n">delegate</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">NimbusOpaqueTokenIntrospector</span><span class="o">(</span><span class="s">&#34;https://idp.example.org/introspect&#34;</span><span class="o">,</span> <span class="s">&#34;client&#34;</span><span class="o">,</span> <span class="s">&#34;secret&#34;</span><span class="o">);</span>

    <span class="kd">public</span> <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="nf">introspect</span><span class="o">(</span><span class="n">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="n">principal</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">delegate</span><span class="o">.</span><span class="na">introspect</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">DefaultOAuth2AuthenticatedPrincipal</span><span class="o">(</span>
                <span class="n">principal</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">principal</span><span class="o">.</span><span class="na">getAttributes</span><span class="o">(),</span> <span class="n">extractAuthorities</span><span class="o">(</span><span class="n">principal</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">GrantedAuthority</span><span class="o">&gt;</span> <span class="nf">extractAuthorities</span><span class="o">(</span><span class="n">OAuth2AuthenticatedPrincipal</span> <span class="n">principal</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">scopes</span> <span class="o">=</span> <span class="n">principal</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="n">OAuth2IntrospectionClaimNames</span><span class="o">.</span><span class="na">SCOPE</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">scopes</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">SimpleGrantedAuthority</span><span class="o">::</span><span class="k">new</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Thereafter, this custom introspector can be configured simply by exposing it as a <code>@Bean</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">OpaqueTokenIntrospector</span> <span class="nf">introspector</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">CustomAuthoritiesOpaqueTokenIntrospector</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="16configuring-timeouts">16Â Configuring Timeouts</h2>
<p>By default, Resource Server uses connection and socket timeouts of 30 seconds each for coordinating with the authorization server. This may be too short in some scenarios. Further, it doesnâ€™t take into account more sophisticated patterns like back-off and discovery. To adjust the way in which Resource Server connects to the authorization server, <code>NimbusOpaqueTokenIntrospector</code> accepts an instance of <code>RestOperations</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">OpaqueTokenIntrospector</span> <span class="nf">introspector</span><span class="o">(</span><span class="n">RestTemplateBuilder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">RestOperations</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">builder</span>
            <span class="o">.</span><span class="na">basicAuthentication</span><span class="o">(</span><span class="n">clientId</span><span class="o">,</span> <span class="n">clientSecret</span><span class="o">)</span>
            <span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">60000</span><span class="o">)</span>
            <span class="o">.</span><span class="na">setReadTimeout</span><span class="o">(</span><span class="n">60000</span><span class="o">)</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">NimbusOpaqueTokenIntrospector</span><span class="o">(</span><span class="n">introspectionUri</span><span class="o">,</span> <span class="n">rest</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="17using-introspection-with-jwts">17Â Using Introspection with JWTs</h2>
<p>A common question is whether or not introspection is compatible with JWTs. Spring Securityâ€™s Opaque Token support has been designed to not care about the format of the tokenâ€‰â€”â€‰it will gladly pass any token to the introspection endpoint provided. So, letâ€™s say that youâ€™ve got a requirement that requires you to check with the authorization server on each request, in case the JWT has been revoked. Even though you are using the JWT format for the token, your validation method is introspection, meaning youâ€™d want to do:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">spring</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">security</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">oauth2</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">resourceserver</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">opaque-token</span><span class="p">:</span><span class="w">
</span><span class="w"> </span><span class="k">introspection-uri</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//idp.example.org/introspection<span class="w">
</span><span class="w"> </span><span class="k">client-id</span><span class="p">:</span><span class="w"> </span>client<span class="w">
</span><span class="w"> </span><span class="k">client-secret</span><span class="p">:</span><span class="w"> </span>secret<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>In this case, the resulting <code>Authentication</code> would be <code>BearerTokenAuthentication</code>. Any attributes in the corresponding <code>OAuth2AuthenticatedPrincipal</code> would be whatever was returned by the introspection endpoint. But, letâ€™s say that, oddly enough, the introspection endpoint only returns whether or not the token is active. Now what? In this case, you can create a custom <code>OpaqueTokenIntrospector</code> that still hits the endpoint, but then updates the returned principal to have the JWTs claims as the attributes:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtOpaqueTokenIntrospector</span> <span class="kd">implements</span> <span class="n">OpaqueTokenIntrospector</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">OpaqueTokenIntrospector</span> <span class="n">delegate</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">NimbusOpaqueTokenIntrospector</span><span class="o">(</span><span class="s">&#34;https://idp.example.org/introspect&#34;</span><span class="o">,</span> <span class="s">&#34;client&#34;</span><span class="o">,</span> <span class="s">&#34;secret&#34;</span><span class="o">);</span>
    <span class="kd">private</span> <span class="n">JwtDecoder</span> <span class="n">jwtDecoder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NimbusJwtDecoder</span><span class="o">(</span><span class="k">new</span> <span class="n">ParseOnlyJWTProcessor</span><span class="o">());</span>

    <span class="kd">public</span> <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="nf">introspect</span><span class="o">(</span><span class="n">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="n">principal</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">delegate</span><span class="o">.</span><span class="na">introspect</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">Jwt</span> <span class="n">jwt</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">jwtDecoder</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
            <span class="k">return</span> <span class="k">new</span> <span class="n">DefaultOAuth2AuthenticatedPrincipal</span><span class="o">(</span><span class="n">jwt</span><span class="o">.</span><span class="na">getClaims</span><span class="o">(),</span> <span class="n">NO_AUTHORITIES</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JwtException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">OAuth2IntrospectionException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ParseOnlyJWTProcessor</span> <span class="kd">extends</span> <span class="n">DefaultJWTProcessor</span><span class="o">&lt;</span><span class="n">SecurityContext</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="n">JWTClaimsSet</span> <span class="nf">process</span><span class="o">(</span><span class="n">SignedJWT</span> <span class="n">jwt</span><span class="o">,</span> <span class="n">SecurityContext</span> <span class="n">context</span><span class="o">)</span>
                <span class="kd">throws</span> <span class="n">JOSEException</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">jwt</span><span class="o">.</span><span class="na">getJWTClaimSet</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Thereafter, this custom introspector can be configured simply by exposing it as a <code>@Bean</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">OpaqueTokenIntrospector</span> <span class="nf">introspector</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">JwtOpaqueTokenIntropsector</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="18calling-a-userinfo-endpoint">18Â Calling a <code>/userinfo</code> Endpoint</h2>
<p>Generally speaking, a Resource Server doesnâ€™t care about the underlying user, but instead about the authorities that have been granted. That said, at times it can be valuable to tie the authorization statement back to a user. If an application is also using <code>spring-security-oauth2-client</code>, having set up the appropriate <code>ClientRegistrationRepository</code>, then this is quite simple with a custom <code>OpaqueTokenIntrospector</code>. This implementation below does three things:</p>
<ul>
<li>Delegates to the introspection endpoint, to affirm the tokenâ€™s validity</li>
<li>Looks up the appropriate client registration associated with the <code>/userinfo</code> endpoint</li>
<li>Invokes and returns the response from the <code>/userinfo</code> endpoint</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserInfoOpaqueTokenIntrospector</span> <span class="kd">implements</span> <span class="n">OpaqueTokenIntrospector</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">OpaqueTokenIntrospector</span> <span class="n">delegate</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">NimbusOpaqueTokenIntrospector</span><span class="o">(</span><span class="s">&#34;https://idp.example.org/introspect&#34;</span><span class="o">,</span> <span class="s">&#34;client&#34;</span><span class="o">,</span> <span class="s">&#34;secret&#34;</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">OAuth2UserService</span> <span class="n">oauth2UserService</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultOAuth2UserService</span><span class="o">();</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ClientRegistrationRepository</span> <span class="n">repository</span><span class="o">;</span>

    <span class="c1">// ... constructor
</span><span class="c1"></span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="nf">introspect</span><span class="o">(</span><span class="n">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="n">authorized</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">delegate</span><span class="o">.</span><span class="na">introspect</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
        <span class="n">Instant</span> <span class="n">issuedAt</span> <span class="o">=</span> <span class="n">authorized</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="n">ISSUED_AT</span><span class="o">);</span>
        <span class="n">Instant</span> <span class="n">expiresAt</span> <span class="o">=</span> <span class="n">authorized</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="n">EXPIRES_AT</span><span class="o">);</span>
        <span class="n">ClientRegistration</span> <span class="n">clientRegistration</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">repository</span><span class="o">.</span><span class="na">findByRegistrationId</span><span class="o">(</span><span class="s">&#34;registration-id&#34;</span><span class="o">);</span>
        <span class="n">OAuth2AccessToken</span> <span class="n">token</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OAuth2AccessToken</span><span class="o">(</span><span class="n">BEARER</span><span class="o">,</span> <span class="n">token</span><span class="o">,</span> <span class="n">issuedAt</span><span class="o">,</span> <span class="n">expiresAt</span><span class="o">);</span>
        <span class="n">OAuth2UserRequest</span> <span class="n">oauth2UserRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OAuth2UserRequest</span><span class="o">(</span><span class="n">clientRegistration</span><span class="o">,</span> <span class="n">token</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">oauth2UserService</span><span class="o">.</span><span class="na">loadUser</span><span class="o">(</span><span class="n">oauth2UserRequest</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>If you arenâ€™t using <code>spring-security-oauth2-client</code>, itâ€™s still quite simple. You will simply need to invoke the <code>/userinfo</code> with your own instance of <code>WebClient</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserInfoOpaqueTokenIntrospector</span> <span class="kd">implements</span> <span class="n">OpaqueTokenIntrospector</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">OpaqueTokenIntrospector</span> <span class="n">delegate</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">NimbusOpaqueTokenIntrospector</span><span class="o">(</span><span class="s">&#34;https://idp.example.org/introspect&#34;</span><span class="o">,</span> <span class="s">&#34;client&#34;</span><span class="o">,</span> <span class="s">&#34;secret&#34;</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">WebClient</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="nf">introspect</span><span class="o">(</span><span class="n">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">OAuth2AuthenticatedPrincipal</span> <span class="n">authorized</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">delegate</span><span class="o">.</span><span class="na">introspect</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">makeUserInfoRequest</span><span class="o">(</span><span class="n">authorized</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Either way, having created your <code>OpaqueTokenIntrospector</code>, you should publish it as a <code>@Bean</code> to override the defaults:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">OpaqueTokenIntrospector</span> <span class="nf">introspector</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">UserInfoOpaqueTokenIntrospector</span><span class="o">(...);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="19supporting-both-jwt-and-opaque-token">19Â Supporting both JWT and Opaque Token</h2>
<p>In some cases, you may have a need to access both kinds of tokens. For example, you may support more than one tenant where one tenant issues JWTs and the other issues opaque tokens. If this decision must be made at request-time, then you can use an <code>AuthenticationManagerResolver</code> to achieve it, like so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">AuthenticationManagerResolver</span><span class="o">&lt;</span><span class="n">HttpServletRequest</span><span class="o">&gt;</span> <span class="nf">tokenAuthenticationManagerResolver</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">BearerTokenResolver</span> <span class="n">bearerToken</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultBearerTokenResolver</span><span class="o">();</span>
    <span class="n">JwtAuthenticationProvider</span> <span class="n">jwt</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">();</span>
    <span class="n">OpaqueTokenAuthenticationProvider</span> <span class="n">opaqueToken</span> <span class="o">=</span> <span class="n">opaqueToken</span><span class="o">();</span>

    <span class="k">return</span> <span class="n">request</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">bearerToken</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">isAJwt</span><span class="o">(</span><span class="n">token</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">jwt</span><span class="o">::</span><span class="n">authenticate</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">opaqueToken</span><span class="o">::</span><span class="n">authenticate</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>And then specify this <code>AuthenticationManagerResolver</code> in the DSL:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">http</span>
    <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
        <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
        <span class="o">.</span><span class="na">and</span><span class="o">()</span>
    <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
        <span class="o">.</span><span class="na">authenticationManagerResolver</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">tokenAuthenticationManagerResolver</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="20multi-tenancy">20Â Multi-tenancy</h2>
<p>A resource server is considered multi-tenant when there are multiple strategies for verifying a bearer token, keyed by some tenant identifier. For example, your resource server may accept bearer tokens from two different authorization servers. Or, your authorization server may represent a multiplicity of issuers. In each case, there are two things that need to be done and trade-offs associated with how you choose to do them:</p>
<ol>
<li>Resolve the tenant</li>
<li>Propagate the tenant</li>
</ol>
<h3 id="resolving-the-tenant-by-request-material">Resolving the Tenant By Request Material</h3>
<p>Resolving the tenant by request material can be done my implementing an <code>AuthenticationManagerResolver</code>, which determines the <code>AuthenticationManager</code> at runtime, like so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TenantAuthenticationManagerResolver</span>
        <span class="kd">implements</span> <span class="n">AuthenticationManagerResolver</span><span class="o">&lt;</span><span class="n">HttpServletRequest</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">BearerTokenResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultBearerTokenResolver</span><span class="o">();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">TenantRepository</span> <span class="n">tenants</span><span class="o">;</span> <span class="c1">// 1
</span><span class="c1"></span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">AuthenticationManager</span><span class="o">&gt;</span> <span class="n">authenticationManagers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;();</span> <span class="c1">// 2
</span><span class="c1"></span>
    <span class="kd">public</span> <span class="nf">TenantAuthenticationManagerResolver</span><span class="o">(</span><span class="n">TenantRepository</span> <span class="n">tenants</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">tenants</span> <span class="o">=</span> <span class="n">tenants</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">AuthenticationManager</span> <span class="nf">resolve</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">authenticationManagers</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">toTenant</span><span class="o">(</span><span class="n">request</span><span class="o">),</span> <span class="k">this</span><span class="o">::</span><span class="n">fromTenant</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">toTenant</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">pathParts</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">pathParts</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="n">0</span> <span class="o">?</span> <span class="n">pathParts</span><span class="o">[</span><span class="n">1</span><span class="o">]</span> <span class="o">:</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">AuthenticationManager</span> <span class="nf">fromTenant</span><span class="o">(</span><span class="n">String</span> <span class="n">tenant</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">tenants</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">tenant</span><span class="o">))</span> <span class="c1">// 3
</span><span class="c1"></span>                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">JwtDecoders</span><span class="o">::</span><span class="n">fromIssuerLocation</span><span class="o">)</span> <span class="c1">// 4
</span><span class="c1"></span>                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">JwtAuthenticationProvider</span><span class="o">::</span><span class="k">new</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;unknown tenant&#34;</span><span class="o">))::</span><span class="n">authenticate</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><ol>
<li>A hypothetical source for tenant information</li>
<li>A cache for <code>AuthenticationManager</code>s, keyed by tenant identifier</li>
<li>Looking up the tenant is more secure than simply computing the issuer location on the fly - the lookup acts as a tenant whitelist</li>
<li>Create a JwtDecoder via the discovery endpoint - the lazy lookup here means that you donâ€™t need to configure all tenants at startup</li>
</ol>
<p>And then specify this <code>AuthenticationManagerResolver</code> in the DSL:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">http</span>
    <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
        <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
        <span class="o">.</span><span class="na">and</span><span class="o">()</span>
    <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
        <span class="o">.</span><span class="na">authenticationManagerResolver</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">tenantAuthenticationManagerResolver</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="resolving-the-tenant-by-claim">Resolving the Tenant By Claim</h3>
<p>Resolving the tenant by claim is similar to doing so by request material. The only real difference is the <code>toTenant</code> method implementation:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TenantAuthenticationManagerResolver</span> <span class="kd">implements</span> <span class="n">AuthenticationManagerResolver</span><span class="o">&lt;</span><span class="n">HttpServletRequest</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">BearerTokenResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultBearerTokenResolver</span><span class="o">();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">TenantRepository</span> <span class="n">tenants</span><span class="o">;</span> <span class="c1">// 1
</span><span class="c1"></span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">AuthenticationManager</span><span class="o">&gt;</span> <span class="n">authenticationManagers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;();</span> <span class="c1">// 2
</span><span class="c1"></span>
    <span class="kd">public</span> <span class="nf">TenantAuthenticationManagerResolver</span><span class="o">(</span><span class="n">TenantRepository</span> <span class="n">tenants</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">tenants</span> <span class="o">=</span> <span class="n">tenants</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">AuthenticationManager</span> <span class="nf">resolve</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">authenticationManagers</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">toTenant</span><span class="o">(</span><span class="n">request</span><span class="o">),</span> <span class="k">this</span><span class="o">::</span><span class="n">fromTenant</span><span class="o">);</span> <span class="c1">// 3
</span><span class="c1"></span>    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">toTenant</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">resolver</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="k">return</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">JWTParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">token</span><span class="o">).</span><span class="na">getJWTClaimsSet</span><span class="o">().</span><span class="na">getIssuer</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">AuthenticationManager</span> <span class="nf">fromTenant</span><span class="o">(</span><span class="n">String</span> <span class="n">tenant</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">tenants</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">tenant</span><span class="o">))</span> <span class="c1">// 4
</span><span class="c1"></span>                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">JwtDecoders</span><span class="o">::</span><span class="n">fromIssuerLocation</span><span class="o">)</span> <span class="c1">// 5
</span><span class="c1"></span>                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">JwtAuthenticationProvider</span><span class="o">::</span><span class="k">new</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;unknown tenant&#34;</span><span class="o">))::</span><span class="n">authenticate</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#CO14-1"><img src="images/1.png" alt="1"></a></td>
<td></td>
<td>A hypothetical source for tenant information</td>
</tr>
<tr>
<td><a href="#CO14-2"><img src="images/2.png" alt="1"></a></td>
<td></td>
<td>A cache for <code>AuthenticationManager</code>s, keyed by tenant identifier</td>
</tr>
<tr>
<td><a href="#CO14-3"><img src="images/3.png" alt="1"></a></td>
<td><a href="#CO14-4"><img src="images/4.png" alt="1"></a></td>
<td>Looking up the tenant is more secure than simply computing the issuer location on the fly - the lookup acts as a tenant whitelist</td>
</tr>
<tr>
<td><a href="#CO14-5"><img src="images/5.png" alt="1"></a></td>
<td></td>
<td>Create a <code>JwtDecoder</code> via the discovery endpoint - the lazy lookup here means that you donâ€™t need to configure all tenants at startup</td>
</tr>
</tbody>
</table>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">http</span>
    <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
        <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
        <span class="o">.</span><span class="na">and</span><span class="o">()</span>
    <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
        <span class="o">.</span><span class="na">authenticationManagerResolver</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">tenantAuthenticationManagerResolver</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="parsing-the-claim-only-once">Parsing the Claim Only Once</h3>
<p>You may have observed that this strategy, while simple, comes with the trade-off that the JWT is parsed once by the <code>AuthenticationManagerResolver</code> and then again by the <code>JwtDecoder</code>. This extra parsing can be alleviated by configuring the <code>JwtDecoder</code> directly with a <code>JWTClaimSetAwareJWSKeySelector</code> from Nimbus:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TenantJWSKeySelector</span>
    <span class="kd">implements</span> <span class="n">JWTClaimSetAwareJWSKeySelector</span><span class="o">&lt;</span><span class="n">SecurityContext</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">TenantRepository</span> <span class="n">tenants</span><span class="o">;</span> <span class="n">1</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">JWSKeySelector</span><span class="o">&lt;</span><span class="n">SecurityContext</span><span class="o">&gt;&gt;</span> <span class="n">selectors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;();</span> <span class="n">2</span>

    <span class="kd">public</span> <span class="nf">TenantJWSKeySelector</span><span class="o">(</span><span class="n">TenantRepository</span> <span class="n">tenants</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">tenants</span> <span class="o">=</span> <span class="n">tenants</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Key</span><span class="o">&gt;</span> <span class="nf">selectKeys</span><span class="o">(</span><span class="n">JWSHeader</span> <span class="n">jwsHeader</span><span class="o">,</span> <span class="n">JWTClaimsSet</span> <span class="n">jwtClaimsSet</span><span class="o">,</span> <span class="n">SecurityContext</span> <span class="n">securityContext</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="n">KeySourceException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">selectors</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">toTenant</span><span class="o">(</span><span class="n">jwtClaimsSet</span><span class="o">),</span> <span class="k">this</span><span class="o">::</span><span class="n">fromTenant</span><span class="o">)</span>
                <span class="o">.</span><span class="na">selectJWSKeys</span><span class="o">(</span><span class="n">jwsHeader</span><span class="o">,</span> <span class="n">securityContext</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">toTenant</span><span class="o">(</span><span class="n">JWTClaimsSet</span> <span class="n">claimSet</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">claimSet</span><span class="o">.</span><span class="na">getClaim</span><span class="o">(</span><span class="s">&#34;iss&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">JWSKeySelector</span><span class="o">&lt;</span><span class="n">SecurityContext</span><span class="o">&gt;</span> <span class="nf">fromTenant</span><span class="o">(</span><span class="n">String</span> <span class="n">tenant</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">tenantRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">tenant</span><span class="o">))</span> <span class="n">3</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="na">getAttrbute</span><span class="o">(</span><span class="s">&#34;jwks_uri&#34;</span><span class="o">))</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">fromUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;unknown tenant&#34;</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">JWSKeySelector</span><span class="o">&lt;</span><span class="n">SecurityContext</span><span class="o">&gt;</span> <span class="nf">fromUri</span><span class="o">(</span><span class="n">String</span> <span class="n">uri</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">JWSAlgorithmFamilyJWSKeySelector</span><span class="o">.</span><span class="na">fromJWKSetURL</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">uri</span><span class="o">));</span> <span class="n">4</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#CO14-1"><img src="images/1.png" alt="1"></a></td>
<td>A hypothetical source for tenant information</td>
<td></td>
</tr>
<tr>
<td><a href="#CO14-2"><img src="images/2.png" alt="1"></a></td>
<td>A cache for <code>JWKKeySelector</code>s, keyed by tenant identifier</td>
<td></td>
</tr>
<tr>
<td><a href="#CO14-3"><img src="images/3.png" alt="1"></a></td>
<td>Looking up the tenant is more secure than simply calculating the JWK Set endpoint on the fly - the lookup acts as a tenant whitelist</td>
<td></td>
</tr>
<tr>
<td><a href="#CO14-4"><img src="images/4.png" alt="1"></a></td>
<td>Create a <code>JWSKeySelector</code> via the types of keys that come back from the JWK Set endpoint - the lazy lookup here means that you donâ€™t need to configure all tenants at startupp</td>
<td></td>
</tr>
</tbody>
</table>
<p>The above key selector is a composition of many key selectors. It chooses which key selector to use based on the <code>iss</code> claim in the JWT.</p>
<blockquote>
<p>To use this approach, make sure that the authorization server is configured to include the claim set as part of the tokenâ€™s signature. Without this, you have no guarantee that the issuer hasnâ€™t been altered by a bad actor.</p>
</blockquote>
<p>Next, we can construct a <code>JWTProcessor</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JWTProcessor</span> <span class="nf">jwtProcessor</span><span class="o">(</span><span class="n">JWTClaimSetJWSKeySelector</span> <span class="n">keySelector</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ConfigurableJWTProcessor</span><span class="o">&lt;</span><span class="n">SecurityContext</span><span class="o">&gt;</span> <span class="n">jwtProcessor</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">DefaultJWTProcessor</span><span class="o">();</span>
    <span class="n">jwtProcessor</span><span class="o">.</span><span class="na">setJWTClaimSetJWSKeySelector</span><span class="o">(</span><span class="n">keySelector</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">jwtProcessor</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>As you are already seeing, the trade-off for moving tenant-awareness down to this level is more configuration. We have just a bit more. Next, we still want to make sure you are validating the issuer. But, since the issuer may be different per JWT, then youâ€™ll need a tenant-aware validator, too:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TenantJwtIssuerValidator</span> <span class="kd">implements</span> <span class="n">OAuth2TokenValidator</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">TenantRepository</span> <span class="n">tenants</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">JwtIssuerValidator</span><span class="o">&gt;</span> <span class="n">validators</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">TenantJwtIssuerValidator</span><span class="o">(</span><span class="n">TenantRepository</span> <span class="n">tenants</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">tenants</span> <span class="o">=</span> <span class="n">tenants</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">OAuth2TokenValidatorResult</span> <span class="nf">validate</span><span class="o">(</span><span class="n">Jwt</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">validators</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">toTenant</span><span class="o">(</span><span class="n">token</span><span class="o">),</span> <span class="k">this</span><span class="o">::</span><span class="n">fromTenant</span><span class="o">)</span>
                <span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">toTenant</span><span class="o">(</span><span class="n">Jwt</span> <span class="n">jwt</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">jwt</span><span class="o">.</span><span class="na">getIssuer</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">JwtIssuerValidator</span> <span class="nf">fromTenant</span><span class="o">(</span><span class="n">String</span> <span class="n">tenant</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">tenants</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">tenant</span><span class="o">))</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&#34;issuer&#34;</span><span class="o">))</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">JwtIssuerValidator</span><span class="o">::</span><span class="k">new</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;unknown tenant&#34;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Now that we have a tenant-aware processor and a tenant-aware validator, we can proceed with creating our <code>JwtDecoder</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">JwtDecoder</span> <span class="nf">jwtDecoder</span><span class="o">(</span><span class="n">JWTProcessor</span> <span class="n">jwtProcessor</span><span class="o">,</span> <span class="n">OAuth2TokenValidator</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">&gt;</span> <span class="n">jwtValidator</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">NimbusJwtDecoder</span> <span class="n">decoder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NimbusJwtDecoder</span><span class="o">(</span><span class="n">processor</span><span class="o">);</span>
    <span class="n">OAuth2TokenValidator</span><span class="o">&lt;</span><span class="n">Jwt</span><span class="o">&gt;</span> <span class="n">validator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DelegatingOAuth2TokenValidator</span><span class="o">&lt;&gt;</span>
            <span class="o">(</span><span class="n">JwtValidators</span><span class="o">.</span><span class="na">createDefault</span><span class="o">(),</span> <span class="k">this</span><span class="o">.</span><span class="na">jwtValidator</span><span class="o">);</span>
    <span class="n">decoder</span><span class="o">.</span><span class="na">setJwtValidator</span><span class="o">(</span><span class="n">validator</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">decoder</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Weâ€™ve finished talking about resolving the tenant. If youâ€™ve chosen to resolve the tenant by request material, then youâ€™ll need to make sure you address your downstream resource servers in the same way. For example, if you are resolving it by subdomain, youâ€™ll need to address the downstream resource server using the same subdomain. However, if you resolve it by a claim in the bearer token, read on to learn about <a href="#oauth2resourceserver-bearertoken-resolver" title="12.3.21Â Bearer Token Resolution">Spring Securityâ€™s support for bearer token propagation</a>.</p>
<h2 id="21bearer-token-resolution">21Â Bearer Token Resolution</h2>
<p>By default, Resource Server looks for a bearer token in the <code>Authorization</code> header. This, however, can be customized in a couple of ways.</p>
<h3 id="reading-the-bearer-token-from-a-custom-header">Reading the Bearer Token from a Custom Header</h3>
<p>For example, you may have a need to read the bearer token from a custom header. To achieve this, you can wire a <code>HeaderBearerTokenResolver</code> instance into the DSL, as you can see in the following example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">http</span>
    <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bearerTokenResolver</span><span class="o">(</span><span class="k">new</span> <span class="n">HeaderBearerTokenResolver</span><span class="o">(</span><span class="s">&#34;x-goog-iap-jwt-assertion&#34;</span><span class="o">));</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="reading-the-bearer-token-from-a-form-parameter">Reading the Bearer Token from a Form Parameter</h3>
<p>Or, you may wish to read the token from a form parameter, which you can do by configuring the <code>DefaultBearerTokenResolver</code>, as you can see below:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">DefaultBearerTokenResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultBearerTokenResolver</span><span class="o">();</span>
<span class="n">resolver</span><span class="o">.</span><span class="na">setAllowFormEncodedBodyParameter</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">http</span>
    <span class="o">.</span><span class="na">oauth2ResourceServer</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bearerTokenResolver</span><span class="o">(</span><span class="n">resolver</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="22bearer-token-propagation">22Â Bearer Token Propagation</h2>
<p>Now that youâ€™re in possession of a bearer token, it might be handy to pass that to downstream services. This is quite simple with <a href="https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/server/resource/web/reactive/function/client/ServletBearerExchangeFilterFunction.html"><code>ServletBearerExchangeFilterFunction</code></a>, which you can see in the following example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">WebClient</span> <span class="nf">rest</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">new</span> <span class="n">ServletBearerExchangeFilterFunction</span><span class="o">())</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>When the above <code>WebClient</code> is used to perform requests, Spring Security will look up the current <code>Authentication</code> and extract any <a href="https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/core/AbstractOAuth2Token.html"><code>AbstractOAuth2Token</code></a> credential. Then, it will propagate that token in the <code>Authorization</code> header. For example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">get</span><span class="o">()</span>
        <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;https://other-service.example.com/endpoint&#34;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">block</span><span class="o">()</span>
</code></pre></td></tr></table>
</div>
</div><p>Will invoke the <a href="https://other-service.example.com/endpoint"><code>https://other-service.example.com/endpoint</code></a>, adding the bearer token <code>Authorization</code> header for you. In places where you need to override this behavior, itâ€™s a simple matter of supplying the header yourself, like so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">get</span><span class="o">()</span>
        <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;https://other-service.example.com/endpoint&#34;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span> <span class="o">-&gt;</span> <span class="n">headers</span><span class="o">.</span><span class="na">setBearerAuth</span><span class="o">(</span><span class="n">overridingToken</span><span class="o">))</span>
        <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">block</span><span class="o">()</span>
</code></pre></td></tr></table>
</div>
</div><p>In this case, the filter will fall back and simply forward the request onto the rest of the web filter chain.</p>
<blockquote>
<p>Unlike the <a href="https://docs.spring.io/spring-security/site/docs/current-SNAPSHOT/api/org/springframework/security/oauth2/client/web/reactive/function/client/ServletOAuth2AuthorizedClientExchangeFilterFunction.html">OAuth 2.0 Client filter function</a>, this filter function makes no attempt to renew the token, should it be expired. To obtain this level of support, please use the OAuth 2.0 Client filter.</p>
</blockquote>
<h3 id="resttemplate-support"><code>RestTemplate</code> support</h3>
<p>There is no dedicated support for <code>RestTemplate</code> at the moment, but you can achieve propagation quite simply with your own interceptor:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="n">RestTemplate</span> <span class="nf">rest</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">RestTemplate</span> <span class="n">rest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RestTemplate</span><span class="o">();</span>
    <span class="n">rest</span><span class="o">.</span><span class="na">getInterceptors</span><span class="o">().</span><span class="na">add</span><span class="o">((</span><span class="n">request</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">execution</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">Authentication</span> <span class="n">authentication</span> <span class="o">=</span> <span class="n">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">getAuthentication</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">authentication</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">execution</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">body</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(!(</span><span class="n">authentication</span><span class="o">.</span><span class="na">getCredentials</span><span class="o">()</span> <span class="k">instanceof</span> <span class="n">AbstractOAuth2Token</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">execution</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">body</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">AbstractOAuth2Token</span> <span class="n">token</span> <span class="o">=</span> <span class="o">(</span><span class="n">AbstractOAuth2Token</span><span class="o">)</span> <span class="n">authentication</span><span class="o">.</span><span class="na">getCredentials</span><span class="o">();</span>
        <span class="n">request</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">().</span><span class="na">setBearerAuth</span><span class="o">(</span><span class="n">token</span><span class="o">.</span><span class="na">getTokenValue</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">execution</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">body</span><span class="o">);</span>
    <span class="o">});</span>
    <span class="k">return</span> <span class="n">rest</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%90%8E%E7%AB%AF/">åç«¯</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/spring/">spring</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Springæ¨èä½¿ç”¨æ„é€ å™¨æ³¨å…¥</title>
                <link>https://wss.cool/spring%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5.html</link>
                <guid isPermaLink="true">https://wss.cool/spring%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5.html</guid>
                <pubDate>Sat, 18 Jan 2020 18:30:02 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>Springå›¢é˜Ÿé€šå¸¸æå€¡æ„é€ å‡½æ•°æ³¨å…¥ï¼Œå› ä¸ºå®ƒå¯ä»¥ä½¿åº”ç”¨ç¨‹åºç»„ä»¶å®ç°ä¸å¯å˜å¯¹è±¡å¹¶ç¡®ä¿æ‰€éœ€çš„ä¾èµ–é¡¹ä¸ä¸ºnullã€‚æ­¤å¤–ï¼Œæ„é€ å‡½æ•°æ³¨å…¥çš„ç»„ä»¶å§‹ç»ˆä»¥å®Œå…¨åˆå§‹åŒ–çš„çŠ¶æ€è¿”å›åˆ°å®¢æˆ·ç«¯ï¼ˆè°ƒç”¨ï¼‰ä»£ç ã€‚é™„å¸¦è¯´æ˜ä¸€ä¸‹ï¼Œå¤§é‡çš„æ„é€ å‡½æ•°è‡ªå˜é‡æ˜¯ä¸€ç§ä¸å¥½çš„ä»£ç å‘³é“ï¼Œè¿™æ„å‘³ç€è¯¥ç±»å¯èƒ½æ‰¿æ‹…äº†å¤ªå¤šçš„èŒè´£ï¼Œåº”è¯¥å¯¹å…¶è¿›è¡Œé‡æ„ä»¥æ›´å¥½åœ°è§£å†³å…³æ³¨ç‚¹åˆ†ç¦»é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬é€šå¸¸å»ºè®®äººä»¬å¯¹æ‰€æœ‰å¿…éœ€çš„åä½œè€…ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼Œå¯¹æ‰€æœ‰å…¶ä»–å±æ€§ä½¿ç”¨setteræ³¨å…¥ã€‚åŒæ ·ï¼Œæ„é€ å‡½æ•°æ³¨å…¥å¯ç¡®ä¿æ»¡è¶³æ‰€æœ‰å¿…éœ€å±æ€§ï¼Œå¹¶ä¸”æ ¹æœ¬ä¸å¯èƒ½ä»¥æ— æ•ˆçŠ¶æ€ï¼ˆæœªé€šè¿‡å…¶åä½œè€…ï¼‰å®ä¾‹åŒ–å¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥æ—¶ï¼Œæ‚¨ä¸å¿…ä½¿ç”¨ä¸“ç”¨æœºåˆ¶æ¥ç¡®ä¿è®¾ç½®äº†å¿…éœ€çš„å±æ€§ï¼ˆæ™®é€šJavaæœºåˆ¶é™¤å¤–ï¼‰ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/knowledge/">knowledge</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%90%8E%E7%AB%AF/">åç«¯</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/spring/">spring</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5/">æ„é€ å™¨æ³¨å…¥</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/">ä¾èµ–æ³¨å…¥</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>Spring Boot ä¸­è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å˜é‡</title>
                <link>https://wss.cool/posts/%E5%90%8E%E7%AB%AF/spring/spring-boot%E4%B8%AD%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%90%8E%E7%AB%AF/spring/spring-boot%E4%B8%AD%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F/</guid>
                <pubDate>Sat, 18 Jan 2020 17:57:27 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>åœ¨application.ymlä¸­é…ç½®çš„å˜é‡ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­å¼•ç”¨åˆ°ã€‚</p>
<h2 id="æ·»åŠ ä¾èµ–">æ·»åŠ ä¾èµ–</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-configuration-processor<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å®šä¹‰å˜é‡">å®šä¹‰å˜é‡</h2>
<p>application.ymlæ–‡ä»¶ä¸­åŠ å…¥è‡ªå®šä¹‰çš„å˜é‡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">my</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">name</span><span class="p">:</span><span class="w"> </span>wanngshushuo<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="å¯¹åº”çš„å®ä½“ç±»">å¯¹åº”çš„å®ä½“ç±»</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Component</span> <span class="c1">// æ–‡æ¡£ä¸­æ²¡æœ‰è¿™ä¸ªæ³¨é‡Šï¼Œä½†æ˜¯ä¸å†™ä¼šæŠ¥é”™
</span><span class="c1"></span><span class="nd">@ConfigurationProperties</span><span class="o">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&#34;my&#34;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyConfig</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="c1">// getter setter
</span><span class="c1"></span><span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="åœ¨ä»£ç ä¸­ä½¿ç”¨">åœ¨ä»£ç ä¸­ä½¿ç”¨</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">MyConfig</span> <span class="n">myConfig</span><span class="o">;</span>

    <span class="n">MainService</span><span class="o">(</span><span class="n">MyConfig</span> <span class="n">myConfig</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">myConfig</span> <span class="o">=</span> <span class="n">myConfig</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/update&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">updateBlog</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">myConfig</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/spring/">spring</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Javaæ‰§è¡Œshellå‘½ä»¤</title>
                <link>https://wss.cool/java%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4.html</link>
                <guid isPermaLink="true">https://wss.cool/java%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4.html</guid>
                <pubDate>Sat, 18 Jan 2020 17:53:17 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="æ·»åŠ ä¾èµ–">æ·»åŠ ä¾èµ–</h2>
<p>é¦–å…ˆä½¿ç”¨<code>Spring Boot</code>å¼€å¯ä¸€ä¸ª<code>RESTful</code>é¡¹ç›®ï¼Œé¢å¤–çš„åŠ ä¸Š<code>Apache Commons Exec</code>çš„ä¾èµ–ã€‚</p>
<blockquote>
<p>Execå®˜ç½‘<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>ï¼Œ<a href="https://commons.apache.org/proper/commons-exec/apidocs/index.html">APIæ–‡æ¡£</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.commons<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>commons-exec<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2>
<p>è¿™é‡Œåˆ†ä¸¤ç§æƒ…å†µã€‚ä¸€ä¸ªæ˜¯æœ€ç®€çš„åªå…³å¿ƒæ‰§è¡Œæ˜¯å¦æˆåŠŸï¼Œä¹Ÿå°±æ˜¯codeå¤§äº0ä¸ºå¤±è´¥ï¼›å¦ä¸€ä¸ªæ˜¯éœ€è¦æ‹¿åˆ°æ‰§è¡Œçš„æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯çš„ä¿¡æ¯ã€‚</p>
<h3 id="åªå…³å¿ƒæ˜¯å¦æˆåŠŸ">åªå…³å¿ƒæ˜¯å¦æˆåŠŸ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">updateBlogFromGit</span><span class="o">(){</span>
        <span class="c1">// 1
</span><span class="c1"></span>        <span class="n">CommandLine</span> <span class="n">pull</span> <span class="o">=</span> <span class="n">CommandLine</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&#34;git pull&#34;</span><span class="o">);</span>

        <span class="c1">// 2
</span><span class="c1"></span>        <span class="n">DefaultExecutor</span> <span class="n">executor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultExecutor</span><span class="o">();</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setWorkingDirectory</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;/home/ubuntu/blog&#34;</span><span class="o">));</span>

        <span class="c1">// 3ï¼Œçœç•¥try_catch
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">exitValue</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">pull</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">exitValue</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">exitValue</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">hugo</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">exitValue</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><ol>
<li>å‡†å¤‡è¦è¿è¡Œçš„shellå‘½ä»¤</li>
<li>åˆ›å»ºæ‰§è¡Œå™¨ï¼Œå¹¶è®¾ç½®å·¥ä½œç›®å½•</li>
<li>æœ€åæ‰§è¡Œå‘½ä»¤ï¼Œè¿”å›code</li>
</ol>
<h3 id="è¦æ‹¿åˆ°æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯çš„ä¿¡æ¯">è¦æ‹¿åˆ°æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯çš„ä¿¡æ¯</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">updateBlogFromGit</span><span class="o">(){</span>
        <span class="c1">// 1
</span><span class="c1"></span>        <span class="n">CommandLine</span> <span class="n">pull</span> <span class="o">=</span> <span class="n">CommandLine</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&#34;git pull&#34;</span><span class="o">);</span>
        <span class="n">CommandLine</span> <span class="n">hugo</span> <span class="o">=</span> <span class="n">CommandLine</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&#34;hugo&#34;</span><span class="o">);</span>

        <span class="c1">// 2
</span><span class="c1"></span>        <span class="n">ByteArrayOutputStream</span> <span class="n">outputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>
        <span class="n">ByteArrayOutputStream</span> <span class="n">errorStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>
        <span class="n">PumpStreamHandler</span> <span class="n">streamHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PumpStreamHandler</span><span class="o">(</span><span class="n">outputStream</span><span class="o">,</span> <span class="n">errorStream</span><span class="o">);</span>

        <span class="c1">// 3
</span><span class="c1"></span>        <span class="n">DefaultExecutor</span> <span class="n">executor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultExecutor</span><span class="o">();</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setWorkingDirectory</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;/home/ubuntu/blog&#34;</span><span class="o">));</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setStreamHandler</span><span class="o">(</span><span class="n">streamHandler</span><span class="o">);</span>

        <span class="c1">// 4
</span><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">exitValue</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">pull</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">exitValue</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">exitValue</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">hugo</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">String</span> <span class="n">result</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">exitValue</span><span class="o">==</span><span class="n">0</span><span class="o">){</span>
                <span class="n">result</span><span class="o">=</span> <span class="n">outputStream</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">errorStream</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ExecuteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">errorStream</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><ol>
<li>å‡†å¤‡è¦è¿è¡Œçš„shellå‘½ä»¤</li>
<li>å‡†å¤‡æ¥æ”¶æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯çš„Stream</li>
<li>åˆ›å»ºæ‰§è¡Œå™¨ï¼Œå¹¶è®¾ç½®å·¥ä½œç›®å½•ï¼Œè®¾ç½®StreamHandler</li>
<li>æœ€åæ‰§è¡Œå‘½ä»¤ï¼ˆå¦‚æœæ‰§è¡Œæ—¶å‡ºé”™ä¼šè¿”å›å¤§äº0çš„æ•´æ•°ï¼‰ï¼Œè¿”å›æ ‡å‡†è¾“å‡ºæˆ–é”™è¯¯ä¿¡æ¯æˆ–æŠ¥é”™å †æ ˆä¿¡æ¯</li>
</ol>
<h2 id="æ”¶è·">æ”¶è·</h2>
<p>æŠ€èƒ½æ ‘ï¼š</p>
<pre><code>åç«¯ --&gt; Java --&gt; å·¥å…·åº“ --&gt; Exec --&gt; ä½¿ç”¨
åç«¯ --&gt; Java --&gt; è¯­è¨€åŸºç¡€ --&gt; ByteArrayOutputStream --&gt; ä½¿ç”¨
</code></pre><h2 id="å…¶ä»–ç›¸å…³å†…å®¹">å…¶ä»–ç›¸å…³å†…å®¹</h2>
<ul>
<li><a href="https://wowfriday.cn/posts/linux-base/#%E4%BD%BF%E7%94%A8systemd%E5%90%AF%E5%8A%A8%E5%85%B3%E9%97%ADjava%E7%A8%8B%E5%BA%8F">ä½¿ç”¨systemdå¯åŠ¨å…³é—­Javaç¨‹åº</a></li>
<li><a href="https://wowfriday.cn/nginx.html#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE">é…ç½®Nginx</a></li>
</ul>
<hr>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Execå®˜ç½‘ <a href="https://commons.apache.org/proper/commons-exec/">https://commons.apache.org/proper/commons-exec/</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Springæ¢ç´¢ä¸æ‰«ç›²</title>
                <link>https://wss.cool/spring%E6%8E%A2%E7%B4%A2%E4%B8%8E%E6%89%AB%E7%9B%B2.html</link>
                <guid isPermaLink="true">https://wss.cool/spring%E6%8E%A2%E7%B4%A2%E4%B8%8E%E6%89%AB%E7%9B%B2.html</guid>
                <pubDate>Thu, 16 Jan 2020 23:55:23 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>åˆšåˆšæ¥è§¦Springï¼Œæ„Ÿè§‰å®ƒæ˜¯ä¸€ä¸ªåºå¤§çš„ä½“ç³»ï¼Œå†…å®¹å¾ˆå¤šã€‚ç°åœ¨æƒ³è¦å¯¹å®ƒæœ‰ä¸€ä¸ªæ€»ä½“çš„ã€æ„Ÿæ€§çš„è®¤è¯†å’Œäº†è§£ã€‚é¦–å…ˆä»å®˜ç½‘å…¥æ‰‹ã€‚</p>
<p>spring.ioå®˜ç½‘ä¸‹çš„ç¬¬ä¸€ä¸ªç›®å½•â€”â€”projectsï¼Œé‡Œé¢åˆ—ä¸¾äº†Springçš„é¡¹ç›®ã€‚æ‰“å¼€ä¸€ä¸ªé¡¹ç›®å¯ä»¥çœ‹åˆ°å®ƒçš„ä»‹ç»ï¼Œå­¦ä¹ èµ„æ–™ï¼Œæ–‡æ¡£ï¼Œç¤ºä¾‹ã€‚</p>
<p>ç¬¬äºŒä¸ªç›®å½•æ˜¯guidesï¼Œé‡Œé¢åŒ…å«å¾ˆå¤šçš„ã€å„ä¸ªæ–¹é¢çš„å…¥é—¨å¼•å¯¼ï¼Œè¿™äº›å…¥é—¨å¼•å¯¼éƒ½æ˜¯å¾ˆç®€å•çš„ã€‚ä¸‹é¢è¿˜æœ‰ä¸¤ä¸ªæ¨¡å—â€”â€”Topical Guideså’ŒTutorialsï¼Œè¿™ä¸¤éƒ¨åˆ†ç¨å¾®é•¿ä¸€ç‚¹ï¼Œæ¯”ç¬¬ä¸€éƒ¨åˆ†è¦è¯¦ç»†ä¸€äº›ã€å†…å®¹å¤šä¸€äº›ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªç›®å½•æ˜¯ä¸€äº›ä»˜è´¹çš„åŸ¹è®­å’Œè®¤è¯ã€‚</p>
<h2 id="projects">Projects</h2>
<h3 id="spring-frameworkå¿…å­¦">Spring Frameworkï¼Œå¿…å­¦</h3>
<p>è¿™ä¸ªåº”è¯¥æ˜¯é€šå¸¸è¯´åˆ°Springæ—¶ä»£è¡¨çš„Springæœ¬äººã€‚</p>
<blockquote>
<p>Springæ¡†æ¶å¯åœ¨ä»»ä½•ç±»å‹çš„éƒ¨ç½²å¹³å°ä¸Šä¸ºåŸºäºJavaçš„ç°ä»£ä¼ä¸šåº”ç”¨ç¨‹åºæä¾›å…¨é¢çš„ç¼–ç¨‹å’Œé…ç½®æ¨¡å‹ã€‚</p>
</blockquote>
<blockquote>
<p>Springçš„ä¸€ä¸ªå…³é”®å…ƒç´ æ˜¯åœ¨åº”ç”¨ç¨‹åºçº§åˆ«çš„åŸºç¡€æ¶æ„æ”¯æŒï¼šSpringä¸“æ³¨äºä¼ä¸šåº”ç”¨ç¨‹åºçš„â€œç®¡é“â€ï¼Œä»¥ä¾¿å›¢é˜Ÿå¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºçº§åˆ«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸å¿…ä¸ç‰¹å®šçš„éƒ¨ç½²ç¯å¢ƒå»ºç«‹ä¸å¿…è¦çš„è”ç³»ã€‚</p>
</blockquote>
<h3 id="spring-dataè¦å­¦">Spring Dataï¼Œè¦å­¦</h3>
<p><a href="https://spring.io/projects/spring-data">ç½‘å€</a></p>
<p>å®ƒåŒ…å«äº†æ‰€æœ‰æ•°æ®å­˜å‚¨çš„å­é¡¹ç›®ï¼ŒJDBCã€JPAã€MongoDBã€Redisã€RESTï¼Œä»–ä»¬éƒ½è¢«è¿™ä¸ªé¡¹ç›®å°è£…äº†ï¼Œå¯ä»¥ç”¨ä¸€è‡´çš„APIä½¿ç”¨ã€‚</p>
<blockquote>
<p>Spring Dataçš„ä»»åŠ¡æ˜¯ä¸ºæ•°æ®è®¿é—®æä¾›ä¸€ä¸ªç†Ÿæ‚‰ä¸”ä¸€è‡´çš„ï¼ŒåŸºäºSpringçš„ç¼–ç¨‹æ¨¡å‹ï¼ŒåŒæ—¶ä»ä¿ç•™åŸºç¡€æ•°æ®å­˜å‚¨çš„ç‰¹â€‹â€‹æ®Šç‰¹å¾ã€‚</p>
</blockquote>
<blockquote>
<p>å®ƒä½¿ä½¿ç”¨æ•°æ®è®¿é—®æŠ€æœ¯ï¼Œå…³ç³»å’Œéå…³ç³»æ•°æ®åº“ï¼Œmap-reduceæ¡†æ¶ä»¥åŠåŸºäºäº‘çš„æ•°æ®æœåŠ¡å˜å¾—å®¹æ˜“ã€‚è¿™æ˜¯ä¸€ä¸ªæ€»æ‹¬é¡¹ç›®ï¼Œå…¶ä¸­åŒ…å«è®¸å¤šç‰¹å®šäºç»™å®šæ•°æ®åº“çš„å­é¡¹ç›®ã€‚è¿™äº›é¡¹ç›®æ˜¯é€šè¿‡ä¸è¿™äº›ä»¤äººå…´å¥‹çš„æŠ€æœ¯èƒŒåçš„è®¸å¤šå…¬å¸å’Œå¼€å‘äººå‘˜å…±åŒå¼€å‘çš„ã€‚</p>
</blockquote>
<h3 id="spring-securityè¦å­¦">Spring Securityï¼Œè¦å­¦</h3>
<p>è¿™ä¸ªåº”è¯¥æ˜¯ç”¨æ¥åšç™»å½•ã€æƒé™ç®¡ç†çš„ã€‚ä¸‹é¢æ˜¯æœºç¿»ä»‹ç»å’Œç‰¹æ€§ã€‚</p>
<blockquote>
<p>Spring Securityæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”é«˜åº¦å¯å®šåˆ¶çš„èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶æ¡†æ¶ã€‚å®ƒæ˜¯ç”¨äºä¿æŠ¤åŸºäºSpringçš„åº”ç”¨ç¨‹åºçš„å®é™…æ ‡å‡†ã€‚</p>
</blockquote>
<blockquote>
<p>Spring Securityæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè‡´åŠ›äºä¸ºJavaåº”ç”¨ç¨‹åºæä¾›èº«ä»½éªŒè¯å’Œæˆæƒã€‚ä¸æ‰€æœ‰Springé¡¹ç›®ä¸€æ ·ï¼ŒSpring Securityçš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥è½»æ¾æ‰©å±•ä»¥æ»¡è¶³è‡ªå®šä¹‰è¦æ±‚</p>
</blockquote>
<h4 id="ç‰¹æ€§">ç‰¹æ€§</h4>
<ul>
<li>å¯¹èº«ä»½éªŒè¯å’Œæˆæƒçš„å…¨é¢ä¸”å¯æ‰©å±•çš„æ”¯æŒ</li>
<li>é˜²å¾¡ä¼šè¯å›ºå®šï¼Œç‚¹å‡»åŠ«æŒï¼Œè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ç­‰æ”»å‡»</li>
<li>Servlet APIé›†æˆ</li>
<li>ä¸Spring Web MVCçš„å¯é€‰é›†æˆ</li>
</ul>
<h3 id="spring-rest-docså¯èƒ½è¦å­¦">Spring REST Docsï¼Œå¯èƒ½è¦å­¦</h3>
<p>è²Œä¼¼æ˜¯ç”¨æ¥ç”ŸæˆRESTfulæœåŠ¡çš„æ–‡æ¡£çš„ã€‚</p>
<blockquote>
<p>Spring REST Docså¯å¸®åŠ©æ‚¨è®°å½•RESTfulæœåŠ¡ã€‚</p>
</blockquote>
<blockquote>
<p>å®ƒç»“åˆäº†ç”¨Asciidoctorç¼–å†™çš„æ‰‹å†™æ–‡æ¡£å’ŒSpring MVC Testç”Ÿæˆçš„è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ç‰‡æ®µã€‚è¿™ç§æ–¹æ³•ä½¿æ‚¨æ‘†è„±äº†Swaggerä¹‹ç±»çš„å·¥å…·æ‰€äº§ç”Ÿçš„æ–‡æ¡£é™åˆ¶ã€‚</p>
</blockquote>
<blockquote>
<p>å®ƒå¯ä»¥å¸®åŠ©æ‚¨ç”Ÿæˆå‡†ç¡®ï¼Œç®€æ´ä¸”ç»“æ„åˆç†çš„æ–‡æ¡£ã€‚ç„¶åï¼Œè¯¥æ–‡æ¡£å¯è®©æ‚¨çš„ç”¨æˆ·ä»¥æœ€å°‘çš„éº»çƒ¦è·å¾—ä»–ä»¬æ‰€éœ€çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<h3 id="spring-cloudè¦å­¦">Spring Cloudï¼Œè¦å­¦</h3>
<p>å®˜æ–¹ä»‹ç»çš„æœºç¿»å¦‚ä¸‹ï¼Œå¯ä»¥ç”¨æ¥æ­å»ºå¾®æœåŠ¡ç³»ç»Ÿã€‚</p>
<blockquote>
<p>Spring Cloudä¸ºå¼€å‘äººå‘˜æä¾›äº†å·¥å…·ï¼Œä»¥å¿«é€Ÿæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æŸäº›å¸¸è§æ¨¡å¼ï¼ˆä¾‹å¦‚ï¼Œé…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘ç°ï¼Œæ–­è·¯å™¨ï¼Œæ™ºèƒ½è·¯ç”±ï¼Œå¾®ä»£ç†ï¼Œæ§åˆ¶æ€»çº¿ï¼Œä¸€æ¬¡æ€§ä»¤ç‰Œï¼Œå…¨å±€é”ï¼Œé¢†å¯¼é€‰ä¸¾ï¼Œåˆ†å¸ƒå¼ä¼šè¯ï¼Œç¾¤é›†çŠ¶æ€ï¼‰ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„åè°ƒå¯¼è‡´æ ·æ¿å¼æ ·ï¼Œå¹¶ä¸”ä½¿ç”¨Spring Cloudå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿç«™èµ·æ¥å®ç°è¿™äº›æ ·æ¿çš„æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚å®ƒä»¬å¯ä»¥åœ¨ä»»ä½•åˆ†å¸ƒå¼ç¯å¢ƒä¸­æ­£å¸¸å·¥ä½œï¼ŒåŒ…æ‹¬å¼€å‘äººå‘˜è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè£¸æœºæ•°æ®ä¸­å¿ƒä»¥åŠCloud Foundryç­‰æ‰˜ç®¡å¹³å°ã€‚</p>
</blockquote>
<h3 id="spring-amqpå¯èƒ½è¦å­¦">Spring AMQPï¼Œå¯èƒ½è¦å­¦</h3>
<p>æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡</p>
<p><strong>AMQPç»´åŸºç™¾ç§‘</strong></p>
<blockquote>
<p>é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®å³Advanced Message Queuing Protocolï¼ˆAMQPï¼‰ã€‚é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®æ˜¯ä¸€ç§äºŒè¿›åˆ¶åº”ç”¨å±‚åè®®ï¼Œç”¨äºåº”å¯¹å¹¿æ³›çš„é¢å‘æ¶ˆæ¯åº”ç”¨ç¨‹åºçš„æ”¯æŒã€‚åè®®æä¾›äº†æ¶ˆæ¯æµæ§åˆ¶ï¼Œä¿è¯çš„ä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡çš„ä¼ é€’è¿‡ç¨‹ï¼Œå¦‚è‡³å¤šä¸€æ¬¡ã€ä¿è¯å¤šæ¬¡ã€ä»…æœ‰ä¸€æ¬¡ç­‰ï¼Œå’ŒåŸºäºSASLå’ŒTLSçš„èº«ä»½éªŒè¯å’Œæ¶ˆæ¯åŠ å¯†.</p>
</blockquote>
<blockquote>
<p>æ˜¯é¢å‘æ¶ˆæ¯ä¸­é—´ä»¶æä¾›çš„å¼€æ”¾çš„åº”ç”¨å±‚åè®®ï¼Œå…¶è®¾è®¡ç›®æ ‡æ˜¯å¯¹äºæ¶ˆæ¯çš„æ’åºã€è·¯ç”±ï¼ˆåŒ…æ‹¬ç‚¹å¯¹ç‚¹å’Œè®¢é˜…-å‘å¸ƒï¼‰ã€ä¿æŒå¯é æ€§ã€ä¿è¯å®‰å…¨æ€§[1]ã€‚AMQPè§„èŒƒäº†æ¶ˆæ¯ä¼ é€’æ–¹å’Œæ¥æ”¶æ–¹çš„è¡Œä¸ºï¼Œä»¥ä½¿æ¶ˆæ¯åœ¨ä¸åŒçš„æä¾›å•†ä¹‹é—´å®ç°äº’æ“ä½œæ€§ï¼Œå°±åƒSMTPï¼ŒHTTPï¼ŒFTPç­‰åè®®å¯ä»¥åˆ›å»ºäº¤äº’ç³»ç»Ÿä¸€æ ·ã€‚ä¸å…ˆå‰çš„ä¸­é—´ä»¶æ ‡å‡†ï¼ˆå¦‚Javaæ¶ˆæ¯æœåŠ¡ï¼‰ä¸åŒçš„æ˜¯ï¼ŒJMSåœ¨ç‰¹å®šçš„APIæ¥å£å±‚é¢å’Œå®ç°è¡Œä¸ºä¸Šè¿›è¡Œäº†ç»Ÿä¸€ï¼Œè€Œé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®åˆ™å…³æ³¨äºå„ç§æ¶ˆæ¯å¦‚ä½•ä»¥å­—èŠ‚æµçš„å½¢å¼è¿›è¡Œä¼ é€’ã€‚å› æ­¤ï¼Œä½¿ç”¨äº†ç¬¦åˆåè®®å®ç°çš„ä»»æ„åº”ç”¨ç¨‹åºä¹‹é—´å¯ä»¥ä¿æŒå¯¹æ¶ˆæ¯çš„åˆ›å»ºã€ä¼ é€’ã€‚</p>
</blockquote>
<p><strong>Spring AMQPé¡¹ç›®å®˜æ–¹ä»‹ç»çš„æœºç¿»</strong></p>
<blockquote>
<p>Spring AMQPé¡¹ç›®å°†Springçš„æ ¸å¿ƒæ¦‚å¿µåº”ç”¨äºåŸºäºAMQPçš„æ¶ˆæ¯ä¼ é€’è§£å†³æ–¹æ¡ˆçš„å¼€å‘ã€‚å®ƒæä¾›äº†ä¸€ä¸ªâ€œæ¨¡æ¿â€ä½œä¸ºç”¨äºå‘é€å’Œæ¥æ”¶æ¶ˆæ¯çš„é«˜çº§æŠ½è±¡ã€‚å®ƒè¿˜é€šè¿‡â€œä¾¦å¬å™¨å®¹å™¨â€ä¸ºæ¶ˆæ¯é©±åŠ¨çš„POJOæä¾›æ”¯æŒã€‚è¿™äº›åº“æœ‰åŠ©äºAMQPèµ„æºçš„ç®¡ç†ï¼ŒåŒæ—¶ä¿ƒè¿›å¯¹ä¾èµ–é¡¹æ³¨å…¥å’Œå£°æ˜æ€§é…ç½®çš„ä½¿ç”¨ã€‚åœ¨æ‰€æœ‰è¿™äº›æƒ…å†µä¸‹ï¼Œæ‚¨å°†çœ‹åˆ°ä¸Spring Frameworkä¸­çš„JMSæ”¯æŒç›¸ä¼¼çš„åœ°æ–¹ã€‚</p>
</blockquote>
<blockquote>
<p>è¯¥é¡¹ç›®åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼›spring-amqpæ˜¯åŸºç¡€æŠ½è±¡ï¼Œspring-rabbitæ˜¯RabbitMQå®ç°ã€‚</p>
</blockquote>
<h3 id="spring-batchå¯èƒ½è¦å­¦">Spring Batchï¼Œå¯èƒ½è¦å­¦</h3>
<p>æ‰¹å¤„ç†æ¡†æ¶ï¼Œå…¬å¸çš„ä»€ä¹ˆä¸šåŠ¡éœ€è¦æ‰¹å¤„ç†å‘¢ï¼Ÿæ—¥å¿—ï¼Ÿç»Ÿè®¡ï¼Ÿæ¯”å¦‚æä¸€ä¸ªæœåŠ¡åˆ†ænginxçš„access.logï¼Œçœ‹ä¸€ä¸‹è®¿é—®æ—¥å¿—ï¼Œå“ªäº›èµ„æºè¢«è®¿é—®çš„å¤šï¼Ÿ</p>
<blockquote>
<p>ä¸€ä¸ªè½»é‡çº§ï¼Œå…¨é¢çš„æ‰¹å¤„ç†æ¡†æ¶ï¼Œæ—¨åœ¨æ”¯æŒå¼€å‘å¯¹ä¼ä¸šç³»ç»Ÿçš„æ—¥å¸¸è¿è¡Œè‡³å…³é‡è¦çš„å¼ºå¤§çš„æ‰¹å¤„ç†åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<blockquote>
<p>Spring Batchæä¾›äº†å¯é‡ç”¨çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯¹äºå¤„ç†å¤§é‡è®°å½•è‡³å…³é‡è¦ï¼ŒåŒ…æ‹¬æ—¥å¿—è®°å½•/è·Ÿè¸ªï¼Œäº‹åŠ¡ç®¡ç†ï¼Œä½œä¸šå¤„ç†ç»Ÿè®¡ä¿¡æ¯ï¼Œä½œä¸šé‡æ–°å¯åŠ¨ï¼Œè·³è¿‡å’Œèµ„æºç®¡ç†ã€‚å®ƒè¿˜æä¾›äº†æ›´é«˜çº§çš„æŠ€æœ¯æœåŠ¡å’ŒåŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å’ŒåŠŸèƒ½å°†é€šè¿‡ä¼˜åŒ–å’Œåˆ†åŒºæŠ€æœ¯æ¥å®ç°æé«˜å®¹é‡å’Œé«˜æ€§èƒ½çš„æ‰¹å¤„ç†ä½œä¸šã€‚æ— è®ºç®€å•è¿˜æ˜¯å¤æ‚ï¼Œå¤§æ‰¹é‡å¤„ç†ä½œä¸šï¼Œéƒ½å¯ä»¥ä»¥é«˜åº¦å¯æ‰©å±•çš„æ–¹å¼åˆ©ç”¨æ¡†æ¶æ¥å¤„ç†å¤§é‡ä¿¡æ¯ã€‚</p>
</blockquote>
<h3 id="spring-web-flowå¯èƒ½è¦å­¦">Spring Web Flowï¼Œå¯èƒ½è¦å­¦</h3>
<blockquote>
<p>Spring Web Flowå»ºç«‹åœ¨Spring MVCä¹‹ä¸Šï¼Œå¹¶å…è®¸å®ç°Webåº”ç”¨ç¨‹åºçš„â€œæµâ€ã€‚æµç¨‹å°è£…äº†ä¸€ç³»åˆ—æ­¥éª¤ï¼Œè¿™äº›æ­¥éª¤æŒ‡å¯¼ç”¨æˆ·å®ŒæˆæŸäº›ä¸šåŠ¡ä»»åŠ¡ã€‚å®ƒè·¨è¶Šå¤šä¸ªHTTPè¯·æ±‚ï¼Œå…·æœ‰çŠ¶æ€ï¼Œå¤„ç†äº‹åŠ¡æ•°æ®ï¼Œå¯é‡ç”¨ï¼Œå¹¶ä¸”æœ¬è´¨ä¸Šå¯ä»¥æ˜¯åŠ¨æ€çš„å¹¶ä¸”å¯ä»¥é•¿æœŸè¿è¡Œã€‚</p>
</blockquote>
<blockquote>
<p>Spring Web Flowçš„æœ€ä½³é€‰æ‹©æ˜¯å…·æœ‰å¯¼èˆªåŠŸèƒ½çš„çŠ¶æ€Webåº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ï¼Œç™»æœºï¼Œç”³è¯·è´·æ¬¾ï¼Œè´­ç‰©è½¦ç»“å¸ï¼Œç”šè‡³å‘è¡¨å•æ·»åŠ ç¡®è®¤æ­¥éª¤ã€‚è¿™äº›æ–¹æ¡ˆçš„å…±åŒç‚¹æ˜¯ä»¥ä¸‹ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å¾ï¼š</p>
</blockquote>
<ul>
<li>æœ‰ä¸€ä¸ªæ˜ç¡®çš„èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</li>
<li>ç”¨æˆ·å¿…é¡»æŒ‰ç‰¹å®šé¡ºåºæµè§ˆä¸€ç»„å±å¹•ã€‚</li>
<li>ç›´åˆ°æœ€åä¸€æ­¥ï¼Œæ›´æ”¹æ‰èƒ½æœ€ç»ˆç¡®å®šã€‚</li>
<li>å®Œæˆåï¼Œå°±ä¸å¯èƒ½æ„å¤–é‡å¤äº¤æ˜“</li>
</ul>
<h3 id="spring-for-apache-kafkaå¯èƒ½è¦å­¦">Spring for Apache Kafkaï¼Œå¯èƒ½è¦å­¦</h3>
<p>å¥½åƒä¹Ÿæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–è€…æ•°æ®å¤„ç†å¼•æ“ã€‚</p>
<blockquote>
<p>ç”¨äºApache Kafkaçš„Springï¼ˆspring-kafkaï¼‰é¡¹ç›®å°†æ ¸å¿ƒSpringæ¦‚å¿µåº”ç”¨äºåŸºäºKafkaçš„æ¶ˆæ¯ä¼ é€’è§£å†³æ–¹æ¡ˆçš„å¼€å‘ã€‚å®ƒæä¾›äº†ä¸€ä¸ªâ€œæ¨¡æ¿â€ä½œä¸ºå‘é€æ¶ˆæ¯çš„é«˜çº§æŠ½è±¡ã€‚å®ƒè¿˜æ”¯æŒå¸¦æœ‰@KafkaListeneræ³¨é‡Šå’Œâ€œä¾¦å¬å™¨å®¹å™¨â€çš„æ¶ˆæ¯é©±åŠ¨çš„POJO ã€‚è¿™äº›åº“ä¿ƒè¿›äº†ä¾èµ–æ³¨å…¥å’Œå£°æ˜å¼çš„ä½¿ç”¨ã€‚åœ¨æ‰€æœ‰è¿™äº›æƒ…å†µä¸‹ï¼Œæ‚¨å°†çœ‹åˆ°ä¸Springæ¡†æ¶ä¸­çš„JMSæ”¯æŒå’ŒSpring AMQPä¸­çš„RabbitMQæ”¯æŒç›¸ä¼¼ã€‚</p>
</blockquote>
<h3 id="spring-floå¯èƒ½æœ‰ç”¨">Spring Floï¼Œå¯èƒ½æœ‰ç”¨</h3>
<p>è²Œä¼¼å¯ä»¥åšç±»ä¼¼æµç¨‹å›¾çš„å‰ç«¯é¡µé¢ã€‚</p>
<blockquote>
<p>Spring Floæ˜¯ä¸€ä¸ªJavaScriptåº“ï¼Œä¸ºç®¡é“å’Œç®€å•å›¾å½¢æä¾›äº†ä¸€ä¸ªåŸºæœ¬çš„å¯åµŒå…¥HTML5å¯è§†ç”Ÿæˆå™¨ã€‚è¯¥åº“ç”¨ä½œSpring Cloud Data Flowä¸­æµæ„å»ºå™¨çš„åŸºç¡€ã€‚</p>
</blockquote>
<blockquote>
<p>FloåŒ…æ‹¬é›†æˆæµè®¾è®¡å™¨çš„æ‰€æœ‰åŸºæœ¬å…ƒç´ ï¼Œä¾‹å¦‚è¿æ¥å™¨ï¼Œæ§åˆ¶èŠ‚ç‚¹ï¼Œè°ƒè‰²æ¿ï¼ŒçŠ¶æ€è½¬æ¢å’Œå›¾å½¢æ‹“æ‰‘-é‡è¦çš„æ˜¯ï¼Œå®ƒå…·æœ‰æ–‡æœ¬å¤–å£³ï¼ŒDSLæ”¯æŒå’Œè®¾è®¡ç”¨äºåˆ›å»ºå’ŒæŸ¥çœ‹å…¨é¢å·¥ä½œæµç¨‹çš„å›¾å½¢ç”»å¸ƒã€‚</p>
</blockquote>
<h3 id="spring-shellå¯èƒ½æœ‰ç”¨">Spring Shellï¼Œå¯èƒ½æœ‰ç”¨</h3>
<p>giteeä¸Šä¼ äº†ä»£ç ï¼Œè§¦å‘webhookï¼Œæ¥å£éœ€è¦æ‰§è¡Œä¸€ä¸ªshellå‘½ä»¤æ¥æ‰“åŒ…åšå®¢ã€‚åœ¨javaç¨‹åºä¸­æ‰§è¡Œshellå‘½ä»¤æ˜¯ç”¨è¿™ä¸ªé¡¹ç›®ï¼Ÿ</p>
<blockquote>
<p>Spring Shellé¡¹ç›®æä¾›äº†ä¸€ä¸ªäº¤äº’å¼Shellï¼Œä½¿æ‚¨å¯ä»¥ä½¿ç”¨åŸºäºSpringçš„ç¼–ç¨‹æ¨¡å‹æ¥æ’å…¥è‡ªå·±çš„è‡ªå®šä¹‰å‘½ä»¤ã€‚</p>
</blockquote>
<h3 id="spring-ldapæš‚æ—¶ä¸å­¦">Spring LDAPï¼Œæš‚æ—¶ä¸å­¦</h3>
<p>ä¸çŸ¥é“åº”ç”¨åœºæ™¯ã€‚</p>
<p><strong>ç™¾åº¦ç™¾ç§‘</strong></p>
<blockquote>
<p>è½»å‹ç›®å½•è®¿é—®åè®®ï¼ˆè‹±æ–‡ï¼šLightweight Directory Access Protocolï¼Œç¼©å†™ï¼šLDAPï¼Œ/ËˆÉ›ldÃ¦p/ï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾çš„ï¼Œä¸­ç«‹çš„ï¼Œå·¥ä¸šæ ‡å‡†çš„åº”ç”¨åè®®ï¼Œé€šè¿‡IPåè®®æä¾›è®¿é—®æ§åˆ¶å’Œç»´æŠ¤åˆ†å¸ƒå¼ä¿¡æ¯çš„ç›®å½•ä¿¡æ¯ã€‚</p>
</blockquote>
<p><strong>å®˜æ–¹ä»‹ç»æœºç¿»</strong></p>
<blockquote>
<p>Spring LDAPæ˜¯ä¸€ä¸ªç”¨äºç®€åŒ–Javaä¸­LDAPç¼–ç¨‹çš„åº“ï¼Œå…¶å»ºç«‹åŸç†ä¸Spring Jdbcç›¸åŒã€‚</p>
</blockquote>
<blockquote>
<p>LdapTemplateç±»å°è£…äº†ä¼ ç»ŸLDAPç¼–ç¨‹ä¸­æ¶‰åŠçš„æ‰€æœ‰ç®¡é“å·¥ä½œï¼Œä¾‹å¦‚åˆ›å»ºï¼Œéå†NamingEnumerationsï¼Œå¤„ç†Exceptionå’Œæ¸…ç†èµ„æºã€‚è¿™ä½¿ç¨‹åºå‘˜å¯ä»¥å¤„ç†é‡è¦çš„äº‹æƒ…-åœ¨ä½•å¤„æŸ¥æ‰¾æ•°æ®ï¼ˆDNå’Œç­›é€‰å™¨ï¼‰ä»¥åŠå¦‚ä½•å¤„ç†æ•°æ®ï¼ˆä¸åŸŸå¯¹è±¡è¿›è¡Œæ˜ å°„ï¼Œç»‘å®šï¼Œä¿®æ”¹ï¼Œå–æ¶ˆç»‘å®šç­‰ï¼‰ï¼Œæ–¹æ³•ä¸JdbcTemplateç¼“è§£çš„æ–¹æ³•ç›¸åŒé™¤äº†å®é™…çš„SQLä¹‹å¤–çš„æ‰€æœ‰ç¨‹åºå‘˜ï¼Œä»¥åŠæ•°æ®å¦‚ä½•æ˜ å°„åˆ°åŸŸæ¨¡å‹ã€‚</p>
</blockquote>
<h3 id="spring-hateoasæš‚æ—¶ä¸å­¦">Spring HATEOASï¼Œæš‚æ—¶ä¸å­¦</h3>
<p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-SpringHATEOAS/index.html">ä»‹ç»æ–‡ç« </a></p>
<blockquote>
<p>HATEOASï¼ˆHypermedia as the engine of application stateï¼‰æ˜¯ REST æ¶æ„é£æ ¼ä¸­æœ€å¤æ‚çš„çº¦æŸï¼Œä¹Ÿæ˜¯æ„å»ºæˆç†Ÿ REST æœåŠ¡çš„æ ¸å¿ƒã€‚</p>
</blockquote>
<p>RESTfulæ¶æ„çš„æœ€é«˜ï¼ˆæœ€ç‰›å‰ï¼‰å±‚æ¬¡å°±è¦ä½¿ç”¨HATEOASã€‚</p>
<blockquote>
<p>ç¬¬å››ä¸ªå±‚æ¬¡ï¼ˆLevel 3ï¼‰çš„ Web æœåŠ¡ä½¿ç”¨ HATEOASã€‚åœ¨èµ„æºçš„è¡¨è¾¾ä¸­åŒ…å«äº†é“¾æ¥ä¿¡æ¯ã€‚å®¢æˆ·ç«¯å¯ä»¥æ ¹æ®é“¾æ¥æ¥å‘ç°å¯ä»¥æ‰§è¡Œçš„åŠ¨ä½œã€‚</p>
</blockquote>
<p>Spring HATEOASçš„ä»‹ç»</p>
<blockquote>
<p>å½“ä½¿ç”¨Springç‰¹åˆ«æ˜¯Spring MVCæ—¶ï¼ŒSpring HATEOASæä¾›äº†ä¸€äº›APIæ¥ç®€åŒ–åˆ›å»ºéµå¾ªHATEOASåŸç†çš„RESTè¡¨ç¤ºå½¢å¼çš„APIã€‚å®ƒè¯•å›¾è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯é“¾æ¥åˆ›å»ºå’Œè¡¨ç¤ºç»„è£…ã€‚</p>
</blockquote>
<p>HATEOASè·Ÿâ€œé“¾æ¥â€å¾ˆæœ‰å…³ç³»ï¼Œä¸€èˆ¬çš„RESTfulè¿”å›ç»“æœéƒ½åªæ˜¯JSONæ•°æ®ï¼ŒHATEOASåŸç†è¿”å›çš„æ•°æ®è¿˜è¦åŒ…å«â€œé“¾æ¥â€ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨é“¾æ¥åšå„ç§äº‹ã€‚æˆ‘è¿˜æƒ³è±¡ä¸åˆ°åº”ç”¨åœºæ™¯ã€‚</p>
<hr>
<p>ï¼ˆä¸‹é¢éƒ½æ˜¯ä¸çŸ¥é“å¹²å˜›çš„ï¼Œæš‚æ—¶ä¸å­¦ï¼‰</p>
<h3 id="spring-web-servicesæš‚æ—¶ä¸å­¦">Spring Web Servicesï¼Œæš‚æ—¶ä¸å­¦</h3>
<p>ä¸çŸ¥é“æ˜¯å¹²å˜›çš„ï¼Œä»€ä¹ˆå«â€œæ–‡æ¡£é©±åŠ¨çš„WebæœåŠ¡(document-driven Web services)â€ï¼Œâ€œSOAPæœåŠ¡â€å¥½åƒæ˜¯â€œç®€å•æ•°æ®äº¤æ¢æœåŠ¡â€</p>
<blockquote>
<p>Spring Web Servicesï¼ˆSpring-WSï¼‰æ˜¯Springç¤¾åŒºçš„äº§å“ï¼Œè‡´åŠ›äºåˆ›å»ºæ–‡æ¡£é©±åŠ¨çš„WebæœåŠ¡ã€‚Spring Web Servicesæ—¨åœ¨ä¿ƒè¿›åˆåŒä¼˜å…ˆSOAPæœåŠ¡çš„å¼€å‘ï¼Œä»è€Œå…è®¸ä½¿ç”¨å¤šç§æ“ä½œXMLè´Ÿè½½çš„æ–¹å¼ä¹‹ä¸€æ¥åˆ›å»ºçµæ´»çš„WebæœåŠ¡ã€‚è¯¥äº§å“åŸºäºSpringæœ¬èº«ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥å°†è¯¸å¦‚ä¾èµ–é¡¹æ³¨å…¥ä¹‹ç±»çš„Springæ¦‚å¿µç”¨ä½œWebæœåŠ¡çš„ç»„æˆéƒ¨åˆ†ã€‚</p>
</blockquote>
<blockquote>
<p>äººä»¬ä½¿ç”¨Spring-WSçš„åŸå› æœ‰å¾ˆå¤šï¼Œä½†æ˜¯å¤§å¤šæ•°äººåœ¨éµå¾ªWebæœåŠ¡æœ€ä½³å®è·µæ—¶å‘ç°ç¼ºä¹æ›¿ä»£çš„SOAPå †æ ˆåæ‰è¢«å¸å¼•ä½¿ç”¨ã€‚Spring-WSä½¿æœ€ä½³å®è·µå˜å¾—å®¹æ˜“ã€‚è¿™åŒ…æ‹¬è¯¸å¦‚WS-IåŸºæœ¬æ¦‚è¦æ–‡ä»¶ï¼ŒåˆåŒä¼˜å…ˆå¼€å‘ä¹‹ç±»çš„å®è·µï¼Œä»¥åŠåˆåŒä¸å®æ–½ä¹‹é—´çš„æ¾æ•£è€¦åˆã€‚</p>
</blockquote>
<h3 id="spring-integrationæš‚æ—¶ä¸å­¦">Spring Integrationï¼Œæš‚æ—¶ä¸å­¦</h3>
<p>Integrationæ˜¯æ•´åˆçš„æ„æ€ï¼ŒSpring Cloud Streamé¡¹ç›®åŸºäºSpring Integrationï¼Œå…¶ä¸­Spring Integrationç”¨ä½œæ¶ˆæ¯é©±åŠ¨çš„å¾®æœåŠ¡çš„å¼•æ“ã€‚è²Œä¼¼æ˜¯ç”¨æ¥æ•´åˆå„ç§æœåŠ¡çš„ã€‚</p>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç”¨å®ƒå®ç°åˆ†å¸ƒå¼é”çš„<a href="https://www.cnblogs.com/xuwenjin/p/10681187.html#commentform">ä¾‹å­</a></p>
<h3 id="spring-cloud-data-flowæš‚æ—¶ä¸å­¦">Spring Cloud Data Flowï¼Œæš‚æ—¶ä¸å­¦</h3>
<p>å®˜æ–¹ä»‹ç»çš„æœºç¿»ï¼Œç°åœ¨è¿˜ä¸ç†è§£ã€‚</p>
<blockquote>
<p>ç”¨äºCloud Foundryå’ŒKubernetesçš„åŸºäºå¾®æœåŠ¡çš„æµå¼å¤„ç†å’Œæ‰¹å¤„ç†æ•°æ®å¤„ç†ã€‚</p>
<p>Spring Cloud Data Flowæä¾›äº†ç”¨äºä¸ºæµå’Œæ‰¹å¤„ç†æ•°æ®ç®¡é“åˆ›å»ºå¤æ‚æ‹“æ‰‘çš„å·¥å…·ã€‚æ•°æ®ç®¡é“åŒ…å«ä½¿ç”¨Spring Cloud Streamæˆ–Spring Cloud Taskå¾®æœåŠ¡æ¡†æ¶æ„å»ºçš„Spring Bootåº”ç”¨ç¨‹åºã€‚</p>
<p>Spring Cloud Data Flowæ”¯æŒä»ETLåˆ°å¯¼å…¥/å¯¼å‡ºï¼Œäº‹ä»¶æµå’Œé¢„æµ‹åˆ†æçš„ä¸€ç³»åˆ—æ•°æ®å¤„ç†ç”¨ä¾‹ã€‚</p>
</blockquote>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%90%8E%E7%AB%AF/">åç«¯</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/spring/">spring</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/%E5%85%A5%E9%97%A8/">å…¥é—¨</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/java/">Java</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>ä½¿ç”¨Gitlabçš„Ci</title>
                <link>https://wss.cool/gitlab-ci.html</link>
                <guid isPermaLink="true">https://wss.cool/gitlab-ci.html</guid>
                <pubDate>Fri, 29 Nov 2019 16:42:18 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h1 id="éœ€æ±‚">éœ€æ±‚</h1>
<p>ä¸€ä¸ªå‰ç«¯é¡¹ç›®éœ€è¦åˆ†åˆ«å‘å¸ƒåˆ°çº¿ä¸Šçš„æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚åœ¨æ‰“åŒ…æ­¥éª¤ï¼Œåˆ©ç”¨CIçš„ç¯å¢ƒå˜é‡åŠŸèƒ½ï¼Œåˆ†åˆ«é…ç½®ä¸åŒçš„APIåœ°å€ã€é¡¹ç›®åœ°å€ç­‰ã€‚å®Œæˆæ‰“åŒ…åï¼Œå°†å…¶ä¸Šä¼ åˆ°é˜¿é‡Œossä¸­ï¼Œå®Œæˆå‘å¸ƒã€‚</p>
<h1 id="ä½¿ç”¨gitlab-cicdçš„å‡†å¤‡å·¥ä½œ">ä½¿ç”¨Gitlab CI/CDçš„å‡†å¤‡å·¥ä½œ</h1>
<p>éœ€è¦å‡†å¤‡ä¸‰ä¸ªä¸œè¥¿ï¼š<code>.gitlab-ci.yml</code> æ–‡ä»¶å®šä¹‰CIçš„å·¥ä½œæµç¨‹ã€Runneræ‰§è¡Œæµç¨‹ã€é˜¿é‡Œäº‘OSSçš„SDKåŠä¸Šä¼ ç¨‹åºç”¨äºéƒ¨ç½²ã€‚</p>
<h2 id="gitlab-ciymlæ–‡ä»¶">.gitlab-ci.ymlæ–‡ä»¶</h2>
<p>é¡¹ç›®æ ¹ç›®å½•ä¸‹éœ€è¦æœ‰ä¸€ä¸ª <code>.gitlab-ci.yml</code> æ–‡ä»¶ã€‚</p>
<p><strong>å£°æ˜æµç¨‹</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">stages</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- install<span class="w">
</span><span class="w">  </span>- build<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p><code>stages</code> å£°æ˜æµç¨‹ï¼Œè¿™é‡Œå°±æ˜¯åŒ…æ‹¬ <code>install</code> å’Œ <code>build</code> ä¸¤ä¸ªæµç¨‹ã€‚è¿™ä¸¤ä¸ªæµç¨‹éƒ½åšå“ªäº›å·¥ä½œå‘¢ï¼Ÿè¿™é‡Œçš„å£°æ˜ç›¸å½“äºä¸€ä¸ªç±»å‹æˆ–è€…æ¥å£ï¼Œéœ€è¦åœ¨åé¢å»å®ç°å®ƒã€‚</p>
<p><strong>å®ç°æµç¨‹</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">job_name</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">stage</span><span class="p">:</span><span class="w"> </span>install<span class="w">
</span><span class="w">  </span><span class="k">script</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- npm<span class="w"> </span>install<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ª <code>job</code> å°±æ˜¯å®ç° <code>stages</code> ä¸­å£°æ˜çš„ <code>install</code> æµç¨‹çš„ï¼Œå…¶ä¸­ <code>job_name</code> éšä¾¿å†™å°±æ˜¯ä¸ªåå­—ï¼Œ<code>stage</code> å­—æ®µæ˜¯è¯´è¿™ä¸ª <code>job</code> æ˜¯å®ç°çš„å“ªä¸ªæ¥å£ã€‚ä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥è¢«å®ç°å¤šæ¬¡ï¼Œä½†æ˜¯è¦æœ‰æ¡ä»¶åŒºåˆ†å¼€ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">build_develop</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">stage</span><span class="p">:</span><span class="w"> </span>build<span class="w">
</span><span class="w">  </span><span class="k">variables</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">REACT_APP_BASE_UR</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//develop.edinnovaedu.com<span class="p">:</span><span class="m">35040</span>/<span class="w">
</span><span class="w">    </span><span class="k">REACT_APP_LEARNBOT_URL</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//ng-api--dev.edinnovaedu.com/<span class="w">
</span><span class="w">  </span><span class="k">only</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- develop<span class="w">
</span><span class="w">  </span><span class="k">script</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- npm<span class="w"> </span>run<span class="w"> </span>build<span class="p">:</span>dev<span class="w">
</span><span class="w">    </span>- npm<span class="w"> </span>run<span class="w"> </span>deploy<span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">build_production</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">stage</span><span class="p">:</span><span class="w"> </span>build<span class="w">
</span><span class="w">  </span><span class="k">variables</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">REACT_APP_BASE_URL</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//api-gray.v.edinnovaedu.com/<span class="w">
</span><span class="w">    </span><span class="k">REACT_APP_LEARNBOT_URL</span><span class="p">:</span><span class="w"> </span>https<span class="p">:</span>//api-gray.v.edinnovaedu.com<span class="w">
</span><span class="w">  </span><span class="k">only</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- master<span class="w">
</span><span class="w">  </span><span class="k">script</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- npm<span class="w"> </span>run<span class="w"> </span>build<span class="p">:</span>gray<span class="w">
</span><span class="w">    </span>- npm<span class="w"> </span>run<span class="w"> </span>deploy<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢çš„ä¸¤ä¸ª <code>job</code>ï¼Œéƒ½æ˜¯ <code>build</code> çš„å®ç°ï¼Œå®ƒä»¬æ ¹æ® <code>only</code> å­—æ®µå®šä¹‰çš„æ¡ä»¶ï¼ˆåˆ†æ”¯åï¼‰åšä¸åŒçš„å·¥ä½œã€‚</p>
<p><strong>æ€»ç»“</strong></p>
<p><code>æ€»ç»“ä¸€ä¸‹ï¼Œstages</code> å£°æ˜æµç¨‹ï¼Œæ€»çš„æµç¨‹æ˜¯ç¬¬ä¸€æ­¥æ‰§è¡Œ <code>install</code> ï¼Œç¬¬äºŒæ­¥æ‰§è¡Œ <code>build</code>
<img src="/images/gitlab-ci-1.jpg" alt="install-build"></p>
<p><code>job</code> å®ç°æµç¨‹ï¼Œå¤šä¸ª <code>job</code> å¯ä»¥å®ç°åŒä¸€æ­¥æµç¨‹ã€‚ç¬¬ä¸€æ­¥æ‰§è¡Œ <code>install</code>ï¼›ç¬¬äºŒæ­¥æ‰§è¡Œ <code>build</code>ï¼Œä½†æ˜¯ä¼šæ ¹æ®æ¡ä»¶å»æ‰§è¡Œå¯¹åº”çš„é‚£ä¸ªå®ç°ã€‚
<img src="/images/gitlab-ci-2.jpg" alt="install-mutl-build"></p>
<p><strong>å˜é‡</strong></p>
<p>åœ¨ job build_develop ä¸­çœ‹åˆ°æœ‰ä¸€ä¸ª variables å­—æ®µï¼Œå®ƒå®šä¹‰äº†ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œ npm run build ä¸­ä¼šç”¨åˆ°ä»–ä»¬ã€‚</p>
<p>åœ¨ job ä¸­å£°æ˜çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡ï¼Œåªåœ¨å½“å‰ job ä¸­æœ‰æ•ˆã€‚è¿˜å¯ä»¥å£°æ˜å…¨å±€å˜é‡ï¼Œå†™æ³•ä¸€æ ·ï¼Œåªæ˜¯å†™çš„ä½ç½®æ˜¯ä¸ stages å¹³çº§ã€‚</p>
<p><strong>ç¼“å­˜</strong></p>
<p>åœ¨æ‰§è¡Œä¸åŒçš„æµç¨‹æ—¶ï¼Œä¼šæ¸…é™¤æ‰.gitignoreä¸­çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ node_modules å°±ä¼šæ¯æ¬¡éƒ½è¢«åˆ é™¤ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="k">cache</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">key</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;$CI_COMMIT_REF_SLUG&#34;</span><span class="w">
</span><span class="w">  </span><span class="k">paths</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- node_modules/<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢è¿™æ®µæ˜¯åˆ†æ”¯ä¸åŒæ—¶æ‰æ¸…é™¤ node_modules ï¼ŒåŒä¸ªåˆ†æ”¯çš„ä¸åŒ job é—´ä¼šä¿ç•™/å…±äº«å®ƒã€‚</p>
<h2 id="runner">Runner</h2>
<p>åœ¨<code>.gitlab-ci.yml</code>æ–‡ä»¶ä¸­å®šä¹‰å¥½æµç¨‹åï¼Œéœ€è¦é…ç½®ä¸€ä¸ªRunneræ¥æ‰§è¡Œè¿™äº›æ“ä½œã€‚å®ƒæ˜¯ä¸€ä¸ªè½¯ä»¶ï¼Œéœ€è¦å•ç‹¬å®‰è£…ï¼Œå¯ä»¥å®‰è£…åœ¨è¿è¡Œgitlabçš„æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®‰è£…åœ¨å¦ä¸€å°æœºå™¨ä¸Šã€‚</p>
<p><strong>å®‰è£…</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># For Debian/Ubuntu</span>
$ curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.deb.sh <span class="p">|</span> sudo bash
$ sudo apt-get install gitlab-ci-multi-runner
</code></pre></td></tr></table>
</div>
</div><p><strong>æ³¨å†Œ</strong></p>
<p>æ³¨å†Œæ˜¯ä¸ºäº†æŠŠgitlabå’Œrunnerè¿æ¥ã€‚gitlabçš„é¡¹ç›®çš„è®¾ç½®ä¸­ä¼šæä¾›ä¸€ä¸ªurlå’Œä¸€ä¸ªtoken</p>
<p><img src="/images/gitlab-ci-runner.png" alt="runner"></p>
<p>æ‹¿åˆ°äº†è¿™ä¸¤ä¸ªä¸œè¥¿ï¼Œå›åˆ°åˆšæ‰å®‰è£…äº†runnerçš„ç”µè„‘ï¼Œå¼€å§‹æ³¨å†Œrunnerã€‚</p>
<pre><code>sudo gitlab-ci-multi-runner register
</code></pre><p>ç„¶åä¾æ¬¡è¾“å…¥URLã€Tokenã€åå­—ã€ä¸ç”¨è¾“å…¥ã€shellï¼Œå°±å®Œæˆäº†ã€‚</p>
<p>å¯ä»¥ç”¨ <code>sudo gitlab-ci-multi-runner list</code> å‘½ä»¤æ¥æŸ¥çœ‹å„ä¸ª Runner çš„çŠ¶æ€ã€‚</p>
<p>æœ‰äº†<code>.gitlab-ci.yml</code>å’Œ <code>runner</code> gitlabçš„<code>CI/CD</code>å°±å¯ä»¥å·¥ä½œäº†ï¼Œé»˜è®¤çš„æƒ…å†µï¼Œæ¯æ¬¡ä¸Šä¼ <code>commit</code>éƒ½ä¼šè§¦å‘<code>CI/CD</code>æ‰§è¡Œã€‚</p>
<h2 id="éƒ¨ç½²">éƒ¨ç½²</h2>
<p>æˆ‘ä½¿ç”¨äº†é˜¿é‡Œäº‘çš„osséƒ¨ç½²å‰ç«¯é¡¹ç›®ï¼Œæ‰€ä»¥åªéœ€è¦æŠŠæ‰“åŒ…åçš„æ–‡ä»¶ä¸Šä¼ åˆ°å¯¹åº”çš„ç›®å½•å³å¯ã€‚è¿™é‡Œä½¿ç”¨<code>oss</code>çš„<code>python sdk</code>æ¥ä¸Šä¼ ã€‚</p>
<p><code>python</code>ç¨‹åºæ”¾åœ¨äº†é¡¹ç›®ç›®å½•ä¸­ï¼Œ<code>runner</code>æœåŠ¡å™¨ä¹Ÿå®‰è£…å¥½äº†pythonå’Œsdkã€‚æ‰€ä»¥åªéœ€è¦è¿è¡Œ<code>npm run deploy</code>æ‰§è¡Œ<code>python</code>ç¨‹åºå³å¯ã€‚</p>
<h1 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</h1>
<p>ç”±äºgitlabé¡¹ç›®é…ç½®é”™è¯¯ï¼Œcloneé¡¹ç›®çš„urlä¸å®é™…urlä¸åŒã€‚åœ¨CIæ‰§è¡Œæ—¶ï¼Œä½¿ç”¨çš„æ˜¯é”™è¯¯çš„URLå¯¼è‡´æ— æ³•cloneé¡¹ç›®è€ŒæŠ¥é”™ã€‚</p>
<p>è§£å†³æ–¹æ³•æ˜¯Runnerçš„é…ç½®æ–‡ä»¶ã€‚æ–‡æ¡£é“¾æ¥æ˜¯<strong>å‚è€ƒ3</strong></p>
<p><code>root</code>ç”¨æˆ·çš„é…ç½®æ–‡ä»¶åœ¨<code>/etc/gitlab-runner/config.toml</code>ï¼Œå¯ä»¥ä¸ºä¸€ä¸ª<code>runner</code>è®¾ç½®ä¸€ä¸ª<code>clone_url</code>å³å¯è§£å†³é—®é¢˜ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-toml" data-lang="toml"><span class="p">[[</span><span class="nx">runners</span><span class="p">]]</span>
  <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;ruby-2.1-docker&#34;</span>
  <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;https://CI/&#34;</span>
  <span class="nx">token</span> <span class="p">=</span> <span class="s2">&#34;TOKEN&#34;</span>
  <span class="nx">limit</span> <span class="p">=</span> <span class="mi">0</span>
  <span class="nx">executor</span> <span class="p">=</span> <span class="s2">&#34;docker&#34;</span>
  <span class="nx">builds_dir</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
  <span class="nx">shell</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
  <span class="nx">environment</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;ENV=value&#34;</span><span class="p">,</span> <span class="s2">&#34;LC_ALL=en_US.UTF-8&#34;</span><span class="p">]</span>
  <span class="nx">clone_url</span> <span class="p">=</span> <span class="s2">&#34;http://gitlab.example.local&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p><a href="https://scarletsky.github.io/2016/07/29/use-gitlab-ci-for-continuous-integration/#cache-job-cache">å‚è€ƒ1</a>
<a href="https://docs.gitlab.com/ce/ci/variables/README.html#masked-variables">å‚è€ƒ2</a>
<a href="https://docs.gitlab.com/runner/configuration/advanced-configuration.html#the-global-section">å‚è€ƒ3</a></p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>æœªè¯»</title>
                <link>https://wss.cool/posts/%E6%9C%AA%E8%AF%BB/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E6%9C%AA%E8%AF%BB/</guid>
                <pubDate>Mon, 18 Nov 2019 10:59:42 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="åº·å¥ˆå°”ç¬”è®°æ³•">åº·å¥ˆå°”ç¬”è®°æ³•</h2>
<p>2019å¹´11æœˆ25æ—¥12:26:15</p>
<p>ä¸ŠåŠå³è¾¹ä¸ºè¦ç‚¹ï¼Œå·¦è¾¹ä¸ºçº¿ç´¢ï¼Œä¸‹éƒ¨ä¸ºæ€»ç»“ã€‚çœ‹çš„è¿‡ç¨‹ä¸­è®°å½•è¦ç‚¹ï¼Œçœ‹å®Œäº†æç‚¼çº¿ç´¢ã€‚æ€»ç»“æ•´ä¸ªç¬”è®°ï¼Œç”¨è‡ªå·±çš„è¯­è¨€ï¼Œæœ€å¥½ä¸å·²ç»ä¼šçš„ä¸œè¥¿å‘ç”Ÿç»ƒä¹ ã€‚</p>
<h2 id="postgresqlä¸mysqlå¯¹æ¯”">PostgreSQLä¸MySQLå¯¹æ¯”</h2>
<p><a href="https://www.zhihu.com/question/20010554">çŸ¥ä¹å¸–å­</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html">pgæ”»ç•¥</a></p>
<h2 id="pythonæ§åˆ¶æ‰‹æœº">pythonæ§åˆ¶æ‰‹æœº</h2>
<p><a href="https://zhuanlan.zhihu.com/p/57349184">https://zhuanlan.zhihu.com/p/57349184</a></p>
<h2 id="æ¢¯å­æ”»ç•¥">æ¢¯å­æ”»ç•¥</h2>
<p><a href="https://github.com/haoel/haoel.github.io">https://github.com/haoel/haoel.github.io</a></p>
<h2 id="javascriptå¼€å‘è€…åº”æ‡‚çš„33ä¸ªæ¦‚å¿µ">JavaScriptå¼€å‘è€…åº”æ‡‚çš„33ä¸ªæ¦‚å¿µ</h2>
<p><a href="https://github.com/stephentian/33-js-concepts">https://github.com/stephentian/33-js-concepts</a></p>
<h2 id="å¦‚ä½•å†™æ–‡æ¡£">å¦‚ä½•å†™æ–‡æ¡£</h2>
<p><a href="https://www.divio.com/blog/documentation/">https://www.divio.com/blog/documentation/</a></p>
<h2 id="åå‘é¢è¯•çš„é—®é¢˜">åå‘é¢è¯•çš„é—®é¢˜</h2>
<p><a href="https://github.com/yifeikong/reverse-interview-zh">https://github.com/yifeikong/reverse-interview-zh</a></p>
<h2 id="innodbæ¶æ„">InnoDBæ¶æ„</h2>
<p><a href="https://mp.weixin.qq.com/s/zKHNaWY5AS0OMmag1mQTKQ">https://mp.weixin.qq.com/s/zKHNaWY5AS0OMmag1mQTKQ</a></p>
<h2 id="uuid">uuid</h2>
<p><a href="https://zh.wikipedia.org/wiki/%E9%80%9A%E7%94%A8%E5%94%AF%E4%B8%80%E8%AF%86%E5%88%AB%E7%A0%81">https://zh.wikipedia.org/wiki/%E9%80%9A%E7%94%A8%E5%94%AF%E4%B8%80%E8%AF%86%E5%88%AB%E7%A0%81</a><br>
<a href="https://github.com/kelektiv/node-uuid">https://github.com/kelektiv/node-uuid</a><br>
<a href="https://www.zhihu.com/question/34876910">https://www.zhihu.com/question/34876910</a></p>
<h2 id="ç®€ä¹¦æ”¶è—å¯é webéªŒè¯">ç®€ä¹¦æ”¶è—ï¼šå¯é webéªŒè¯</h2>
<p>aaa</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%85%B6%E4%BB%96/">å…¶ä»–</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Redux Toolkit</title>
                <link>https://wss.cool/redux-toolkit.html</link>
                <guid isPermaLink="true">https://wss.cool/redux-toolkit.html</guid>
                <pubDate>Mon, 28 Oct 2019 10:54:37 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://redux-starter-kit.js.org/introduction/quick-start">Redux Toolkit</a>æ˜¯ <code>Redux</code> å®˜æ–¹æä¾›çš„å·¥å…·ç®±ğŸ§°ï¼Œå®ƒæŒ‡å®šäº†ä¸€ä¸ª <code>Redux</code> çš„ä½¿ç”¨è§„åˆ™ï¼Œé›†æˆäº† <code>immer</code> <code>thunk</code> ç­‰å¸¸ç”¨çš„å·¥å…·åº“ï¼Œè¿˜æœ‰å¾ˆå¥½çš„ <code>typescript</code> æ”¯æŒã€‚</p>
<p>slice</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<pre><code>yarn add @reduxjs/toolkit
// æˆ–è€…
npx create-react-app my-app --template redux
</code></pre><h2 id="åˆå§‹åŒ–store">åˆå§‹åŒ–store</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span> <span class="nx">configureStore</span><span class="p">,</span> <span class="nx">createReducer</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;redux-starter-kit&#39;</span><span class="p">;</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">add</span> <span class="o">=</span> <span class="nx">createAction</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">number</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span>
<span class="kr">const</span> <span class="nx">reducer</span> <span class="o">=</span> <span class="nx">createReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span> <span class="p">{</span>
  <span class="p">[</span><span class="nx">add</span><span class="p">]</span><span class="o">:</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">state</span><span class="p">.</span><span class="nx">number</span> <span class="o">=</span> <span class="nx">action</span><span class="p">.</span><span class="nx">number</span><span class="p">,</span>
<span class="p">})</span>
<span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">configureStore</span><span class="p">({</span><span class="nx">reducer</span><span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">store</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="è°ƒç”¨">è°ƒç”¨</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ...
</span><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Provider</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-redux&#39;</span>
<span class="kr">import</span> <span class="nx">store</span> <span class="nx">from</span> <span class="s1">&#39;./store&#39;</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Provider</span> <span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">store</span><span class="p">}</span><span class="o">&gt;&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="err">/Provider&gt;, document.getElementById(&#39;root&#39;)</span>
<span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ...
</span><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">useSelector</span><span class="p">,</span> <span class="nx">useDispatch</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-redux&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">add</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./store&#39;</span>
<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">number</span> <span class="o">=</span> <span class="nx">useSelector</span><span class="p">(</span><span class="nx">state</span> <span class="p">=&gt;</span> <span class="nx">state</span><span class="p">.</span><span class="nx">number</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">useDispatch</span><span class="p">()</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">number</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">dispatch</span><span class="p">(</span><span class="nx">add</span><span class="p">(</span><span class="nx">number</span><span class="o">+</span><span class="mi">1</span><span class="p">))}</span><span class="o">&gt;</span> <span class="o">+</span> <span class="o">&lt;</span><span class="err">/button&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="åˆ›å»ºstore">åˆ›å»ºstore</h3>
<p>configureStoreç”¨äºåˆå§‹åŒ–reduxä»“åº“ï¼Œå¯ä»¥åˆå¹¶reducerï¼Œå¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºä¸­é—´ä»¶ç­‰ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">configureStore</span><span class="p">({</span>
    <span class="c1">// A single reducer function that will be used as the root reducer,
</span><span class="c1"></span>    <span class="c1">// or an object of slice reducers that will be passed to combineReducers()
</span><span class="c1"></span>    <span class="nx">reducer</span><span class="o">:</span> <span class="nb">Object</span><span class="o">&lt;</span><span class="nx">string</span><span class="p">,</span> <span class="nx">ReducerFunction</span><span class="o">&gt;</span> <span class="o">|</span> <span class="nx">ReducerFunction</span><span class="p">,</span>
    <span class="c1">// An array of Redux middlewares.  If not supplied, uses getDefaultMiddleware()
</span><span class="c1"></span>    <span class="nx">middleware</span><span class="o">?:</span> <span class="nx">MiddlewareFunction</span><span class="p">[],</span>
    <span class="c1">// Enable support for the Redux DevTools Extension. Defaults to true.
</span><span class="c1"></span>    <span class="nx">devTools</span><span class="o">?:</span> <span class="kr">boolean</span> <span class="o">|</span> <span class="nx">EnhancerOptions</span><span class="p">,</span>
    <span class="c1">// Same as current createStore.
</span><span class="c1"></span>    <span class="nx">preloadedState</span><span class="o">?:</span> <span class="nx">State</span><span class="p">,</span>
    <span class="c1">// An optional array of Redux store enhancers
</span><span class="c1"></span>    <span class="nx">enhancers</span><span class="o">?:</span> <span class="nx">ReduxStoreEnhancer</span><span class="p">[],</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¾‹å­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">configureStore</span><span class="p">({</span>
  <span class="nx">reducer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">config</span><span class="o">:</span> <span class="nx">configReducer</span><span class="p">,</span>
    <span class="nx">counter</span><span class="o">:</span> <span class="nx">counterReducer</span>
  <span class="p">},</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>JavaScriptè¯­è¨€ç²¾å</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/javascript%E8%AF%AD%E8%A8%80%E7%B2%BE%E5%8D%8E/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/javascript%E8%AF%AD%E8%A8%80%E7%B2%BE%E5%8D%8E/</guid>
                <pubDate>Wed, 23 Oct 2019 06:56:30 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ç²¾å">ç²¾å</h2>
<p>æˆ‘ç›¸ä¿¡æˆ‘ç²¾é›•ç»†ç¢å‡ºæ¥çš„ä¼˜é›…å­é›†å¤§å¤§åœ°ä¼˜äºè¿™é—¨è¯­è¨€çš„æ•´ä½“ï¼Œå®ƒæ›´å¯é ã€æ›´æ˜“è¯»ã€æ›´æ˜“äºç»´æŠ¤ã€‚</p>
<p>æµè§ˆå™¨APIå’ŒDOMç›¸å½“ç³Ÿç³•ï¼Œè¿ç´¯äº†JavaScriptã€‚å†™ä¸€æœ¬DOMçš„ç²¾åçš„ä¹¦æ˜¯ä¸€é¡¹ä¸å¯èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚</p>
<p>JavaScriptä¸­ä¼˜ç§€çš„æƒ³æ³•åŒ…æ‹¬å‡½æ•°ã€å¼±ç±»å‹ã€åŠ¨æ€å¯¹è±¡å’Œå¯Œæœ‰å˜ç°åŠ›çš„å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³•ã€‚ç³Ÿç²•çš„æƒ³æ³•åŒ…æ‹¬åŸºäºå…¨å±€å˜é‡çš„ç¼–ç¨‹æ¨¡å‹ã€‚</p>
<h2 id="å¯¹è±¡">å¯¹è±¡</h2>
<p>JavaScriptåŒ…å«ä¸€ç§åŸå‹é“¾çš„ç‰¹æ€§ï¼Œå…è®¸å¯¹è±¡ç»§æ‰¿å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€‚</p>
<h3 id="åŸå‹">åŸå‹</h3>
<p>æ¯ä¸ªå¯¹è±¡éƒ½è¿æ¥åˆ°ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¹¶å¯ä»¥ä»ä¸­ç»§æ‰¿å±æ€§ã€‚å¯¹è±¡å­—é¢é‡åˆ›å»ºçš„å¯¹è±¡éƒ½è¿æ¥åˆ°Object.prototypeï¼Œå®ƒæ˜¯JavaScriptä¸­è¿‡çš„æ ‡é…å¯¹è±¡ã€‚</p>
<h2 id="å‡½æ•°">å‡½æ•°</h2>
<h3 id="å‡½æ•°å¯¹è±¡">å‡½æ•°å¯¹è±¡</h3>
<p>å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡å­—é¢é‡åˆ›å»ºçš„å¯¹è±¡è¿æ¥åˆ°Object.prototypeï¼Œå‡½æ•°å¯¹è±¡è¿æ¥åˆ°Function.prototypeï¼Œè€Œå®ƒåˆè¿æ¥åˆ°Object.prototype</p>
<h3 id="å‡½æ•°å­—é¢é‡">å‡½æ•°å­—é¢é‡</h3>
<p>é€šè¿‡å‡½æ•°å­—é¢é‡åˆ›å»ºçš„å‡½æ•°å¯¹è±¡åŒ…å«ä¸€ä¸ªè¿åˆ°å¤–éƒ¨ä¸Šä¸‹æ–‡çš„è¿æ¥ã€‚è¿™è¢«ç§°ä¸ºé—­åŒ…ï¼ˆclosureï¼‰ã€‚</p>
<h3 id="è°ƒç”¨">è°ƒç”¨</h3>
<p>é™¤äº†å£°æ˜æ—¶å®šä¹‰çš„å½¢å¼å‚æ•°ï¼Œæ¯ä¸ªå‡½æ•°è¿˜æ¥æ”¶ä¸¤ä¸ªé™„åŠ çš„å‚æ•°ï¼šthiså’Œargumentsã€‚</p>
<p>thisçš„å€¼å–å†³äºè°ƒç”¨çš„æ¨¡å¼ã€‚æœ‰4ä¸­è°ƒç”¨æ¨¡å¼ï¼šæ–¹æ³•ã€å‡½æ•°ã€æ„é€ å™¨ã€applyã€‚</p>
<h4 id="æ–¹æ³•è°ƒç”¨æ¨¡å¼">æ–¹æ³•è°ƒç”¨æ¨¡å¼</h4>
<p>å‡½æ•°è¢«ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå°±æ•™æ–¹æ³•ã€‚æ­¤æ—¶thisä¸ºè¯¥å¯¹è±¡ã€‚</p>
<h4 id="å‡½æ•°è°ƒç”¨æ¨¡å¼">å‡½æ•°è°ƒç”¨æ¨¡å¼</h4>
<p>å‡½æ•°æ²¡æœ‰ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œä»–å°±è¢«å½“ä½œä¸€ä¸ªå‡½æ•°è°ƒç”¨äº†ã€‚æ­¤æ¨¡å¼thisè¢«ç»‘å®šåˆ°å…¨å±€å˜é‡ã€‚</p>
<p>å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å†…ï¼Œåˆå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ä¸­ä½¿ç”¨äº†thisï¼Œé‚£ä¹ˆè¿™ä¸ªthiså°±æ˜¯æŒ‡å‘çš„å…¨å±€å˜é‡ã€‚è¿™æ˜¯ä¸€ä¸ªè¯­è¨€è®¾è®¡é”™è¯¯ï¼Œæ­£ç¡®çš„è®¾è®¡åº”è¯¥æ˜¯æŒ‡å‘æ–¹æ³•ä¸­çš„thisã€‚æœ‰ä¸€ä¸ªå®¹æ˜“çš„è§£å†³æ–¹æ¡ˆï¼šå°†æ–¹æ³•ä¸­çš„ä¸€ä¸ªå˜é‡èµ‹å€¼ä¸ºthisï¼Œå‡½æ•°ä¸­è®¿é—®å˜é‡å³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">myObject</span><span class="p">.</span><span class="kr">double</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">helper</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">that</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="nx">helper</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>helper</code> å‡½æ•°ä¸­å¦‚æœä½¿ç”¨ <code>this</code> è¿™ä¸ª <code>this</code> å°±æ˜¯æŒ‡å‘å…¨å±€å˜é‡ã€‚</p>
<h4 id="æ„é€ å™¨è°ƒç”¨æ¨¡å¼">æ„é€ å™¨è°ƒç”¨æ¨¡å¼</h4>
<p>JavaScriptæ˜¯ä¸€é—¨åŸºäº<strong>åŸå‹</strong>ç»§æ‰¿çš„è¯­è¨€ï¼Œè¿™æ„å‘³è¿™ä¸€ä¸ªå¯¹è±¡å¯ä»¥ä»å¦ä¸€ä¸ªå¯¹è±¡ç»§æ‰¿å±æ€§ã€‚è¯¥è¯­è¨€æ˜¯æ— ç±»å‹çš„ã€‚ï¼ˆes6å‘¢ï¼Ÿï¼‰</p>
<p>ç”¨ <code>new</code> è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä¼šåˆ›å»ºä¸€ä¸ªè¿æ¥åˆ°è¯¥å‡½æ•°çš„ <code>prototype</code> æˆå‘˜çš„æ–°å¯¹è±¡ï¼ŒåŒæ—¶å°† <code>this</code> ç»‘å®šåˆ°é‚£ä¸ªæ–°å¯¹è±¡ä¸Šã€‚è¿™å°±æ˜¯æ„é€ å™¨è°ƒç”¨ã€‚</p>
<h4 id="applyè°ƒç”¨æ¨¡å¼">Applyè°ƒç”¨æ¨¡å¼</h4>
<p>å› ä¸ºJavaScriptæ˜¯ä¸€é—¨å‡½æ•°å¼çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œæ‰€ä»¥å‡½æ•°å¯ä»¥æ‹¥æœ‰æ–¹æ³•ã€‚</p>
<p>apply æ–¹æ³•æ¥å—2ä¸ªå‚æ•°ï¼Œç»‘å®šçš„ this ï¼Œå’Œå‚æ•°æ•°ç»„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">sum</span>  <span class="o">=</span> <span class="nx">add</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">array</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="é—­åŒ…">é—­åŒ…</h3>
<p>ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¿é—®å®ƒè¢«åˆ›å»ºæ—¶çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå°±å«é—­åŒ…ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">increment</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inc</span><span class="p">){</span>
      <span class="nx">value</span> <span class="o">+=</span> <span class="k">typeof</span> <span class="nx">inc</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span> <span class="o">?</span> <span class="nx">inc</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">getValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})()</span>
</code></pre></td></tr></table>
</div>
</div><p><code>incerment</code> å’Œ <code>getValue</code> ä¸¤ä¸ªå‡½æ•°è¢«åˆ›å»ºçš„ä¸Šä¸‹æ–‡ä¸­æœ‰ä¸€ä¸ª <code>value</code> å˜é‡ã€‚è¿™ä¸¤ä¸ªå‡½æ•°å¯ä»¥è®¿é—® <code>value</code> ï¼Œè¿™å°±å« <code>é—­åŒ…</code> ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>ARTSæ‰“å¡</title>
                <link>https://wss.cool/arts%E6%89%93%E5%8D%A1.html</link>
                <guid isPermaLink="true">https://wss.cool/arts%E6%89%93%E5%8D%A1.html</guid>
                <pubDate>Tue, 22 Oct 2019 16:35:08 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h1 id="algorithm">Algorithm</h1>
<p>æ¯å‘¨è‡³å°‘åšä¸€ä¸ªLeetCodeçš„ç®—æ³•é¢˜ã€‚ä¸ºäº†ç¼–ç¨‹è®­ç»ƒå’Œå­¦ä¹ ï¼Œåªçœ‹ä¹¦ä¸è®­ç»ƒæ˜¯æ²¡ç”¨çš„ã€‚</p>
<h1 id="review">Review</h1>
<p>é˜…è¯»å¹¶ç‚¹è¯„è‡³å°‘ä¸€ç¯‡è‹±æ–‡æŠ€æœ¯æ–‡ç« ã€‚ä¸ºäº†å­¦ä¹ è‹±æ–‡ã€‚</p>
<h1 id="tip">Tip</h1>
<p>å­¦ä¹ è‡³å°‘ä¸€ä¸ªæŠ€æœ¯æŠ€å·§ï¼Œä¸ºäº†æ€»ç»“å’Œå½’çº³åœ¨æ—¥å¸¸å·¥ä½œä¸­é‡åˆ°çš„çŸ¥è¯†ç‚¹ã€‚</p>
<h1 id="share">Share</h1>
<p>åˆ†äº«ä¸€ç¯‡æœ‰è§‚ç‚¹å’Œæ€è€ƒçš„æŠ€æœ¯æ–‡ç« ï¼Œä¸ºäº†å»ºç«‹å½±å“åŠ›ï¼Œè¾“å‡ºä»·å€¼è§‚ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>React Spring</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/react/react-spring/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/react/react-spring/</guid>
                <pubDate>Tue, 22 Oct 2019 14:19:59 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://www.react-spring.io">react-spring</a> æ˜¯ä¸€ä¸ªåŸºäºå¼¹ç°§ç‰©ç†å­¦çš„åŠ¨ç”»åº“ã€‚</p>
<p>æœ€åŸºæœ¬çš„ç”¨æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span><span class="nx">useSpring</span><span class="p">,</span> <span class="nx">animated</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-spring&#39;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">props</span> <span class="o">=</span> <span class="nx">useSpring</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">from</span><span class="o">:</span> <span class="p">{</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">}})</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">animated</span><span class="p">.</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">I</span> <span class="nx">will</span> <span class="nx">fade</span> <span class="k">in</span><span class="o">&lt;</span><span class="err">/animated.div&gt;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­çš„useSpringå¯ä»¥åˆ›é€ ä¸€ä¸ªjsåŠ¨ç”»ï¼Œè¿™ç§åŠ¨ç”»é»˜è®¤ä¸éœ€è¦è®¾ç½®æŒç»­æ—¶é—´ï¼Œä»–é€šè¿‡ä¸€äº›å¼¹ç°§å‚æ•°æ¥æ§åˆ¶åŠ¨ç”»çš„è¡¨ç°ã€‚å¯ä»¥é€šè¿‡configè®¾ç½®è¿™äº›å‚æ•°ï¼Œåƒè¿™æ ·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">useSpring</span><span class="p">({</span> <span class="nx">config</span><span class="o">:</span> <span class="p">{</span> <span class="nx">duration</span><span class="o">:</span> <span class="mi">250</span> <span class="p">},</span> <span class="p">...</span> <span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>å‚æ•°æœ‰å“ªäº›å¯ä»¥çœ‹Common apiè¿™èŠ‚æ–‡æ¡£ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">useSpring</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">from</span><span class="o">:</span> <span class="p">{</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">}})</span>
</code></pre></td></tr></table>
</div>
</div><p>fromä¸ºåŠ¨ç”»å¼€å§‹çš„å€¼ï¼Œ1ä¸ºåŠ¨ç”»æœ€åçš„å€¼ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">useSpring</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">to</span><span class="o">:</span> <span class="p">{</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">}})</span>
</code></pre></td></tr></table>
</div>
</div><p>1ä¸ºåŠ¨ç”»å¼€å§‹çš„å€¼ï¼Œtoä¸ºåŠ¨ç”»æœ€åçš„å€¼ã€‚</p>
<p>å¦‚æœuseSpringä¸­å˜åŒ–çš„å€¼å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚é¢œè‰²ã€æ•°å­—ï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">animated</span><span class="p">.</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">I</span> <span class="nx">will</span> <span class="nx">fade</span> <span class="k">in</span><span class="o">&lt;</span><span class="err">/animated.div&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ–è¿™æ ·</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">animated</span><span class="p">.</span><span class="nx">span</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">number</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/animated.span&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœuseSpringä¸­å˜åŒ–çš„å€¼éœ€è¦ç»„åˆæˆå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚transformï¼Œåˆ™éœ€è¦ä½¿ç”¨æ’å€¼å‡½æ•°(interpolate)æ¥å®ç°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">animated</span><span class="p">.</span><span class="nx">div</span>
  <span class="nx">style</span><span class="o">=</span><span class="p">{{</span>
    <span class="nx">background</span><span class="o">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">o</span> <span class="p">=&gt;</span> <span class="sb">`rgba(210, 57, 77, </span><span class="si">${</span><span class="nx">o</span><span class="si">}</span><span class="sb">)`</span><span class="p">),</span>
    <span class="nx">transform</span><span class="o">:</span> <span class="nx">xyz</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">((</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">z</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="sb">`translate3d(</span><span class="si">${</span><span class="nx">x</span><span class="si">}</span><span class="sb">px, </span><span class="si">${</span><span class="nx">y</span><span class="si">}</span><span class="sb">px, </span><span class="si">${</span><span class="nx">z</span><span class="si">}</span><span class="sb">px)`</span><span class="p">),</span>
    <span class="nx">border</span><span class="o">:</span> <span class="nx">interpolate</span><span class="p">([</span><span class="nx">o</span><span class="p">,</span> <span class="nx">color</span><span class="p">],</span> <span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="sb">`</span><span class="si">${</span><span class="nx">o</span> <span class="o">*</span> <span class="mi">10</span><span class="si">}</span><span class="sb">px solid </span><span class="si">${</span><span class="nx">c</span><span class="si">}</span><span class="sb">`</span><span class="p">),</span>
    <span class="nx">padding</span><span class="o">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">({</span><span class="nx">range</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">output</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">]}).</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">o</span> <span class="p">=&gt;</span> <span class="sb">`</span><span class="si">${</span><span class="nx">o</span><span class="si">}</span><span class="sb">%`</span><span class="p">),</span>
    <span class="nx">borderColor</span><span class="o">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">({</span><span class="nx">range</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">output</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;#ffaabb&#39;</span><span class="p">]}),</span>
    <span class="nx">opacity</span><span class="o">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
  <span class="p">}}</span>
<span class="o">&gt;</span>
  <span class="p">{</span><span class="nx">o</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">n</span> <span class="p">=&gt;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span> <span class="cm">/* innerText interpolation ... */</span><span class="p">}</span>
<span class="o">&lt;</span><span class="err">/animated.div&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>useSpringä¸­ä¼ å€¼å¯ä»¥æ˜¯ä»»æ„çš„å­—æ®µ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">useSpring</span><span class="p">({</span><span class="nx">everything</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">to</span><span class="o">:</span> <span class="p">{</span><span class="nx">everything</span><span class="o">:</span> <span class="mi">0</span><span class="p">}})</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥åœ¨ä»£ç ä¸­æ›´æ–°spring</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="p">[</span><span class="nx">props</span><span class="p">,</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">stop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useSpring</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">}))</span>

<span class="c1">// Update spring with new props
</span><span class="c1"></span><span class="nx">set</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="nx">toggle</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">})</span>
<span class="c1">// Stop animation
</span><span class="c1"></span><span class="nx">stop</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥è®¾ç½®æˆå¤šæ®µåŠ¨ç”»</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">set</span><span class="p">({</span>
  <span class="nx">to</span><span class="o">:</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">cancel</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">next</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;#ffaaee&#39;</span><span class="p">})</span>
    <span class="nx">await</span> <span class="nx">next</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;rgb(14,26,19)&#39;</span><span class="p">})</span>
  <span class="p">},</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>åŠ¨ç”»ç»“æŸæ—¶è§¦å‘äº‹ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">set</span><span class="p">({</span>
  <span class="c1">// å…¶ä»–åŠ¨ç”»å‚æ•°...
</span><span class="c1"></span>  <span class="nx">onRest</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// åŠ¨ç”»ç»“æŸäº‹ä»¶
</span><span class="c1"></span>    <span class="nx">props</span><span class="p">.</span><span class="nx">onWrong</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>[æœºç¿»]å¦‚ä½•è§£å†³é—®é¢˜</title>
                <link>https://wss.cool/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98.html</link>
                <guid isPermaLink="true">https://wss.cool/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98.html</guid>
                <pubDate>Mon, 21 Oct 2019 16:54:43 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>æ­¤ä¸ºæœºç¿»æ–‡ç« ï¼Œ<a href="https://medium.com/free-code-camp/how-to-think-like-a-programmer-lessons-in-problem-solving-d1d8bf1de7d2">åŸæ–‡åœ¨æ­¤</a>ã€‚</p>
<h1 id="è§£å†³é—®é¢˜æ–¹æ³•">è§£å†³é—®é¢˜æ–¹æ³•</h1>
<p>å½“é‡åˆ°æ–°é—®é¢˜æ—¶ï¼Œä½ è¯¥æ€ä¹ˆåšï¼Ÿ</p>
<h1 id="1ç†è§£æ˜ç™½">1.ç†è§£ã€æ˜ç™½</h1>
<p>ç¡®åˆ‡çš„çŸ¥é“è¦é—®ä»€ä¹ˆã€‚å¤§å¤šæ•°éš¾é¢˜ä¹‹æ‰€ä»¥éš¾æ˜¯å› ä¸ºä½ ä¸ç†è§£å®ƒã€‚</p>
<p>æ€ä¹ˆçŸ¥é“ä½ ç†è§£ä¸€ä¸ªé—®é¢˜å‘¢ï¼Ÿå½“ä½ å¯ä»¥ç®€å•çš„æœ¯è¯­è§£é‡Šå®ƒçš„æ—¶å€™ã€‚</p>
<p>ä½ è¿˜è®°å¾—å—ï¼Œå½“ä½ è¢«ä¸€ä¸ªé—®é¢˜å¡ä½ï¼Œä½ å¼€å§‹è§£é‡Šå®ƒï¼Œä½ ä¼šç«‹å³å‘ç°ä»¥å‰ä»æœªè§è¿‡çš„é€»è¾‘æ¼æ´ï¼Ÿ</p>
<p>å¤šæ•°ç¨‹åºå‘˜çŸ¥é“è¿™ç§æ„Ÿè§‰ã€‚</p>
<blockquote>
<p>â€œIf you canâ€™t explain something in simple terms, you donâ€™t understand it.â€ â€” Richard Feynman</p>
</blockquote>
<h1 id="2è®¡åˆ’">2.è®¡åˆ’</h1>
<p>ä¸è¦æ²¡æœ‰è®¡åˆ’å°±ç›´æ¥è§£å†³é—®é¢˜ï¼ˆä»¥æŸç§æ–¹å¼å¸Œæœ›æ‚¨èƒ½æ‘¸ç´¢åˆ°åº•ï¼‰ã€‚è§„åˆ’æ‚¨çš„è§£å†³æ–¹æ¡ˆï¼</p>
<p>å¦‚æœä½ ä¸èƒ½å†™ä¸‹å…·ä½“çš„æ­¥éª¤ï¼Œå°†æ— æµäºäº‹ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œè¿™æ„å‘³ç€ä¸è¦é©¬ä¸Šå¼€å§‹å†™ä»£ç ã€‚è¦ç»™ä½ çš„å¤§è„‘æ—¶é—´ï¼Œå¤„ç†é—®é¢˜ã€åˆ†æä¿¡æ¯ã€‚</p>
<p>ä¸ºè¿™ä¸ªä¸ºé¢˜ç»™å‡ºä¸€ä¸ªè®¡åˆ’ï¼š</p>
<p>â€œå½“è¾“å…¥Xæ—¶ï¼Œæœ‰å“ªäº›å¿…è¦çš„æ­¥éª¤æ‰èƒ½è¾“å‡ºYï¼Ÿâ€</p>
<p>æ—æ³¨ï¼šç¨‹åºå‘˜æœ‰ä¸€ä¸ªå¾ˆæ£’çš„å·¥å…·æ¥å¸®åŠ©ä»–ä»¬ã€‚</p>
<h1 id="3åˆ’åˆ†">3.åˆ’åˆ†</h1>
<p>è¯·æ³¨æ„ã€‚è¿™æ˜¯æœ€é‡è¦çš„ä¸€æ­¥ã€‚</p>
<p>ä¸è¦è¯•å›¾è§£å†³ä¸€ä¸ªå¤§é—®é¢˜ã€‚ä½ ä¼šå“­ã€‚è€Œæ˜¯å°†å…¶åˆ†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ã€‚è¿™äº›å­é—®é¢˜æ›´å®¹æ˜“è§£å†³ã€‚</p>
<p>ç„¶åï¼Œä¸€ä¸ªä¸€ä¸ªåœ°è§£å†³æ¯ä¸ªå­é—®é¢˜ã€‚ä»æœ€ç®€å•çš„å¼€å§‹ã€‚æœ€ç®€å•æ„å‘³ç€æ‚¨çŸ¥é“ç­”æ¡ˆï¼ˆæˆ–æ›´æ¥è¿‘ç­”æ¡ˆï¼‰ã€‚</p>
<p>æ­¤åï¼Œæœ€ç®€å•çš„æ–¹æ³•æ„å‘³ç€è¦è§£å†³çš„å­é—®é¢˜ä¸ä¾èµ–äºè¦è§£å†³çš„å…¶ä»–é—®é¢˜ã€‚</p>
<p>è§£å†³äº†æ¯ä¸ªå­é—®é¢˜åï¼Œå°†ç‚¹è¿æ¥èµ·æ¥ã€‚è¿æ¥æ‰€æœ‰â€œå­è§£å†³æ–¹æ¡ˆâ€å°†ä¸ºæ‚¨è§£å†³åŸå§‹é—®é¢˜ã€‚æ­å–œä½ ï¼</p>
<p>è¯¥æŠ€æœ¯æ˜¯è§£å†³é—®é¢˜çš„åŸºçŸ³ã€‚è®°ä½è¿™ä¸€ç‚¹ï¼ˆå¦‚æœéœ€è¦ï¼Œè¯·å†æ¬¡é˜…è¯»æ­¤æ­¥éª¤ï¼‰ã€‚</p>
<h1 id="4å¡ä½äº†å—">4.å¡ä½äº†å—ï¼Ÿ</h1>
<p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæ‚¨å¯èƒ½ååœ¨é‚£é‡Œæƒ³ï¼šâ€œå—¨ï¼Œç†æŸ¥å¾·â€¦â€¦å¤ªé…·äº†ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘è¢«å¡ä½ç”šè‡³ä¸èƒ½è§£å†³å­é—®é¢˜æ€ä¹ˆåŠï¼Ÿâ€</p>
<p>é¦–å…ˆï¼Œæ·±å‘¼å¸ã€‚ç¬¬äºŒï¼Œè¿™å¾ˆå…¬å¹³ã€‚</p>
<p>æœ‹å‹ï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚è¿™å‘ç”Ÿåœ¨æ¯ä¸ªäººèº«ä¸Šï¼ä¸åŒä¹‹å¤„åœ¨äºï¼Œæœ€å¥½çš„ç¨‹åºå‘˜/é—®é¢˜è§£å†³è€…å¯¹bugs/errorsçš„å¥½å¥‡å¤§äºå¯¹é”™è¯¯çš„æ¼æ€’ã€‚</p>
<p>å®é™…ä¸Šï¼Œé¢å¯¹æ··ä¹±æ—¶ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>è°ƒè¯•ï¼šé€æ­¥è§£å†³æ‚¨çš„è§£å†³æ–¹æ¡ˆï¼Œå°è¯•æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚ç¨‹åºå‘˜å°†å…¶ç§°ä¸ºè°ƒè¯•ï¼ˆå®é™…ä¸Šï¼Œè¿™æ˜¯è°ƒè¯•å™¨çš„å…¨éƒ¨å·¥ä½œï¼‰ã€‚</li>
<li>é‡æ–°è¯„ä¼°ï¼š é€€åä¸€æ­¥ã€‚ä»å¦ä¸€ä¸ªè§’åº¦çœ‹é—®é¢˜ã€‚æœ‰ä»€ä¹ˆå¯ä»¥æŠ½è±¡ä¸ºæ›´é€šç”¨çš„æ–¹æ³•çš„å—ï¼Ÿ</li>
<li>ç ”ç©¶ï¼š å•Šï¼ŒGoogleä¸é”™ã€‚æ‚¨æ²¡çœ‹é”™ã€‚æ— è®ºæ‚¨é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œéƒ½å¯èƒ½æœ‰äººè§£å†³äº†ã€‚æ‰¾åˆ°é‚£ä¸ªäºº/è§£å†³æ–¹æ¡ˆã€‚å®é™…ä¸Šï¼Œå³ä½¿æ‚¨è§£å†³äº†é—®é¢˜ï¼Œä¹Ÿè¦è¿™æ ·åšï¼ï¼ˆæ‚¨å¯ä»¥ä»å…¶ä»–äººçš„è§£å†³æ–¹æ¡ˆä¸­å­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼‰ã€‚</li>
</ol>
<p>è­¦å‘Šï¼šä¸è¦ä¸ºå¤§é—®é¢˜å¯»æ‰¾è§£å†³æ–¹æ¡ˆã€‚åªå¯»æ‰¾å­é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºé™¤éæ‚¨å¥‹æ–—ï¼ˆä¸€ç‚¹ç‚¹ï¼‰ï¼Œå¦åˆ™æ‚¨å°†ä¸ä¼šå­¦åˆ°ä»»ä½•ä¸œè¥¿ã€‚å¦‚æœæ‚¨ä»€ä¹ˆéƒ½ä¸å­¦ï¼Œé‚£æ‚¨å°±æµªè´¹äº†æ—¶é—´ã€‚</p>
<h1 id="å®è·µ">å®è·µ</h1>
<p>ä»…ä»…ä¸€å‘¨ä¹‹åï¼Œåˆ«æŒ‡æœ›è‡ªå·±å˜å¾—å¾ˆæ£’ã€‚å¦‚æœæ‚¨æƒ³æˆä¸ºä¸€ä¸ªå¥½çš„é—®é¢˜è§£å†³è€…ï¼Œè¯·è§£å†³å¾ˆå¤šé—®é¢˜ï¼</p>
<p>å®è·µã€‚å®è·µã€‚å®è·µã€‚è®¤è¯†åˆ°â€œä½¿ç”¨â€œåœ¨æ­¤å¤„æ’å…¥æ¦‚å¿µâ€å¯ä»¥è½»æ¾è§£å†³æ­¤é—®é¢˜â€åªæ˜¯æ—¶é—´é—®é¢˜ã€‚</p>
<p>æ€ä¹ˆç»ƒä¹ ï¼Ÿwazooæœ‰å¤šç§é€‰æ‹©ï¼</p>
<p>å›½é™…è±¡æ£‹éš¾é¢˜ï¼Œæ•°å­¦é—®é¢˜ï¼Œæ•°ç‹¬ï¼Œå›´æ£‹ï¼Œä¸“å–ï¼Œè§†é¢‘æ¸¸æˆï¼ŒåŠ å¯†å°çŒ«ï¼Œç­‰ç­‰â€¦â€¦ç­‰ç­‰â€¦â€¦ç­‰ç­‰â€¦â€¦ã€‚</p>
<p>å®é™…ä¸Šï¼Œåœ¨æˆåŠŸäººå£«ä¸­ï¼Œå¸¸è§çš„ä¹ æƒ¯æ˜¯ç»ƒä¹ â€œè§£å†³å¾®è§‚é—®é¢˜â€çš„ä¹ æƒ¯ã€‚ä¾‹å¦‚ï¼Œå½¼å¾—Â·æ³°å°”ï¼ˆPeter Thielï¼‰ä¸‹æ£‹ï¼Œä¼Šéš†Â·é©¬æ–¯å…‹ï¼ˆElon Muskï¼‰ç©ç”µå­æ¸¸æˆã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘å–œæ¬¢ç¼–ç æ–¹é¢çš„æŒ‘æˆ˜ã€‚æ¯å¤©ï¼Œæˆ‘éƒ½ä¼šå°è¯•è§£å†³è‡³å°‘ä¸€ä¸ªéš¾é¢˜ï¼ˆé€šå¸¸åœ¨Coderbyteä¸Šï¼‰ã€‚</p>
<p>å°±åƒæˆ‘è¯´çš„ï¼Œæ‰€æœ‰é—®é¢˜éƒ½æœ‰ç›¸ä¼¼çš„æ¨¡å¼ã€‚</p>
<h1 id="ç»“è®º">ç»“è®º</h1>
<p>é‚£æ˜¯æ‰€æœ‰äººï¼
ç°åœ¨ï¼Œæ‚¨æ›´å¥½åœ°äº†è§£äº†â€œåƒç¨‹åºå‘˜ä¸€æ ·æ€è€ƒâ€çš„å«ä¹‰ã€‚
æ‚¨è¿˜çŸ¥é“è§£å†³é—®é¢˜æ˜¯ä¸€ç§ä¸å¯æ€è®®çš„æŠ€èƒ½ï¼ˆè¶…èƒ½åŠ›ï¼‰ã€‚
å¦‚æœè¿™è¿˜ä¸å¤Ÿï¼Œè¯·æ³¨æ„æ‚¨è¿˜çŸ¥é“å¦‚ä½•å»ç»ƒä¹ è§£å†³é—®é¢˜çš„æŠ€èƒ½ï¼
ewâ€¦â€¦æŒºé…·çš„å§ï¼Ÿ
æœ€åï¼Œç¥æ‚¨é‡åˆ°è®¸å¤šé—®é¢˜ã€‚
æ‚¨æ²¡çœ‹é”™ã€‚è‡³å°‘ç°åœ¨æ‚¨çŸ¥é“å¦‚ä½•è§£å†³å®ƒä»¬äº†ï¼ï¼ˆæ­¤å¤–ï¼Œæ‚¨å°†äº†è§£åˆ°æ¯ç§è§£å†³æ–¹æ¡ˆéƒ½å¯ä»¥æ”¹è¿›ï¼‰ã€‚</p>
<blockquote>
<p>â€œåªè¦æ‚¨è®¤ä¸ºè‡ªå·±å·²ç»æˆåŠŸå…‹æœäº†ä¸€ä¸ªéšœç¢ï¼Œå°±ä¼šå‡ºç°å¦ä¸€ä¸ªéšœç¢ã€‚ä½†è¿™å°±æ˜¯è®©ç”Ÿæ´»å˜å¾—æœ‰è¶£çš„åŸå› ã€‚
ç”Ÿæ´»æ˜¯çªç ´è¿™äº›éšœç¢çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯æˆ‘ä»¬å¿…é¡»çªç ´çš„ä¸€ç³»åˆ—é˜²å¾¡æ€§è·¯çº¿ã€‚
æ¯æ¬¡ï¼Œæ‚¨éƒ½ä¼šå­¦åˆ°ä¸€äº›ä¸œè¥¿ã€‚
æ¯æ¬¡ï¼Œæ‚¨éƒ½ä¼šå‘å±•åŠ›é‡ï¼Œæ™ºæ…§å’Œè¿œè§ã€‚
æ¯æ¬¡ï¼Œæ›´å¤šçš„ç«äº‰éƒ½ä¼šæ¶ˆå¤±ã€‚ç›´åˆ°å‰©ä¸‹çš„åªæœ‰ä½ ï¼šä½ æœ€å¥½çš„ç‰ˆæœ¬ã€‚â€ â€”ç‘å®‰Â·éœé‡Œ</p>
</blockquote>
<p>ç°åœ¨ï¼Œå»è§£å†³ä¸€äº›é—®é¢˜ï¼</p>
<p>ç¥ä½ å¥½è¿ğŸ™‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%BF%83%E5%BE%97%E4%B8%8E%E7%BB%8F%E9%AA%8C/">å¿ƒå¾—ä¸ç»éªŒ</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%9C%BA%E7%BF%BB/">æœºç¿»</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Hugo</title>
                <link>https://wss.cool/posts/%E5%B7%A5%E5%85%B7/hugo/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%B7%A5%E5%85%B7/hugo/</guid>
                <pubDate>Thu, 10 Oct 2019 14:15:23 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>è¿™ä¸ªåšå®¢æ˜¯ä½¿ç”¨hugoæ­å»ºçš„ï¼Œé€‰æ‹©æ¥ä¸€ä¸ªå¤§ä½“å–œæ¬¢çš„ä¸»é¢˜ã€‚ä½†æ˜¯æœ‰ä¸€äº›ç»†èŠ‚è¿˜æ˜¯ä¸å¤Ÿæ»¡æ„ï¼Œæ‰€ä»¥å¦‚ä½•æ”¹é€ hugoä¸»é¢˜ï¼ŒåŠ ä¸Šè‡ªå·±æƒ³è¦çš„å†…å®¹ï¼Œå°±æˆäº†ä¸€ä¸ªå€¼å¾—ç ”ç©¶çš„é—®é¢˜ã€‚</p>
<h2 id="sections">Sections</h2>
<p>contentç›®å½•ä¸‹çš„å„ä¸ªä¸€çº§å­ç›®å½•å°±æ˜¯ä¸€ä¸ªsectionï¼Œå®ƒä»¬æ˜¯first-levelçš„sectionï¼Œå¯ä»¥ä¸ºå®ƒä»¬å®šä¹‰layoutç»„ç»‡å†…å®¹ï¼Œå¹¶é€šè¿‡urlæ¥è®¿é—®ï¼ˆé»˜è®¤å°±æ˜¯ç›®å½•ï¼‰ã€‚</p>
<p>ä¸€çº§å­ç›®å½•ä¸‹ä¹Ÿå¯æœ‰ä»»æ„æ·±åº¦çš„å­ç›®å½•ï¼Œåªè¦å­ç›®å½•ä¸­å®šä¹‰_index.mdå°±å¯ä»¥ä½œä¸ºä¸€ä¸ªsectionã€‚</p>
<p>sectioné™¤äº†å¯ä»¥é€šè¿‡ä»¥ç›®å½•å±‚çº§ä¸ºurlè®¿é—®ï¼Œè¿˜å¯ä»¥è·å¾—åˆ°å±äºå®ƒçš„å­æ–‡ç« åˆ—è¡¨ã€‚</p>
<h2 id="åˆ†ç±»æ³•taxonomies">åˆ†ç±»æ³•ï¼ˆTaxonomiesï¼‰</h2>
<p>æˆ‘æƒ³è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ–‡ç« çš„åˆ†ç±»ï¼Œå› ä¸ºä¸€ä¸ªå•çº¯çš„åˆ—è¡¨çœ‹ä¸Šå»å¯èƒ½æœ‰ç‚¹æ•£ä¹±ã€‚è§‚å¯Ÿåˆ›å»ºæ–‡ç« çš„å¯é€‰å‚æ•°ï¼Œä»¥åŠå…¶ä»–åšå®¢ã€‚å¯ä»¥ç¡®å®šhugoæ˜¯æ”¯æŒåˆ†ç±»çš„ã€‚åœ¨å®˜ç½‘æ–‡æ¡£ä¸­çš„Content Managementä¸‹æœ‰Taxonomiesï¼Œé˜…è¯»å†…å®¹åå¯ä»¥ç¡®å®šï¼Œè¿™å°±æ˜¯æˆ‘æƒ³æ‰¾çš„ä¸œè¥¿ã€‚</p>
<p>åœ¨hugoä¸­ï¼Œç”¨â€œTaxonomiesâ€è¿™ä¸ªæœ¯è¯­è¡¨ç¤ºâ€œæ–‡ç« çš„åˆ†ç±»â€ã€‚ç›¸å…³çš„æœ‰ä¸‰ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>Taxonomy -&gt; ä¸€ä¸ªåˆ†ç±»</li>
<li>Term -&gt; ä¸€ä¸ªåˆ†ç±»çš„é¡¹ç›®</li>
<li>Value -&gt; ä¸€ä¸ªé¡¹ç›®çš„å€¼</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<pre><code>Year                &lt;- Taxonomy
    2018              &lt;- Term
        å‰ç«¯å…¥é—¨          &lt;- Value
        Vueå…¥é—¨          &lt;- Value
        Reactå…¥é—¨        &lt;- Value
    2019              &lt;- Term
        å‰ç«¯è¿›é˜¶          &lt;- Value
        vueè¿›é˜¶           &lt;- Value
        reactè¿›é˜¶         &lt;- Value
categories         &lt;- Taxonomy
    css              &lt;- Term
        flexå¸ƒå±€          &lt;- Value
        css module       &lt;- Value
        backgroundæ¸å˜è‰²  &lt;- Value
    æ¡†æ¶              &lt;- Term
        Vueå…¥é—¨           &lt;- Value
        Reactå…¥é—¨         &lt;- Value
        vueè¿›é˜¶           &lt;- Value
        reactè¿›é˜¶         &lt;- Value
</code></pre><p>è¿™é‡Œçš„â€œvalueâ€å¯¹åº”çš„éƒ½æ˜¯æ–‡ç« çš„é¢˜ç›®ï¼Œâ€œtermâ€å¯¹åº”ä¸€ä¸ªåˆ†ç±»ä¸­å…·ä½“æœ‰å“ªäº›é¡¹ï¼Œâ€œtaxonomyâ€åˆ™æ˜¯æˆ‘ä»¬é¢„å…ˆå®šä¹‰å¥½çš„åˆ†ç±»çš„åå­—ã€‚</p>
<p>è¿™äº›éœ€è¦é€šè¿‡ç«™ç‚¹é…ç½®å’Œæ–‡ç« é¦–éƒ¨ä¿¡æ¯æ‰å¯ä»¥å®ç°ã€‚</p>
<p>åœ¨â€œç«™ç‚¹é…ç½®â€ä¸­è®¾ç½®æœ‰å“ªäº›Taxonomyï¼Œåœ¨â€œæ–‡ç« é¦–éƒ¨â€æ ‡è®°è¯¥æ–‡ç« æ˜¯å“ªä¸ªTaxonomyä¸­çš„å“ªç§Term</p>
<h3 id="ç«™ç‚¹é…ç½®">ç«™ç‚¹é…ç½®</h3>
<p>ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸€èˆ¬ä½äºåšå®¢æ ¹ç›®å½•ä¸­ï¼Œå«åšâ€œconfig.tomlâ€ï¼Œåœ¨å…¶ä¸­åŠ ä¸Šä¸‹é¢è¿™æ®µä»£ç </p>
<pre><code>[taxonomies]
  category = &quot;categories&quot;
  year = &quot;year&quot;
</code></pre><h3 id="æ–‡ç« é¦–éƒ¨">æ–‡ç« é¦–éƒ¨</h3>
<p>åˆ›å»ºæ¯ä¸ªæ–‡ç« æ—¶ï¼Œéƒ½ä¼šæœ‰ä¸€äº›é¦–éƒ¨ä¿¡æ¯é…ç½®ï¼Œç°åœ¨è¿™ç¯‡æ–‡ç« çš„é¦–éƒ¨ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml">---<span class="w">
</span><span class="w"></span><span class="k">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Hugo&#34;</span><span class="w">
</span><span class="w"></span><span class="k">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/Hugo&#34;</span><span class="w">
</span><span class="w"></span><span class="k">toc</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w"></span><span class="k">date</span><span class="p">:</span><span class="w"> </span><span class="ld">2019-10-10T14:15:23</span><span class="m">+08</span><span class="p">:</span><span class="m">00</span><span class="w">
</span><span class="w"></span><span class="k">author</span><span class="p">:</span><span class="w"> </span>ç‹ä¹¦ç¡•<span class="w">
</span><span class="w"></span><span class="k">description</span><span class="p">:</span><span class="w"> </span>äº†è§£hugoï¼Œå°†å®ƒæ”¹é€ æˆä½ æƒ³è¦çš„æ ·å­ã€‚<span class="w">
</span><span class="w"></span><span class="k">categories</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- å·¥å…·<span class="w">
</span><span class="w"></span><span class="k">year</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="m">2019</span><span class="w">
</span><span class="w"></span>---<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­æœ€ä¸‹é¢çš„ä¸¤é¡¹â€”â€”â€œcategoriesâ€å’Œâ€œyearâ€â€”â€”å°±æ˜¯ä¸Šé¢æåˆ°çš„â€œTaxonomyâ€ï¼Œâ€œå·¥å…·â€å’Œâ€œ2019â€åˆ™æ˜¯â€œTermâ€ï¼Œè€Œè¿™ç¯‡æ–‡ç« å°±æ˜¯â€œvalueâ€äº†ã€‚</p>
<p>å‡†å¤‡å¥½äº†è¿™äº›é…ç½®ä»¥åï¼Œ</p>
<p>â€¦â€¦ä¸¤ç§æ–¹å¼å±•ç¤ºåˆ†ç±»ï¼Œä¸€ç§æ˜¯åœ¨ä¸€ä¸ªç‰¹å®šçš„é¡µé¢ï¼Œä¸€ç§æ˜¯åœ¨å…¶ä»–åœ°æ–¹ã€‚ä¸¤ç§æ–¹å¼å¼•ç”¨é¢˜ç›®çš„æ–¹æ³•ä¸åŒã€‚</p>
<h3 id="å±•ç¤ºåˆ†ç±»">å±•ç¤ºåˆ†ç±»</h3>
<p>ç¬¬ä¸€ç§å±•ç¤ºæ–¹å¼æ˜¯åœ¨<code>layouts/_default/terms.html</code>ä¸­ï¼Œå¦‚ä¸‹é¢çš„ä»£ç å³å¯å±•ç¤ºä¸€ç§termsã€‚é€šè¿‡è®¿é—®åœ°å€<code>localhost:1313/categories/</code>æˆ–<code>localhost:1313/year/</code>å³å¯æŸ¥çœ‹åˆ°è¯¥é¡µé¢ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">{{ define &#34;main&#34; }}
<span class="p">&lt;</span><span class="nt">main</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    {{ range .Data.Terms.ByCount  }}
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Page.RelPermalink }}&#34;</span><span class="p">&gt;</span>{{ printf &#34;%s&#34; .Page.Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>{{ printf &#34;(%d)&#34; .Count }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    {{ end }}
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
{{ end }}
</code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒç§å±•ç¤ºæ–¹å¼æ˜¯ä»»æ„ä¸€ä¸ªé¡µé¢ï¼Œæ¯”å¦‚ä¸»é¡µ<code>layouts/index.html</code>æ¨¡æ¿ä¸­ï¼Œé€šè¿‡<code>Site</code>å˜é‡å¼•ç”¨åˆ†ç±»æ•°æ®ã€‚åŒæ ·çš„å…¶ä¸­çš„<code>categories</code>ä¹Ÿå¯ä»¥æ›¿æ¢æˆå®šä¹‰å¥½çš„å…¶ä»–termsã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  {{ range .Site.Taxonomies.categories }}
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Page.Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Page.Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> {{ .Count }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  {{ end }}
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>æ’åº</p>
<p>æŒ‰å­—æ¯æ’åº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    {{ range .Data.Terms.Alphabetical }}
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Page.Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Page.Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> {{ .Count }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    {{ end }}
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>æŒ‰æ•°é‡æ’åº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    {{ range .Data.Terms.ByCount }}
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Page.Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Page.Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> {{ .Count }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    {{ end }}
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>â€¦â€¦æœ‰äº†è¿™äº›è¿˜ä¸å¤Ÿè¿˜éœ€è¦termé¡µé¢</p>
<p>â€¦â€¦ç»¼ä¸Šâ€¦â€¦å®ç°äº†åˆ†ç±»â€¦â€¦</p>
<h2 id="seo">SEO</h2>
<p>robots.txt</p>
<p>setmap.xml</p>
<p>google search console</p>
<p>headæ¨¡ç‰ˆ</p>
<h2 id="æ‘˜è¦summary">æ‘˜è¦ï¼ˆsummaryï¼‰</h2>
<p>æ‘˜è¦æœ€é‡è¦çš„ä¸€ä¸ªç”¨å¤„æ˜¯ç”Ÿæˆheadä¸­çš„descriptionæ ‡ç­¾ï¼ˆè¿™ä¸ªæ˜¯ä¸»é¢˜çš„head.htmléƒ¨åˆ†å®šä¹‰çš„ï¼Œå¯ä»¥ä¿®æ”¹æˆå…¶ä»–å†…å®¹ï¼‰ï¼Œæœç´¢å¼•æ“ä¼šå°†å…¶ä¸­çš„å†…å®¹å±•ç¤ºåœ¨æœç´¢ç»“æœä¸­ã€‚ï¼ˆæœç´¢ç»“æœä¸­ä¹Ÿå¯èƒ½ä¸æ˜¾ç¤ºæ‘˜è¦ï¼Œè€Œç°å®æœç´¢å¼•æ“è‡ªå·±ç”Ÿæˆçš„å†…å®¹ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;æµ‹è¯•ä¸€å“ˆ&#34;</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦ä¸€ä¸ªç”¨å¤„æ˜¯ç”¨æ¥åœ¨æ–‡ç« åˆ—è¡¨ä¸­å±•ç¤ºï¼Œæ¯”å¦‚åœ¨ç½‘ç«™é¦–é¡µå±•ç¤º10ç¯‡æœ€è¿‘çš„æ–‡ç« ï¼Œå¹¶æ˜¾ç¤ºå…¶æ‘˜è¦ã€‚</p>
<p>ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰ä¸€ç¯‡æ–‡ç« çš„æ‘˜è¦ï¼šåœ¨é¦–éƒ¨å®šä¹‰summaryå˜é‡ã€åœ¨æ–‡ç« ä¸­ä½¿ç”¨æ‘˜è¦åˆ†éš”ç¬¦<code>&lt;!--more--&gt;</code>ã€‚åè€…æƒé‡æ›´é«˜ã€‚</p>
<p>å½“æ–‡ç« å¼€å¤´çš„å‡ è¡Œå¯ä»¥å‡†ç¡®çš„æ¦‚æ‹¬æ–‡ç« åŒ…å«å†…å®¹æ—¶ï¼Œæ‘˜è¦åˆ†éš”ç¬¦<code>&lt;!--more--&gt;</code>æ¯”è¾ƒé€‚ç”¨ã€‚ä¸ç„¶çš„è¯ï¼Œå°±è‡ªå·±ç¼–è¾‘ä¸€æ®µæ‘˜è¦æ”¾åœ¨é¦–éƒ¨çš„summaryå˜é‡ä¸­ã€‚</p>
<p>å¦å¤–å¯ä»¥åœ¨ç½‘ç«™é…ç½®ä¸­ä½¿ç”¨<code>summaryLength</code>æ§åˆ¶æ‘˜è¦çš„å­—ç¬¦é•¿åº¦ï¼Œä½†æ˜¯å¯¹ä¸­æ–‡è²Œä¼¼ä¸èµ·ä½œç”¨ã€‚</p>
<h2 id="å‡½æ•°">å‡½æ•°</h2>
<p><a href="https://gohugo.io/functions/">æ–‡æ¡£</a></p>
<p>éå†é›†åˆç”¨<code>range</code></p>
<pre><code>&lt;ul&gt;
  {{ range .Site.Taxonomies.categories }}
    &lt;li style=&quot;text-align:left;&quot;&gt;&lt;a href=&quot;{{ .Page.Permalink }}&quot;&gt;{{ .Page.Title }}&lt;/a&gt; {{ .Count }}&lt;/li&gt;
  {{ end }}
&lt;/ul&gt;
</code></pre><p>å¯¹é›†åˆè¿›è¡Œæ’åºç”¨<code>sort</code>ï¼Œç›¸è¾ƒä¸Šé¢çš„ä»£ç ï¼Œå…¶ä¸­<code>count</code>æ˜¯ç”¨å“ªä¸ªå­—æ®µè¿›è¡Œæ’åºï¼Œ<code>desc</code>è¡¨ç¤ºé™åº</p>
<pre><code>&lt;ul&gt;
  {{ range sort .Site.Taxonomies.categories &quot;Count&quot; &quot;desc&quot; }}
    &lt;li style=&quot;text-align:left;&quot;&gt;&lt;a href=&quot;{{ .Page.Permalink }}&quot;&gt;{{ .Page.Title }}&lt;/a&gt; {{ .Count }}&lt;/li&gt;
  {{ end }}
&lt;/ul&gt;
</code></pre><h2 id="å¤šè¯­è¨€æ¨¡å¼">å¤šè¯­è¨€æ¨¡å¼</h2>
<p>hugoå¯ä»¥ç®¡ç†å¤šç§è¯­è¨€ï¼Œä½†æ˜¯è¦è‡ªå·±ç¿»è¯‘å†…å®¹</p>
<p><a href="https://gohugo.io/content-management/multilingual/">é…ç½®å¤šç§è¯­è¨€</a>
<a href="https://regisphilibert.com/blog/2018/08/hugo-multilingual-part-1-managing-content-translation/">ç¿»è¯‘å†…å®¹</a></p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>èŒä¸šå‘å±•</title>
                <link>https://wss.cool/posts/%E5%BF%83%E5%BE%97/%E8%81%8C%E4%B8%9A%E5%8F%91%E5%B1%95/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%BF%83%E5%BE%97/%E8%81%8C%E4%B8%9A%E5%8F%91%E5%B1%95/</guid>
                <pubDate>Mon, 07 Oct 2019 18:05:05 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h1 id="ä¸ƒä¸ªå¯¹æˆ‘æœ€é‡è¦çš„èŒä¸šå»ºè®®é˜®ä¸€å³°ç¿»è¯‘">ä¸ƒä¸ªå¯¹æˆ‘æœ€é‡è¦çš„èŒä¸šå»ºè®®ï¼ˆé˜®ä¸€å³°ç¿»è¯‘ï¼‰</h1>
<p><a href="http://www.ruanyifeng.com/blog/2015/09/career-advice.html">ruanyifeng</a></p>
<h2 id="ä¸€ä¸è¦åˆ«äººç‚¹ä»€ä¹ˆå°±åšä»€ä¹ˆ">ä¸€ã€ä¸è¦åˆ«äººç‚¹ä»€ä¹ˆå°±åšä»€ä¹ˆ</h2>
<p>â€œä¸è¦åšä¸€ä¸ªåˆ«äººç‚¹äº†ä»€ä¹ˆæ‰å°±çƒ§ä»€ä¹ˆçš„å¨å¸ˆï¼Œä¹Ÿä¸è¦è¿™æ ·çš„åœ°æ–¹å·¥ä½œï¼Œä½ è¦å»ä¸€ä¸ªåœ°æ–¹ï¼Œé‚£é‡Œçš„äººèƒ½è‚¯å®šä½ å¯¹äº§å“çš„æƒ³æ³•ï¼Œç›¸ä¿¡ä½ çš„èƒ½åŠ›ï¼Œæ”¾æ‰‹è®©ä½ å»åšã€‚â€</p>
<p>å•å•å®ç°ä¸€ä¸ªäº§å“æ˜¯ä¸å¤Ÿçš„ï¼Œä½ è¿˜å¿…é¡»å‚ä¸å†³å®šæ€ä¹ˆå®ç°ã€‚å¥½çš„å·¥ç¨‹å¸ˆå¹¶ä¸ä»…ä»…æœä»å‘½ä»¤ï¼Œè€Œä¸”è¿˜ä¼šç»™å‡ºåé¦ˆï¼Œå¸®åŠ©äº§å“çš„æ‹¥æœ‰è€…æ”¹è¿›å®ƒã€‚</p>
<p>ğŸ¤”ä»æŠ€æœ¯è§’åº¦æ”¹è¿›äº§å“ï¼Ÿæˆ–è€…æŠ€æœ¯è§’åº¦çš„featureå—ï¼Ÿæ¯”å¦‚å®ç°æ›´å¥½çš„äº¤äº’ï¼Œæ–°çš„æŠ€æœ¯å¯ä»¥åšæ›´å¥½çš„äº‹æƒ…ï¼Ÿ</p>
<p>ğŸ¤”ä¸èƒ½åªæ˜¯è®©åˆ«äººç»™ä½ ä¸€ä¸ªæŠ€æœ¯æ–¹æ¡ˆä½ åªè´Ÿè´£å®ç°å®ƒï¼Œè€Œæ˜¯è¦è‡ªå·±èƒ½è®¾è®¡ä¸€ä¸ªæ–¹æ¡ˆï¼Œç”šè‡³å¯ä»¥æ ¹æ®è‡ªå·±çš„æŠ€æœ¯ç»™å‡ºä¸€ä¸ªè®©ä¸åŒfeatureå˜æˆé«˜çº§çš„featureã€‚æ¯”å¦‚æ›´èŠ‚çœæˆæœ¬ï¼Œæ—¶é—´å°‘äººåŠ›å°‘ã€æ•ˆç‡é«˜æœºå™¨æˆæœ¬ä½ã€äº¤äº’å¥½ã€æ›´ç¾è§‚ã€ç”¨æˆ·ä½“éªŒæ›´å¥½ç­‰ç­‰ã€‚æ€»ä¹‹å°±æ˜¯ï¼Œå› ä¸ºä½ çš„ä¸€äº›æƒ³æ³•ï¼ŒåŸæ¥é‚£ä¸ªåˆ«äººæå‡ºæ¥çš„ä¸œè¥¿åˆ«çš„æ›´å¥½äº†ã€‚</p>
<p>ğŸ¤”å¯¹è‡ªå·±æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿè¾“å‡ºä¸€äº›æƒ³æ³•ï¼Œè‚¯å®šæ˜¯è¦ä»˜å‡ºç²¾åŠ›çš„ï¼Œé‚£ä¹ˆè¿™äº›ç²¾åŠ›èƒ½ä¸èƒ½æœ‰æ‰€å›æŠ¥å‘¢ï¼Ÿé¦–å…ˆï¼Œå®ƒèƒ½ä½“ç°åˆ†æã€è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œä½“ç°ç§¯æã€è´Ÿè´£ï¼Œå…¶æ¬¡ï¼Œè¿›ä¸€æ­¥ç«¯ç²’è‡ªå·±åˆ†æã€è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œé”»ç‚¼è¡¨è¾¾èƒ½åŠ›ï¼Œè¿™äº›ç»éªŒå¤šäº†èµ·æ¥ï¼Œå°±ç›¸å¯¹å…¶ä»–äººæ¥è¯´æ˜¯ä¸€ç§ä¼˜åŠ¿ï¼Œèƒ½åˆ›é€ å‡ºä¸€äº›ä»·å€¼ï¼Œå¯ä»¥å†™åœ¨ç®€å†ä¸­ï¼Œå¯¹æŸæŸåŠŸèƒ½æå‡ºå“ªäº›æƒ³æ³•ï¼Œä½¿æˆæœ¬é™ä½äº†å¤šå°‘ï¼Œæ”¶ç›Šå¢åŠ äº†å¤šå°‘ã€‚</p>
<h2 id="äºŒæ¨é”€è‡ªå·±">äºŒã€æ¨é”€è‡ªå·±</h2>
<p>â€œä¸ºäº†è®©å…¶ä»–äººç›¸ä¿¡ä½ ï¼Œä½ å¿…é¡»é¦–å…ˆè®©åˆ«äººçŸ¥é“ä½ åšäº†ä»€ä¹ˆã€‚ä½ éœ€è¦æ¨é”€è‡ªå·±ï¼Œå¼•èµ·åˆ«äººçš„æ³¨æ„ã€‚â€</p>
<p>å…¬å¸çš„å…¶ä»–äººéœ€è¦æ˜ç™½ä½ çš„ä»·å€¼ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯å‘Šè¯‰åˆ«äººä½ åšäº†ä»€ä¹ˆã€‚</p>
<p>ğŸ¤”å†™é‚®ä»¶å‘Šè¯‰åˆ«äººçœŸçš„å¥½å—ï¼Ÿå¯èƒ½è¿˜æ˜¯å†™åšå®¢å¥½ä¸€ç‚¹å§ï¼Œä½†æ˜¯åšå®¢å¾ˆéš¾æ‰¾åˆ°è¯»è€…ï¼Œå¯ä»¥é€šè¿‡æ˜é‡‘ã€csdnä¹‹ç±»çš„å¼•æµä¸€ä¸‹ã€‚</p>
<h2 id="ä¸‰å­¦ä¼šå¸¦é¢†å›¢é˜Ÿ">ä¸‰ã€å­¦ä¼šå¸¦é¢†å›¢é˜Ÿ</h2>
<p>&quot;å½“ä½ çš„æŠ€æœ¯èƒ½åŠ›è¿‡å…³ä»¥åï¼Œå°±è¦è€ƒéªŒä½ ä¸ä»–äººç›¸å¤„çš„èƒ½åŠ›äº†ã€‚&quot;</p>
<p>å¦‚ä½•å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿï¼Œæœ‰æ•ˆåœ°ä¸å…¶ä»–äººååŒå·¥ä½œï¼Œå–åˆ°æ›´å¤§çš„æˆæœã€‚</p>
<p>ğŸ¤”å…ˆçœ‹ä¸€ä¸‹å·¦è€³æœµçš„æ–‡ç« å­¦ä¹ ä¸€ä¸‹æ²Ÿé€šæŠ€æœ¯ã€‚</p>
<p>ğŸ¤”ç›®å‰æˆ‘åªéœ€è¦è€ƒè™‘ä¸€äºŒä¸‰è¿™å‡ ä¸ªé—®é¢˜ã€‚</p>
<h2 id="å››ç”Ÿæ´»æ‰æ˜¯æœ€é‡è¦çš„">å››ã€ç”Ÿæ´»æ‰æ˜¯æœ€é‡è¦çš„</h2>
<h2 id="äº”è‡ªå·±æ‰¾åˆ°é“è·¯">äº”ã€è‡ªå·±æ‰¾åˆ°é“è·¯</h2>
<p>&quot;ä»¥å‰éƒ½æ˜¯æˆ‘ä»¬å‘Šè¯‰ä½ åšä»€ä¹ˆï¼Œä»ç°åœ¨å¼€å§‹ï¼Œä½ å¿…é¡»è‡ªå·±å›ç­”è¿™ä¸ªé—®é¢˜äº†ï¼Œæˆ‘æœŸå¾…ä½ æ¥å‘Šè¯‰æˆ‘ï¼Œä»€ä¹ˆäº‹æƒ…éœ€è¦åšã€‚&quot;</p>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆéƒ½æ²¡æœ‰å®Œæˆè¿™ä¸ªè½¬å˜ï¼Œå¦‚æœèƒ½å¤Ÿåšåˆ°ï¼Œå¯èƒ½å°±è¯´æ˜ä½ æˆç†Ÿäº†ï¼Œå­¦ä¼šäº†å–èˆã€‚ä½ ä¸å¯èƒ½æŠŠæ—¶é—´èŠ±åœ¨æ‰€æœ‰äº‹æƒ…ä¸Šé¢ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ä¸ªé‡ç‚¹ã€‚</p>
<h2 id="å…­æŠŠè‡ªå·±å½“æˆä¸»äºº">å…­ã€æŠŠè‡ªå·±å½“æˆä¸»äºº</h2>
<p>&quot;ä¸è¦å†å»å¼€è¿™æ ·çš„ä¼šäº†ã€‚ä½ å‚åŠ ä¸€ä¸ªä¼šï¼Œé‚£æ˜¯å› ä¸ºä½ å‚ä¸äº†æŸä»¶äº‹ã€‚å¦‚æœä¸ç¡®å®šè‡ªå·±ä¸ºä»€ä¹ˆè¦åœ¨åœºï¼Œå°±åœä¸‹æ¥é—®ã€‚å¦‚æœè¿™ä»¶äº‹ä¸éœ€è¦ä½ ï¼Œå°±ç¦»å¼€ã€‚ä¸è¦ä»å¤´åˆ°å°¾éƒ½é™é™åœ°å‚åŠ ä¸€ä¸ªä¼šï¼Œè¦æŠŠè‡ªå·±å½“æˆè´Ÿè´£äººï¼Œå¤§å®¶ä¼šç›¸ä¿¡ä½ çš„ã€‚&quot;</p>
<p>ä»é‚£æ—¶èµ·ï¼Œæˆ‘ä»æ²¡æœ‰ä¸€å£°ä¸å‘åœ°å‚åŠ ä¼šè®®ã€‚æˆ‘ç¡®ä¿åªå‚åŠ é‚£äº›éœ€è¦æˆ‘å‚åŠ çš„ä¼šè®®ã€‚</p>
<h2 id="ä¸ƒæ‰¾åˆ°æ°´å¹³æ›´é«˜çš„äºº">ä¸ƒã€æ‰¾åˆ°æ°´å¹³æ›´é«˜çš„äºº</h2>
<p>&quot;æ‰¾åˆ°é‚£äº›æ¯”ä½ æ°´å¹³æ›´é«˜ã€æ›´èªæ˜çš„äººï¼Œå°½é‡å’Œä»–ä»¬åœ¨ä¸€èµ·ï¼Œåƒé¥­æˆ–è€…å–å’–å•¡ï¼Œå‘ä»–ä»¬è®¨æ•™ï¼Œäº†è§£ä»–ä»¬æ‹¥æœ‰çš„çŸ¥è¯†ã€‚ä½ çš„èŒä¸šï¼Œç”šè‡³ä½ çš„ç”Ÿæ´»ï¼Œéƒ½ä¼šå› æ­¤å˜å¾—æ›´å¥½ã€‚&quot;</p>
<h1 id="é¢è¯•æ—¶å¦‚ä½•å‘å…¬å¸æé—®">é¢è¯•æ—¶ï¼Œå¦‚ä½•å‘å…¬å¸æé—®ï¼Ÿ</h1>
<p><a href="http://www.ruanyifeng.com/blog/2012/08/questions_you_need_to_ask_in_an_interview.html">ruanyifeng</a></p>
<p>æœ‰ä¸€äº›æ³¨æ„ç‚¹ï¼Œä½ éœ€è¦çŸ¥é“ï¼š</p>
<ol>
<li>é¢è¯•ä¹‹å‰ï¼Œä¸€å®šè¦åšå‡†å¤‡ï¼Œå¤šäº†è§£å…¬å¸çš„æƒ…å†µã€‚</li>
<li>ä½ æå‡ºçš„é—®é¢˜ï¼Œåº”è¯¥å›´ç»•&quot;è¿™ä»½å·¥ä½œæ˜¯å¦åˆé€‚æˆ‘&quot;è¿™ä¸ªä¸­å¿ƒç‚¹ï¼Œå…¶ä»–ä¸åº”è˜å…³ç³»ä¸å¤§çš„é—®é¢˜ï¼Œä¸å®œå¤šé—®ã€‚</li>
<li>æé—®çš„æ—¶å€™ï¼Œè¦è‡ªç„¶æ”¾æ¾ï¼Œä¸è¦å®³ç¾ï¼Œå°±æŠŠå®ƒå½“ä½œæ™®é€šçš„èŠå¤©ã€‚ä½ è¦è¡¨ç°å‡ºå¯¹å…¬å¸çš„çœŸè¯šå…´è¶£ã€‚</li>
<li>æé—®è¦ç›´æ¥äº†å½“ï¼Œä¸è¦ç»•åœˆå­ã€‚æå‡ºé—®é¢˜ä¹‹åï¼Œä½ è¦ä¿æŒå®‰é™ï¼Œè®©é¢è¯•å®˜å¤šè¯´è¯ã€‚</li>
<li>é¢è¯•å®˜å›ç­”çš„æ—¶å€™ï¼Œä½ å¯ä»¥åšç¬”è®°ï¼Œæˆ–è€…äº‹å…ˆè¯¢é—®èƒ½ä¸èƒ½åšã€‚ç¬”è®°å¿…é¡»ç®€çŸ­ï¼Œä½ çš„å¤§éƒ¨åˆ†æ—¶é—´ï¼Œè¦ç”¨æ¥å…¨ç¥è´¯æ³¨å€¾å¬é¢è¯•å®˜çš„å›ç­”ï¼Œå¹¶ä¸å…¶æœ‰çœ¼ç¥çš„äº¤æµã€‚</li>
<li>é¢è¯•ç»“æŸåä¸€å‘¨å†…ï¼Œæœ€å¥½æ‰“ä¸€ä¸ªç”µè¯æˆ–å‘ä¸€å°é‚®ä»¶ï¼Œäº†è§£å…¬å¸å¯¹ä½ çš„åé¦ˆæ„è§ã€‚å³ä½¿é¢è¯•å¤±è´¥ï¼Œä½ ä¸å¦¨ä¹Ÿé—®ä¸€ä¸‹åŸå› ï¼Œè¿™ä¼šæœ‰åŠ©äºä½ ä»¥åçš„é¢è¯•ã€‚</li>
</ol>
<p>6ä¸ªé—®é¢˜</p>
<ol>
<li>ä¸ºä»€ä¹ˆæ‹›äººï¼Œä¹‹å‰çš„äººç¦»èŒäº†è¿˜æ˜¯å…¬å¸å¢é•¿æ‰©å¼ ã€‚</li>
<li>ä¸ºä»€ä¹ˆå¤§å®¶æƒ³ç•™åœ¨ä½ ä»¬å…¬å¸ã€‚å…¬å¸çš„æ–‡åŒ–ã€ä»·å€¼è§‚ã€ç¯å¢ƒå¯¹å‘˜å·¥çš„å½±å“ã€‚</li>
<li>å¦‚æœè¢«å½•ç”¨äº†ï¼Œåœ¨ä¸Šç­çš„å¤´ä¸¤ä¸‰ä¸ªæœˆï¼Œå…¬å¸å¸Œæœ›æˆ‘åšåˆ°çš„ä¸‰ä»¶äº‹æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä¸€ä¸ªäººåƒæˆåŠŸåœ°åšå¥½è¿™ä»½å·¥ä½œï¼Œéœ€è¦å“ªäº›ä¸œè¥¿ï¼Ÿ</li>
<li>æˆ‘åˆšæ‰è¯´è¿‡çš„è¯é‡Œï¼Œæ˜¯å¦æœ‰å“ªäº›å†…å®¹è®©ä½ åè£”æˆ‘ä¸é€‚åˆè¿™ä»½å·¥ä½œã€‚</li>
<li>ä½ ä»¬ä»€ä¹ˆæ—¶å€™ä¼šåšæœ€åçš„å†³å®šï¼Ÿ</li>
</ol>
<p><strong>å›´ç»•â€œè¿™ä»½å·¥ä½œæ˜¯å¦åˆé€‚æˆ‘â€æé—®</strong></p>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä½ å¯ä»¥é—®çš„å…¸å‹é—®é¢˜ã€‚</p>
<p><strong>é—®é¢˜ä¸€ï¼šä½ ä»¬ä¸ºä»€ä¹ˆè¦æ‹›è˜è¿™ä¸ªèŒä½ï¼Ÿ</strong></p>
<p>è¿™ä¸ªé—®é¢˜ä¼šä½¿å¾—é¢è¯•å®˜å¼€å§‹è°ˆè®ºå½“å‰çš„é¡¹ç›®ï¼Œæˆ–è€…è°ˆè®ºå‰ä¸€ä½ç¦»èŒäººå‘˜ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œéƒ½ä¼šè®©ä½ äº†è§£ï¼Œä¸€äº›ä¸ä½ æœ€å¯†åˆ‡ç›¸å…³çš„å…¬å¸æƒ…å†µã€‚</p>
<p><strong>é—®é¢˜äºŒï¼šä½ ä»¬çš„æ–°å‘˜å·¥å¤šå—ï¼Ÿ</strong></p>
<p>è¿™ä¸ªé—®é¢˜èµ·ä¸€ä¸ªè¿‡æ¸¡ä½œç”¨ï¼Œä½¿å¾—è°ˆè¯å¯¼å‘å…¬å¸å†…éƒ¨çš„æƒ…å†µã€‚ä½†æ˜¯ï¼Œå®ƒæœ¬èº«ä¹Ÿèƒ½è¯´æ˜ä¸€äº›é—®é¢˜ã€‚å¦‚æœå…¬å¸æˆç«‹å·²ç»è¶…è¿‡å››å¹´ï¼Œåˆæ²¡æœ‰æ–°é¡¹ç›®ï¼Œä½†æ˜¯æ–°å‘˜å·¥å´å¾ˆå¤šï¼Œè¿™å¾€å¾€è¯´æ˜å…¬å¸æ–‡åŒ–ä¸æ˜¯å¾ˆå¥åº·ã€‚</p>
<p><strong>é—®é¢˜ä¸‰ï¼šä½ ä»¬å…¬å¸ï¼ˆå›¢é˜Ÿï¼‰ç›®å‰é¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>å¦‚æœé¢è¯•å®˜å¼€å§‹è°ˆè®ºä¸€äº›å…·ä½“çš„æŠ€æœ¯é—®é¢˜ï¼Œè¿™å¾ˆå¥½ï¼›å¦‚æœä»–çš„å›ç­”æ˜¯é¡¹ç›®æ—¶é—´ç´§è¿«ï¼Œæˆ–è€…éœ€è¦æ›´å¤šçš„èµ„é‡‘ï¼Œé‚£ä½ å°±è¦å°å¿ƒä¸€ç‚¹äº†ï¼Œå…¬å¸ç®¡ç†ä¸Šé¢å¯èƒ½æœ‰é—®é¢˜ã€‚</p>
<p><strong>é—®é¢˜å››ï¼šä»€ä¹ˆæ–°æŠ€æœ¯ï¼ˆç¼–ç¨‹è¯­è¨€ï¼‰æ˜¯ä½ ä»¬æœªæ¥å¸Œæœ›é‡‡ç”¨çš„ï¼Ÿ</strong></p>
<p>å¦‚æœä½ ç”³è¯·çš„æ˜¯æŠ€æœ¯èŒä½ï¼Œé¢è¯•å®˜æ°å·§åˆæ˜¯æŠ€æœ¯è´Ÿè´£äººï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°†ä¼šéå¸¸åˆé€‚ã€‚ä½ ä¼šå¯¹å…¬å¸çš„æŠ€æœ¯è·¯çº¿æœ‰æ‰€äº†è§£å’Œå‡†å¤‡ï¼Œä¸€æ—¦å…¥èŒï¼Œå°±èƒ½æ›´å¥½åœ°é€‚åº”å…¬å¸çš„éœ€è¦ã€‚</p>
<p><strong>é—®é¢˜äº”ï¼šåœ¨ä¸šåŠ¡æ–¹é¢ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåœ°æ–¹æ˜¯ä½ ä»¬ä¸æ»¡æ„çš„ï¼Œæœªæ¥æƒ³è¦æ”¹è¿›çš„ï¼Ÿ</strong></p>
<p>å¾ˆå°‘æœ‰å…¬å¸ï¼Œä¼šç™¾åˆ†ä¹‹ç™¾æ»¡æ„è‡ªèº«çš„ç°çŠ¶ï¼Œå³ä½¿é‚£äº›çŠ¶å†µå¾ˆè‰¯å¥½çš„å…¬å¸ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥è®©ä½ å¯¹å…¬å¸ç®¡ç†å±‚çš„å…³æ³¨é‡ç‚¹å’Œæ‹…å¿§ä¹‹å¤„ï¼Œæœ‰æ‰€äº†è§£ã€‚</p>
<p><strong>é—®é¢˜å…­ï¼šæˆ‘ç”³è¯·çš„è¿™ä¸ªèŒä½ï¼Œå¯¹å…¬å¸çš„ä¸šåŠ¡æœ‰ä½•å½±å“ï¼Ÿ</strong></p>
<p>è¿™ä¸ªé—®é¢˜ä¼šè®©ä½ äº†è§£è‡ªå·±åœ¨å…¬å¸çš„è§’è‰²ï¼Œä»¥åŠä½ çš„å²—ä½å¯¹å…¬å¸æ˜¯å¦é‡è¦ã€‚</p>
<h1 id="å¦‚ä½•æé«˜æ±‚èŒæ—¶çš„è°ˆåˆ¤èƒ½åŠ›">å¦‚ä½•æé«˜æ±‚èŒæ—¶çš„è°ˆåˆ¤èƒ½åŠ›ï¼Ÿ</h1>
<p>ï¼ˆ1ï¼‰è®°ä½ä½ ä¸æ˜¯åœ¨æ±‚èŒï¼Œä¸æ˜¯åœ¨å±•ç¤ºç¼–ç¨‹æŠ€å·§ï¼Œè€Œæ˜¯åœ¨æ¨é”€æŸç§å•†ä¸šé—®é¢˜ï¼ˆå¢åŠ æ”¶å…¥æˆ–é™ä½æˆæœ¬ï¼‰çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ï¼ˆ2ï¼‰é¢è¯•æ—¶ï¼Œè¦æœ‰è‡ªä¿¡ï¼Œè¦å¹³ç­‰çš„å¯¹è¯ã€‚ä½ è¦çš„æ˜¯ä¸€ä¸ªäº’åˆ©çš„å½•ç”¨åˆåŒï¼Œä¸è¦æ¯æ¬¡å¯¹æ–¹æå‡ºè¦æ±‚ï¼Œä½ éƒ½è¯´Yesã€‚</p>
<p>ï¼ˆ3ï¼‰é›‡ä¸»å¯èƒ½ä¼šé—®&quot;ä½ çš„ä¸Šä¸€ä»½å·¥èµ„æ˜¯å¤šå°‘&quot;ï¼Œä»–ä»¬å…¶å®åœ¨è¯´&quot;ç»™æˆ‘ä¸€ä¸ªç†ç”±ï¼Œå‹ä½ä½ çš„æŠ¥é…¬&quot;ã€‚ä½ è¦æƒ³å¥½å¦‚ä½•é€‚å½“åœ°å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ï¼ˆ4ï¼‰è¦è¿˜ä»·ã€‚è¿™é‡Œä¸ä»…ä»…æŒ‡é’±ï¼Œè¿˜æŒ‡å…¶å®ƒä½ å…³å¿ƒçš„æ–¹é¢ã€‚å¦‚æœä½ æ— æ³•è¦æ±‚æ›´é«˜çš„è–ªæ°´ï¼Œé‚£å°±è¯•ç€è¦æ±‚æ›´å¤šçš„å‡æœŸã€‚</p>
<p>ï¼ˆ5ï¼‰åœ¨å¯¹æ–¹å†³å®šå½•ç”¨ä½ ä»¥åï¼Œæ‰å¼€å§‹è®¨è®ºè–ªæ°´ã€‚å› ä¸ºé‚£æ—¶ï¼Œä»–ä»¬å·²ç»åœ¨ä½ èº«ä¸Šï¼ŒæŠ•å…¥äº†å¤§é‡çš„æ—¶é—´å’Œé‡‘é’±ï¼Œäº§ç”Ÿäº†ä¸€å®šçš„æˆæœ¬ï¼Œæ­¤æ—¶ä»–ä»¬å¯èƒ½è§‰å¾—ä¸€äº›å°é—®é¢˜å·²ç»ä¸å€¼å¾—å†çº ç¼ äº†ï¼Œæ¯”å¦‚æ¯å¹´çš„å·¥èµ„å¢åŠ å‡ åƒå…ƒã€‚</p>
<h1 id="äº§å“äº”é—®">äº§å“äº”é—®</h1>
<ol>
<li>ç»™è°ç”¨ï¼Ÿ</li>
<li>ä»–ä»¬ç”¨è¿™ä¸ªäº§å“æ¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li>
<li>è¿™ä¸ªé—®é¢˜å¯¹ä»–ä»¬è€Œè¨€æœ‰å¤šé‡è¦ï¼Ÿ</li>
<li>æˆ‘ä»¬çš„æ–¹æ³•æ˜¯å¦è¶³å¤Ÿç®€å•æ–¹ä¾¿ï¼Ÿ</li>
<li>ä»–ä»¬è¦ä»˜å‡ºçš„ä»£ä»·ä¸æ‰€å¾—æ˜¯å¦åŒ¹é…ï¼Ÿ</li>
</ol>
<h1 id="åˆ›ä¸šå…¬å¼">åˆ›ä¸šå…¬å¼</h1>
<p>Paul Grahamçš„åˆ›ä¸šå…¬å¼å°±æ˜¯ï¼šæ­å»ºåŸå‹ã€ä¸Šçº¿è¿è¥ï¼ˆåˆ«ç®¡bugï¼‰ã€æ”¶é›†åé¦ˆã€è°ƒæ•´äº§å“ã€æˆé•¿å£®å¤§ã€‚</p>
<h1 id="ç¨‹åºå‘˜çš„èƒ½åŠ›">ç¨‹åºå‘˜çš„èƒ½åŠ›</h1>
<p><strong>åŸºç¡€ï¼šæŒæ¡è¯­è¨€ã€‚</strong></p>
<p>æ¯”å¦‚ç†Ÿæ‚‰jsâ€”â€”çœ‹ã€Šå¿è€…ç§˜ç±ã€‹ã€Šè¯­è¨€ç²¾é«“ã€‹ã€Šes6ã€‹ç­‰ï¼Œè€ŒæŒæ¡è¯­è¨€çš„åŸºç¡€</p>
<p><strong>è¿›é˜¶ï¼šæŒæ¡æ¡†æ¶ã€è¯­è¨€ç»†èŠ‚ã€é‡è¦çš„å·¥å…·ã€‚babelç­‰çš„æ’ä»¶ï¼Œå¼€å‘ä¸€ä¸ªé€šç”¨sdkã€‚</strong></p>
<p>æ¯”å¦‚æŒæ¡reactå’Œvueçš„åŸç†ï¼ŒçŠ¶æ€æ•°æ®ç®¡ç†reduxå’Œvuexç­‰ç­‰ã€‚</p>
<p>æ¯”å¦‚gitçš„å„ç§å¸¸ç”¨ç”¨æ³•ã€‚</p>
<p><strong>é«˜çº§ï¼šé€šç”¨è§£å†³æ–¹æ¡ˆã€‚</strong></p>
<p>æ¯”å¦‚ï¼šç®—æ³•ã€å¹¶å‘ã€åˆ†å¸ƒå¼ã€æ²Ÿé€šæŠ€å·§ã€è¡¨è¾¾èƒ½åŠ›ã€é¢†å¯¼èƒ½åŠ›</p>
<p><strong>äº®ç‚¹ï¼š</strong></p>
<p>æŠ€èƒ½å’Œèƒ½åŠ›æœ‰å¤šç§ï¼Œä¸å¯èƒ½ä¹Ÿä¸éœ€è¦æŒæ¡å¤ªå¤šï¼Œæœ‰ä¸€ä¸¤ç§èƒ½å¤Ÿç»™åˆ«äººç•™ä¸‹æ·±åˆ»å°è±¡å³å¯ã€‚</p>
<p>æ¯”å¦‚javaæ–¹å‘çš„å¯ä»¥æ˜¯è¿™äº›ï¼š</p>
<ul>
<li>ä½ ç‰¹åˆ«ç†Ÿæ‚‰Springï¼Œè·Ÿå®ƒæœ‰å…³çš„å•¥é—®é¢˜å•¥éœ€æ±‚ä½ éƒ½èƒ½æå®š</li>
<li>ä½ ç‰¹åˆ«ä¼šå»ºæ•°æ®åº“ç´¢å¼•ï¼Œåˆ†ææ…¢SQLåŸå› </li>
<li>ä½ ç‰¹åˆ«ä¼šå†™è„šæœ¬è¿›è¡Œè‡ªåŠ¨åŒ–</li>
<li>ä½ ç‰¹åˆ«ä¼šçœ‹æºä»£ç ï¼Œä¼šdebug</li>
<li>ä½ å¯¹å¤šçº¿ç¨‹ç‰¹åˆ«ç†Ÿæ‚‰</li>
<li>ä½ ç‰¹åˆ«ä¼šå¯¹JVMè°ƒä¼˜</li>
<li>ä½ ç‰¹åˆ«ä¼šè¿›è¡Œæ€§èƒ½è°ƒä¼˜</li>
</ul>
<p>å‰ç«¯æ–¹å‘å¯ä»¥æœ‰å“ªäº›å‘¢ï¼Ÿ</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%BF%83%E5%BE%97%E4%B8%8E%E7%BB%8F%E9%AA%8C/">å¿ƒå¾—ä¸ç»éªŒ</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>å†…å®¹åˆ†å‘ç½‘ç»œ</title>
                <link>https://wss.cool/cdn.html</link>
                <guid isPermaLink="true">https://wss.cool/cdn.html</guid>
                <pubDate>Fri, 27 Sep 2019 13:16:55 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<blockquote>
<p>ä»¥ä¸‹å°†å†…å®¹åˆ†å‘ç½‘ç»œç®€ç§°ä¸ºCDN</p>
</blockquote>
<h2 id="cdnæ˜¯ä»€ä¹ˆ">CDNæ˜¯ä»€ä¹ˆ</h2>
<p>å¦‚æœæ²¡æœ‰CDNï¼Œwww.baidu.com <code>-&gt;</code> DNSè§£æ <code>-&gt;</code> 123.123.123.123</p>
<p>åŠ å…¥äº†CDNä»¥åï¼Œwww.baidu.com <code>-&gt;</code> DNSè§£æä¸ºCNAMEåŸŸå <code>-&gt;</code> CDNåœ°å€image.baidu.cnd258.com <code>-&gt;</code> åœ¨CDNæœåŠ¡å™¨ä¸­æœªå‘ç°è¯·æ±‚çš„èµ„æº <code>-&gt;</code> åˆ°æºæœåŠ¡å™¨è¯·æ±‚èµ„æº</p>
<p>å½“å†æ¬¡è¯·æ±‚ç›¸åŒçš„èµ„æºæ—¶ï¼ŒCDNæœåŠ¡å™¨ä¼šç›´æ¥è¿”å›èµ„æºï¼Œè€Œä¸ä¼šè®¿é—®æºæœåŠ¡å™¨ã€‚</p>
<ol>
<li>ç”±äºæœ‰äº†cdnç¼“å­˜èµ„æºï¼ŒæºæœåŠ¡å™¨çš„å‹åŠ›å¤§å¤§å‡å°ã€‚é¿å…äº†ç”±äºè®¿é—®é‡è¿‡å¤šè€Œæ— æ³•å“åº”è¯·æ±‚ã€‚</li>
<li>cdnæœåŠ¡å•†æœ‰å¤§é‡çš„æœåŠ¡å™¨åˆ†å¸ƒäºå¹¿é˜”çš„åœ°ç†èŒƒå›´å†…ï¼Œå¯ä»¥å°±è¿‘å“åº”è¯·æ±‚ï¼Œä»è€Œæé«˜å“åº”è¯·æ±‚çš„é€Ÿåº¦ã€‚</li>
<li>å¯ä»¥é€šè¿‡cdnçš„apiæå‰å°†cdnæ²¡æœ‰ç¼“å­˜çš„èµ„æºæ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œè¿™æ ·ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®èµ„æºå°±å¯ä»¥äº«å—åˆ°cdnçš„ç¼“å­˜åŠ é€Ÿã€‚</li>
</ol>
<h2 id="é…ç½®">é…ç½®</h2>
<p>æˆ‘ä»¬éœ€è¦æä¾›ç»™CDNæœåŠ¡å•†éœ€è¦åŠ é€Ÿçš„ç½‘å€å’ŒæºæœåŠ¡å™¨çš„ipæˆ–åŸŸåã€‚æœåŠ¡å•†ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªcdnç½‘å€ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ç½‘å€çš„dnsè§£ææœåŠ¡å•†å¤„ï¼ŒåŠ ä¸€æ¡cnameè§£æï¼Œå°†åŸæ¥çš„ç½‘å€è§£æä¸ºcdnç½‘å€ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/">çŸ¥è¯†ç‚¹</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">æœåŠ¡å™¨</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Nginxçš„ç®€å•ä½¿ç”¨</title>
                <link>https://wss.cool/nginx.html</link>
                <guid isPermaLink="true">https://wss.cool/nginx.html</guid>
                <pubDate>Fri, 27 Sep 2019 13:08:38 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://www.linode.com/docs/web-servers/nginx/how-to-configure-nginx/">æ”»ç•¥1</a></p>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-18-04">æ”»ç•¥2</a></p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<pre><code>sudo apt-get install nginx
</code></pre><h2 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</h2>
<p>ubuntu</p>
<pre><code>/etc/nginx/conf.d/*.conf
</code></pre><p>centos</p>
<pre><code>/usr/local/nginx/conf/
</code></pre><h2 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h2>
<pre><code>sudo nginx -s reload
</code></pre><h2 id="æ—¥å¿—">æ—¥å¿—</h2>
<pre><code>cat /var/log/nginx/access.log
</code></pre><h2 id="httpsé…ç½®">httpsé…ç½®</h2>
<pre><code>server {
    listen 443 ssl http2;
    server_name  blog.wowfriday.cn;

    ssl                      on;
    ssl_certificate          /etc/nginx/1_blog.wowfriday.cn_bundle.crt;
    ssl_certificate_key      /etc/nginx/2_blog.wowfriday.cn.key;

    ssl_session_timeout  5m;

    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
    ssl_prefer_server_ciphers   on;

    location / {
        proxy_pass https://wowfriday.cn;
    }
}
</code></pre><h2 id="é™æ€ç½‘ç«™é…ç½®">é™æ€ç½‘ç«™é…ç½®</h2>
<pre><code>server {
  listen 80 http;
  server_name  wowfriday.cn;

  location / {
      root   /usr/share/nginx/html;
      index  index.html index.htm;
  }
}
</code></pre><h1 id="åå‘ä»£ç†é…ç½®">åå‘ä»£ç†é…ç½®</h1>
<pre><code>server {
  listen 80 http;
  server_name  wowfriday.cn;

  location / {
      proxy_pass http://blog.wowfriday.cn;
  }
}
</code></pre><h1 id="websocketä»£ç†">websocketä»£ç†</h1>
<pre><code>location /wss {
  proxy_pass http://127.0.0.1:8765;
  proxy_http_version 1.1;
  proxy_set_header Upgrade $http_upgrade;
  proxy_set_header Connection &quot;Upgrade&quot;;
  proxy_set_header X-Real-IP $remote_addr;
}
</code></pre>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">æœåŠ¡å™¨</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/nginx/">nginx</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/%E5%85%A5%E9%97%A8/">å…¥é—¨</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>CSSçŸ¥è¯†ç‚¹æ±‡æ€»</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/css/css%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/css/css%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/</guid>
                <pubDate>Sun, 15 Sep 2019 21:53:21 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS">MDN</a></p>
<h2 id="é€‰æ‹©å™¨">é€‰æ‹©å™¨</h2>
<h2 id="ä¼˜å…ˆçº§">ä¼˜å…ˆçº§</h2>
<h2 id="ä¼ªç±»">ä¼ªç±»</h2>
<h2 id="ä¼ªå…ƒç´ ">ä¼ªå…ƒç´ </h2>
<h2 id="ç›’å­æ¨¡å‹">ç›’å­æ¨¡å‹</h2>
<ul>
<li>å†…å®¹ã€å†…è¾¹è·ã€è¾¹æ¡†ã€å¤–è¾¹è·ã€box-sizing</li>
<li>èƒŒæ™¯é¢œè‰²ã€èƒŒæ™¯å›¾ç‰‡ã€èƒŒæ™¯æ¸å˜è‰²</li>
<li>outlineã€box-shadow</li>
</ul>
<h2 id="å¤–è¾¹è·åˆå¹¶">å¤–è¾¹è·åˆå¹¶</h2>
<p>å—çº§å…ƒç´ çš„ä¸Šå¤–è¾¹è·å’Œä¸‹å¤–è¾¹è·æœ‰æ—¶ä¼šåˆå¹¶ï¼ˆæˆ–æŠ˜å ï¼‰ä¸ºä¸€ä¸ªå¤–è¾¹è·ï¼Œå…¶å¤§å°å–å…¶ä¸­çš„æœ€å¤§è€…</p>
<h2 id="å¸ƒå±€">å¸ƒå±€</h2>
<ul>
<li>æµ®åŠ¨å’Œå®šä½åœ¨å†…çš„ä¼ ç»Ÿå¸ƒå±€æ–¹æ³•</li>
<li>å¼¹æ€§ç›’ï¼ˆflexboxï¼‰å¸ƒå±€</li>
</ul>
<h2 id="ä¹¦å†™è§„èŒƒ">ä¹¦å†™è§„èŒƒ</h2>
<h2 id="less">less</h2>
<p><a href="http://lesscss.org">å®˜ç½‘</a></p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/css/">CSS</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>React With Gesture</title>
                <link>https://wss.cool/react-with-gesture.html</link>
                <guid isPermaLink="true">https://wss.cool/react-with-gesture.html</guid>
                <pubDate>Wed, 28 Aug 2019 13:21:48 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://www.npmjs.com/package/react-with-gesture">æ–‡æ¡£</a></p>
<p>yarn add react-with-gesture</p>
<p>import { useGesture, withGesture, Gesture } from 'react-with-gesture'</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/%E6%89%8B%E5%8A%BF/">æ‰‹åŠ¿</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/%E6%8B%96%E6%8B%BD/">æ‹–æ‹½</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>React Rangeslider</title>
                <link>https://wss.cool/react-rangeslider.html</link>
                <guid isPermaLink="true">https://wss.cool/react-rangeslider.html</guid>
                <pubDate>Wed, 28 Aug 2019 13:15:47 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://whoisandy.github.io/react-rangeslider/">å®˜ç½‘</a></p>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<p>yarn add react-rangeslider --save</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">import</span> <span class="nx">Slider</span> <span class="nx">from</span> <span class="s1">&#39;react-rangeslider&#39;</span>
<span class="kr">import</span> <span class="s1">&#39;react-rangeslider/lib/index.css&#39;</span>

<span class="p">&lt;</span><span class="nt">Slider</span>
  <span class="na">min</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>
  <span class="na">max</span><span class="o">=</span><span class="p">{</span><span class="mi">100</span><span class="p">}</span>
  <span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
  <span class="na">onChangeStart</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChangeStart</span><span class="p">}</span>
  <span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span>
  <span class="na">onChangeComplete</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChangeComplete</span><span class="p">}</span>
<span class="p">/&gt;</span>

<span class="p">&lt;</span><span class="nt">Slider</span>
  <span class="na">min</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>
  <span class="na">max</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
  <span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">reverseValue</span><span class="p">}</span>
  <span class="na">orientation</span><span class="o">=</span><span class="s">&#39;horizontal&#39;</span>
  <span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChangeReverse</span><span class="p">}</span>
<span class="p">/&gt;</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>workbox</title>
                <link>https://wss.cool/workbox/</link>
                <guid isPermaLink="true">https://wss.cool/workbox/</guid>
                <pubDate>Wed, 28 Aug 2019 09:53:21 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://developers.google.com/web/tools/workbox/guides/get-started">å®˜ç½‘</a></p>
<h2 id="éœ€æ±‚">éœ€æ±‚</h2>
<ol>
<li>èµ„æºæœ¬åœ°åŒ–ï¼šä¸Šè¯¾æ—¶è¯¾ä»¶çš„æ‰€æœ‰èµ„æºé¢„å…ˆä¸‹è½½ã€‚</li>
<li>ç»˜æœ¬æ’ä»¶å›¾ç‰‡èµ„æºå¤šï¼Œéœ€è¦é¢„å…ˆä¸‹è½½ã€‚</li>
</ol>
<h2 id="å®ç°æ–¹æ¡ˆ">å®ç°æ–¹æ¡ˆ</h2>
<p>workbox</p>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<ol>
<li>å®‰è£… workbox
<pre><code>npm install workbox-cli --global
</code></pre></li>
<li>åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œå‘½ä»¤ï¼Œè¿›è¡Œ workbox çš„é…ç½®ï¼Œä¼šç”Ÿæˆä¸€ä¸ªé…ç½®æ–‡ä»¶ workbox-config.js
<pre><code>cd ./a/b/project_path
workbox wizard
</code></pre></li>
<li>é»˜è®¤ç”Ÿæˆçš„ workbox çš„ä¾èµ–æ˜¯ google çš„ cdn ï¼Œå›½å†…æ— æ³•è®¿é—®ï¼Œå¯é€šè¿‡é…ç½®æ”¹ä¸ºä½¿ç”¨æœ¬åœ°ä¾èµ–ã€‚åœ¨é…ç½®æ–‡ä»¶ï¼ˆworkbox-config.jsï¼‰ä¸­æ·»åŠ æˆ–ä¿®æ”¹ä¸º
<pre><code>&quot;importWorkboxFrom&quot;: &quot;local&quot;,
</code></pre></li>
<li>æ ¹æ®é…ç½®æ–‡ä»¶è®© workbox å·¥ä½œï¼Œä¼šç”Ÿæˆä¸€äº› service worker ç›¸å…³çš„æ–‡ä»¶ï¼Œå…¥å£æ˜¯ sw.js æ–‡ä»¶
<pre><code>workbox generateSW workbox-config.js
</code></pre></li>
<li>åœ¨é¡¹ç›®å…¥å£çš„htmlæ–‡ä»¶ï¼ˆindex.htmlï¼‰ä¸­å¼•å…¥ workbox ã€‚
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">if</span> <span class="p">(</span><span class="s1">&#39;serviceWorker&#39;</span> <span class="k">in</span> <span class="nx">navigator</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">&#39;/sw.js&#39;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>workbox ä¼šéå†å®ƒçš„å·¥ä½œç›®å½•ä¸‹çš„æ‰€æœ‰htmlæ–‡ä»¶ï¼Œå°†htmlæ–‡ä»¶åŠå…¶ä¸­ä¾èµ–çš„å›¾ç‰‡ã€csså’Œjsæ–‡ä»¶å…¨éƒ¨åŠ å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚å½“ç¬¬ä¸€ä¸ªé¡µé¢è½½å…¥å workbox å¼€å§‹å·¥ä½œï¼Œåˆ©ç”¨ service worker çš„ api é¢„ä¸‹è½½åˆ—è¡¨ä¸­çš„æ–‡ä»¶ï¼ˆç¼“å­˜ï¼‰ã€‚å½“è®¿é—®å…¶ä»–ç½‘é¡µæˆ–è€…æ²¡æœ‰ç½‘ç»œ/å¼±ç½‘æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ç¼“å­˜å·¥ä½œã€‚</p>
<p>é€šè¿‡ workbox çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ workbox çš„ api å®ç°ä¸€ä¸ªé«˜çº§åŠŸèƒ½ã€‚</p>
<p>æ¯”å¦‚ç¼“å­˜çš„ä¼˜å…ˆçº§çš„è®¾ç½®ã€‚èµ„æºå¯èƒ½ä¼šæ›´æ–°ï¼Œå½“ç½‘ç»œå¯ç”¨æ—¶ï¼Œworkbox æ˜¯ä½¿ç”¨ç¼“å­˜çš„èµ„æºè¿˜æ˜¯è¯·æ±‚ç½‘ç»œä¸Šçš„èµ„æºï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç¼“å­˜çš„ä¼˜å…ˆçº§ç­–ç•¥æ¥æ ¹æ®éœ€è¦é…ç½®ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>æˆè¯¾é¡¹ç›®ä¼˜åŒ–</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E6%8E%88%E8%AF%BE%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E6%8E%88%E8%AF%BE%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96/</guid>
                <pubDate>Wed, 28 Aug 2019 07:19:34 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h1 id="ç°è±¡">ç°è±¡</h1>
<p>eppé¡¹ç›®åœ¨padç«¯å®¶åœ¨éœ€è¦10-30sæ—¶é—´ã€‚</p>
<h1 id="ä¸ºä»€ä¹ˆä¼šè¿™æ ·">ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</h1>
<p>padç«¯æ˜¯RNé¡¹ç›®ï¼Œå‰é¢2ä¸ªç•Œé¢çš„æ“ä½œä¹‹åå¼€å¯webviewè®¿é—®å­¦ç”Ÿç«¯ç½‘å€ï¼ŒåŠ è½½eppé¡¹ç›®ã€‚</p>
<p>è§‚å¯Ÿeppå­¦ç”Ÿç«¯é¡¹ç›®çš„åŠ è½½ï¼š</p>
<p><img src="/images/%E4%BC%98%E5%8C%96-%E5%89%8D.jpg" alt="ä¼˜åŒ–å‰"></p>
<p>è¿™ä¸ªæ˜¯æ¸²æŸ“ç¬¬ä¸€å¸§å‰åŠ è½½èµ„æºçš„æˆªå›¾ï¼Œå¯ä»¥çœ‹åˆ°æœ‰17ä¸ªjsæ–‡ä»¶ï¼Œè€Œå¾ˆæ˜æ˜¾çš„ï¼Œfabricã€ckeditorã€aliplayerè¿™äº›ä½“ç§¯å¾ˆå¤§çš„åº“åœ¨å­¦ç”Ÿç«¯æ˜¯ä¸éœ€è¦çš„ï¼ˆè¿™3ä¸ªæ–‡ä»¶éƒ½æ˜¯ç¼–è¾‘å™¨ç”¨çš„ï¼Œeppé¡¹ç›®åˆ†å­¦ç”Ÿç«¯ã€æ•™å¸ˆç«¯ã€ç¼–è¾‘å™¨ï¼‰ï¼Œè€Œä¸”èµ„æºæ•°é‡è¾ƒå¤šã€‚</p>
<p><strong>ä¸¤ä¸ªåŸå› å¯¼è‡´äº†padç«¯éœ€è¦åŠ è½½10sçš„é—®é¢˜ï¼šèµ„æºæ•°é‡å¤šã€å¾ˆå¤šä¸éœ€è¦çš„ä»£ç è¢«åŠ è½½ã€‚</strong></p>
<p>30sçš„æƒ…å†µå‡ºç°åœ¨ç½‘ç»œå·®çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸Šè¯¾æ—¶ï¼Œæœ‰30ä¸ªå­¦ç”ŸåŒæ—¶ä½¿ç”¨padï¼Œç“œåˆ†å®½å¸¦å¯¼è‡´èµ„æºä¸‹è½½é€Ÿåº¦æ›´æ…¢ã€‚è¿™ä¸ªåé¢ä¹Ÿæœ‰æ–¹æ¡ˆå°è¯•è§£å†³ã€‚</p>
<h1 id="é—®é¢˜å¤„åœ¨å“ª">é—®é¢˜å¤„åœ¨å“ªï¼Ÿ</h1>
<p>ä»ä»£ç çš„å…¥å£æ–‡ä»¶çœ‹èµ·ï¼Œå‘ç°äº†è¿™æ®µä»£ç ï¼š</p>
<p><img src="/images/%E4%BC%98%E5%8C%96-%E4%BB%A3%E7%A0%81.png" alt="æ‡’åŠ è½½"></p>
<p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯æ ¹æ®urlæ¥åŠ è½½ä¸åŒçš„åœºæ™¯ï¼ˆå­¦ç”Ÿç«¯ã€æ•™å¸ˆç«¯ã€ç¼–è¾‘å™¨ï¼‰ï¼Œé‡ç‚¹æ˜¯ä¸‹é¢è¿™æ®µä»£ç ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">importScene</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
  <span class="kr">import</span><span class="p">(</span><span class="sb">`@/scene/</span><span class="si">${</span><span class="nx">sceneName</span><span class="si">}</span><span class="sb">Scene/</span><span class="si">${</span><span class="nx">sceneName</span><span class="si">}</span><span class="sb">Scene`</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">module</span> <span class="p">=&gt;</span> <span class="nx">module</span><span class="p">.</span><span class="k">default</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨webpackçš„ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½æœºåˆ¶ï¼Œ<a href="/images/%E4%BC%98%E5%8C%96-%E4%BB%A3%E7%A0%81.png">æ–‡æ¡£é“¾æ¥</a>ã€‚webpackä¼šå°†<code>import(&quot;./module&quot;)</code>ä½œä¸ºåˆ†å‰²ç‚¹ï¼Œå°†å…¶æ”¾åœ¨å•ç‹¬çš„chunkæ–‡ä»¶ä¸­ï¼Œå®ç°æ‡’åŠ è½½ã€‚<br>
<code>import()</code>ä¹Ÿå¯ä»¥æ¥å—åŠ¨æ€è¡¨è¾¾å¼ï¼Œæ¯”å¦‚è¿™æ ·<code>import(./routes/${path}/route)</code>ï¼Œæ­¤æ—¶<code>import() </code>ä¸ºæ¯ä¸€ä¸ª<strong>å¯èƒ½çš„æ¨¡å—</strong>åˆ›å»ºç‹¬ç«‹çš„chunkï¼Œè¿™å¥è¯çš„é‡ç‚¹æ˜¯<strong>å¯èƒ½çš„æ¨¡å—</strong>ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä»£ç çš„é—®é¢˜æ‰€åœ¨ã€‚</p>
<p>å¯¹äºå‰é¢é‚£æ®µä»£ç ï¼Œimportçš„åŠ¨æ€çš„éƒ¨åˆ†å°±æ˜¯sceneNameï¼Œå¯¹äºwebpackæ¥è¯´å®ƒæ˜¯ä¸€ä¸ªæœªçŸ¥å˜é‡ï¼Œæ‰€ä»¥webpackè®¤ä¸ºå®ƒæ˜¯<strong>å¯èƒ½çš„æ¨¡å—</strong>ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡ä¸­ï¼Œ<strong>å¯èƒ½çš„æ¨¡å—</strong>åŒ…å«æ¥å­¦ç”Ÿç«¯ã€æ•™å®¤ç«¯ã€ç¼–è¾‘å™¨ï¼Œé‚£ä¹ˆwebpackä¼šå°†3ä¸ªå¤§æ¨¡å—å…¨éƒ¨åˆ†åˆ«æ‰“åŒ…ï¼Œè€Œä¸”å°†å…¶å…¨éƒ¨ä¸‹è½½ã€‚ä»è€Œå¯¼è‡´æ¥å‰é¢æåˆ°çš„2ä¸ªé—®é¢˜ã€‚</p>
<h1 id="è§£å†³é—®é¢˜">è§£å†³é—®é¢˜</h1>
<p>å°è¯•ç€æŠŠä¸Šé¢æåˆ°çš„é‚£æ®µåŠ¨æ€è¡¨è¾¾å¼æ”¹æˆç¡®å®šçš„è¯­å¥ï¼Œæ¯”å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">importStudentScene</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
    <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/scene/studentScene/studentScene&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">module</span> <span class="p">=&gt;</span> <span class="nx">module</span><span class="p">.</span><span class="k">default</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">edApplication</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">(</span><span class="s1">&#39;edinnova&#39;</span><span class="p">);</span>
<span class="nx">importStudentScene</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">studentScene</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">app</span><span class="p">.</span><span class="nx">addScene</span><span class="p">(</span><span class="k">new</span> <span class="nx">studentScene</span><span class="p">());</span>
    <span class="nx">app</span><span class="p">.</span><span class="nx">startScene</span><span class="p">(</span><span class="s1">&#39;studentScene&#39;</span><span class="p">,</span> <span class="s1">&#39;#app&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>å†æ¬¡å¼€å¯é¡¹ç›®ï¼š</p>
<p><img src="/images/%E4%BC%98%E5%8C%96-%E5%90%8E.jpg" alt="ä¼˜åŒ–å"></p>
<p>å¯ä»¥çœ‹åˆ°æ•°é‡å’Œä½“ç§¯éƒ½å°äº†å¾ˆå¤šã€‚</p>
<p><img src="/images/%E4%BC%98%E5%8C%96-%E5%90%8E2.jpg" alt="ä¼˜åŒ–å"></p>
<p>è¿™æ˜¯åœ¨ç”µè„‘ä¸Šçš„æˆªå›¾ï¼Œä¼˜åŒ–åé¦–å±ä»3.4så˜ä¸º2.1sï¼Œæ•ˆæœæ˜æ˜¾ã€‚è¿™åªæ˜¯ä¸€ä¸ªå‡ ä¹æ²¡æœ‰æ”¹åŠ¨ä»£ç çš„ä¸€æ­¥ä¼˜åŒ–ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ä¼˜åŒ–åè¿˜æ˜¯æœ‰1ä¸ª600kï¼Œ1ä¸ª200kä¸¤ä¸ªchunkæ–‡ä»¶ï¼Œåé¢è¿˜éœ€è¦åˆ†æè¿™ä¸¤ä¸ªchunkæ–‡ä»¶ï¼Œçœ‹æ˜¯å¦æœ‰ä¼˜åŒ–ç©ºé—´ã€‚</p>
<h1 id="30ä¸ªå­¦ç”ŸåŒæ—¶ä½¿ç”¨pad">30ä¸ªå­¦ç”ŸåŒæ—¶ä½¿ç”¨pad</h1>
<p>æœ‰ä¸€ä¸ªçŒœæƒ³ï¼Œå› ä¸º30ä¸ªå­¦ç”Ÿæ˜¯åœ¨åŒä¸€ä¸ªæ•™å®¤çš„å±€åŸŸç½‘å†…ã€‚è€ƒè™‘ä½¿ç”¨webRTCçš„ç§å­ä¸‹è½½æŠ€æœ¯ï¼Œå®ç°ä¸‹è½½é€Ÿåº¦çš„ä¼˜åŒ–ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>æ­£åˆ™è¡¨è¾¾å¼</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</guid>
                <pubDate>Sun, 25 Aug 2019 20:13:08 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h1 id="ç²¾å‡†åŒ¹é…">ç²¾å‡†åŒ¹é…</h1>
<p>ä¸€ä¸ªå­—ç¬¦è·Ÿç€ä¸€ä¸ªå­—ç¬¦ï¼Œå®Œå…¨åŒ¹é…</p>
<pre><code>/test/
</code></pre><h1 id="åŒ¹é…ä¸€ç±»å­—ç¬¦">åŒ¹é…ä¸€ç±»å­—ç¬¦</h1>
<p>åŒ¹é…ç»„åˆä¸­çš„ä»»æ„ä¸€ä¸ªğŸ‘‡</p>
<pre><code>[abc]
</code></pre><p>é™¤äº†ç»„åˆä¸­çš„æ‰€æœ‰ğŸ‘‡</p>
<pre><code>[^abc]
</code></pre><p>â˜¢ï¸æ­§ä¹‰ï¼š<code>^</code>æœ‰2ä¸­å«ä¹‰ï¼šåœ¨<code>[]</code>ä¸­è¡¨ç¤ºâ€œéâ€ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼çš„å¼€å¤´<code>/^abc/</code>ï¼Œè¡¨ç¤ºåŒ¹é…ä»¥<code>abc</code>å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚</p>
<p>ä»aåˆ°mä¹‹é—´ğŸ‘‡</p>
<pre><code>[a-m]
</code></pre><h1 id="è½¬ä¹‰">è½¬ä¹‰</h1>
<p>å­—æ¯å’Œæ•°å­—éƒ½å¯ä»¥è¡¨ç¤ºè‡ªå·±ã€‚ä½†<code>$``-``^</code>å¯ä»¥è¡¨è¾¾è‡ªèº«ä»¥å¤–çš„ä¸œè¥¿ï¼Œè¦ä½¿ç”¨åæ–œæ â€œ\â€æ¥è½¬ä¹‰ã€‚</p>
<h1 id="é‡å¤">é‡å¤</h1>
<p><code>/t?est/</code>ğŸ‘‰å­—ç¬¦ååŠ <code>?</code>è¡¨ç¤ºä¸€æ¬¡æˆ–é›¶æ¬¡å‡ºç°</p>
<p><code>/t+est/</code>ğŸ‘‰<code>+</code>è¡¨ç¤ºä¸€æ¬¡æˆ–å¤šæ¬¡å‡ºç°</p>
<p><code>/t*est/</code>ğŸ‘‰ <code>*</code>è¡¨ç¤ºé›¶æ¬¡æˆ–å¤šæ¬¡å‡ºç°</p>
<p><code>/t{4}est/</code>ğŸ‘‰<code>{4}</code>è¡¨ç¤º4æ¬¡å‡ºç°</p>
<p><code>/t{4,10}est/</code>ğŸ‘‰<code>{4-10}</code>è¡¨ç¤º4-10æ¬¡å‡ºç°</p>
<p><code>/t{4,}est/</code>ğŸ‘‰<code>{4,}</code>è¡¨ç¤º4-å¤šæ¬¡å‡ºç°</p>
<h1 id="é¢„å®šä¹‰å­—ç¬¦">é¢„å®šä¹‰å­—ç¬¦</h1>
<p><code>\t</code>è¡¨ç¤ºæ°´å¹³åˆ¶è¡¨ç¬¦tab</p>
<p><code>\s</code>è¡¨ç¤ºä»»ä½•ç©ºå­—ç¬¦ï¼Œå¦‚ç©ºæ ¼ã€tabã€å›è½¦ç­‰</p>
<p>è¿˜æœ‰å¾ˆå¤š</p>
<h1 id="åˆ†ç»„">åˆ†ç»„</h1>
<p>æ“ä½œç¬¦ï¼ˆå¦‚<code>+``*``?</code>)åªèƒ½å½±å“å®ƒå‰é¢çš„<span title="å­—ç¬¦" class="trans">æœ¯è¯­</span>ã€‚ä½¿ç”¨å°æ‹¬å·<code>()</code>å¯ä»¥ä½¿æ“ä½œç¬¦ä½œç”¨äº<strong>ä¸€ç»„æœ¯è¯­</strong>ã€‚</p>
<p>ä¾‹å­ï¼š<code>/(ab)+/</code>ä¼šåŒ¹é…<code>&quot;ab&quot;</code>å­—ç¬¦ä¸²ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚</p>
<p>â˜¢ï¸æ­§ä¹‰ï¼š<code>()</code>åŒæ—¶è¿˜æœ‰æ•è·çš„ä½œç”¨ã€‚</p>
<h1 id="æˆ–">æˆ–</h1>
<p>ä½¿ç”¨ç«–çº¿è¡¨ç¤ºæˆ–çš„å…³ç³»ï¼Œæ¯”å¦‚<code>/a|b/</code>åŒ¹é…aæˆ–bï¼Œä¸<code>/[ab]/</code>ç±»ä¼¼</p>
<h1 id="åå‘å¼•ç”¨">åå‘å¼•ç”¨</h1>
<p>çœ‹è¿™ä¸ªæ­£åˆ™<code>/^([abc])a\1)/</code>ï¼Œå…¶ä¸­<code>()</code>ä¸ºæ•è·ï¼Œå¯èƒ½æ•è·åˆ°<code>a</code>æˆ–<code>b</code>æˆ–<code>c</code>ï¼Œ<code>\1</code>å°±è¡¨ç¤ºè¢«æ•è·åˆ°çš„é‚£ä¸ªå­—ç¬¦ã€‚</p>
<p>æ¯”å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸²<code>bab</code>ï¼Œé¦–å…ˆ<code>([abc])</code>æ•è·åˆ°äº†<code>b</code>ï¼Œ<code>\1</code>å°±ä»£è¡¨<code>b</code>ï¼Œæ‰€ä»¥<code>bab</code>å¯ä»¥åŒ¹é…ã€‚</p>
<h1 id="æ•è·åŠæ•è·çš„å¼•ç”¨">æ•è·åŠæ•è·çš„å¼•ç”¨</h1>
<p><code>/(hello) (world)/</code> åœ¨åŒ¹é…å­—ç¬¦ä¸² <code>hello world</code> æ—¶ä¼šå°† () ä¸­çš„å­—ç¬¦è¿›è¡Œæ•è·ï¼Œå¯ä»¥ç”¨ <code>$1</code> <code>$2</code> è¡¨ç¤ºã€‚</p>
<p>åœ¨<code>string.replace()</code>ä¸­ï¼Œä½¿ç”¨&quot;$1&quot;è¡¨ç¤ºè¢«æ•è·åˆ°çš„å­—ç¬¦ã€‚</p>
<p>æ¯”å¦‚ï¼Œ<code>'hello world'.replace(/(hello) (world)/, '$1 666-$2')</code>ï¼Œä¼šè¾“å‡º<code>&quot;hello 666-world&quot;</code></p>
<p>(?: . . .)è¡¨ç¤ºéæ•è·åˆ†ç»„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šè¢«æ•è·ï¼Œä»…è¡¨ç¤ºåˆ†ç»„ã€‚</p>
<h1 id="trimçš„å®ç°">trim()çš„å®ç°</h1>
<h2 id="æ–¹æ³•1">æ–¹æ³•1</h2>
<p><code>str.replace(/^\s+|\s+$/g,&quot;&quot;)</code>ï¼Œåœ¨å¤´å°¾åˆ†åˆ«æ›¿æ¢æ‰ç©ºå­—ç¬¦</p>
<h2 id="æ–¹æ³•2">æ–¹æ³•2</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\s\s*/</span><span class="p">,</span><span class="s2">&#34;&#34;</span><span class="p">),</span> <span class="c1">//åœ¨å¤´éƒ¨æ›¿æ¢
</span><span class="c1"></span>    <span class="nx">ws</span> <span class="o">=</span> <span class="sr">/\s/</span><span class="p">,</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

<span class="k">while</span><span class="p">(</span><span class="nx">ws</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="o">--</span><span class="nx">i</span><span class="p">)));</span> <span class="c1">// çœ‹åœ¨å°¾éƒ¨æœ‰å‡ ä¸ªç©ºå­—ç¬¦
</span><span class="c1"></span>
<span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// å‰”é™¤ç©ºå­—ç¬¦
</span></code></pre></td></tr></table>
</div>
</div><p>æ–¹æ³•2æ¯”æ–¹æ³•1åœ¨é•¿æ–‡æ¡£ä¸­æ€§èƒ½æ›´å¥½ã€‚</p>
<h1 id="å…¶ä»–">å…¶ä»–</h1>
<h2 id="åŒ¹é…æ¢è¡Œç¬¦">åŒ¹é…æ¢è¡Œç¬¦</h2>
<ol>
<li>æœ¯è¯­ç‚¹<code>.</code>ä¸èƒ½åŒ¹é…åˆ°æ¢è¡Œç¬¦<code>\n</code></li>
<li><code>/\s*/g</code>åŒ¹é…ä¸åˆ°è¿ç»­å¤šä¸ªç©ºå­—ç¬¦ï¼Œå¯ä»¥ç”¨<code>/\s+/g</code>å¯ä»¥ã€‚</li>
</ol>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>React Popup</title>
                <link>https://wss.cool/react-popup.html</link>
                <guid isPermaLink="true">https://wss.cool/react-popup.html</guid>
                <pubDate>Thu, 22 Aug 2019 10:43:25 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://react-popup.elazizi.com/component-api/">React Popup</a> æ˜¯ä¸€ä¸ªå¼¹çª—ç»„ä»¶çš„åº“ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<pre><code>yarn add reactjs-popup

npm install reactjs-popup
</code></pre><h2 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³•</h2>
<ul>
<li>contentStyleï¼šè®¾ç½®<strong>å†…å®¹åŒº</strong>çš„æ ·å¼</li>
<li>overlayStyleï¼šè®¾ç½®<strong>é®ç½©</strong>çš„æ ·å¼</li>
</ul>
<h2 id="å ä½å¼¹çª—1">å ä½å¼¹çª—1</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Popup</span> <span class="nx">from</span> <span class="s2">&#34;reactjs-popup&#34;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">PopupExample</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">Popup</span> <span class="na">trigger</span><span class="o">=</span><span class="p">{&lt;</span><span class="nt">button</span><span class="p">&gt;</span> <span class="nx">Trigger</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;}</span> <span class="na">position</span><span class="o">=</span><span class="s">&#34;right center&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Popup</span> <span class="nx">content</span> <span class="nx">here</span> <span class="o">!!</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Popup</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å ä½å¼¹çª—2">å ä½å¼¹çª—2</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">const</span> <span class="nx">PopupExample</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">Popup</span> <span class="na">trigger</span><span class="o">=</span><span class="p">{&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">Trigger</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;}</span> <span class="na">position</span><span class="o">=</span><span class="s">&#34;top left&#34;</span><span class="p">&gt;</span>
    <span class="p">{</span><span class="nx">close</span> <span class="p">=&gt;</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="nx">Content</span> <span class="nx">here</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;close&#34;</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">close</span><span class="p">}&gt;</span>
          <span class="o">&amp;</span><span class="nx">times</span><span class="p">;</span>
        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">)}</span>
  <span class="p">&lt;/</span><span class="nt">Popup</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å—æ§modal">å—æ§Modal</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">const</span> <span class="nx">Modal</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
   <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">openModal</span><span class="p">}&gt;</span>
      <span class="nx">Controlled</span> <span class="nx">Popup</span>
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Popup</span>
      <span class="na">open</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">open</span><span class="p">}</span>
      <span class="na">closeOnDocumentClick</span>
      <span class="na">onClose</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">closeModal</span><span class="p">}</span>
    <span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;modal&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;close&#34;</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">closeModal</span><span class="p">}&gt;</span><span class="o">&amp;</span><span class="nx">times</span><span class="p">;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="mi">666</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">Popup</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>D3å­¦ä¹ ç¬”è®°</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/d3/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/d3/</guid>
                <pubDate>Sat, 20 Jul 2019 12:29:41 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>å‚è€ƒï¼š<a href="https://bl.ocks.org/mbostock">ä¾‹å­ç½‘ç«™1</a>ï¼Œ<a href="https://observablehq.com/">ä¾‹å­ç½‘ç«™2</a>ï¼Œ<a href="https://observablehq.com/@mbostock/tree-of-life">æ ‘1</a></p>
<h2 id="circle">circle</h2>
<p>circleï¼ˆåœ†å½¢ï¼‰æœ‰3ä¸ªä¸»è¦å±æ€§</p>
<ol>
<li>cxã€cyï¼Œåœ†å¿ƒçš„åæ ‡</li>
<li>rï¼ŒåŠå¾„</li>
</ol>
<h2 id="çº¿æ€§æ˜ å°„">çº¿æ€§æ˜ å°„</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">scale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLiner</span><span class="p">();</span>
<span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">]);</span>
<span class="nx">scale</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">]);</span>
<span class="kr">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">scale</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>3ä¸ªæ¦‚å¿µï¼š</p>
<ol>
<li>scaleLinerï¼Œçº¿æ€§æ˜ å°„ã€‚</li>
<li>domainï¼ˆåŸŸï¼‰ï¼Œå­˜æ”¾çš„æ˜¯çœŸå®çš„æ•°æ®ã€‚</li>
<li>rangeï¼ˆèŒƒå›´ï¼‰ï¼Œæ˜ å°„åçš„èŒƒå›´ã€‚
domainä¸­çš„æ•°æ®ä¼šè¢«çº¿æ€§æ˜ å°„åˆ°rangeä¸­ã€‚<code>scale(50);</code>ä¸­çš„<code>50</code>æ˜¯domainä¸­çš„å€¼ï¼Œoutputä¸ºæ˜ å°„åçš„å€¼ã€‚</li>
</ol>
<h2 id="æœ€å€¼">æœ€å€¼</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">positionData</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="kr">const</span> <span class="nx">maxZ</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">positionData</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">)=&gt;</span><span class="nx">d</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="åŠ¨æ€ç¼©æ”¾">åŠ¨æ€ç¼©æ”¾</h2>
<p>å¤„ç†å¤æ‚æ•°æ®çš„ç¬¬ä¸€æ­¥æ˜¯ç¡®å®šç¼©æ”¾æ¯”ä¾‹ï¼Œæ‰èƒ½è®©æ‰€æœ‰æ•°æ®ç‚¹éƒ½åŒ…å«åœ¨svgç”»å¸ƒä¸­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">xScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">dataset</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="nx">padding</span><span class="p">,</span> <span class="nx">w</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">]);</span>
</code></pre></td></tr></table>
</div>
</div><p>åœ¨æ•°æ®é›†ä¸­æ‰¾åˆ°æœ€å¤§æœ€å°å€¼ï¼Œä½œä¸º<code>domain</code>çš„è¾¹ç•Œï¼Œå°†æ•°æ®é›†æ˜ å°„åˆ°ç”»å¸ƒå¤§å°çš„<code>range</code>ä¸­</p>
<h2 id="åæ ‡è½´">åæ ‡è½´</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">yAxis</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">axisLeft</span><span class="p">(</span><span class="nx">yScale</span><span class="p">);</span>

<span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;g&#34;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&#34;transform&#34;</span><span class="p">,</span> <span class="s2">&#34;translate(0,&#34;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">h</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34;)&#34;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xAxis</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>Git</title>
                <link>https://wss.cool/git/</link>
                <guid isPermaLink="true">https://wss.cool/git/</guid>
                <pubDate>Thu, 18 Jul 2019 10:53:36 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="åˆ é™¤æœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯é™¤äº†master">åˆ é™¤æœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯ï¼Œé™¤äº†master</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">git branch <span class="p">|</span> grep -v <span class="s2">&#34;master&#34;</span> <span class="p">|</span> xargs git branch -d
</code></pre></td></tr></table>
</div>
</div><h2 id="æš‚å­˜æ”¹åŠ¨">æš‚å­˜æ”¹åŠ¨</h2>
<table>
<thead>
<tr>
<th align="center">æ“ä½œ</th>
<th align="center">ä»£ç </th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">æš‚å­˜</td>
<td align="center">git stash</td>
</tr>
<tr>
<td align="center">åˆ—è¡¨</td>
<td align="center">git stash list</td>
</tr>
<tr>
<td align="center">å–å‡º</td>
<td align="center">git stash pop 1</td>
</tr>
</tbody>
</table>
<h2 id="åˆ·æ–°æœ¬åœ°çš„è¿œç¨‹åˆ†æ”¯åˆ—è¡¨">åˆ·æ–°æœ¬åœ°çš„è¿œç¨‹åˆ†æ”¯åˆ—è¡¨</h2>
<p>è¿œç¨‹å·²ç»è¢«åˆ é™¤çš„åˆ†æ”¯ï¼Œåœ¨æœ¬åœ°ä½¿ç”¨<code>git branch -a</code>å‘½ä»¤æ˜¯ä¾ç„¶å¯ä»¥çœ‹åˆ°ã€‚æ‰€ä»¥éœ€è¦åˆ·æ–°ä¸€ä¸‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">git remote prune origin
</code></pre></td></tr></table>
</div>
</div><p>è¿™æ¡å‘½ä»¤æ˜¯åˆ é™¤ä¸<name>å…³è”çš„é™ˆæ—§å¼•ç”¨</p>
<p>æˆ–è€…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">git fetch -p
</code></pre></td></tr></table>
</div>
</div><p>è¿™æ¡å‘½ä»¤æ˜¯åœ¨è·å–ä¹‹å‰ï¼Œåˆ é™¤è¿œç¨‹ä¸å†å­˜åœ¨çš„ä»»ä½•è¿œç¨‹è·Ÿè¸ªå¼•ç”¨ã€‚</p>
<h2 id="ä¸ç›¸å¹²åˆ†æ”¯å¼ºåˆ¶pullæˆ–pushç­‰æ“ä½œ">ä¸ç›¸å¹²åˆ†æ”¯å¼ºåˆ¶pullæˆ–pushç­‰æ“ä½œ</h2>
<p>åœ¨å‘½ä»¤åé¢åŠ <code>--allow-unrelated-histories</code></p>
<h2 id="æ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç«¯">æ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç«¯</h2>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰æ¨åˆ°åŸç‚¹ï¼Œé‚£ä¹ˆ<code>git push -u origin HEAD</code>å¯ä»¥åœ¨æœ¬åœ°åˆ†æ”¯ä¸­è®¾ç½®ä¸Šæ¸¸è·Ÿè¸ªä¿¡æ¯ã€‚</p>
<h2 id="ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤">ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤</h2>
<p>å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯</p>
<pre><code>git commit --amend -m &quot;666&quot;
</code></pre><p>ä»£ç æœ‰å˜åŠ¨ï¼Œè¦åˆ¶å®šæ–‡ä»¶</p>
<pre><code>git commit --amend src\plugins\icElement_vote\components\config.vue src\plugins\icElement_chose\components\config.vue
  -m &quot;fix(ç¼–è¾‘å™¨-é€‰æ‹©é¢˜/æŠ•ç¥¨é¢˜):åˆ é™¤ä¸æ˜¯å½“å‰é€‰ä¸­çš„é€‰é¡¹&quot;
</code></pre><h2 id="è·å–å½“å‰åˆ†æ”¯å">è·å–å½“å‰åˆ†æ”¯å</h2>
<pre><code>git symbolic-ref --short -q HEAD 
</code></pre><h2 id="æ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç«¯ä¼šåœ¨è¿œç«¯æ–°å»ºå½“å‰åˆ†æ”¯åçš„æ–°åˆ†æ”¯">æ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç«¯ï¼Œä¼šåœ¨è¿œç«¯æ–°å»ºå½“å‰åˆ†æ”¯åçš„æ–°åˆ†æ”¯</h2>
<pre><code>git push -u origin HEAD  
</code></pre><h2 id="è·å–ä¸Šä¸€æ¬¡commitçš„message">è·å–ä¸Šä¸€æ¬¡commitçš„message</h2>
<pre><code>git log -1 --pretty=%B  
</code></pre><h2 id="å¦‚æœæœ‰æ–‡ä»¶æ²¡æœ‰è¢«addåˆ™git-statusæ—¶æœ‰æç¤º">å¦‚æœæœ‰æ–‡ä»¶æ²¡æœ‰è¢«addï¼Œåˆ™git statusæ—¶æœ‰æç¤º</h2>
<p>Changes not staged for commit:
æœ‰æ–‡ä»¶è¢«addäº†ï¼š
Changes to be committed
ä¸Šé¢ä¸¤ç§å¯ä»¥åŒæ—¶å­˜åœ¨ã€‚</p>
<h2 id="åˆ†æ”¯é—´æ‘˜-commit">åˆ†æ”¯é—´æ‘˜ commit</h2>
<p>åˆ†æ”¯Aæœ‰5æ¬¡æäº¤ï¼Œæƒ³æŠŠå…¶ä¸­çš„ç¬¬äºŒä¸‰æ¬¡æäº¤æ‹¿åˆ°Båˆ†æ”¯ï¼Œå…ˆæ‹¿åˆ° commit çš„ id å¯é€šè¿‡ <code>git log -1 --pretty=%B</code> å–åˆ°ã€‚ç„¶åä½¿ç”¨æ‘˜æ¨±æ¡ƒå‘½ä»¤ï¼š</p>
<pre><code>git cherry-pick 5cf6d24
</code></pre><p>åˆ†æ”¯Bå°±æŠŠè¿™æ¬¡commitæ‘˜è¿‡æ¥äº†ã€‚</p>
<h2 id="ä»£ç†">ä»£ç†</h2>
<p>å…¨å±€è®¾ç½®</p>
<pre><code>git config --global http.proxy 'socks5://127.0.0.1:1080'
git config --global https.proxy 'socks5://127.0.0.1:1080'
</code></pre><p>å…¨å±€å–æ¶ˆ</p>
<pre><code>git config --global --unset http.proxy
git config --global --unset https.proxy
</code></pre><p>#åªå¯¹github.com</p>
<pre><code>git config --global http.https://github.com.proxy socks5://127.0.0.1:1080
</code></pre><p>#å–æ¶ˆä»£ç†</p>
<pre><code>git config --global --unset http.https://github.com.proxy
</code></pre><h2 id="å–æ¶ˆè¿½è¸ª">å–æ¶ˆè¿½è¸ª</h2>
<pre><code>git rm -r --cached æ–‡ä»¶æˆ–ç›®å½•
</code></pre><h2 id="åˆ‡æ¢åˆ†æ”¯branch">åˆ‡æ¢åˆ†æ”¯(branch)</h2>
<p>æƒ³çœ‹Reactçš„ä»£ç ï¼Œå› ä¸ºv16æœ‰äº›æ–°ç‰¹æ€§ï¼Œæ‰€ä»¥æƒ³çœ‹v15çš„ä»£ç ã€‚cloneä»£ç ä»¥åï¼Œä½¿ç”¨ <code>git branch</code> æŸ¥çœ‹åˆ†æ”¯ï¼Œå‘ç°åªæœ‰ <code>master</code> ï¼Œä½†æ˜¯çœ‹ github ä¸Šæ˜¯æœ‰ 15-stable åˆ†æ”¯çš„ã€‚<br>
è§£å†³åŠæ³•ï¼šä½¿ç”¨ <code>git branch -a</code> å¯ä»¥çœ‹åˆ°æ‰€æœ‰åˆ†æ”¯ï¼ŒåŒ…æ‹¬è¿œç«¯çš„åˆ†æ”¯ï¼Œå…¶ä¸­æœ‰ <code>remotes/origin/15-stable</code> åˆ†æ”¯ï¼Œç”¨è¿™ä¸ªåå­—åˆ‡æ¢åˆ†æ”¯å³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># è¿œç¨‹åˆ†æ”¯åˆ—è¡¨</span>
git branch -r
<span class="c1"># æ‰€æœ‰åˆ†æ”¯åˆ—è¡¨ï¼ˆåŒ…æ‹¬è¿œç¨‹ï¼‰</span>
git branch -a 
<span class="c1"># åˆ†æ”¯åˆ—è¡¨</span>
git branch
<span class="c1"># åˆ›å»ºå¹¶åˆ‡æ¢åˆ°devåˆ†æ”¯,</span>
git checkout -b dev
<span class="c1"># ä¸Šé¢çš„å‘½ä»¤ï¼Œç­‰äºä¸‹é¢çš„ä¸¤æ¡å‘½ä»¤</span>
<span class="c1"># åˆ›å»ºåˆ†æ”¯</span>
git branch dev 
<span class="c1"># åˆ‡æ¢åˆ†æ”¯</span>
git checkout dev
</code></pre></td></tr></table>
</div>
</div><h2 id="åˆ†æ”¯åˆå¹¶">åˆ†æ”¯åˆå¹¶</h2>
<p>å»ºè®®åˆå¹¶æ—¶ä¿ç•™ç›®æ ‡åˆ†æ”¯çš„commitä¿¡æ¯ã€‚å³ä½¿ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">git merge --no-ff <span class="o">[</span>branch name<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<p>å½“åˆå¹¶é”™äº†ä»¥åæ€ä¹ˆæ’¤é”€åˆå¹¶å‘¢ï¼Œä½¿ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">git reset --hard <span class="o">[</span>mergeçš„ç‰ˆæœ¬å·<span class="o">]</span> <span class="c1">#ç‰ˆæœ¬å·ä½¿ç”¨ git log æŸ¥ï¼Œè¿™ç§æ–¹æ³•åªé’ˆå¯¹åˆå¹¶ä»¥åå¯¹å½“å‰åˆ†æ”¯æ²¡æœ‰è¿‡å…¶ä»–æ“ä½œï¼Œæœ‰çš„è¯æ¯”è¾ƒå¤æ‚</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<p>åˆå¹¶è¿œç¨‹åˆ†æ”¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># å¦‚æœæœ¬åœ°æ²¡æœ‰è¿œç¨‹åˆ†æ”¯ï¼š</span>
git checkout -b develop origin/develop <span class="c1"># æœ¬åœ°æ–°å»ºdevelopåˆ†æ”¯å¹¶æ‹‰å–</span>
<span class="c1"># å¦‚æœæœ¬åœ°å·²æœ‰è¿œç¨‹åˆ†æ”¯ï¼š</span>
git checkout develop 
git pull origin develop <span class="c1">#æ‹‰å–è¿œç¨‹ä»£ç </span>

<span class="c1"># æ–¹æ³•äºŒï¼š</span>
git fetch origin dev:temp <span class="c1">#æ‹‰å–è¿œç¨‹devåˆ†æ”¯ï¼Œåˆ›å»ºæœ¬åœ°tempåˆ†æ”¯</span>
git diff temp
git merge temp <span class="c1"># åˆå¹¶</span>
git branch -d temp <span class="c1">#åˆ é™¤</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="åˆ é™¤è¿œç¨‹åˆ†æ”¯">åˆ é™¤è¿œç¨‹åˆ†æ”¯</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">git push origin -d <span class="o">[</span>è¿œç¨‹åˆ†æ”¯å<span class="o">]</span>
git push origin :<span class="o">[</span>è¿œç¨‹åˆ†æ”¯å<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>git push origin :experimental<br>
Find a ref that matches experimental in the origin repository (e.g.  refs/heads/experimental), and delete it.</p>
</blockquote>
<h2 id="æŸ¥çœ‹è®°å½•log">æŸ¥çœ‹è®°å½•log</h2>
<p><code>git log</code> è¿™æ ·ä¼šæ‰“å°å‡ºè¶…çº§å¤šçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬SHA-1ã€ä½œè€…ã€æ—¶é—´ã€message,å¾ˆå•°å—¦ï¼Œè¿˜æ˜¯ä¸è¦è¿™ä¹ˆç”¨å¾—å¥½ã€‚<br>
<code>git log --pretty=format:&quot;%h - %an, %ar : %s&quot;</code> æŒ‰æ ¼å¼æ‰“å°ä¿¡æ¯ï¼Œå…·ä½“é€‰é¡¹å¦‚ä¸‹ <br>
git log --graph
git log --graph --oneline --decorate</p>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>%H</td>
<td>æäº¤å¯¹è±¡ï¼ˆcommitï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td>%h</td>
<td>æäº¤å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td>%T</td>
<td>æ ‘å¯¹è±¡ï¼ˆtreeï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td>%t</td>
<td>æ ‘å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td>%P</td>
<td>çˆ¶å¯¹è±¡ï¼ˆparentï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td>%p</td>
<td>çˆ¶å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td>%an</td>
<td>ä½œè€…ï¼ˆauthorï¼‰çš„åå­—</td>
</tr>
<tr>
<td>%ae</td>
<td>ä½œè€…çš„ç”µå­é‚®ä»¶åœ°å€</td>
</tr>
<tr>
<td>%ad</td>
<td>ä½œè€…ä¿®è®¢æ—¥æœŸï¼ˆå¯ä»¥ç”¨ -date= é€‰é¡¹å®šåˆ¶æ ¼å¼ï¼‰</td>
</tr>
<tr>
<td>%ar</td>
<td>ä½œè€…ä¿®è®¢æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º</td>
</tr>
<tr>
<td>%cn</td>
<td>æäº¤è€…(committer)çš„åå­—</td>
</tr>
<tr>
<td>%ce</td>
<td>æäº¤è€…çš„ç”µå­é‚®ä»¶åœ°å€</td>
</tr>
<tr>
<td>%cd</td>
<td>æäº¤æ—¥æœŸ</td>
</tr>
<tr>
<td>%cr</td>
<td>æäº¤æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º</td>
</tr>
<tr>
<td>%s</td>
<td>æäº¤è¯´æ˜</td>
</tr>
</tbody>
</table>
<p><code>git log -2 --oneline</code> æ‰“å°æœ€è¿‘ä¸¤æ¬¡çš„ç®€åŒ–åçš„è®°å½•ï¼Œå…¶ä¸­<code>--oneline</code>ä¸º	<code>--pretty=oneline --abbrev-commit</code> å‘½ä»¤çš„ç®€åŒ–ç”¨æ³•ã€‚<code>-n</code>ä¸ºæœ€è¿‘næ¬¡çš„æäº¤ã€‚<br>
<code>git log --since=2.weeks</code> æ‰“å°2å‘¨å†…çš„è®°å½•ï¼Œå…·ä½“é€‰é¡¹å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>-(n)</td>
<td>ä»…æ˜¾ç¤ºæœ€è¿‘çš„ n æ¡æäº¤</td>
</tr>
<tr>
<td>--since, --after</td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹åçš„æäº¤ã€‚</td>
</tr>
<tr>
<td>--until, --before</td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹å‰çš„æäº¤ã€‚</td>
</tr>
<tr>
<td>--author</td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šä½œè€…ç›¸å…³çš„æäº¤ã€‚</td>
</tr>
<tr>
<td>--committer</td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šæäº¤è€…ç›¸å…³çš„æäº¤ã€‚</td>
</tr>
</tbody>
</table>
<p><code>git log --pretty=&quot;%h - %s&quot; --author=wss --since=&quot;2008-10-01&quot; --before=&quot;2008-11-01&quot;</code> å„ç§æ¡ä»¶å¯ä»¥ä¸€èµ·ç”¨<br>
<code>git log -p -2</code> æŸ¥çœ‹æœ€è¿‘ä¸¤æ¬¡æäº¤ï¼Œå¹¶æ˜¾ç¤ºæäº¤å†…å®¹ï¼ˆå…·ä½“æ”¹åŠ¨äº†ä»€ä¹ˆï¼‰</p>
<h2 id="æ ‡ç­¾">æ ‡ç­¾</h2>
<p>å°†æŸæ¬¡commitæ‰“ä¸Šæ ‡ç­¾
<code>git tag &lt;name </code> é»˜è®¤ç»™æœ€æ–°æäº¤æ‰“æ ‡ç­¾ã€‚<br>
<code>git tag</code> æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾
<code>git tag v0.9 f52c633</code> æ ¹æ®commit idç»™æŸæ¬¡æäº¤æ‰“æ ‡ç­¾</p>
<h2 id="åœ¨ç¼“å­˜ä¸­ç§»é™¤æŸä¸ªç›®å½•">åœ¨ç¼“å­˜ä¸­ç§»é™¤æŸä¸ªç›®å½•</h2>
<p><code>git rm -r --cached some-directory</code></p>
<h2 id="æ”»ç•¥">æ”»ç•¥</h2>
<p>Git åŸç†å…¥é—¨ <a href="http://www.ruanyifeng.com/blog/2018/10/git-internals.html">http://www.ruanyifeng.com/blog/2018/10/git-internals.html</a></p>
<p>Git åˆ†æ”¯ç®¡ç†ç­–ç•¥ <a href="http://www.ruanyifeng.com/blog/2012/07/git.html">http://www.ruanyifeng.com/blog/2012/07/git.html</a></p>
<p>Git å·¥ä½œæµç¨‹ <a href="http://www.ruanyifeng.com/blog/2015/12/git-workflow.html">http://www.ruanyifeng.com/blog/2015/12/git-workflow.html</a></p>
<p>Git ä½¿ç”¨è§„èŒƒæµç¨‹ <a href="http://www.ruanyifeng.com/blog/2015/08/git-use-process.html">http://www.ruanyifeng.com/blog/2015/08/git-use-process.html</a></p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Fetch ä¸ Axios</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/fetch%E4%B8%8Eaxios/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/fetch%E4%B8%8Eaxios/</guid>
                <pubDate>Wed, 17 Jul 2019 10:27:44 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>åŸæ–‡ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch">ä½¿ç”¨Fetch</a>Â ã€<a href="https://github.com/axios/axios">axiosæ–‡æ¡£</a></p>
<h1 id="ä»€ä¹ˆæ˜¯-fetch-">ä»€ä¹ˆæ˜¯ fetch ï¼Ÿ</h1>
<p>ä»¥å‰é€šè¿‡JSè¿›è¡Œç½‘ç»œè¯·æ±‚éƒ½æ˜¯ä½¿ç”¨<code>ajax</code>ä¹Ÿå°±æ˜¯<code>XMLHttpRequest</code>å®ç°çš„ã€‚å¦‚æœç”¨åŸç”Ÿæ–¹å¼å®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p><code>Fetch API</code>æ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ä¸ªä»£æ›¿<code>XMLHttpRequest</code>çš„æ–°æ–¹æ³•ã€‚</p>
<h2 id="æ€ä¹ˆä½¿ç”¨-fetch-">æ€ä¹ˆä½¿ç”¨ fetch ï¼Ÿ</h2>
<p>æœ€ç®€å•çš„å½¢å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;http://example.com/movies.json&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">myJson</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myJson</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>âš ï¸éœ€è¦æ³¨æ„:</p>
<ol>
<li><code>fetch()</code>æ–¹æ³•è¿”å›çš„æ˜¯<code>promise</code>ã€‚</li>
<li>å½“<code>HttpçŠ¶æ€ç </code>æ˜¯<code>404</code>æˆ–è€…<code>500</code>æ—¶ä¹Ÿæ˜¯<code>resolve</code>ï¼Œä½†æ˜¯ä¼šå°†<code>resolve</code>çš„è¿”å›å€¼çš„<code>ok</code>å±æ€§è®¾ç½®ä¸º<code>false</code>ã€‚</li>
<li>åªæœ‰å½“ç½‘ç»œæ•…éšœæˆ–è€…è¯·æ±‚è¢«é˜»æ­¢æ—¶æ‰ä¼šæ˜¯<code>reject</code>ã€‚</li>
<li><code>resolve</code>ä¸­è¿›è¡Œ<code>response.json()</code>æ‰èƒ½æ‹¿åˆ°è¿”å›æ•°æ®ã€‚</li>
</ol>
<h2 id="æ€ä¹ˆè®¾ç½®-methodheaderç­‰å‚æ•°å‘¢">æ€ä¹ˆè®¾ç½® methodã€headerç­‰å‚æ•°å‘¢ï¼Ÿ</h2>
<p>fetch() æ–¹æ³•æ¥å—ç¬¬äºŒä¸ªå¯é€‰å‚æ•°â€”â€”ä¸€ä¸ªå¯¹è±¡â€”â€”ç”¨æ¥è®¾ç½®è¯·æ±‚çš„å‚æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span> <span class="c1">// must match &#39;Content-Type&#39; header
</span><span class="c1"></span>  <span class="nx">cache</span><span class="o">:</span> <span class="s1">&#39;no-cache&#39;</span><span class="p">,</span> <span class="c1">// *default, no-cache, reload, force-cache, only-if-cached
</span><span class="c1"></span>  <span class="nx">credentials</span><span class="o">:</span> <span class="s1">&#39;same-origin&#39;</span><span class="p">,</span> <span class="c1">// include, same-origin, *omit
</span><span class="c1"></span>  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;user-agent&#39;</span><span class="o">:</span> <span class="s1">&#39;Mozilla/4.0 MDN Example&#39;</span><span class="p">,</span>
    <span class="s1">&#39;content-type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span>
  <span class="p">},</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="c1">// *GET, POST, PUT, DELETE, etc.
</span><span class="c1"></span>  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;cors&#39;</span><span class="p">,</span> <span class="c1">// no-cors, cors, *same-origin
</span><span class="c1"></span>  <span class="nx">redirect</span><span class="o">:</span> <span class="s1">&#39;follow&#39;</span><span class="p">,</span> <span class="c1">// manual, *follow, error
</span><span class="c1"></span>  <span class="nx">referrer</span><span class="o">:</span> <span class="s1">&#39;no-referrer&#39;</span><span class="p">,</span> <span class="c1">// *client, no-referrer
</span><span class="c1"></span><span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>âš ï¸<code>credentials: 'include'</code> è¿™ä¸ªå­—æ®µå¯ä»¥è®©è¯·æ±‚å¸¦ä¸Š cookie ã€‚</p>
<h2 id="ä¸Šä¼ jsonæ•°æ®">ä¸Šä¼ JSONæ•°æ®</h2>
<p>âš ï¸éœ€è¦è®¾ç½®<code>header</code>çš„<code>'Content-Type': 'application/json'</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="c1">// or &#39;PUT&#39;
</span><span class="c1"></span>  <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span> <span class="c1">// data can be `string` or {object}!
</span><span class="c1"></span>  <span class="nx">headers</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
    <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span>
  <span class="p">})</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ä¸Šä¼ æ–‡ä»¶">ä¸Šä¼ æ–‡ä»¶</h2>
<p>âš ï¸éœ€è¦ä½¿ç”¨<code>FormData</code>ç±»ä½œä¸º<code>request</code>çš„<code>body</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">formData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">fileField</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;input[type=&#39;file&#39;]&#34;</span><span class="p">);</span>

<span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;abc123&#39;</span><span class="p">);</span>
<span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;avatar&#39;</span><span class="p">,</span> <span class="nx">fileField</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://example.com/profile/avatar&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;PUT&#39;</span><span class="p">,</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">formData</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="ä»€ä¹ˆæ˜¯-axios-">ä»€ä¹ˆæ˜¯ axios ï¼Ÿ</h1>
<p>å®ƒæ˜¯ä¸€ä¸ªåº“ï¼Œå¯ä»¥ç”¨<code>Promise</code>çš„æ–¹å¼è¿›è¡Œç½‘ç»œè¯·æ±‚ã€‚</p>
<h2 id="æ€ä¹ˆä½¿ç”¨-axios-">æ€ä¹ˆä½¿ç”¨ axios ï¼Ÿ</h2>
<h3 id="æœ€ç®€å•çš„å‡ ç§æ–¹å¼">æœ€ç®€å•çš„å‡ ç§æ–¹å¼</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// getè¯·æ±‚1
</span><span class="c1"></span><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user?ID=12345&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">();</span>
<span class="c1">// getè¯·æ±‚2
</span><span class="c1"></span><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,{</span>
  <span class="nx">params</span><span class="o">:</span><span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="mi">12345</span><span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">();</span>
<span class="c1">// postè¯·æ±‚
</span><span class="c1"></span><span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Fred&#39;</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Flintstone&#39;</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="åŒæ—¶è¿›è¡Œå¤šä¸ªè¯·æ±‚">åŒæ—¶è¿›è¡Œå¤šä¸ªè¯·æ±‚</h3>
<p>å‡ ä¸ªè¯·æ±‚éƒ½æˆåŠŸåï¼Œè¿›è¡Œåç»­æ“ä½œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">getUserAccount</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user/12345&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">getUserPermissions</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user/12345/permissions&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span><span class="nx">getUserAccount</span><span class="p">(),</span> <span class="nx">getUserPermissions</span><span class="p">()])</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">axios</span><span class="p">.</span><span class="nx">spread</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">acct</span><span class="p">,</span> <span class="nx">perms</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Both requests are now complete
</span><span class="c1"></span>  <span class="p">}));</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ä½¿ç”¨asyncawait">ä½¿ç”¨<code>async/await</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">async</span> <span class="kd">function</span> <span class="nx">getUser</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/user?ID=12345&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="åˆ›å»ºå®ä¾‹ç»Ÿä¸€é…ç½®è®¾ç½®ç»Ÿä¸€å¤„ç†è¯·æ±‚å“åº”">åˆ›å»ºå®ä¾‹â€”â€”ç»Ÿä¸€é…ç½®ã€è®¾ç½®ï¼Œç»Ÿä¸€å¤„ç†è¯·æ±‚ã€å“åº”</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">baseURL</span><span class="o">:</span> <span class="s1">&#39;https://some-domain.com/api/&#39;</span><span class="p">,</span>
  <span class="nx">timeout</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span> <span class="s1">&#39;foobar&#39;</span><span class="p">},</span>
  <span class="nx">transformRequest</span><span class="o">:</span> <span class="p">[</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">headers</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Do whatever you want to transform the data
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">}],</span>
  <span class="nx">transformResponse</span><span class="o">:</span> <span class="p">[</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Do whatever you want to transform the data
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">}],</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„âš ï¸</p>
<ol>
<li>æ²¡æœ‰transformResponseå±æ€§æ—¶ï¼Œresopnseä¸­çš„dataæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</li>
<li>åŠ äº†transformResponseå±æ€§åï¼ˆå³ä¾¿å®ƒæ˜¯ç©ºçš„æ–¹æ³•ï¼‰ï¼Œresopnseçš„dataä¼šå˜æˆå­—ç¬¦ä¸²ã€‚</li>
<li>å¦‚æœæƒ³å¯¹responseåšç»Ÿä¸€å¤„ç†ï¼Œå¯ä»¥åœ¨æ‹¦æˆªä¸­åšã€‚</li>
</ol>
<h3 id="æ‹¦æˆªå“åº”æˆ–è¯·æ±‚">æ‹¦æˆªå“åº”æˆ–è¯·æ±‚</h3>
<p>è¿™é‡Œçš„dataä¼šå—åˆ°ä¸Šé¢çš„transformResponseå½±å“ï¼Œä¸åŠ çš„æ—¶å€™å°±æ˜¯å¯¹è±¡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// å“åº”æ‹¦æˆªå™¨
</span><span class="c1"></span><span class="nx">instance</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">error</span> <span class="o">===</span> <span class="mi">1500</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">&#39;ed_tokenå¤±æ•ˆï¼Œerror code:1500&#39;</span><span class="p">);</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="s1">&#39;ed_token&#39;</span><span class="p">)</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="s1">&#39;ed_user_info&#39;</span><span class="p">)</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="k">new</span> <span class="nx">Event</span><span class="p">(</span><span class="s1">&#39;authErrorAngToLogin&#39;</span><span class="p">))</span>
        <span class="c1">// return Promise.reject(response.data);
</span><span class="c1"></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
</span><span class="c1"></span>    <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>åˆå§‹çš„headerçš„Authorizationå¯èƒ½æ˜¯æ— æ•ˆçš„ï¼Œéœ€è¦åœ¨ç™»å½•åæ›´æ–°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">my_axios</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;Authorization&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ä¸Šä¼ æ–‡ä»¶-1">ä¸Šä¼ æ–‡ä»¶</h3>
<p>ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li><code>file</code>æ–‡ä»¶å¯¹è±¡ä½¿ç”¨<code>Form</code>ç±»å­˜æ”¾</li>
<li><code>content-type</code>ä¸º<code>multipart/form-data</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">formData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
<span class="nx">formData</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="nx">file</span><span class="p">)</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
  <span class="s1">&#39;https://develop.com/upload&#39;</span><span class="p">,</span>
  <span class="nx">formData</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
      <span class="s1">&#39;Authorization&#39;</span><span class="o">:</span> <span class="s1">&#39;token&#39;</span><span class="p">,</span>
      <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;multipart/form-data&#39;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="p">=&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="å–æ¶ˆè¯·æ±‚">å–æ¶ˆè¯·æ±‚</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">login</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="nx">cancelToken</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`/user`</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">cancelToken</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">axios</span><span class="p">.</span><span class="nx">isCancel</span><span class="p">(</span><span class="nx">error</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Request canceled&#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">message</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­cancelTokenæ¯æ¬¡è°ƒç”¨loginæ—¶éœ€è¦é‡æ–°ç”Ÿæˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">CancelToken</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">CancelToken</span><span class="p">;</span><span class="c1">// å¯ä»¥å…¨å±€ä¸€ä¸ª
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">CancelToken</span><span class="p">.</span><span class="nx">source</span><span class="p">();</span><span class="c1">// æ¯æ¬¡è¯·æ±‚éƒ½è¦æ—¶è°ƒç”¨ç”ŸæˆcancelToken
</span></code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>åˆ©ç”¨useContextä½¿ç”¨ReactRouter</title>
                <link>https://wss.cool/react-router-hook.html</link>
                <guid isPermaLink="true">https://wss.cool/react-router-hook.html</guid>
                <pubDate>Mon, 08 Jul 2019 09:36:38 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="react-router-çš„historypush">React Router çš„history.push</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useContext</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">__RouterContext</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;react-router&#34;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">Login</span><span class="o">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">FC</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">token</span><span class="p">,</span> <span class="nx">setToken</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">history</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">__RouterContext</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">history</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/list&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">token</span><span class="p">,</span> <span class="nx">history</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()=&gt;</span><span class="nx">setToken</span><span class="p">(</span><span class="s1">&#39;666&#39;</span><span class="p">)}&gt;</span><span class="nx">ç™»å½•</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="o">&lt;</span><span class="err">/&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™æ®µä»£ç çš„é€»è¾‘æ˜¯ï¼Œç­‰çº§ç™»å½•æŒ‰é’®ï¼Œè®¾ç½®tokenå˜é‡ã€‚å½“tokenå˜é‡å˜åŒ–æ—¶ï¼Œè§¦å‘useEffectè°ƒç”¨ReactRouterçš„history.pushåˆ‡æ¢è·¯ç”±ã€‚historyå¯¹è±¡æ˜¯é€šè¿‡useContextè·å¾—åˆ°çš„ï¼Œå¯ä»¥æ‹¿åˆ°locationã€historyã€matchç­‰3ä¸ªå¯¹è±¡ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>webå‰ç«¯å¯¹å¯†ç åŠ å¯†çš„æ„ä¹‰</title>
                <link>https://wss.cool/posts/%E5%BF%83%E5%BE%97/web%E5%89%8D%E7%AB%AF%E5%AF%B9%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86%E7%9A%84%E6%84%8F%E4%B9%89/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%BF%83%E5%BE%97/web%E5%89%8D%E7%AB%AF%E5%AF%B9%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86%E7%9A%84%E6%84%8F%E4%B9%89/</guid>
                <pubDate>Sat, 06 Jul 2019 10:04:07 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h1 id="webå‰ç«¯å¯¹å¯†ç åŠ å¯†çš„æ„ä¹‰httpswwwv2excomt522221"><a href="https://www.v2ex.com/t/522221">webå‰ç«¯å¯¹å¯†ç åŠ å¯†çš„æ„ä¹‰</a></h1>
<blockquote>
<p>æœ‰çš„è¿ç»´æˆ–è€…åå°ä¼šè®°å½•åŒ…å«è¯·æ±‚ä½“çš„ access logï¼Œå¦‚æœä¸åŠ å¯†ï¼Œlog é‡Œé¢å°±æ˜¯æ˜æ–‡å¯†ç ã€‚è¿™ç§åœ¨æ¶æ„ä¸Šå‚ç›´æ‰©å±•&amp;å¤šå±‚çš„å…¬å¸å¾ˆå®¹æ˜“å‘ç”Ÿã€‚GitHub å°±ç¿»è½¦è¿‡ä¸€æ¬¡ï¼Œåœ¨è¯·æ±‚æ—¥å¿—é‡Œå‘ç°äº†æ˜æ–‡å¯†ç ï¼Œç„¶åå°±ç¾¤å‘é‚®ä»¶é€šçŸ¥ç”¨æˆ·æ”¹å¯†ç ã€‚ @lincanbin</p>
</blockquote>
<blockquote>
<p>ç”¨å•å‘å‡½æ•°â€œåŠ å¯†â€ç­‰åŒäºæ˜æ–‡ @hanru</p>
</blockquote>
<blockquote>
<p>èƒ½å¢åŠ æ”»å‡»çš„éš¾åº¦ã€‚å®‰å…¨é¢†åŸŸå¹¶ä¸æ˜¯éé»‘å³ç™½çš„ï¼Œå¦‚æœå°é‡æˆæœ¬èƒ½æŒ¡ä½å°å­¦ 3 å¹´çº§çš„å‚»å­æ”»å‡»ï¼Œé‚£å°±æœ‰æ„ä¹‰ @otakustay</p>
</blockquote>
<blockquote>
<p>ä»»ä½•æé«˜æ”»å‡»é—¨æ§›çš„åšæ³•éƒ½æ˜¯æœ‰æ„ä¹‰çš„ @newmlp</p>
</blockquote>
<blockquote>
<p>æ„Ÿè§‰ä¸€èˆ¬åŠ å¯†æ„ä¹‰ä¸å¤§ï¼Œä¸­é—´äººé‡æ”¾å°±å¯ä»¥äº†ï¼Œä½†èŠèƒœäºæ— ã€‚é¡ºä¾¿ä¸€è¯´ B ç«™é‡‡ç”¨çš„æ˜¯å‰ç«¯éå¯¹ç§°åŠ å¯† @lzvezr</p>
</blockquote>
<blockquote>
<p>éå¯¹ç§°åŠ å¯†ã€‚ç”¨å…¬é’¥åŠ å¯†ï¼ŒçŸ¥é“ JS æºç ä¹Ÿæ²¡ç”¨ã€‚ä½†æ˜¯æˆ‘è§‰å¾—åœ¨ HTTPS ä¸‹é¢æ²¡å¿…è¦ã€‚å¦å¤–ï¼Œå¦‚æœè¿›æ—¥å¿—ï¼Œè‚¯å®šä¸è¦å­˜å¯†ç å•Šã€‚å¦‚æœåŸå°è¿›æ—¥å¿—ï¼Œé‚£æ‰€æœ‰åŠ å¯†éƒ½æ²¡æœ‰æ„ä¹‰ã€‚å› ä¸ºè¿™ä¸ªåŠ å¯†è¿‡çš„å¯†ç æœ¬æ¥å°±å¯ä»¥ä»å‰ç«¯ç™»å½•è¿›å»ã€‚æˆ‘åªæ˜¯ä¸çŸ¥é“æ˜æ–‡è€Œå·²ã€‚CDN å•†æ˜¯å¯ä»¥æ‹¦æˆªä¿å­˜ï¼Œæ‰€ä»¥ä¸è¦å•¥çš„éƒ½ç»è¿‡ CDNã€‚åŸºäºä¸Šé¢çš„åˆ†æï¼Œè¿˜æœ‰ä¸€ç§æ¯”è¾ƒç¨³å¦¥çš„æ–¹å¼æ˜¯å‰ç«¯å¯†ç æäº¤çš„æ—¶å€™ï¼Œé™„ä¸Š timestampï¼Œç”¨ RSA å…¬é’¥åŠ å¯†ï¼ŒæœåŠ¡å™¨ç§é’¥è§£å¯†åéªŒè¯æ—¶é—´ï¼Œç„¶åç™»å½•ä¸€æ¬¡ timestamp ä½œåºŸã€‚è¿™æ ·æ—¥å¿—æ³„éœ²æˆ–è€…è¢«æ‹¦æˆªï¼Œä¹Ÿæ— æ³•ç”¨åŸå¯†æ–‡é‡æ”¾ @lhx2008</p>
</blockquote>
<blockquote>
<p>çœ‹äº†ä¸‹è‹¹æœã€å¾®è½¯ã€è°·æ­Œã€fb è¿™å‡ ä¸ªç™»å½•é¡µé¢éƒ½æ˜¯æ˜æ–‡ä¼ è¾“å¯†ç çš„ï¼Œç™¾åº¦ã€æ·˜å®ã€qq éƒ½æ˜¯å…ˆå‰ç«¯åŠ å¯†ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯åœ¨å›½å¤–æ²¡æ„ä¹‰ï¼Œå›½å†…æœ‰æ„ä¹‰ @iiji86</p>
</blockquote>
<h1 id="ç”¨æˆ·å¯†ç å®‰å…¨æ€§è®¾è®¡httpsblogcoderzhcom20160103security-design"><a href="https://blog.coderzh.com/2016/01/03/security-design/">ç”¨æˆ·å¯†ç å®‰å…¨æ€§è®¾è®¡</a></h1>
<h1 id="å³ä½¿è¢«æ‹–åº“ä¹Ÿå¯ä»¥ä¿è¯å¯†ç ä¸æ³„éœ²httpsblogcoderzhcom20160110a-password-security-design-example"><a href="https://blog.coderzh.com/2016/01/10/a-password-security-design-example/">å³ä½¿è¢«æ‹–åº“ï¼Œä¹Ÿå¯ä»¥ä¿è¯å¯†ç ä¸æ³„éœ²</a></h1>
<h1 id="å‰ç«¯rsaç§é’¥åŠ å¯†httpsgithubcomtravistjsencrypt"><a href="https://github.com/travist/jsencrypt">å‰ç«¯rsaç§é’¥åŠ å¯†</a></h1>
<h1 id="webå‰ç«¯å¯†ç åŠ å¯†æ˜¯å¦æœ‰æ„ä¹‰---w2014çš„å›ç­”httpswwwzhihucomquestion25539382answer539557939"><a href="https://www.zhihu.com/question/25539382/answer/539557939">Webå‰ç«¯å¯†ç åŠ å¯†æ˜¯å¦æœ‰æ„ä¹‰ï¼Ÿ - w2014çš„å›ç­”</a></h1>
<p>äº‹å®ä¸Šç°ä»£å¯†ç å­¦å·²ç»å¯ä»¥åšåˆ°å¾ˆå¤šè®©äººéš¾ä»¥æƒ³è±¡çš„äº‹æƒ…äº†ä¸‹é¢æ˜¯ä¸€äº›æœ‰ä¸€ç‚¹â€œåå¸¸è¯†â€çš„ç»“è®º<br>
1.Aå¯ä»¥å‘Bè¯æ˜è‡ªå·±æ‹¥æœ‰ä¸€ä¸ªå¯†ç ï¼Œä½†æ˜¯å¦‚æœBæ˜¯å‡å†’çš„éªŒè¯è€…ï¼ŒAä¸ä¼šé€éœ²å…³äºå¯†ç çš„ä»»ä½•ä¿¡æ¯ç»™Bã€‚â€”â€”â€œé›¶çŸ¥è¯†è¯æ˜â€<br>
2.Aå¯ä»¥å’ŒBæ¯”è¾ƒè‡ªå·±æŒæœ‰çš„ä¸€ä¸ªå€¼çš„å¤§å°å…³ç³»ï¼Œè€Œä¸æ³„éœ²è¿™ä¸ªå€¼ç»™å¯¹æ–¹ã€‚â€”â€”â€œç™¾ä¸‡å¯Œç¿é—®é¢˜â€<br>
3.Aå¯ä»¥ç»™Bå‘æ¥çš„ä¸€æ®µä¿¡æ¯è¿›è¡Œç”µå­ç­¾åï¼Œè€Œä¸çŸ¥é“ä¿¡æ¯çš„å†…å®¹ã€‚â€”â€”â€œç›²ç­¾åâ€<br>
4.Aå’ŒBå¯ä»¥ï¼Œåœ¨æ²¡æœ‰å…¬æ­£ç¬¬ä¸‰äººçš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œç­‰æ¦‚ç‡èƒœè´Ÿçš„åšå¼ˆã€‚â€”â€”â€œç”µå­åšå¼ˆâ€<br>
5.é‚®ä»¶æœåŠ¡ï¼Œå¦‚æœä¸è€ƒè™‘æ³•å¾‹é£é™©çš„è¯ï¼Œæ˜¯å¯ä»¥åšåˆ°è®©æœåŠ¡å™¨çœ‹ä¸åˆ°ä½ çš„é‚®ä»¶å†…å®¹çš„ã€‚â€”â€”PGP<br>
6.ç ´è§£4096ä½RSAæ˜¯å›°éš¾çš„ã€‚â€”â€”å³ä½¿ç”¨è¶…ç®—ä¹Ÿå¦‚æ­¤ã€‚ç ´è§£256ä½AESæ˜¯å›°éš¾çš„ã€‚â€”â€”å³ä½¿ç”¨é‡å­è®¡ç®—ä¹Ÿå¦‚æ­¤ã€‚ç ´è§£OTPç³»ç»Ÿæ˜¯å›°éš¾ï¼ˆåˆ’æ‰ï¼‰ä¸å¯èƒ½çš„ã€‚â€”â€”å³ä½¿å¤©é¡¶æ˜Ÿäººæ¥äº†ä¹Ÿå¦‚æ­¤ã€‚<br>
7.ä¸€ä¸ªå¥½çš„åŠ å¯†ç®—æ³•çœŸçš„åº”è¯¥æ˜¯å…¬å¼€çš„â€”â€”å®ƒå¯ä»¥æ¥å—æ›´å¤šäººçš„æ£€éªŒã€‚    ä¸€ä¸ªå¥½çš„å¯†ç ç³»ç»Ÿä¸ä¸€å®šæ˜¯å…¬å¼€çš„â€”â€”ä½†æ˜¯å®ƒåº”è¯¥æŒ‰ç…§å¯ä»¥å…¬å¼€é™¤äº†å¯†ç ä¹‹å¤–çš„ä¸€åˆ‡è€Œä¾æ—§å®‰å…¨æ¥è®¾è®¡ã€‚<br>
8.å¯ä»¥å®ç°è¿™æ ·çš„ç®—æ³•ï¼Œä½¿å¾—ç­å¹²éƒ¨ä¸­çš„ä»»ä½•ä¸€ä¸ªå‡å¯ä»¥ä»¥ç­å§”ä¼šçš„åä¹‰ä¸‹è¾¾é€šçŸ¥ï¼Œä¸”å…¶ä»–äººï¼Œé™¤äº†ç­é•¿ä¹‹å¤–ï¼Œéƒ½ä¸çŸ¥é“å…·ä½“ä¸‹è¾¾è€…ã€‚<br>
9.å¯†ç ç³»ç»Ÿçš„å®‰å…¨æ€§å–å†³äºæœ€å¼±çš„ä¸€ç¯â€¦â€¦å½“å¹´æ˜¯è°è¯´çš„â€œåªç”¨httpsä¿æŠ¤ç™»å½•ç•Œé¢å°±å¤Ÿäº†â€çš„æ¥ç€â€¦ä½ çš„tokenä¹Ÿä¼šè¢«ç›—<br>
10.å¤§å¤šæ•°å¯†ç ç³»ç»Ÿéƒ½ä¸æ˜¯è¢«æ­£é¢æ”»ç ´çš„â€¦è€Œæ˜¯å®ç°è¿‡ç¨‹ä¸­å‡ºäº†å·®é”™â€¦<br>
11.ä»¥ä¸Šå†…å®¹ï¼ŒçœŸçš„ï¼ŒçœŸçš„ï¼Œåœ¨å¤§å¤šæ•°çš„å¯†ç å­¦æ•™æä¸Šéƒ½èƒ½æ‰¾åˆ°â€”â€”ç”šè‡³è¿˜æœ‰ç”¨åˆ°çš„ä¸€äº›ç®—æ³•å®‰å…¨æ€§çš„æ•°å­¦è¯æ˜â€¦</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%BF%83%E5%BE%97%E4%B8%8E%E7%BB%8F%E9%AA%8C/">å¿ƒå¾—ä¸ç»éªŒ</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>ä¸ºåšå®¢æ‰“é€ åœ¨çº¿ç¼–è¾‘å™¨</title>
                <link>https://wss.cool/online-editor-for-markdown-blog/</link>
                <guid isPermaLink="true">https://wss.cool/online-editor-for-markdown-blog/</guid>
                <pubDate>Sun, 23 Jun 2019 21:12:32 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="åˆè¡·">åˆè¡·</h2>
<p>åšå®¢çš„å†…å®¹æ—¶ä½¿ç”¨gitç®¡ç†çš„ã€‚åœ¨å…¬å¸çš„ç”µè„‘å’Œå®¶é‡Œçš„ä¸¤å°ç”µè„‘ä¸Šéƒ½æœ‰å†™åšå®¢çš„éœ€æ±‚ï¼Œé‚£ä¹ˆåœ¨3ä¸ªç«¯çš„æ¯æ¬¡çš„pullå’Œpushå°±æ˜¾å¾—æœ‰ä¸€ç‚¹éº»çƒ¦ã€‚å¦‚æœæœ‰ä¸€ä¸ªåŸºäºæµè§ˆå™¨è®¿é—®çš„ç¼–è¾‘å™¨å°±èˆ’æœå¤šäº†ã€‚</p>
<h2 id="æ„æ€">æ„æ€</h2>
<p>æˆ‘çš„åšå®¢ä½¿ç”¨äº†hugoï¼Œå®ƒçš„å†…å®¹æ˜¯åŸºäºmarkdownæˆ–htmlçš„ï¼Œæ‰€ä»¥å¦‚æœæŠŠåšå®¢æºæ–‡ä»¶æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼ŒåŒæ—¶æ­å»ºä¸€ä¸ªå¯ä»¥ç¼–è¾‘è¿™äº›æºæ–‡ä»¶çš„åå°ï¼Œå°±å¯ä»¥å®ç°åŸºäºæµè§ˆå™¨ç¼–è¾‘åšå®¢äº†ã€‚</p>
<p>vscodeå¼€æºäº†ä»–ä»¬çš„ç¼–è¾‘å™¨monaco-editorï¼Œå¯ä»¥ä½¿ç”¨å®ƒä½œä¸ºæµè§ˆå™¨ä¸­çš„ç¼–è¾‘å™¨ã€‚</p>
<p>åœ¨æ­å»ºä¸€ä¸ªåå°ç¨‹åºæ¥è¯»å–åšå®¢æ–‡ç« å†…å®¹ï¼Œé…åˆè‹¥å¹²æ¥å£å®ç°ä¿å­˜ã€åˆ›å»ºã€åˆ é™¤ã€ç™»å½•ç­‰åŠŸèƒ½å³å¯ã€‚</p>
<h2 id="editoré¡¹ç›®">editoré¡¹ç›®</h2>
<p>æ­¤é¡¹ç›®ä½œä¸ºåå°æœåŠ¡ï¼Œéœ€è¦æä¾›çš„æ¥å£æœ‰ï¼š</p>
<ol>
<li>åˆ›å»ºæ–‡ç« </li>
<li>ä¿å­˜æ–‡ç« </li>
<li>æäº¤åˆ°gitå¹¶pushåˆ°ä»“åº“ï¼Œå¹¶æ‰“åŒ…å‘å¸ƒã€‚</li>
</ol>
<p>å‡†å¤‡ä½¿ç”¨golangå®ç°ã€‚éœ€è¦ç”¨åˆ°çš„golangçš„apiæœ‰ï¼š
â€¦â€¦</p>
<h3 id="åˆ¶ä½œimage">åˆ¶ä½œimage</h3>
<pre><code>sudo docker image build -t myeditor .
</code></pre><h3 id="å¯åŠ¨å®¹å™¨">å¯åŠ¨å®¹å™¨</h3>
<pre><code>sudo docker container run -d  --rm -p 3000:3000 -v &quot;/home/wang/code/hugo/content/posts&quot;:/app/blog myeditor
</code></pre><h2 id="hugoé¡¹ç›®ä¸­çš„docker">hugoé¡¹ç›®ä¸­çš„docker</h2>
<h3 id="ç”Ÿæˆimage">ç”Ÿæˆimage</h3>
<pre><code>sudo docker image build -t site .
</code></pre><h3 id="å¯åŠ¨nginxå®¹å™¨">å¯åŠ¨nginxå®¹å™¨</h3>
<pre><code>sudo docker container run --rm --name myblog \
-p 80:80 -p 443:443 -d \
--volume &quot;$PWD/public&quot;:/usr/share/nginx/html site
</code></pre><h3 id="æ‰“åŒ…hugo">æ‰“åŒ…hugo</h3>
<pre><code>hugo --baseURL https://wowfriday.cn/
</code></pre><pre><code>hugo serve --renderToDisk --baseURL https://wowfriday.cn/ --appendPort=false
hugo serve --renderToDisk --appendPort=false
</code></pre>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>å‰ç«¯çŸ¥è¯†ç‚¹</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/</guid>
                <pubDate>Mon, 17 Jun 2019 02:03:56 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://time.geekbang.org/column/article/12271">å·¦è€³æœµè€—å­</a></p>
<h1 id="css">css</h1>
<ul>
<li>é€‰æ‹©å™¨
<ul>
<li>ä¼˜å…ˆçº§</li>
<li>ä¼ªç±»</li>
<li>ä¼ªå…ƒç´ </li>
</ul>
</li>
<li>ç›’å­
<ul>
<li>ç›’å­æ¨¡å‹</li>
<li>å†…å®¹ã€å†…è¾¹è·ã€è¾¹æ¡†ã€å¤–è¾¹è·ã€box-sizing</li>
<li>èƒŒæ™¯é¢œè‰²ã€èƒŒæ™¯å›¾ç‰‡ã€èƒŒæ™¯æ¸å˜è‰²</li>
<li>outlineã€box-shadow</li>
</ul>
</li>
<li>å¤–è¾¹è·åˆå¹¶</li>
<li>å¸ƒå±€</li>
<li>æµ®åŠ¨å’Œå®šä½åœ¨å†…çš„ä¼ ç»Ÿå¸ƒå±€æ–¹æ³•</li>
<li>å¼¹æ€§ç›’ï¼ˆflexboxï¼‰å¸ƒå±€</li>
<li>ä¹¦å†™è§„èŒƒ</li>
<li>less</li>
</ul>
<h1 id="jsæ ¸å¿ƒåŸç†">JSæ ¸å¿ƒåŸç†</h1>
<p>äº†è§£å¥½çš„ç‰¹æ€§å’Œå„ç§å‘ã€‚</p>
<ul>
<li>ã€ŠJSè¯­è¨€ç²¾ç²¹ã€‹</li>
<li>ã€ŠJSå¿è€…ç§˜ç±ã€‹</li>
<li>ã€ŠEffective JSã€‹çš„68æ¡ç²¾åå»ºè®®</li>
<li>ã€Šæ·±å…¥æµ…å‡ºES6ã€‹</li>
</ul>
<h1 id="æµè§ˆå™¨åŸç†">æµè§ˆå™¨åŸç†</h1>
<h2 id="how-browsers-works">How browsers works</h2>
<p>åŸæ–‡çš„ç¿»è¯‘<a href="link1">How browsers works</a></p>
<h2 id="virtual">Virtual</h2>
<hr>
<h1 id="ç½‘ç»œåè®®">ç½‘ç»œåè®®</h1>
<ul>
<li>High Performance Browser Networking</li>
<li>http2</li>
<li>websocket</li>
</ul>
<h1 id="å‰ç«¯æ€§èƒ½">å‰ç«¯æ€§èƒ½</h1>
<h1 id="æ¡†æ¶">æ¡†æ¶</h1>
<h1 id="å®è·µ">å®è·µ</h1>
<ul>
<li>è·¨åŸŸ</li>
<li>AJAX &amp; Fetch &amp; Axios</li>
</ul>
<p>[link1][https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/]</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Favicon Emoji</title>
                <link>https://wss.cool/favicon-emoji.html</link>
                <guid isPermaLink="true">https://wss.cool/favicon-emoji.html</guid>
                <pubDate>Wed, 12 Jun 2019 17:58:07 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>å…ˆåŠ ä¸€ä¸ªè¿™ä¸ª</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span> <span class="na">data-emoji</span><span class="o">=</span><span class="s">&#34;ğŸ›°&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/png&#34;</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>åœ¨æ¥ä¸€æ®µjs</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">favicon</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&#34;link[rel=icon]&#34;</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">favicon</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">emoji</span> <span class="o">=</span> <span class="nx">favicon</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&#34;data-emoji&#34;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">emoji</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;canvas&#34;</span><span class="p">);</span>
    <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">64</span><span class="p">;</span>
    <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">64</span><span class="p">;</span>

    <span class="kr">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&#34;2d&#34;</span><span class="p">);</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">&#34;64px serif&#34;</span><span class="p">;</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="nx">emoji</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">64</span><span class="p">);</span>

    <span class="nx">favicon</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">toDataURL</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Linuxçš„ç®€å•ä½¿ç”¨</title>
                <link>https://wss.cool/linux.html</link>
                <guid isPermaLink="true">https://wss.cool/linux.html</guid>
                <pubDate>Tue, 11 Jun 2019 23:02:30 +0800</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="å®‰è£…äºŒè¿›åˆ¶è½¯ä»¶">å®‰è£…äºŒè¿›åˆ¶è½¯ä»¶</h2>
<ol>
<li>ä¸‹è½½tar.gzå‹ç¼©åŒ…</li>
<li>use the command <code>tar vxzf hugo.tar.gz </code></li>
<li>move lib to <code>/usr/local/bin</code>, command:<code>mv ~/download/hugo /usr/local/bin/hugo</code></li>
<li>set path <code>vim ~/.zshrc</code></li>
<li>add <code>export PATH=/usr/local/bin/hugo:$PATH</code></li>
<li><code>source ~/.zshrc</code></li>
</ol>
<h2 id="å¤åˆ¶">å¤åˆ¶</h2>
<p>sudo cp -r public /usr/share/nginx/html/blog</p>
<h2 id="ç«¯å£è¢«å ç”¨">ç«¯å£è¢«å ç”¨</h2>
<p>lsof -i :80</p>
<h2 id="è§£æåŸŸå">è§£æåŸŸå</h2>
<p>apt install dig</p>
<p>dig wss.cool</p>
<h2 id="è®¾ç½®æ¢¯å­-å®¢æˆ·ç«¯">è®¾ç½®æ¢¯å­-å®¢æˆ·ç«¯</h2>
<p>ä½¿ç”¨shadowsocks-libevï¼Œ</p>
<p>å®‰è£… <code>sudo apt-get install shadowsocks-libev</code></p>
<p>é…ç½®æ–‡ä»¶åœ¨ <code>/etc/shadowsocks-libev/config.json</code></p>
<p>ä¿®æ”¹åå¯åŠ¨æœåŠ¡ <code>systemctl start shadowsocks-livev-local@config</code></p>
<p>å¼€æœºè‡ªå¯åŠ¨ <code>systemctl enable shadowsocks-livev-local@config</code></p>
<p>å¯ä»¥æŸ¥çœ‹æ—¥å¿— <code>journalctl -u shadowsocks-livev-local@config</code></p>
<h2 id="ä½¿ç”¨systemdå¯åŠ¨å…³é—­javaç¨‹åº">ä½¿ç”¨systemdå¯åŠ¨å…³é—­Javaç¨‹åº</h2>
<p><a href="https://stackoverflow.com/a/28704296/6021280">å‚è€ƒ1</a></p>
<p>ä½¿ç”¨spring bootåˆ›å»ºçš„é¡¹ç›®ï¼Œä½¿ç”¨mavenæ‰“åŒ…å‡ºæ¥æˆjaråŒ…ã€‚ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œè¿™é‡Œä½¿ç”¨linuxçš„systemdæ¥å¼€å¯å’Œå…³é—­javaç¨‹åºã€‚</p>
<p>é¦–å…ˆæ‰¾åˆ°ç”¨æˆ·å®šä¹‰çš„serviceç›®å½•ï¼Œubuntuæ˜¯åœ¨<code>/etc/systemd/system</code>ï¼Œå…¶ä»–å‘è¡Œç‰ˆå¯èƒ½åœ¨<code>/usr/lib/systemd/system/</code></p>
<p>ç¬¬äºŒæ­¥ï¼Œåœ¨å…¶ä¸­åˆ›å»ºæ–‡ä»¶<code>åå­—.service</code>ï¼Œæˆ‘çš„æ˜¯å«<code>blog.service</code>ï¼Œç¼–è¾‘æ–‡ä»¶ã€‚</p>
<pre><code>[Unit]
Description=webserver Daemon

[Service]
ExecStart=/usr/bin/java -jar /web/server.jar
User=ubuntu

[Install]
WantedBy=multi-user.target
</code></pre><p>ç¬¬ä¸‰æ­¥ï¼Œå¯åŠ¨/å…³é—­/æŸ¥çœ‹çŠ¶æ€ã€‚</p>
<p>å‘½ä»¤å¯ä»¥è¿™æ ·ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo systemctl start blog.service <span class="c1"># starts the service</span>
sudo systemctl stop blog.service <span class="c1"># stops the service</span>

sudo systemctl status blog.service
sudo systemctl restart blog.service <span class="c1"># restarts the service</span>

sudo systemctl <span class="nb">enable</span> blog.service <span class="c1"># auto starts the service</span>
sudo systemctl disable blog.service <span class="c1"># stops autostart</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿˜å¯ä»¥è¿™æ ·ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo service blog start/stop/status/restart
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">æœåŠ¡å™¨</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/linux/">linux</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/%E5%85%A5%E9%97%A8/">å…¥é—¨</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>docker</title>
                <link>https://wss.cool/docker.html</link>
                <guid isPermaLink="true">https://wss.cool/docker.html</guid>
                <pubDate>Thu, 06 Jun 2019 01:47:46 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ubuntuå®‰è£…docker">ubuntuå®‰è£…docker</h2>
<p>ä½¿ç”¨æ¸…åæºå®‰è£…ï¼Œ<a href="https://mirror.tuna.tsinghua.edu.cn/help/docker-ce/">åœ°å€</a>ï¼ŒæŒ‰ç…§æ–‡æ¡£æ“ä½œå³å¯ã€‚</p>
<h2 id="è®¾ç½®dockeræºä¸ºé˜¿é‡Œé•œåƒ">è®¾ç½®dockeræºä¸ºé˜¿é‡Œé•œåƒ</h2>
<pre><code>sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://2sjdzxnu.mirror.aliyuncs.com&quot;]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre><h2 id="tensorflow">tensorflow</h2>
<p>ç³»ç»Ÿubuntu 18.04ï¼Œæ˜¾å¡Gtx950ï¼Œé©±åŠ¨390ã€‚</p>
<ol>
<li>å®‰è£…<code>nvidia-docker</code>å’Œ<code>nvidia-container-runtime</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey <span class="p">|</span> <span class="se">\
</span><span class="se"></span>  sudo apt-key add -
<span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>. /etc/os-release<span class="p">;</span><span class="nb">echo</span> <span class="nv">$ID$VERSION_ID</span><span class="k">)</span>
curl -s -L https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.list <span class="p">|</span> <span class="se">\
</span><span class="se"></span>  sudo tee /etc/apt/sources.list.d/nvidia-docker.list
sudo apt-get update
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sudo apt-get install -y nvidia-docker2<span class="o">=</span>2.0.3+docker18.09.1-1 nvidia-container-runtime<span class="o">=</span>2.0.0+docker18.08.1-1
sudo pkill -SIGHUP dockerd
</code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ä¸€ä¸‹</p>
<p><code>docker run --runtime=nvidia --rm nvidia/cuda:9.0-base nvidia-smi</code></p>
<p><a href="https://github.com/NVIDIA/nvidia-docker/issues/578">å¦‚æœæŠ¥é”™<code>docker: Error response from daemon: Unknown runtime specified nvidia.</code></a></p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<blockquote>
<p>Systemd drop-in file
sudo mkdir -p /etc/systemd/system/docker.service.d
sudo tee /etc/systemd/system/docker.service.d/override.conf &lt;&lt;EOF
[Service]
ExecStart=
ExecStart=/usr/bin/dockerd --host=fd:// --add-runtime=nvidia=/usr/bin/nvidia-container-runtime
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
Daemon configuration file
sudo tee /etc/docker/daemon.json &lt;&lt;EOF
{
&quot;runtimes&quot;: {
&quot;nvidia&quot;: {
&quot;path&quot;: &quot;/usr/bin/nvidia-container-runtime&quot;,
&quot;runtimeArgs&quot;: []
}
}
}
EOF
sudo pkill -SIGHUP dockerd
å†æ¬¡æµ‹è¯•ã€‚</p>
</blockquote>
<ol start="2">
<li>å®‰è£…tensorflowçš„dockerï¼Œ<a href="https://github.com/NVIDIA/nvidia-docker/issues/931">ç”±äºé©±åŠ¨æ—§ï¼Œä¸èƒ½ä½¿ç”¨æœ€æ–°çš„tensorflowç‰ˆæœ¬</a>ï¼Œå°±å…ˆç”¨1.11.0ç‰ˆæœ¬ã€‚è¿˜è¦ç”¨python3ï¼Œæ‰€ä»¥å®‰è£…çš„docker imageæ˜¯è¿™ä¸ª<code>sudo docker pull tensorflow/tensorflow:1.11.0-gpu-py3</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sudo docker run -p 8888:8888 --volume <span class="s2">&#34;</span><span class="nv">$PWD</span><span class="s2">&#34;</span>:/notebooks --runtime<span class="o">=</span>nvidia -it tensorflow/tensorflow:1.11.0-gpu-py3
</code></pre></td></tr></table>
</div>
</div><p>å¯åŠ¨åä¼šç›´æ¥æ‰“å¼€ä¸€ä¸ªjupyterï¼Œå¯ä»¥å…ˆåšä¸€ä¸‹gpuçš„æµ‹è¯•ã€‚
è¿™æ ·å°±ç®—æ˜¯æ­å·GPUç¯å¢ƒäº†ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸ªç¯å¢ƒä¸­æ²¡æœ‰å®‰è£…opencv-pythonæˆ–è€…opencv-contrib-pythonï¼Œä¹Ÿæ²¡æœ‰ï½/.keras/modelsinception_v3_weights_tf_dim_ordering_tf_kernels_notop.h5æ–‡ä»¶ã€‚</p>
<p>è¿™é‡Œå¯èƒ½éœ€è¦è‡ªå·±å†æ‰“åŒ…ä¸€ä¸ªimageï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª<a href="https://blog.csdn.net/chenming_hnu/article/details/70184543">é“¾æ¥</a><br>
è¿˜å¯ä»¥è¯•ä¸€ä¸‹ç”¨æ˜ å°„è§£å†³</p>
<p><code>--volume</code>ä¸ºâ€œæ˜ å°„â€ï¼Œå½“å‰ç›®å½•ï¼ˆ$PWDï¼‰ä¸­çš„æ–‡ä»¶ï¼Œä¼šåæ˜ å®¹å™¨ä¸­ä¸ªçš„<code>/notebooks</code>ç›®å½•ä¸‹ã€‚<br>
tensorflowè¿™ä¸ªimageä¼šå¯åŠ¨ä¸€ä¸ªjupyterï¼Œå…¶ä¸­å°±å¯ä»¥è®¿é—®åˆ°<code>$PWD</code>ç›®å½•ã€‚</p>
<h2 id="è…¾è®¯äº‘çš„dockerä»“åº“">è…¾è®¯äº‘çš„dockerä»“åº“</h2>
<p>è´¦å·w..........<br>
å¯†ç w...1......</p>
<p><code>docker image build -t site . </code></p>
<p>æ–¹æ¡ˆ1ï¼šä½¿ç”¨<code>hugo</code>å‘½ä»¤æ‰‹åŠ¨å°†ä¹Ÿæ„å»ºåˆ°publicç›®å½•ï¼Œç„¶åå¯åŠ¨dockeræ˜¯æ˜ å°„ç›®å½•<br>
<code>sudo docker container run --rm --name myblog -p 80:80 -p 443:443 --volume &quot;$PWD/public&quot;:/usr/share/nginx/html site</code></p>
<p>æ–¹æ¡ˆ2ï¼šä½¿ç”¨<code>hugo server -D</code>å‘½ä»¤è¿è¡Œæµ‹è¯•æœåŠ¡å™¨ï¼Œä¿®æ”¹nginxçš„default.confæ–‡ä»¶ï¼ŒåŠ å…¥åå‘ä»£ç†é…ç½®ã€‚</p>
<p>ç™»å½•è…¾è®¯äº‘ docker registry</p>
<p><code>sudo docker login --username=wangshushuo hub.tencentyun.com</code><br>
ç™»å½• registry çš„ç”¨æˆ·åæ˜¯æ‚¨ Tencent Hub çš„ç”¨æˆ·åï¼Œå¯†ç æ˜¯æ‚¨å¼€é€š   Tencent Hub ç”¨æˆ·æ—¶è®¾ç½®çš„å¯†ç ã€‚</p>
<p>ä» registry æ‹‰å–é•œåƒ</p>
<p><code>sudo docker pull hub.tencentyun.com/wangshushuo/site:[tag]</code></p>
<p>å…¶ä¸­ [tag] è¯·æ ¹æ®æ‚¨çš„é•œåƒç‰ˆæœ¬ä¿¡æ¯è¿›è¡Œå¡«å†™ã€‚</p>
<p>å°†é•œåƒæ¨é€åˆ° registry</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sudo docker tag <span class="o">[</span>ImageId<span class="o">]</span> hub.tencentyun.com/wangshushuo/site:<span class="o">[</span>tag<span class="o">]</span>

sudo docker login --username<span class="o">=</span>wangshushuo hub.tencentyun.com
sudo docker tag site hub.tencentyun.com/wangshushuo/site
sudo docker push hub.tencentyun.com/wangshushuo/site
</code></pre></td></tr></table>
</div>
</div><h2 id="åŠ é€Ÿimageæ–‡ä»¶ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨">åŠ é€Ÿimageæ–‡ä»¶ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨ã€‚</h2>
<p>äº‘æœåŠ¡å™¨çš„å¿«å¸¦åªæœ‰1mï¼Œæˆ‘çŒœæµ‹ä¸Šä¼ é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œä¸€ä¸ªimageæ–‡ä»¶æœ‰ä¸ƒå…«åå…†ï¼Œå¯èƒ½è¦ä¸Šä¼ å¾ˆä¹…ã€‚</p>
<p>è…¾è®¯äº‘æœ‰å…è´¹çš„dockerä»“åº“ï¼Œå¯ä»¥ä¸Šä¼ imageæ–‡ä»¶ã€‚</p>
<p>å†ä»è…¾è®¯äº‘æœåŠ¡å™¨pull imageæ–‡ä»¶ï¼Œå°±å¾ˆå¿«ã€‚</p>
<h2 id="å°†wordpressçš„nginxé…ç½®æ”¹æ‰äº†">å°†wordpressçš„nginxé…ç½®æ”¹æ‰äº†</h2>
<p>dockerå¼€å¯åœ¨8080ç«¯å£ï¼Œä¿®æ”¹äº†åŸæ¥wpçš„é…ç½®ä¸ºï¼š</p>
<pre><code class="language-conf" data-lang="conf">server {
  listen 80;
  listen 443 ssl http2;
  ssl_certificate /usr/local/nginx/conf/ssl/1_wowfriday.cn_bundle.crt;
  ssl_certificate_key /usr/local/nginx/conf/ssl/2_wowfriday.cn.key;
  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  ssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
  ssl_prefer_server_ciphers on;
  ssl_session_timeout 10m;
  ssl_session_cache builtin:1000 shared:SSL:10m;
  ssl_buffer_size 1400;
  add_header Strict-Transport-Security max-age=15768000;
  ssl_stapling on;
  ssl_stapling_verify on;
  server_name wowfrday.cn;
  access_log /data/wwwlogs/wowfrday.cn_nginx.log combined;
  index index.html index.htm index.php;
  root /data/wwwroot/wowfrday.cn/;

  if ($ssl_protocol = &quot;&quot;) { return 301 https://$host$request_uri; }
  

  location /{
    proxy_pass https://localhost:8080;
  }
}
</code></pre><h2 id="phpmyadmin">phpmyadmin</h2>
<pre><code>docker run --name myphpadmin -d -e PMA_ARBITRARY=1 -p 8080:80 phpmyadmin/phpmyadmin
</code></pre>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>GraphQlä»‹ç»</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/graphql/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/graphql/</guid>
                <pubDate>Fri, 10 May 2019 06:58:48 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯graphql">ä»€ä¹ˆæ˜¯GraphQLï¼Ÿ</h2>
<p>å®˜ç½‘çš„ä»‹ç»ï¼šä¸€ç§ç”¨äºAPIçš„æŸ¥è¯¢è¯­è¨€ã€‚</p>
<p>é€šå¸¸è¯´åˆ°APIéƒ½æ˜¯è¯´è°ƒç”¨ï¼Œé‚£æŸ¥è¯¢APIæ˜¯ä»€ä¹ˆæ“ä½œå‘¢ï¼Ÿ</p>
<p>å¤§å®¶éƒ½çŸ¥é“SQLï¼Œæ•°æ®åº“çš„æŸ¥è¯¢è¯­è¨€ã€‚å…¶å®gqlå’Œsqlå°±æœ‰äº›ç›¸ä¼¼ã€‚</p>
<p>æ¯”å¦‚sqlæ˜¯è¿™æ ·çš„è¯­å¥ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-1.png" alt="" class="wp-image-356"   /> </figure></p>
<p>gqlä¹Ÿæ˜¯ä¸ªè¯­å¥ï¼Œå®ƒå¯ä»¥å†™æˆè¿™æ ·ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-2.png" alt="" class="wp-image-357" /> </figure></p>
<p>ä»–ä»¬éƒ½æ˜¯ä¸€ç§æŸ¥è¯¢è¯­è¨€ï¼Œç”¨ä¸€å®šçš„è¯­æ³•æ¥æè¿°ä½ æƒ³è¦çš„æ•°æ®ã€‚</p>
<p>ä¸Šé¢çš„gqlä¼šè¿”å›ä¸€ä¸ªjsonï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-3.png" alt="" class="wp-image-358"   /> </figure></p>
<p>è¿™ä¸ªæŸ¥è¯¢è¯­å¥å°±æ˜¯GraphQLï¼ˆgqlï¼‰ã€‚</p>
<h2 id="graphqlèƒ½å¹²å˜›">GraphQLèƒ½å¹²å˜›ï¼Ÿ</h2>
<p>çŸ¥é“äº†å®ƒæ˜¯ä»€ä¹ˆï¼Œè¿˜å¾—äº†è§£å®ƒæ˜¯åšä»€ä¹ˆäº‹çš„ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦åšä¸€ä¸ªéœ€æ±‚ï¼Œæ˜¯ä¸€ä¸ªè¿™æ ·çš„é¡µé¢ï¼Œé‡Œé¢æœ‰è‹¥å¹²æ•°æ®ã€‚<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-4-1024x212.png" alt="" class="wp-image-359"   /> </figure></p>
<p>è¿™äº›æ•°æ®ç”±ä¸€ä¸ªAPIæ¥å£è¿”å›ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-5.png" alt="" class="wp-image-360" /> </figure></p>
<p>åæ¥éœ€æ±‚å˜äº†ï¼Œæœ‰äº›æ•°æ®ä¸éœ€è¦æ˜¾ç¤ºäº†ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-6.png" alt="" class="wp-image-361"   /> </figure></p>
<p>é‚£ä¹ˆAPIæ¥å£ä¹Ÿå¯èƒ½åšå¯¹åº”çš„å˜åŒ–ã€‚<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-7.png" alt="" class="wp-image-362"   /> </figure></p>
<p>è¿™æ¬¡æ˜¯å‡å­—æ®µï¼Œä¹Ÿå¯èƒ½æ˜¯åŠ å­—æ®µã€‚è¿˜å¯èƒ½è¦è€ƒè™‘å…¼å®¹æ—§ç‰ˆæœ¬ï¼ˆAPPæˆ–ç°åº¦ï¼‰ï¼Œä¸æ”¹åŸæ¥çš„APIï¼Œé€šè¿‡åŠ APIæ¥åšæ–°éœ€æ±‚ã€‚</p>
<p>è¿™äº›ä¿®æ”¹ä¸ä»…æ¶ˆè€—æ—¶é—´å’Œç²¾åŠ›ã€‚é•¿æ—¶é—´çš„ç§¯ç´¯ï¼Œä¹Ÿä¼šåœ¨å‰åç«¯ï¼Œå‡ºç°å¾ˆå¤šå†—ä½™çš„å­—æ®µï¼Œå†—ä½™çš„APIã€‚ç»™é¡¹ç›®ç§¯ç´¯äº†ä¸€äº›æ··ä¹±å’Œé£é™©ã€‚</p>
<p>è¿™æ—¶å€™GraphQLå°±èƒ½æ´¾ä¸Šç”¨åœºäº†ã€‚çœ‹ä¸‹é¢çš„è§†é¢‘ã€‚ä¸ŠåŠéƒ¨åˆ†æ˜¯gqlè¯­å¥ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯æŸ¥è¯¢åˆ°çš„ç»“æœã€‚<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/å±å¹•å½•åˆ¶-2019-05-07-ä¸‹åˆ11.36.17.mp4" alt="" class="wp-image-363" /> </figure></p>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå¯¹äºheroå¯¹è±¡ï¼Œgqlå¯ä»¥åªæŸ¥è¯¢ä¸€ä¸ªnameå­—æ®µï¼Œä¹Ÿå¯ä»¥æŸ¥è¯¢3ä¸ªå­—æ®µã€‚</p>
<p>å¦‚æœç”¨gqlæ¥æŸ¥è¯¢APIæ¥å£ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½é¿å…ä¸Šé¢æåˆ°çš„â€œå†—ä½™çš„å­—æ®µï¼Œå†—ä½™çš„APIã€‚æ··ä¹±å’Œé£é™©ã€‚â€</p>
<p>è¿™é‡Œå¤§è‡´ä»‹ç»äº†GraphQLèƒ½åšçš„äº‹ã€‚</p>
<h2 id="å®ç°">å®ç°</h2>
<p>çŸ¥é“äº†GraphQLæ˜¯ä»€ä¹ˆå’Œèƒ½åšä»€ä¹ˆäº‹ï¼Œæ¥ä¸‹æ¥è¯¥ä»‹ç»æ€ä¹ˆå®ç°è¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆäº†ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“sqlæŸ¥è¯¢çš„æ˜¯æ•°æ®åº“ï¼Œæˆ‘ä»¬è¿è¡Œä¸€ä¸ªsqlè¯­å¥éœ€è¦åœ¨æ•°æ®åº“æœåŠ¡å™¨çš„ç¯å¢ƒã€‚åŒæ ·çš„è¿è¡Œä¸€ä¸ªgqlä¹Ÿéœ€è¦ä¸€ä¸ªgqlçš„æœåŠ¡å™¨ã€‚</p>
<p>å®ç°gqlæœåŠ¡å™¨å‰ï¼Œéœ€è¦å…ˆäº†è§£jiä¸ªgqlçš„æ¦‚å¿µï¼šschemaå’Œç±»å‹ã€‚</p>
<h3 id="gqlçš„ç±»å‹">gqlçš„ç±»å‹</h3>
<p>GraphQlæ˜¯é€šè¿‡<strong>ç±»å‹</strong>ç³»ç»Ÿæ¥å®šä¹‰æ•°æ®å’Œè¡Œä¸ºã€‚è¿™äº›<strong>ç±»å‹</strong>å°±éœ€è¦é€šè¿‡schemaè¯­å¥å®šä¹‰çš„ã€‚å…ˆçœ‹ä¸€æ®µschemaè¯­å¥ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-8-1024x570.png" alt="" class="wp-image-364"   /> </figure></p>
<p>ä½¿ç”¨typeå£°æ˜ä¸€ä¸ªç±»å‹ï¼Œå›¾ä¸­æœ‰3ä¸ªç±»å‹ï¼Œå…¶ä¸­<strong>Query</strong>å’Œ<strong>Mutation</strong>æ˜¯åŸå§‹ç±»å‹ï¼Œåˆ†åˆ«è¡¨ç¤º<strong>æŸ¥è¯¢</strong>å’Œ<strong>å˜æ›´</strong>ï¼Œè¿™ä¸¤ä¸ªç±»å‹å†…éƒ¨å°±æ˜¯å®šä¹‰æŸ¥è¯¢å’Œå˜æ›´çš„è¡Œä¸ºã€‚</p>
<p><strong>Book</strong>ç±»å‹æ˜¯æˆ‘ä»¬çš„æ•°æ®ç±»å‹ï¼Œæ˜¯è‡ªå®šä¹‰ç±»å‹ã€‚</p>
<p>schemaåªæ˜¯å®šä¹‰äº†æ•°æ®ç±»å‹å’Œè¡Œä¸ºç±»å‹ã€‚æœ‰äº†ç±»å‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®ç±»å‹æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚æ‰§è¡Œè¿™äº›ä»»åŠ¡çš„è§’è‰²å°±å«è§£æå™¨ã€‚</p>
<h3 id="resolverè§£æå™¨">Resolverè§£æå™¨</h3>
<p>è§£æå™¨æ˜¯è¡Œä¸ºç±»å‹çš„å®ç°ï¼Œå®ƒéœ€è¦ä¸æ•°æ®åº“å¯¹æ¥ï¼Œæ¥æŸ¥è¯¢æ•°æ®åº“ã€‚æ¯”å¦‚ä¸Šé¢å®šä¹‰çš„Queryå’ŒMutationç±»å‹çš„å®ç°ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-9-1024x644.png" alt="" class="wp-image-365"   /> </figure></p>
<p>è¿™ä¸ªè§£æå™¨æ˜¯é€šè¿‡MongoDBå®ç°çš„ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-11-1024x302.png" alt="" class="wp-image-367"   /> </figure></p>
<p>æ‰€ä»¥å…·ä½“çš„getAllå’ŒgetByIdå®é™…ä¸Šéƒ½æ˜¯æ‰§è¡Œçš„mongoDBçš„æŸ¥è¯¢ã€‚</p>
<p>æœåŠ¡å™¨ä¸Šä¸»è¦åšè¿™ä¸¤ä»¶äº‹ï¼Œé€šè¿‡schemaå®šä¹‰ç±»å‹ï¼Œå’Œå®ç°å…·ä½“çš„è§£æå™¨ã€‚</p>
<p>serverçš„ä»£ç åœ¨è¿™é‡Œ<a href="https://gitee.com/wss1942/appllo-serve.git">https://gitee.com/wss1942/appllo-serve.git</a></p>
<p>è¿™ä¸ªserverçš„å®ç°ç”¨åˆ°äº†mongoDBæ•°æ®åº“ï¼Œéœ€è¦è‡ªå·±å®‰è£…ï¼Œæˆ‘æ˜¯æŒ‰ç…§èœé¸Ÿçš„æ•™ç¨‹åšçš„ï¼Œå¾ˆç®€å•ã€‚</p>
<h2 id="å®¢æˆ·ç«¯ç½‘é¡µ">å®¢æˆ·ç«¯ï¼ˆç½‘é¡µï¼‰</h2>
<p>ä»£ç åœ¨è¿™é‡Œ<a href="https://gitee.com/wss1942/apollo-client.git">https://gitee.com/wss1942/apollo-client.git</a></p>
<p>å®ç°ä¸€ä¸ªgqlçš„å®¢æˆ·ç«¯ä¸»è¦éœ€è¦2éƒ¨åˆ†ï¼Œç½‘ç»œå±‚å’Œå­˜å‚¨å±‚ã€‚<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-12.png" alt="" class="wp-image-368"   /> </figure></p>
<p>ç”¨äº†clientå°±å¯ä»¥æ‰§è¡Œgqlè¯­å¥è¿›è¡ŒæŸ¥è¯¢äº†ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-13.png" alt="" class="wp-image-369"   /> </figure></p>
<p>è¿˜æœ‰å˜æ›´ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/05/image-14-1024x726.png" alt="" class="wp-image-370"   /> </figure></p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>å¦‚ä½•æ‹¥æœ‰æŠ€æœ¯é¢†å¯¼åŠ›ï¼Ÿ</title>
                <link>https://wss.cool/lead.html</link>
                <guid isPermaLink="true">https://wss.cool/lead.html</guid>
                <pubDate>Mon, 06 May 2019 02:38:58 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="">å·¦è€³å¬é£ä¸“æ </a></p>
<h2 id="ç¬¬ä¸€åƒé€åŸºç¡€æŠ€æœ¯åŸºç¡€æŠ€æœ¯æ˜¯å„ç§ä¸Šå±‚æŠ€æœ¯çš„å…±åŒçš„åŸºç¡€">ç¬¬ä¸€ï¼Œåƒé€åŸºç¡€æŠ€æœ¯ï¼ŒåŸºç¡€æŠ€æœ¯æ˜¯å„ç§ä¸Šå±‚æŠ€æœ¯çš„å…±åŒçš„åŸºç¡€ã€‚</h2>
<p>è®¡ç®—æœºæŠ€æœ¯å¤ªå¤šï¼Œä½†ä»”ç»†åˆ†æä½ ä¼šå‘ç°ï¼ŒçŸ¥è¯†è¡¨ç°å½¢å¼å¤šï¼Œè€ŒåŸºç¡€æŠ€æœ¯å¹¶ä¸å¤šã€‚å­¦å¥½åŸºç¡€æŠ€æœ¯ï¼Œèƒ½è®©ä½ ä¸€é€šç™¾é€šï¼Œæ›´å¿«åœ°ä½¿ç”¨å„ç§æ–°æŠ€æœ¯ï¼Œä»è€Œå¯ä»¥æ›´è½»æ¾åœ°ä¸æ—¶ä»£åŒæ­¥ã€‚</p>
<p>åŸºç¡€æŠ€æœ¯ä¸»è¦æ˜¯ä¸¤éƒ¨åˆ†ï¼šç¼–ç¨‹å’Œç³»ç»Ÿã€‚</p>
<h3 id="ç¼–ç¨‹éƒ¨åˆ†">ç¼–ç¨‹éƒ¨åˆ†ï¼š</h3>
<p>**Cè¯­è¨€ï¼š**æ›´æ¥è¿‘åº•å±‚ï¼Œèƒ½æ›´å¥½åœ°ç†è§£ç¨‹åºçš„è¿è¡Œã€‚</p>
<p>**ç¼–ç¨‹èŒƒå¼ï¼š**åŸ¹å…»æŠ½è±¡æ€ç»´ï¼Œæé«˜ç¼–ç¨‹æ•ˆç‡ï¼Œæé«˜ç¨‹åºçš„ç»“æ„åˆç†æ€§ã€å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œé™ä½å†—ä½™åº¦ã€‚å­¦ä¹ ç¼–ç¨‹èŒƒå¼ï¼šå¤šäº†è§£å„ç§ç¨‹åºè®¾è®¡è¯­è¨€çš„åŠŸèƒ½ç‰¹æ€§ã€‚</p>
<p>**ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼š**ä»»ä½•æœ‰æŠ€æœ¯å«é‡çš„è½¯ä»¶ä¸­ä¸€å®šæœ‰é«˜çº§çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ã€‚æ¯”å¦‚epollä¸­ä½¿ç”¨çº¢é»‘æ ‘ï¼Œæ•°æ®åº“ç´¢å¼•ä½¿ç”¨B+æ ‘ã€‚ä¸šåŠ¡ä¸­çš„å„ç§æ’åºã€è¿‡æ»¤ã€æŸ¥æ‰¾ä¹Ÿç”¨åˆ°ç®—æ³•ã€‚</p>
<h3 id="ç³»ç»Ÿéƒ¨åˆ†">ç³»ç»Ÿéƒ¨åˆ†ï¼š</h3>
<p><strong>ç½‘ç»œåŸºç¡€ï¼š</strong>ã€ŠTCP/IPè¯¦è§£ã€‹ï¼Œå­¦ä¹ åŸºç¡€çš„ç½‘ç»œåè®®ï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬çš„é«˜çº¬åº¦åˆ†å¸ƒå¼æ¶æ„ä¸­çš„ä¸€äº›æŠ€æœ¯é—®é¢˜æä¾›å¾ˆå¤šçš„æŠ€æœ¯æ–¹æ¡ˆã€‚æ¯”å¦‚TCPçš„æ»‘åŠ¨çª—å£é™æµï¼Œå®Œå…¨å¯ä»¥ç”¨äºåˆ†å¸ƒå¼æœåŠ¡ä¸­çš„é™æµæ–¹æ¡ˆã€‚</p>
<p>**æ•°æ®åº“åŸç†ï¼š**æ–‡ä»¶ç³»ç»Ÿé€‚åˆå­˜æ”¾è¿ç»­çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å›¾ç‰‡ï¼Œæ–‡ç« ã€‚å¦‚æœä¿å­˜å¾ˆçŸ­çš„ä¿¡æ¯ä¹Ÿä¿å­˜æ–‡ä»¶çš„ç”»ï¼Œä¼šæµªè´¹å¤§é‡çš„ç£ç›˜ç©ºé—´ï¼Œè€Œä¸”æ— æ³•æ–¹ä¾¿åœ°æŸ¥è¯¢ã€‚æ•°æ®åº“æ›´é€‚åˆå­˜æ”¾çŸ­çš„æ•°æ®ã€‚ä¸”èƒ½æ–¹ä¾¿çš„æŸ¥è¯¢ã€‚æµè¡Œçš„ä¸¤ç±»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼šSQLå’ŒNoSQLã€‚å‰è€…B+æ•°ï¼Œå¼ºä¸€è‡´æ€§ï¼Œåè€…å¼±ä¸€è‡´æ€§ï¼Œé«˜å­˜å–æ•ˆç‡ï¼ŒåŸºäºå“ˆå¸Œè¡¨å’Œå…¶ä»–æŠ€æœ¯ã€‚</p>
<p>å­¦ä¹ æ•°æ®åº“åŸç†ï¼Œèƒ½äº†è§£æ•°æ®åº“è®¿é—®æ€§è°ƒä¼˜çš„è¦ç‚¹ã€‚ä»¥åŠä¿è¯å¹¶å‘æƒ…å†µä¸‹çš„æ•°æ®æ“ä½œçš„åŸå­æ€§ã€‚</p>
<p>**åˆ†å¸ƒå¼æŠ€æœ¯æ¶æ„ï¼š**æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºæœåŠ¡å™¨éœ€è¦æ¨ªå‘æ‰©å±•ï¼Œæ‰èƒ½æä¾›åšå¤Ÿé«˜çš„æ€§èƒ½ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¦å­¦ä¹ åˆ†å¸ƒå¼æŠ€æœ¯æ¶æ„ï¼ŒåŒ…æ‹¬è´Ÿè½½å‡è¡¡ã€DNSè§£æã€å¤šå­åŸŸåã€æ— çŠ¶æ€åº”ç”¨å±‚ã€ç¼“å­˜å±‚ã€æ•°æ®åº“åˆ†ç‰‡ã€å®¹é”™å’Œæ¢å¤æœºåˆ¶ã€Paxosã€Map/Reduceæ“ä½œã€åˆ†å¸ƒå¼SQLæ•°æ®åº“ä¸€è‡´æ€§ç­‰çŸ¥è¯†ç‚¹ã€‚</p>
<p>å­¦ä¹ åˆ†å¸ƒå¼æŠ€æœ¯æ¶æ„çš„æœ‰æ•ˆé€”å¾„æ˜¯å‚ä¸åˆ°åˆ†å¸ƒå¼é¡¹ç›®çš„å¼€å‘ä¸­å»ï¼Œå¹¶é˜…è¯»ç›¸å…³è®ºæ–‡ã€‚</p>
<h2 id="ç¬¬äºŒæé«˜å­¦ä¹ èƒ½åŠ›å°±æ˜¯èƒ½å¤Ÿå¾ˆå¿«åœ°å­¦ä¹ æ–°æŠ€æœ¯åˆèƒ½åœ¨å…³é”®æŠ€æœ¯ä¸Šæ·±å…¥çš„èƒ½åŠ›">ç¬¬äºŒï¼Œæé«˜å­¦ä¹ èƒ½åŠ›ã€‚å°±æ˜¯èƒ½å¤Ÿå¾ˆå¿«åœ°å­¦ä¹ æ–°æŠ€æœ¯ï¼Œåˆèƒ½åœ¨å…³é”®æŠ€æœ¯ä¸Šæ·±å…¥çš„èƒ½åŠ›ã€‚</h2>
<p>åªæœ‰æŒæ¡äº†ä¸Šè¿°åŸºç¡€åŸç†ä¹‹ä¸Šï¼Œæ‰èƒ½æ‹¥æœ‰å¥½çš„å­¦ä¹ èƒ½åŠ›ã€‚</p>
<h2 id="ç¬¬ä¸‰åšæŒåšæ­£ç¡®çš„äº‹">ç¬¬ä¸‰ï¼ŒåšæŒåšæ­£ç¡®çš„äº‹ã€‚</h2>
<p>åšæ­£ç¡®çš„äº‹ï¼Œæ¯”ç”¨æ­£ç¡®çš„æ–¹æ³•åšäº‹æ›´é‡è¦ã€‚å› ä¸ºè¿™æ ·æ‰å§‹ç»ˆä¼šå‘ç›®çš„åœ°é æ‹¢ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%BF%83%E5%BE%97%E4%B8%8E%E7%BB%8F%E9%AA%8C/">å¿ƒå¾—ä¸ç»éªŒ</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>ç½‘ç«™çš„å…¼å®¹æ€§</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E7%BD%91%E7%AB%99%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E7%BD%91%E7%AB%99%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7/</guid>
                <pubDate>Wed, 03 Apr 2019 02:41:47 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="é€‚é…æ–¹æ¡ˆ">é€‚é…æ–¹æ¡ˆ</h2>
<p>ä¸¤ç§æ–¹æ¡ˆåšé€‚é…ä¸åŒå±å¹•ï¼šä¸€ç§æ˜¯æ·˜å®çš„æŒ‰ç…§å°ºå¯¸ç¼©æ”¾ï¼Œä¸€ç§æ˜¯bootstrapçš„å“åº”å¼å¸ƒå±€ã€‚</p>
<p>bootstrapæœ‰ä¸€ä¸ªreact-bootstrapçš„é¡¹ç›®ï¼Œå¦‚æœéœ€è¦æ”¯æŒie9ï¼Œéœ€è¦å¼•å…¥bootstrap3çš„cssã€‚å› ä¸º4ä¸æ”¯æŒie9ï¼Œæœ‰äº›ç‰¹æ€§ä½¿ç”¨ä¸äº†ã€‚</p>
<h2 id="å›æµä¸é‡ç»˜-reflow--repaint">å›æµä¸é‡ç»˜ (Reflow &amp; Repaint)</h2>
<p>ieï¼ˆ9-11ï¼‰ä¸­ä½¿ç”¨absoluteå’Œfixedï¼Œæ»šåŠ¨å¼æŠ–åŠ¨ã€‚åœ¨æ•´ä¸ªæ–‡æ¡£ä¸­é—´æŸäº›ä½ç½®è®¾ç½®äº†<br>
absoluteå’Œfixedï¼Œä¼šå¯¼è‡´é¡µé¢æŠ–åŠ¨ï¼ŒæŸ¥çœ‹æ€§èƒ½è®°å½•ï¼Œä¼šæœ‰å¤§é‡æ—¶é—´åœ¨ã€ç”»å›¾ã€‘ï¼Œå°†absoluteå’Œfixedçš„å…ƒç´ ç§»åŠ¨åˆ°æ–‡æ¡£çš„å°¾éƒ¨ï¼Œä¹Ÿå°±æ˜¯ä»–ä»¬çš„åé¢æ²¡æœ‰å…¶ä»–å…ƒç´ ï¼Œå°±èƒ½è§£å†³æŠ–åŠ¨çš„é—®é¢˜ã€‚</p>
<p>åˆ©ç”¨ <code>ReactDOM.createPortal</code>å°†absolute\fixedçš„å…ƒç´ æ”¾ç½®åˆ°æ•´ä¸ªæ–‡æ¡£æœ€å</p>
<p>åˆ©ç”¨modernizræ£€æµ‹æµè§ˆå™¨ä¸æ”¯æŒçš„åŠŸèƒ½\æ ·å¼ã€‚</p>
<h2 id="ie9çš„æŸäº›æ ·å¼ä¸æ ‡å‡†å†™æ³•ä¸åŒ">IE9çš„æŸäº›æ ·å¼ä¸æ ‡å‡†å†™æ³•ä¸åŒ</h2>
<p>æ–‡å­—ä¸¤æ®µå¯¹é½:</p>
<pre class="wp-block-code"><code>text-align: justify;
text-justify: distribute; //IE9
-ms-text-align-last: justify;
text-align-last: justify;</code></pre>
<p>æ–‡å­—ç«–æ’ï¼š</p>
<pre class="wp-block-code"><code>writing-mode: vertical-rl;
-ms-writing-mode: tb-rl;//IE9</code></pre>
<p>å±…ä¸­å†™æ³•ï¼ˆtop/leftæœ‰bugï¼‰ï¼š</p>
<pre class="wp-block-code"><code>position: absolute;
bottom: 50%;
right: 50%;
transform: translate(50%, 50%);</code></pre><blockquote>
</blockquote>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>è‡ªå®šä¹‰äº‹ä»¶</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6/</guid>
                <pubDate>Wed, 27 Mar 2019 05:19:04 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/Events/Creating_and_triggering_events">åˆ›å»ºå’Œè§¦å‘events</a></p>
<h1 id="ç›‘å¬">ç›‘å¬</h1>
<p>é€šå¸¸å°†äº‹ä»¶ç›‘å¬ç»‘å®šåœ¨<code>document</code>ä¸Šå³å¯ï¼Œä¹Ÿå¯ä»¥ç»‘å®šåœ¨å…¶ä»–DOMå…ƒç´ ã€‚</p>
<p>ç›‘å¬<code>build</code>äº‹ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> 
  <span class="c1">//  do something
</span><span class="c1"></span><span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="ä¼ æ•°æ®çš„äº‹ä»¶">ä¼ æ•°æ®çš„äº‹ä»¶</h1>
<p>ä½¿ç”¨<code>CustomEvent</code>åˆ›å»ºäº‹ä»¶ã€‚å¹¶ä¸”åªèƒ½ç”¨<code>detail</code>å­—æ®µåæ¥å­˜æ”¾æ•°æ®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CustomEvent</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;detail&#39;</span><span class="o">:</span> <span class="nx">anydata</span> <span class="p">});</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="ä¸ä¼ æ•°æ®çš„äº‹ä»¶">ä¸ä¼ æ•°æ®çš„äº‹ä»¶</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// åˆ›å»ºäº‹ä»¶
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Event</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">);</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/Events/Creating_and_triggering_events">MDN</a>ä¸Šè¿˜æœ‰å†’æ³¡ç­‰å…¶ä»–å†…å®¹</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>CSSå‘½å</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/css/css%E5%91%BD%E5%90%8D/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/css/css%E5%91%BD%E5%90%8D/</guid>
                <pubDate>Wed, 27 Mar 2019 05:08:59 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>ä½¿ç”¨lesså’Œcss moduleã€‚åœ¨Aå’ŒBä¸¤ä¸ªlessæ–‡ä»¶ä¸­åˆ†åˆ«å†™å¦‚ä¸‹çš„æ ·å¼ã€‚</p>
<pre><code>.textfillsContainer{
  background-color:red;
  .textfills{
      background-color:red;
  }
}
</code></pre><p>Aæ–‡ä»¶ï¼š
<img src="/images/css_class_name/image-9.png" alt="Aæ–‡ä»¶" title="Aæ–‡ä»¶">
Bæ–‡ä»¶ï¼š
<img src="/images/css_class_name/image-8.png" alt="Bæ–‡ä»¶" title="Bæ–‡ä»¶"></p>
<p>åœ¨ç¼–è¯‘æ‰“åŒ…åçš„æ–‡ä»¶ä¸­è§‚å¯Ÿï¼š</p>
<p>Aæ–‡ä»¶æ‰“åŒ…å‡ºæ¥çš„cssä»£ç ï¼š
<img src="/images/css_class_name/image-6.png" alt="Bæ–‡ä»¶" title="Aæ–‡ä»¶çš„å®é™…cssä»£ç "></p>
<p>Bæ–‡ä»¶æ‰“åŒ…å‡ºæ¥çš„cssä»£ç ï¼š
<img src="/images/css_class_name/image-7.png" alt="Bæ–‡ä»¶" title="Bæ–‡ä»¶çš„å®é™…cssä»£ç "></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿æ˜¯ç›¸åŒçš„classåï¼Œç”±äºlessæˆ–è€…css moduleçš„ä½œç”¨ï¼Œä¼šè§†æ–‡ä»¶ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œåœ¨æ‰“åŒ…æ—¶ï¼Œæ ¹æ®æ¨¡å—å¯¹classååšæ··æ·†å“ˆå¸Œã€‚</p>
<p>æ‰€ä»¥åªè¦ä¸åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼ˆæ¨¡å—ï¼‰ä¸­ä½¿ç”¨ç›¸åŒclassåå°±èƒ½é¿å…å‘½åå†²çªã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/css/">CSS</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>æµè§ˆå™¨ç¼“å­˜</title>
                <link>https://wss.cool/browser-cache.html</link>
                <guid isPermaLink="true">https://wss.cool/browser-cache.html</guid>
                <pubDate>Thu, 14 Mar 2019 02:23:03 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>çœ‹äº†<a href="https://juejin.im/entry/5ad86c16f265da505a77dca4">è¿™ç¯‡æ–‡ç« </a>åè®°å½•ä¸‹è‡ªå·±çš„ç†è§£ã€‚</p>
<p>ç¼“å­˜æœ‰2æ­¥ï¼šå¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚å°±æ˜¯é€šè¿‡ä¸€äº›æ‰‹æ®µï¼Œè®¾ç½®å¼ºåˆ¶ç¼“å­˜ï¼Œè®©æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°ç¡¬ç›˜ï¼Œå½“å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œå†é€šè¿‡ä¸æœåŠ¡å™¨åå•†çœ‹æ˜¯å¦æ›´æ–°ç¼“å­˜æ–‡ä»¶ã€‚</p>
<h2 id="å¼ºåˆ¶ç¼“å­˜">å¼ºåˆ¶ç¼“å­˜</h2>
<p>å¼ºåˆ¶ç¼“å­˜ä¼šæŠŠæ–‡ä»¶ç¼“å­˜åœ¨æœ¬åœ°ï¼Œå½“ç¼“å­˜æœªè¿‡æœŸæ—¶è®¿é—®ç½‘ç«™ï¼Œæµè§ˆå™¨ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜çš„èµ„æºã€‚</p>
<p>æ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯Expireså’ŒCache-Controlï¼Œå…¶ä¸­Cache-Controlä¼˜å…ˆçº§æ¯”Expiresé«˜ã€‚</p>
<p>Expiresæ˜¯è¿‡æ—¶çš„æ–¹å¼ï¼Œä¸æ¨èä½¿ç”¨ã€‚æ¨èä½¿ç”¨Cache-Controlæ¥æ§åˆ¶ã€‚</p>
<p>Cache-Controlç”¨çš„å¤šçš„å€¼æ˜¯å¦‚ä¸‹å‡ ä¸ªï¼š</p>
<ul>
<li>publicï¼šï¼ˆå¼ºåˆ¶ç¼“å­˜ï¼‰æ‰€æœ‰å†…å®¹éƒ½å°†è¢«ç¼“å­˜ï¼ˆå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ï¼‰</li>
<li>privateï¼š<br>
ï¼ˆå¼ºåˆ¶ç¼“å­˜ï¼‰ æ‰€æœ‰å†…å®¹åªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼ŒCache-Controlçš„é»˜è®¤å–å€¼</li>
<li>no-cacheï¼šï¼ˆåå•†ç¼“å­˜ï¼‰å®¢æˆ·ç«¯ç¼“å­˜å†…å®¹ï¼Œä½†æ˜¯æ˜¯å¦ä½¿ç”¨ç¼“å­˜åˆ™éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯å†³å®š</li>
<li>no-storeï¼šï¼ˆå†³å®šä¸ä½¿ç”¨ç¼“å­˜ï¼‰æ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜</li>
<li>max-age=xxx (xxx is numeric)ï¼šç¼“å­˜å†…å®¹å°†åœ¨xxxç§’åå¤±æ•ˆ</li>
</ul>
<h2 id="åå•†ç¼“å­˜">åå•†ç¼“å­˜</h2>
<p>åå•†ç¼“å­˜å°±æ˜¯å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦<strong>ç¼“å­˜æ ‡è¯†</strong>å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®<strong>ç¼“å­˜æ ‡è¯†</strong>å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹ã€‚</p>
<p><strong>ç¼“å­˜æ ‡è¯†</strong>æ˜¯å“åº”æŠ¥æ–‡çš„HTTPå¤´ä¸­å’Œè¯·æ±‚ç»“æœä¸€èµ·è¿”å›ç»™æµè§ˆå™¨çš„ã€‚</p>
<p><strong>ç¼“å­˜æ ‡è¯†</strong>æœ‰2ç»„ï¼š</p>
<ul>
<li>ã€Last-Modified / If-Modified-Since ã€‘</li>
<li>ã€Etag / If-None-Matchã€‘</li>
</ul>
<p>ã€Etag / If-None-Matchã€‘ä¼˜å…ˆçº§è¾ƒé«˜ã€‚</p>
<h3 id="last-modified--if-modified-since">Last-Modified / If-Modified-Since</h3>
<p>Last-Modifiedæ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›è¯¥èµ„æºæ–‡ä»¶åœ¨æœåŠ¡å™¨æœ€åè¢«ä¿®æ”¹çš„æ—¶é—´ã€‚</p>
<p>If-Modified-Sinceåˆ™æ˜¯å®¢æˆ·ç«¯å†æ¬¡å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œæºå¸¦ä¸Šæ¬¡è¯·æ±‚è¿”å›çš„Last-Modifiedå€¼ã€‚æœåŠ¡å™¨é€šè¿‡æ¯”è¾ƒè¿™ä¸ªå€¼åˆ¤æ–­ç¼“å­˜æ˜¯å¦å¤±æ•ˆã€‚</p>
<p>åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›304ï¼Œæµè§ˆå™¨ä½¿ç”¨ç¼“å­˜ã€‚</p>
<p>åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›200å’Œè¯·æ±‚ç»“æœ ã€‚</p>
<h3 id="etag--if-none-match">Etag / If-None-Match</h3>
<p>Etagæ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›å½“å‰èµ„æºæ–‡ä»¶çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼ˆç”±æœåŠ¡å™¨ç”Ÿæˆï¼‰ã€‚</p>
<p>If-None-Matchæ˜¯å®¢æˆ·ç«¯å†æ¬¡å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œæºå¸¦ä¸Šæ¬¡è¯·æ±‚è¿”å›çš„å”¯ä¸€æ ‡è¯†Etagå€¼ã€‚æœåŠ¡å™¨é€šè¿‡æ¯”è¾ƒè¿™ä¸ªå€¼åˆ¤æ–­ç¼“å­˜æ˜¯å¦å¤±æ•ˆã€‚</p>
<p>åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›304ï¼Œæµè§ˆå™¨ä½¿ç”¨ç¼“å­˜ã€‚</p>
<p>åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›200å’Œè¯·æ±‚ç»“æœ ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>åŠ è½½scriptæ ‡ç­¾</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/js-script-tag/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/js-script-tag/</guid>
                <pubDate>Wed, 13 Mar 2019 02:03:07 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>å°†scriptæ ‡ç­¾å†™åœ¨2ä¸ªåœ°æ–¹â€”â€”headä¸­å’Œbodyä¸­â€”â€”è¿›è¡Œè§‚å¯Ÿï¼š</p>
<p>headä¸­ï¼Œä»–ä»¬å¤§æ¦‚æ˜¯åŒæ—¶å¼€å§‹åŠ è½½ï¼Œè¿è¡Œåï¼Œbodyä¸­çš„æ‰å¼€å§‹åŠ è½½è¿è¡Œã€‚ä¹ŸåŠæ—¶bodyä¸­çš„ï¼Œä¼šç­‰å¾…headä¸­çš„åŠ è½½å®Œæˆè¿è¡Œå®Œæ¯•åï¼Œæ‰å¼€å§‹åŠ è½½ã€‚ä¹Ÿå°±æ˜¯é¡µé¢ä¼šé˜»å¡ã€‚<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/03/image-4-1024x409.png" alt="" class="wp-image-296"   /> </figure></p>
<p>è¿˜æœ‰å¯èƒ½åœ¨headä¸­ç¼–å†™ä¸€æ®µjsä»£ç ï¼Œå®ƒä¼šåœ¨headä¸­å†æ·»åŠ å‡ ä¸ªscriptæ ‡ç­¾ã€‚å°±ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µã€‚<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/03/image-5-1024x437.png" alt="" class="wp-image-297"   /> </figure></p>
<p>ç¬¬ä¸€éƒ¨åˆ†æ˜¯headä¸­å†™æ­»çš„ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯JSæ·»åŠ åˆ°headä¸­çš„ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯å†™åœ¨bodyä¸­çš„ã€‚</p>
<p>ç¬¬äºŒéƒ¨åˆ†ä¼šå¼€å§‹åŠ è½½ï¼Œç„¶åbodyä¸­çš„ä¸ä¼šç­‰å¾…ç¬¬äºŒéƒ¨åˆ†åŠ è½½å®Œæˆï¼Œä¹Ÿå°±æ˜¯JSæ·»åŠ çš„scriptä¸ä¼šé˜»å¡é¡µé¢ã€‚</p>
<p>å½“bodyä¸­çš„scriptä¾èµ–äº†JSæ·»åŠ çš„scriptï¼Œå°±æœ‰å¯èƒ½å‡ºç°æ‰¾ä¸åˆ°ä¾èµ–æŠ¥é”™çš„æƒ…å†µã€‚</p>
<h2 id="defer-async"><strong>defer async</strong></h2>
<p>**asyncï¼š**å¼‚æ­¥åŠ è½½èµ„æºï¼Œä¸”åŠ è½½å®ŒJSèµ„æºç«‹å³æ‰§è¡Œï¼Œå¹¶ä¸ä¼šæŒ‰é¡ºåºï¼Œè°å¿«è°å…ˆä¸Šï¼Œ ç½‘é¡µä¸ä¼šå¤±å»å“åº”ã€‚</p>
<p>**deferï¼š**å¼‚æ­¥åŠ è½½èµ„æºï¼Œåœ¨DOMæ¸²æŸ“åä¹‹åå†æŒ‰é¡ºåºæ‰§è¡ŒJSã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>å­—ä½“</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E5%AD%97%E4%BD%93/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/%E5%AD%97%E4%BD%93/</guid>
                <pubDate>Tue, 05 Mar 2019 05:16:17 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>ä¸€ä¸ªbugâ€”â€”é¡µé¢ä¸­çš„å­—ä½“æ— ç¼˜æ— æ•…çš„è€Œå˜æˆäº†å®‹ä½“ï¼Œè€Œä¸”æœ‰åŒºåˆ«ï¼Œç”¨electronæ‰“åŒ…çš„é¡µé¢æ˜¯å®‹ä½“ï¼Œç”¨chromeæµè§ˆå™¨æ‰“å¼€çš„æ˜¯é›…é»‘æˆ–è€…æœæ–¹ã€‚</p>
<p>ç”±äºspanè¢«è®¾ç½®äº†ä¸€ä¸ªfontFamilyåªä¸ºé›…é»‘ï¼Œè€Œè‹¹æœç³»ç»Ÿæ²¡æœ‰é›…é»‘å­—ä½“ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰æ‰¾çˆ¶çº§å…ƒç´ ç»§æ‰¿å­—ä½“ï¼Œè€Œæ˜¯é€‰æ‹©äº†æµè§ˆå™¨çš„ç¯å¢ƒå˜é‡ï¼ˆè®¾ç½®ï¼‰ã€‚</p>
<p>åœ¨macçš„chromeçš„è®¾ç½®ä¸­ï¼Œçœ‹å­—ä½“ã€‚æœ‰æ ‡å‡†ã€serifã€sans-serifã€å®½åº¦å›ºå®šå››ä¸­è®¾ç½®ã€‚åœ¨ä¿®æ”¹äº† sans-serif ä»¥åï¼ŒåŸæœ¬åªåœ¨electronä¸­å‡ºç°çš„å®‹ä½“ï¼Œä¹Ÿå‡ºç°åœ¨äº†chromeä¸­ï¼Œç”±æ­¤æ¨æ–­ï¼Œæ˜¯è¿™ä¸ªè®¾ç½®çš„é”…äº†ã€‚</p>
<p>electronä¹Ÿæ˜¯ä¸€ä¸ªæµè§ˆå™¨ç¯å¢ƒï¼Œæœ‰ä¸€äº›é…ç½®é¡¹ï¼Œå‘ç° webPreferences æœ‰å¦‚ä¸‹é…ç½®ï¼š<figure class="wp-block-image"></p>
<p><img src="/uploads/2019/03/image-1.png" alt="" class="wp-image-281"   /> </figure></p>
<p>æ­¤å¤„è®¾ç½®ä¸ºå¾®è½¯é›…é»‘åï¼Œmacä¸‹è¡¨ç°å°±å’Œchromeä¸€è‡´äº†ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Cheerio</title>
                <link>https://wss.cool/cheerio.html</link>
                <guid isPermaLink="true">https://wss.cool/cheerio.html</guid>
                <pubDate>Fri, 25 Jan 2019 01:20:58 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="1è§£æè¡¨æ ¼table">1.è§£æè¡¨æ ¼table</h2>
<pre class="wp-block-code"><code><tr class="listingTrailer">
	<td>
		</td><td colspan="2">Summa tillgodorÃ¤knade poÃ¤ng:
		</td><td class="credits">10,5
		</td><td>
</td></tr></code></pre>
<p>å¦‚æœåªæ˜¯ä¸€æ®µtrï¼Œcheerioä¸ä¼šè¯†åˆ«ï¼Œéœ€è¦æ˜¯ä¸€ä¸ªå®Œæ•´çš„tableæ‰å¯ä»¥ï¼Œè€Œä¸”tableå¤–é¢å¥½åƒè¿˜æœ‰åŒ…ä¸€å±‚divä¹‹ç±»çš„ä¸œè¥¿ï¼Œcheerioæ‰èƒ½è§£æã€‚</p>
<h2 id="2éå†">2.éå†</h2>
<p>ä½¿ç”¨eachæ–¹æ³•å¯ä»¥return falseè·³å‡ºéå†ï¼š</p>
<blockquote class="wp-block-quote">
  <p>
    To break out of theÂ <code>each</code>Â loop early, return withÂ <code>false</code>.
  </p>
<p><cite><a href="https://cheerio.js.org/"><a href="https://cheerio.js.org/">https://cheerio.js.org/</a></a></cite></p>
</blockquote>
<h3 id="21-ä½¿ç”¨this">2.1. ä½¿ç”¨this</h3>
<p>ä½¿ç”¨thisçš„è¯ï¼Œè¦ä½¿ç”¨functionå‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚functionå‡½æ•°çš„thisæŒ‡å‘trã€‚</p>
<pre class="wp-block-code"><code>$('tbody tr').each(function(i, elem) {
	const id = $(this).data();
	console.log(id);
});</code></pre>
<h3 id="22-ä½¿ç”¨ç®­å¤´å‡½æ•°å°±åˆ«ç”¨this">2.2. ä½¿ç”¨ç®­å¤´å‡½æ•°å°±åˆ«ç”¨this</h3>
<p>å› ä¸ºthisä¸ä¼šæŒ‡å‘trï¼Œæ‰€ä»¥è¦ç”¨å›è°ƒå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>
<pre class="wp-block-code"><code>$('tbody tr').each((i, elem)=>{
	const id = $(elem).data();
	console.log(id);
});</code></pre><blockquote>
</blockquote>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/api/">api</category>
                                
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%90%8E%E7%AB%AF/">åç«¯</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Typescript & React</title>
                <link>https://wss.cool/typescript-react.html</link>
                <guid isPermaLink="true">https://wss.cool/typescript-react.html</guid>
                <pubDate>Sun, 20 Jan 2019 14:15:47 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="0-ç±»å‹">0. ç±»å‹</h2>
<p>inputçš„onChangeäº‹ä»¶ï¼ŒChangeEventæ˜¯event.targetï¼ŒFormEventæ˜¯event.currentTarget</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts">    <span class="kr">const</span> <span class="nx">handleSearch</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span>: <span class="kt">React.ChangeEvent</span><span class="o">&lt;</span><span class="nx">HTMLInputElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">setKeywords</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="nx">props</span><span class="p">.</span><span class="nx">onUpdateKeyword</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="1-åˆ›å»ºé¡¹ç›®">1. åˆ›å»ºé¡¹ç›®</h2>
<p><a href="https://github.com/Microsoft/TypeScript-React-Starter#typescript-react-starter">creact-react-app</a>å¯ä»¥ç›´æ¥åˆ›å»ºtypescripté¡¹ç›®ã€‚</p>
<pre class="wp-block-code"><code>create-react-app my-app --scripts-version=react-scripts-ts</code></pre>
<h2 id="2-ä¿®æ”¹é…ç½®">2. ä¿®æ”¹é…ç½®</h2>
<p>2.1. -æŠŠtslint.jsonä¿®æ”¹ä¸ºè¿™æ ·ï¼Œèƒ½èˆ’æœä¸€ç‚¹ï¼š</p>
<pre class="wp-block-code"><code>{
  "extends": ["tslint:recommended", "tslint-react", "tslint-config-prettier"],
  "defaultSeverity": "warning",
  "linterOptions": {
    "exclude": [
      "config/**/*.js",
      "node_modules/**/*.ts",
      "coverage/lcov-report/*.js"
    ]
  },
  "rules": {
    "object-literal-sort-keys": false,
    "no-console": false
  }
}</code></pre>
<p>2.2. åœ¨package.jsonçš„scriptä¸­åŠ å…¥è¿™æ¡ï¼Œå¯ä»¥è®©tslintè‡ªåŠ¨ä¿®å¤é—®é¢˜ï¼š</p>
<pre class="wp-block-code"><code>"lint": "tslint --fix -c ./tslint.json 'src/**/*{.ts,.tsx}'"</code></pre>
<p>åƒä¸‡è¦æ³¨æ„ï¼Œä½ çš„ä»£ç å°†è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥è¦<a href="https://stackoverflow.com/a/44850320/6021280">æ³¨æ„ä»¥ä¸‹äº‹é¡¹</a>âš ï¸ï¼š</p>
<ul>
<li>Commit the changes you have made to your code</li>
<li>Run TSLint with theÂ <code>--fix</code>Â flag like above</li>
<li>Quickly review the changes TSLint has made</li>
<li>Make a new commit with these changes, or simply amend them to your previous commit</li>
</ul>
<h2 id="3-å„ç§ç±»å‹æ€ä¹ˆå®šä¹‰">3. å„ç§ç±»å‹æ€ä¹ˆå®šä¹‰</h2>
<p>classç»„ä»¶éœ€è¦å®šä¹‰propså’Œstateçš„ç±»å‹ï¼š</p>
<pre class="wp-block-code"><code>interface IProps {
  addTodo: (input: string) => void;
}
interface IState {
  input: string;
}
class AddTodo extends React.Component&lt;IProps, IState>{}</code></pre>
<p>inputäº‹ä»¶éœ€è¦å®šä¹‰äº‹ä»¶ç±»å‹ï¼š</p>
<pre class="wp-block-code"><code>  public handleInput(event:React.ChangeEvent&lt;HTMLInputElement>) {
    this.updateInput(event.target.value);
  }</code></pre>
<p>HTMLInputElementè¿˜å¯èƒ½æ˜¯HTMLSelectElementç­‰ã€‚</p>
<p>.d.tsæ–‡ä»¶æ˜¯ä½¿ç”¨jsç¼–å†™çš„apiæ‰ç”¨çš„ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>å‘½ä»¤è¡Œå‘é€email</title>
                <link>https://wss.cool/mac-ubuntu-send-email.html</link>
                <guid isPermaLink="true">https://wss.cool/mac-ubuntu-send-email.html</guid>
                <pubDate>Fri, 04 Jan 2019 04:49:13 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p><a href="http://www.ruanyifeng.com/blog/2017/06/smtp-protocol.html">å¦‚ä½•éªŒè¯ Email åœ°å€ï¼šSMTP åè®®å…¥é—¨æ•™ç¨‹</a>
<a href="http://fred.itxfd.com/2017/08/08/ubuntu-mail-%E7%94%A8-qq-%E9%82%AE%E7%AE%B1%E5%8F%91%E9%82%AE%E4%BB%B6/">ubuntu mail ç”¨ qq é‚®ç®±å‘é‚®ä»¶</a></p>
<p>æˆ‘å…ˆå°è¯•åœ¨æˆ‘çš„macä¸Šå‘é€ï¼Œå…ˆæ˜¯æ‰¾åˆ°äº†sendmailç›¸å…³çš„ä»‹ç»ï¼Œç„¶åæ‰¾åˆ°äº†macè‡ªå¸¦çš„postfixç±»ä¼¼äºsendmailï¼Œäºæ˜¯ç ”ç©¶postfixï¼Œå°†è¿‘ä¸€å¤©çš„æ—¶é—´æˆ‘ç»å†äº†å„ç§é…ç½®ä¸å¤±è´¥ã€‚</p>
<p>æ™šä¸Šä¸‹ç­çš„è·¯ä¸Šï¼Œçœ‹äº†é˜®ä¸€å³°çš„smtpä»‹ç»ï¼Œäº†è§£åˆ°smtpæœåŠ¡å™¨çš„èº«ä»½éªŒè¯æ˜¯ä¸ºäº†é˜²æ­¢åƒåœ¾é‚®ä»¶ï¼Œä¸ºäº†æ§åˆ¶åƒåœ¾é‚®ä»¶ï¼Œè®¸å¤šé‚®ä»¶æœåŠ¡å™¨ä¼šç”¨è‡ªå·±çš„æ–¹æ³•éªŒè¯é‚®ä»¶åœ°å€ï¼Œä¸‹é¢å°±æ˜¯å…¶ä¸­çš„ä¸€äº›æ–¹æ³•ã€‚</p>
<ul>
<li>example.com æ˜¯å¦æœ‰ MX è®°å½•</li>
<li>example.com æ˜¯å¦å¯ä»¥ Ping é€š</li>
<li>æ˜¯å¦å­˜åœ¨ <a href="mailto:postmaster@example.com">postmaster@example.com</a> è¿™ä¸ªé‚®ç®±</li>
<li>å‘èµ·è¿æ¥çš„ IP åœ°å€æ˜¯å¦åœ¨é»‘åå•ä¹‹ä¸­</li>
<li>IP åœ°å€çš„åå‘ DNS è§£æï¼Œæ˜¯å¦æŒ‡å‘ä¸€ä¸ªé‚®ä»¶æœåŠ¡å™¨</li>
</ul>
<p>qqé‚®ç®±ä¹Ÿè®¸ç”¨äº†å…¶ä¸­æŸäº›æ–¹æ³•ï¼Œä½¿ç”¨macé“¾æ¥smtpçš„è¯ï¼Œ135åº”è¯¥éƒ½æ˜¯ä¸èƒ½é€šè¿‡çš„ï¼Œæ‰€ä»¥å¯¼è‡´äº†åœ¨macä¸Šmailå¤±è´¥ã€‚å…·ä½“ä»€ä¹ˆåŸå› å¯¼è‡´çš„ä¸èƒ½æˆåŠŸå°±ä¸æ·±ç©¶äº†ã€‚</p>
<p>ç”±äºå¾—çŸ¥äº†ä¸Šé¢çš„ä¿¡æ¯ï¼Œäºæ˜¯å°è¯•ç”¨æˆ‘çš„äº‘æœåŠ¡å™¨æ¥å®éªŒä¸€ä¸‹ï¼Œå› ä¸ºäº‘æœåŠ¡å™¨å¯ä»¥pingï¼Œæœ‰MXè®°å½•ã€‚æ­£å¥½è¿˜å‘ç°äº†ä¸€ä¸ªubuntuå‘é‚®ä»¶çš„æ–‡ç« ã€‚æ­¥éª¤å¦‚ä¸‹ï¼šï¼ˆä»¥ä¸‹ä¸»è¦æ˜¯æŸç½‘å‹çš„åšæ–‡ï¼‰</p>
<p>å…ˆç”¨ <code>which mail</code> çœ‹çœ‹æœ‰æ²¡æœ‰ <code>mail</code>ã€‚</p>
<p>å¦‚æœæ²¡æœ‰çš„è¯ï¼Œå¯ä»¥å®‰è£…å¦‚ä¸‹è½¯ä»¶ï¼š</p>
<pre><code>sudo apt-get install -y heirloom-mailx
</code></pre><p>æœ‰äº† <code>mail</code> åï¼Œç›´æ¥ç”¨å‘½ä»¤è¡Œæµ‹è¯•</p>
<pre><code>echo &quot;mail body&quot; | \
mail -v \
-r 6666666@qq.com \
-s &quot;subject&quot; \
-S form=6666666@qq.com \
-S smtp-auth-password=å¯†ç æˆ–æˆæƒç  \
-S smtp-auth-user=6666666@qq.com \
-S smtp-auth=login \
-S smtp-use-starttls \
-S smtp=smtps://smtp.qq.com:465 \
-S ssl-verify=ignore \
6666666@qq.com
</code></pre><p>åœ¨é…ç½®æ–‡ä»¶é‡Œé¢é…ç½®è´¦å·ï¼Œé¦–å…ˆæ‰¾åˆ°ç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code>strings `which mail` | grep '\.rc'
sudo vim /etc/s-nail.rcï»¿
</code></pre><p>åœ¨æ–‡ä»¶å°¾éƒ¨æ·»åŠ ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">set</span> <span class="nx">from</span><span class="o">=</span><span class="mi">6666666</span><span class="err">@</span><span class="nx">qq</span><span class="p">.</span><span class="nx">com</span>
<span class="nx">set</span> <span class="nx">smtp</span><span class="o">-</span><span class="nx">auth</span><span class="o">-</span><span class="nx">password</span><span class="o">=</span><span class="nx">å¯†ç æˆ–æˆæƒç </span>
<span class="nx">set</span> <span class="nx">smtp</span><span class="o">-</span><span class="nx">auth</span><span class="o">-</span><span class="nx">user</span><span class="o">=</span><span class="mi">6666666</span><span class="err">@</span><span class="nx">qq</span><span class="p">.</span><span class="nx">com</span>
<span class="nx">set</span> <span class="nx">smtp</span><span class="o">-</span><span class="nx">auth</span><span class="o">=</span><span class="nx">login</span>
<span class="nx">set</span> <span class="nx">smtp</span><span class="o">=</span><span class="nx">smtps</span><span class="o">:</span><span class="c1">//smtp.qq.com:465
</span><span class="c1"></span><span class="nx">set</span> <span class="nx">ssl</span><span class="o">-</span><span class="nx">verify</span><span class="o">=</span><span class="nx">ignore</span>
</code></pre></td></tr></table>
</div>
</div><p>ç„¶åæµ‹è¯•ï¼š</p>
<pre><code>echo &quot;mail body&quot; | mail -s &quot;subject1&quot; 6666666@qq.com
</code></pre><p>è‡³æ­¤ï¼Œæˆ‘çš„qqé‚®ç®±å¯ä»¥æˆåŠŸæ¥æ”¶åˆ°é‚®ä»¶ã€‚è¿™ä»¶äº‹æ€»ç®—æœ‰äº†ç»“æœã€‚</p>
<p>å‘é€é‚®ä»¶è™½ç„¶èƒ½æˆåŠŸï¼Œä½†æ˜¯æˆ‘çš„å‘½ä»¤è¡Œä¼šæ‰“å°ä¸€ä¸ªè­¦å‘Š</p>
<pre><code>mail: /usr/local/openssl/lib/libssl.so.1.0.0: no version information available (required by mail)
</code></pre><p>ç»æŸ¥ï¼ŒåŠå°è¯•ã€‚å°†è­¦å‘Šçš„2ä¸ªæ–‡ä»¶ç§»é™¤å³å¯ï¼Œä¹Ÿå¯ä»¥æ”¹åå­—ï¼š</p>
<pre><code>mv /usr/local/openssl/lib/libssl.so.1.0.0 /usr/local/openssl/lib/libssl.so.1.0.0_bk
</code></pre><p>ä¹‹åå†å‘é‚®ä»¶å°±ä¸€åˆ‡é¡ºåˆ©äº†ã€‚</p>
<hr>
<p>äº‹æƒ…æœ‰äº†æ–°çš„è¿›å±•ï¼š2019å¹´1æœˆ7æ—¥ã€‚</p>
<p>æˆ‘åˆæƒ³ï¼Œä¸ºä»€ä¹ˆmacçš„é‚®ä»¶appå¯ä»¥å‘é€è€Œå‘½ä»¤è¡Œå´ä¸è¡Œå—ï¼Ÿåº”è¯¥éƒ½æ˜¯ç”¨çš„SMTPæ–¹å¼æ¥å‘é€é‚®ä»¶çš„ã€‚é‚£ä¹ˆå¯èƒ½è¿˜æ˜¯æˆ‘é…ç½®SMTPå‚æ•°çš„é—®é¢˜ã€‚</p>
<p>ç»è¿‡æœç´¢äº†è§£åˆ°ï¼Œmacçš„å‘½ä»¤è¡Œmailæ˜¯ä¸€ä¸ªæ—§ç‰ˆçš„ï¼Œæ–°ç‰ˆçš„å«heirloom-mailxæˆ–è€…s-nailã€‚</p>
<p>æˆ‘é€šè¿‡Homebrewå®‰è£…äº†s-nailï¼Œå°†ä¸Šé¢æµ‹è¯•ä»£ç çš„mailæ¢æˆs-nailæ˜¯å¯ä»¥å‘é€é‚®ä»¶çš„ï¼Œä½†æ˜¯åŒæ ·çš„å†™s-nail.rcåï¼Œå´ä¸èƒ½å‘é€é‚®ä»¶ã€‚è€Œä¸”çœ‹äº†man s-nailä»¥åè¿˜æ˜¯ä¸ä¼šå†™æŠ„é€å‚æ•°çš„é…ç½®ã€‚</p>
<p>ä¸Šé¢çš„è¿™ä¸ªè¿‡ç¨‹åˆæ¶ˆè€—äº†æˆ‘ä¸€å¤©çš„æ—¶é—´ï¼Œç›´æ¥ä½¿ç”¨s-nailçš„äººä¼¼ä¹å¾ˆå°‘ï¼Œæ²¡æœ‰æŸ¥åˆ°ä¸€ä¸ªèƒ½è¿è¡Œçš„ä¾‹å­ï¼Œè¿™ä¸€å¤©å°±åœ¨å„ç§æœç´¢ã€é…ç½®ã€æµ‹è¯•ä¸­åº¦è¿‡äº†ã€‚åæ¥åˆæƒ³åˆ°å®‰è£…mailçš„æ–°æœ¬çš„äºŒè¿›åˆ¶æ–‡ä»¶æ¥æ›´æ–°mailä¼¼ä¹ä¹Ÿæ˜¯ä¸ªåŠæ³•ã€‚ä½†æ˜¯æƒ³åˆ°è¿˜è¦é‡æ–°é…ç½®è¿˜æ˜¯å¾ˆéº»çƒ¦ã€‚å°±æ”¾å¼ƒäº†ã€‚</p>
<p>ä»Šå¤©æ—©æ™¨ååœ°é“æ—¶æƒ³åˆ°ï¼Œshellä¸è¡Œï¼Œé‚£å°±è¯•è¯•pythonå§ã€‚åˆ°å…¬å¸åï¼Œåœ¨stackoverflowä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªä¾‹å­ï¼Œä¿®æ”¹smtpåœ°å€ï¼Œè´¦å·å¯†ç ï¼ŒåŠ ä¸ŠæŠ„é€å­—æ®µã€‚æ•´ä¸ªè¿‡ç¨‹å·®ä¸å¤šåŠä¸ªå¤šå°æ—¶ï¼Œé¡ºåˆ©çš„å‘å‡ºäº†é‚®ä»¶ğŸ¥³ğŸ¤™ğŸ•ºğŸ’ƒğŸ‰ğŸŠ</p>
<p>å¹¸ç”šè‡³å“‰ï¼Œæ­Œä»¥å’å¿—ã€‚</p>
<p>çœŸçš„æƒŠå–œï¼Œæˆ‘çœŸæ˜¯å¤ªè ¢äº†ï¼Œå‚»äº†å§å”§åœ°æŠ˜è…¾äº†4å¤©çš„ï¼Œæœ€åç”¨pythonåŠå°æ—¶å°±è§£å†³äº†ã€‚</p>
<p>æœ€åå¥‰ä¸Špythonå‘é€é‚®ä»¶çš„ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#! /usr/local/bin/python</span>

<span class="n">SMTPserver</span> <span class="o">=</span> <span class="s1">&#39;smtp.qq.com:465&#39;</span>
<span class="n">sender</span> <span class="o">=</span>     <span class="s1">&#39;666666@qq.com&#39;</span>
<span class="n">cc</span> <span class="o">=</span> <span class="s2">&#34;888888@163.com&#34;</span>
<span class="n">to</span> <span class="o">=</span> <span class="s2">&#34;666666@qq.com&#34;</span>

<span class="n">USERNAME</span> <span class="o">=</span> <span class="s2">&#34;666666@qq.com&#34;</span>
<span class="n">PASSWORD</span> <span class="o">=</span> <span class="s2">&#34;PASSWORD&#34;</span>

<span class="c1"># typical values for text_subtype are plain, html, xml</span>
<span class="n">text_subtype</span> <span class="o">=</span> <span class="s1">&#39;plain&#39;</span>


<span class="n">content</span><span class="o">=</span><span class="s2">&#34;&#34;&#34;</span><span class="se">\
</span><span class="se"></span><span class="s2">Test message
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="n">subject</span><span class="o">=</span><span class="s2">&#34;Sent from Python&#34;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">smtplib</span> <span class="kn">import</span> <span class="n">SMTP_SSL</span> <span class="k">as</span> <span class="n">SMTP</span> <span class="c1"># this invokes the secure SMTP protocol (port 465, uses SSL)</span>
<span class="c1"># from smtplib import SMTP # use this for standard SMTP protocol   (port 25, no encryption)</span>

<span class="c1"># old version</span>
<span class="c1"># from email.MIMEText import MIMEText</span>
<span class="kn">from</span> <span class="nn">email.mime.text</span> <span class="kn">import</span> <span class="n">MIMEText</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">rcpt</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;,&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">to</span><span class="p">]</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">MIMEText</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">text_subtype</span><span class="p">)</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Subject&#39;</span><span class="p">]</span><span class="o">=</span>       <span class="n">subject</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">sender</span> <span class="c1"># some SMTP servers will do this automatically, not all</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Cc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cc</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">SMTP</span><span class="p">(</span><span class="n">SMTPserver</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_debuglevel</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">USERNAME</span><span class="p">,</span> <span class="n">PASSWORD</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">rcpt</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="k">except</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span> <span class="s2">&#34;mail failed; </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="s2">&#34;CUSTOM_ERROR&#34;</span> <span class="p">)</span> <span class="c1"># give an error message</span>
</code></pre></td></tr></table>
</div>
</div>]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>dvadvaå–æ¶ˆå¼‚æ­¥ä»»åŠ¡</title>
                <link>https://wss.cool/dva-saga-cancel-effect.html</link>
                <guid isPermaLink="true">https://wss.cool/dva-saga-cancel-effect.html</guid>
                <pubDate>Mon, 31 Dec 2018 09:54:21 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>å…ˆå£°æ˜ä¸€ä¸ªaxiosçš„ç½‘ç»œè¯·æ±‚å‡½æ•°loginğŸ¤ªï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">//service.js
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">login</span><span class="o">:</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="nx">cancelToken</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">ApiServer</span><span class="si">}</span><span class="sb">/auth/user`</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">cancelToken</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">axios</span><span class="p">.</span><span class="nx">isCancel</span><span class="p">(</span><span class="nx">error</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Request canceled&#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">message</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™æ®µä»£ç å¯ä»¥å¤„ç†3ä¸­æƒ…å†µçš„å¼‚å¸¸ï¼š</p>
<ul>
<li>axios.interceptors.responseä¸­throw Error</li>
<li>http status code !== 200æ—¶çš„promise rejectï¼Œä¸ä½¿ç”¨asyncæ—¶æ˜¯åœ¨catchä¸­å¤„ç†</li>
<li>axiosè¯·æ±‚è¢«ä»£ç cancelæ‰</li>
</ul>
<p>æœ‰äº†ç½‘ç»œè¯·æ±‚ï¼Œå¯ä»¥å†™sagaå‡½æ•°äº†ï¼š</p>
<p>å¦‚æœæ˜¯åœ¨dvaä¸­ï¼Œsagaå‡½æ•°ä¼šè¢«å†™åœ¨modelä¸­çš„effectså¯¹è±¡ä¸­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">CancelToken</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">CancelToken</span><span class="p">;</span>
<span class="p">...</span>  
<span class="nx">effects</span><span class="o">:</span> <span class="p">{</span>
    <span class="o">*</span><span class="nx">startLogin</span><span class="p">({</span> <span class="nx">payload</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">put</span><span class="p">,</span> <span class="nx">call</span><span class="p">,</span> <span class="nx">race</span> <span class="p">})</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">CancelToken</span><span class="p">.</span><span class="nx">source</span><span class="p">();</span>
      <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">timeout</span> <span class="p">}</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">race</span><span class="p">({</span>
        <span class="nx">data</span><span class="o">:</span> <span class="nx">call</span><span class="p">(</span><span class="nx">login</span><span class="p">,</span> <span class="p">{</span><span class="nx">username</span><span class="o">:</span> <span class="nx">payload</span><span class="p">.</span><span class="nx">username</span><span class="p">,},</span> <span class="p">{</span><span class="nx">cancelToken</span><span class="o">:</span> <span class="nx">source</span><span class="p">.</span><span class="nx">token</span><span class="p">,}),</span>
        <span class="nx">timeout</span><span class="o">:</span> <span class="nx">call</span><span class="p">(</span><span class="nx">delay</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span>
      <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">yield</span> <span class="nx">put</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="nx">payload</span><span class="o">:</span> <span class="s1">&#39;success&#39;</span> <span class="p">});</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">yield</span> <span class="nx">source</span><span class="p">.</span><span class="nx">cancel</span><span class="p">(</span><span class="s1">&#39;ç™»å½•è¶…æ—¶&#39;</span><span class="p">);</span>
        <span class="k">yield</span> <span class="nx">put</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="nx">payload</span><span class="o">:</span> <span class="s1">&#39;timeout&#39;</span> <span class="p">});</span>
      <span class="p">}</span>
     <span class="p">},</span>
   <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å½“ç„¶startLoginå‡½æ•°ä¹Ÿå¯ä»¥å†™æˆgeneratorå‡½æ•°ä½œä¸ºæ™®é€šsagaï¼Œåœ¨ä¸ç”¨dvaçš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p>
<p>è¿™æ®µä»£ç è°ƒç”¨äº†ä¸Šé¢ğŸ‘†çš„loginå‡½æ•°è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œå…¶ä¸­raceæ˜¯sagaæä¾›çš„ä¸€ç§effectï¼Œæ˜¯ä¸€ç§ç«èµ›æ¨¡å¼ï¼Œraceä¸‹é¢çš„å¤šä¸ªä»»åŠ¡ï¼Œåªæœ‰ä¸€ä¸ªèƒœåˆ©è€…ï¼Œå³ç¬¬ä¸€ä¸ªå®Œæˆçš„ä»»åŠ¡ï¼Œå…¶ä»–ä»»åŠ¡ä¼šè¢«å–æ¶ˆã€‚</p>
<p>æ‰€ä»¥è¿™æ®µä»£ç å°±æ˜¯ç”¨raceå®ç°çš„ç½‘ç»œè¯·æ±‚ä»»åŠ¡çš„è¶…æ—¶å¤„ç†ã€‚</p>
<p>ä½†æ˜¯ç½‘ç»œè¯·æ±‚ä»»åŠ¡åªæ˜¯ä¸€ä¸ªsagaä»»åŠ¡ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä»»åŠ¡è¢«å–æ¶ˆäº†ï¼Œä½†æ˜¯ç½‘ç»œè¯·æ±‚å¹¶æ²¡æœ‰è¢«å–æ¶ˆï¼Œæ‰€ä»¥å–æ¶ˆç½‘ç»œè¯·æ±‚éœ€è¦å•ç‹¬å¤„ç†ã€‚</p>
<p>å¯¹äºaxiosè¿™ä¸ªåº“æ¥è¯´ï¼Œå°±æ˜¯ä½¿ç”¨CancelTokenè¿™ä¸ªapiäº†ã€‚ğŸ‘†ä¸Šé¢ä¸¤æ®µä»£ç å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„CancelTokenä½¿ç”¨çš„ä¾‹å­ã€‚</p>
<p>ä¸Šé¢è¯´äº†ä»€ä¹ˆå‘¢ï¼Ÿä¸Šæ–‡ä½¿ç”¨ä¸¤æ®µä»£ç ï¼Œä»‹ç»äº†ä¸€ç§â€”â€”åœ¨ä½¿ç”¨dvaæˆ–è€…redux-sagaæ—¶â€”â€”å–æ¶ˆeffectï¼ˆå–æ¶ˆå¼‚æ­¥ä»»åŠ¡ã€cancel effectã€å¤„ç†å¼‚æ­¥ä»»åŠ¡è¶…æ—¶ã€å¤„ç†ç½‘è·¯è¯·æ±‚è¶…æ—¶ã€å–æ¶ˆaxiosè¯·æ±‚ï¼‰çš„å†™æ³•ã€‚ä¸‹é¢ä»‹ç»å¦ä¸€ç§å†™æ³•ã€‚</p>
<p>é™¤äº†ç”¨raceä»¥å¤–ï¼Œè¿˜å¯ä»¥ç”¨take Effectæ¥å†™ã€‚æ¯”å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"> <span class="nx">namespace</span><span class="o">:</span> <span class="s1">&#39;products&#39;</span><span class="p">,</span>
 <span class="nx">effects</span><span class="o">:</span> <span class="p">{</span>
  <span class="o">*</span><span class="nx">start</span><span class="p">(){},</span>
  <span class="o">*</span><span class="nx">stop</span><span class="p">(){},</span>
  <span class="nx">watchLogin</span><span class="o">:</span> <span class="p">[</span>
      <span class="kd">function</span><span class="o">*</span> <span class="p">({</span> <span class="nx">take</span><span class="p">,</span> <span class="nx">put</span><span class="p">,</span> <span class="nx">call</span><span class="p">,</span> <span class="nx">cancel</span><span class="p">,</span> <span class="nx">fork</span><span class="p">,</span> <span class="nx">cancelled</span> <span class="p">})</span> <span class="p">{</span>
          <span class="k">yield</span> <span class="nx">take</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">);</span>
          <span class="kr">const</span> <span class="nx">timerTask</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">fork</span><span class="p">(</span><span class="nx">timer</span><span class="p">)</span>
          <span class="kr">const</span> <span class="nx">bgSyncTask</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">fork</span><span class="p">(</span><span class="nx">bgSync</span><span class="p">)</span>
          <span class="k">yield</span> <span class="nx">take</span><span class="p">(</span><span class="s1">&#39;stop&#39;</span><span class="p">)</span>
          <span class="k">yield</span> <span class="nx">cancel</span><span class="p">(</span><span class="nx">bgSyncTask</span><span class="p">)</span>
          <span class="k">yield</span> <span class="nx">cancel</span><span class="p">(</span><span class="nx">timerTask</span><span class="p">)</span>

        <span class="kd">function</span><span class="o">*</span> <span class="nx">bgSync</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">try</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
              <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">call</span><span class="p">(</span><span class="nx">delay</span><span class="p">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
              <span class="k">yield</span> <span class="nx">put</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;stop&#39;</span> <span class="p">})</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">yield</span> <span class="nx">cancelled</span><span class="p">())</span>
              <span class="k">yield</span> <span class="nx">put</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="nx">payload</span><span class="o">:</span> <span class="s1">&#39;fetchğŸ›‘&#39;</span> <span class="p">})</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">function</span><span class="o">*</span> <span class="nx">timer</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">yield</span> <span class="nx">put</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="nx">payload</span><span class="o">:</span> <span class="nx">i</span><span class="o">++</span> <span class="p">})</span>
            <span class="k">yield</span> <span class="nx">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;watcher&#39;</span> <span class="p">},</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å¤šè¯´ä¸€å¥ï¼Œè¿™æ®µä»£ç è¿˜æ˜¯åœ¨dvaä¸­çš„å†™æ³•ï¼Œå®ƒä¹Ÿå¯ä»¥è¢«è½»æ˜“çš„æ”¹æˆredux-sagaçš„å†™æ³•ã€‚</p>
<p>watchLoginæ˜¯ä¸€ä¸ªsagaï¼Œå®ƒè¢«dvaè‡ªåŠ¨runè¿è¡Œï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªtakeåœ¨ç­‰å¾…ä¸€ä¸ªtypeä¸ºstartçš„actionè¢«dispatchæˆ–è€…putï¼Œtake(â€˜startâ€™)è¢«è§¦å‘åï¼Œ2ä¸ªéé˜»å¡ä»»åŠ¡è¿è¡Œï¼ŒåŒæ—¶ç­‰å¾…take(â€˜stopâ€™)è¢«è§¦å‘ã€‚</p>
<p>action stopè§¦å‘take(â€˜stopâ€™)ï¼Œä¸‹é¢2è¡Œä»£ç æ‰§è¡Œï¼Œå–æ¶ˆäº†2ä¸ªéé˜»å¡ä»»åŠ¡ğŸ¤ªã€‚</p>
<p>æˆ‘ä»¬çœ‹åˆ°forkçš„2ä¸ªä»»åŠ¡éƒ½æ˜¯generatorå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯sagaï¼Œå®ƒä»¬å¯ä»¥å†™åœ¨dvaçš„modelçš„effectsä¸‹ï¼Œè¢«disptachæˆ–è€…putå‘é€actionè°ƒç”¨è§¦å‘ï¼Œå¦‚æœè¿™æ ·çš„è¯å°±æ— æ³•é€šè¿‡ä»£ç å°†å…¶cancelã€‚</p>
<p>æ‰€ä»¥ä¸ºäº†å®ç°å–æ¶ˆå¼‚æ­¥ä»»åŠ¡ï¼Œå¯ä»¥åƒè¿™æ ·å†™åœ¨ä¸€ä¸ªeffectä¸­ï¼Œé€šè¿‡takeå¸®åŠ©ï¼Œå®ç°cancelã€‚</p>
<p>å…¶å®dvaä¸­æ¯ä¸ªmodelçš„effectsè¢«çœ‹ä½œä¸€ä¸ªå¤§sagaï¼Œä¼šè¢«å½“ä½œsagaMiddleware.run()æ–¹æ³•çš„å‚æ•°ï¼Œè€Œeffectsä¸‹é¢çš„æ¯ä¸ªæ–¹æ³•ï¼Œéƒ½ä¼šè¢«forkæˆä¸€ä¸ªå­ä»»åŠ¡ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å¤„ç†ä¸€ç§é—®é¢˜äº†â€”â€”åœ¨ä½¿ç”¨dvaæˆ–è€…redux-sagaæ—¶â€”â€”å–æ¶ˆeffectã€å–æ¶ˆå¼‚æ­¥ä»»åŠ¡ã€cancel effectã€å¤„ç†å¼‚æ­¥ä»»åŠ¡è¶…æ—¶ã€å¤„ç†ç½‘è·¯è¯·æ±‚è¶…æ—¶ã€å–æ¶ˆaxiosè¯·æ±‚ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>å¦‚ä½•å¤„ç†å¤§é‡bug</title>
                <link>https://wss.cool/%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%A4%A7%E9%87%8Fbug.html</link>
                <guid isPermaLink="true">https://wss.cool/%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%A4%A7%E9%87%8Fbug.html</guid>
                <pubDate>Fri, 21 Dec 2018 16:21:39 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>å¤„ç†bugåˆ†ä¸‰æ­¥ï¼šç¡®è®¤ä½ç½®åŠåŸå› ï¼Œè§£å†³æ–¹æ¡ˆï¼Œå®ç°ä»£ç ã€‚</p>
<p>bugæ•°é‡å¾ˆå¤šæ—¶ï¼Œé¢†å¯¼çš„å¿ƒé‡Œä¼šæœ‰å‹åŠ›ï¼Œæ‰€ä»¥å…ˆè§£å†³å®¹æ˜“æ”¹çš„ï¼Œè®©æ•°é‡é™ä¸‹æ¥ï¼Œé¢†å¯¼çš„å‹åŠ›å°äº†å°±å¯ä»¥ä¸åŠ ç­äº†ã€‚å¦‚æœä½ æ”¹çš„æ•°é‡å¤šè¿˜å¯èƒ½è®¤ä¸ºä½ æ¯”åˆ«äººæœ‰äº›ã€‚</p>
<h2 id="å¤„ç†é—®é¢˜çš„1-2-3å‡çº§ç­–ç•¥">å¤„ç†é—®é¢˜çš„â€œ1-2-3â€å‡çº§ç­–ç•¥</h2>
<p>é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œ</p>
<ol>
<li>è‡ªå·±ä¸€ä¸ªäººå¤„ç†1å°æ—¶å†…æ²¡æœ‰æ€è·¯ï¼Œè¯·æ‰¾ä»–äººå°èŒƒå›´è®¨è®º</li>
<li>å¦‚æœä¸ä»–äºº2å°æ—¶å†…æ²¡æœ‰ç»“æœï¼Œè¯·ä¸Šå‡åˆ°å›¢é˜ŸèŒƒå›´</li>
<li>å¦‚æœåœ¨å›¢é˜ŸèŒƒå›´3å°æ—¶å†…æ²¡æœ‰æ€è·¯</li>
<li>æˆ‘ä»¬å°±éœ€è¦å€ŸåŠ©å¤–éƒ¨åŠ›é‡äº†ã€‚æ¯”å¦‚ï¼šæ‰¾äº§å“æ”¹éœ€æ±‚ï¼Œæ‰¾å…¬å¸å¤–çš„æŠ€æœ¯é«˜æ‰‹åšå’¨è¯¢ï¼Œå¤–åŒ…</li>
</ol>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/%E5%BF%83%E5%BE%97%E4%B8%8E%E7%BB%8F%E9%AA%8C/">å¿ƒå¾—ä¸ç»éªŒ</category>
                                
                            
                        
                    
                        
                    
                
            </item>
        
            <item>
                <title>Redux Saga</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/react/redux-saga/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/react/redux-saga/</guid>
                <pubDate>Sun, 02 Dec 2018 11:04:48 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>ä¸ºäº†å¯¹å®ƒæœ‰ä¸€ä¸ªæ„Ÿæ€§çš„è®¤è¯†ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹Â <a rel="noreferrer noopener" href="http://link.zhihu.com/?target=http%3A//leonshi.com/redux-saga-in-chinese/docs/api/index.html%23effect-" target="_blank">ä¸­æ–‡æ–‡æ¡£</a>Â æŠŠdomeå†™å‡ºæ¥ï¼Œè·‘ä¸€ä¸‹ã€‚å¦å¤–è¿˜éœ€è¦äº†è§£ <a href="http://es6.ruanyifeng.com/#docs/generator">ES6çš„Generator</a>Â ã€‚</p>
<p>è·‘å®Œäº†æ–‡æ¡£ä¸­çš„domeä¹‹åï¼Œåœ¨æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ç±» thunk çš„ worker â€œè¿›ç¨‹â€
</span><span class="c1"></span><span class="kd">function</span><span class="o">*</span> <span class="nx">load</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">yield</span> <span class="nx">put</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">BEGIN_LOAD_DATA</span> <span class="p">});</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">call</span><span class="p">(</span><span class="nx">fetch</span><span class="p">,</span> <span class="nx">UrlMap</span><span class="p">.</span><span class="nx">loadData</span><span class="p">);</span>
    <span class="k">yield</span> <span class="nx">put</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">LOAD_DATA_SUCCESS</span> <span class="p">,</span><span class="nx">payload</span><span class="o">:</span> <span class="nx">result</span> <span class="p">});</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="nx">put</span><span class="p">({</span><span class="nx">type</span><span class="o">:</span> <span class="nx">LOAD_DATA_ERROR</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span><span class="o">*</span> <span class="nx">saga</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// åˆ›å»ºä¸€ä¸ªç›‘å¬â€œè¿›ç¨‹â€
</span><span class="c1"></span>  <span class="k">yield</span> <span class="nx">fork</span><span class="p">(</span><span class="nx">watch</span><span class="p">(</span><span class="nx">CLICK_LOAD_BUTTON</span><span class="p">,</span> <span class="nx">load</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œæœ‰å‡ ä¸ª redux-saga çš„æ¦‚å¿µéœ€è¦å†äº†è§£ä¸€ä¸‹ã€‚</p>
<h3 id="1put">1ã€put</h3>
<p>ä½œç”¨å’Œ redux ä¸­çš„ dispatch ç›¸åŒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">yield</span> <span class="nx">put</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;CLICK_BTN&#39;</span> <span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="2select">2ã€select</h3>
<p>ä½œç”¨å’Œ redux thunk ä¸­çš„ getState ç›¸åŒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">select</span><span class="p">(</span><span class="nx">state</span> <span class="p">=&gt;</span> <span class="nx">state</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3take">3ã€take</h3>
<p>ç­‰å¾… redux dispatch åŒ¹é…æŸä¸ª pattern çš„ action ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå…ˆç­‰å¾…ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»çš„ action ï¼Œç„¶åæ‰§è¡ŒæŒ‰é’®ç‚¹å‡»çš„ sagaï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">yield</span> <span class="nx">take</span><span class="p">(</span><span class="s1">&#39;CLICK_BUTTON&#39;</span><span class="p">);</span>
  <span class="k">yield</span> <span class="nx">fork</span><span class="p">(</span><span class="nx">clickButtonSaga</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å†ä¸¾ä¸€ä¸ªåˆ©ç”¨ take å®ç° logMiddleware çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">take</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">newState</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">select</span><span class="p">();</span>
  
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;received action:&#39;</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;state become:&#39;</span><span class="p">,</span> <span class="nx">newState</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ç§ç›‘å¬ä¸€ä¸ª action ï¼Œç„¶åæ‰§è¡Œç›¸åº”ä»»åŠ¡çš„æ–¹å¼ï¼Œåœ¨ redux-saga ä¸­éå¸¸å¸¸ç”¨ï¼Œå› æ­¤ redux-saga æä¾›äº†ä¸€ä¸ªè¾…åŠ© Effect â€”â€” takeEvery ï¼Œè®© watch/worker çš„ä»£ç æ›´åŠ æ¸…æ™°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">yield</span> <span class="nx">takeEvery</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="o">*</span> <span class="nx">logger</span><span class="p">(</span><span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">newState</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">select</span><span class="p">();</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;received action:&#39;</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;state become:&#39;</span><span class="p">,</span> <span class="nx">newState</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="4é˜»å¡è°ƒç”¨å’Œæ— é˜»å¡è°ƒç”¨">4ã€é˜»å¡è°ƒç”¨å’Œæ— é˜»å¡è°ƒç”¨</h3>
<p>redux-saga å¯ä»¥ç”¨ fork å’Œ call æ¥è°ƒç”¨å­ saga ï¼Œå…¶ä¸­ fork æ˜¯æ— é˜»å¡å‹è°ƒç”¨ï¼Œcall æ˜¯é˜»å¡å‹è°ƒç”¨ã€‚</p>
<h3 id="41forknbsp">4.1ã€forkÂ </h3>
<p>ä¸‹é¢å†™ä¸€ä¸ªå€’æ•°çš„ä¾‹å­ï¼Œå½“æ¥æ”¶åˆ° BEGIN_COUNT çš„ actionï¼Œåˆ™å¼€å§‹å€’æ•°ï¼Œè€Œæ¥æ”¶åˆ° STOP_COUNT çš„ actionï¼Œ åˆ™åœæ­¢å€’æ•°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span><span class="o">*</span> <span class="nx">count</span><span class="p">(</span><span class="nx">number</span><span class="p">){</span>
  <span class="kd">let</span> <span class="nx">currentNum</span> <span class="o">=</span> <span class="nx">number</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="nx">currentNum</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">currentNum</span><span class="o">--</span><span class="p">);</span>
    <span class="k">yield</span> <span class="nx">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">function</span><span class="o">*</span> <span class="nx">countSaga</span><span class="p">(){</span>
  <span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">){</span>
    <span class="kr">const</span> <span class="p">{</span><span class="nx">payload</span><span class="o">:</span><span class="nx">number</span><span class="p">}</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">take</span><span class="p">(</span><span class="nx">BEGIN_COUNT</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">countTaskId</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">fork</span><span class="p">(</span> <span class="nx">count</span><span class="p">,</span> <span class="nx">number</span> <span class="p">);</span>

    <span class="k">yield</span> <span class="nx">take</span><span class="p">(</span><span class="nx">STOP_COUNT</span><span class="p">);</span>
    <span class="k">yield</span> <span class="nx">cancel</span><span class="p">(</span><span class="nx">countTaskId</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºä½¿ç”¨ fork å¼€å¯çš„ä»»åŠ¡ï¼Œæ‰€ä»¥ä¸éœ€è¦ç­‰ count è¿™ä¸ªsagaæ‰§è¡Œå®Œï¼Œ STOP_COUNT ä»»åŠ¡å·²ç»è¢«ç›‘å¬äº†ï¼Œå½“ count æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœSTOP_COUNTä»»åŠ¡è¢«è§¦å‘ï¼Œä¼šæ‰§è¡Œä¸‹ä¸€è¡Œä»£ç ï¼Œä¹Ÿå°±æ˜¯å–æ¶ˆ fork å¼€å¯çš„é‚£ä¸ªä»»åŠ¡ï¼Œä¸­æ–­ count çš„æ‰§è¡Œã€‚</p>
<h3 id="42call">4.2ã€call</h3>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code>const project = yield call(fetch, { url: UrlMap.fetchProject });
const members = yield call(fetchMembers, project.id)
</code></pre><p>æœ‰é˜»å¡åœ°è°ƒç”¨ saga æˆ–è€…è¿”å› promise çš„å‡½æ•°ã€‚å¯ä»¥ç†è§£ä¸º fetch æ‰§è¡Œå®Œæœ‰äº†è¿”å›ç»“æœäº†ï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€è¡Œã€‚</p>
<h2 id="effects">Effects</h2>
<p>ä¸Šé¢æåˆ°çš„å‡ ä¸ª redux-saga çš„æ¦‚å¿µéƒ½æ˜¯ Effect ã€‚Effect æ˜¯ä¸€ä¸ª javascript å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«æè¿°å‰¯ä½œç”¨çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ yield ä¼ è¾¾ç»™ sagaMiddleware æ‰§è¡Œ</p>
<p>åœ¨ redux-saga ä¸–ç•Œé‡Œï¼Œæ‰€æœ‰çš„ Effect éƒ½å¿…é¡»è¢« yield æ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥æœ‰äººå†™äº†Â <a href="http://link.zhihu.com/?target=https%3A//github.com/pke/eslint-plugin-redux-saga" target="_blank" rel="noreferrer noopener">eslint-plugin-redux-saga</a>Â æ¥æ£€æŸ¥æ˜¯å¦æ¯ä¸ª Effect éƒ½è¢« yieldã€‚å¹¶ä¸”åŸåˆ™ä¸Šæ¥è¯´ï¼Œæ‰€æœ‰çš„ yield åé¢ä¹Ÿåªèƒ½è·ŸEffectï¼Œä»¥ä¿è¯ä»£ç çš„æ˜“æµ‹æ€§ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">yield</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">UrlMap</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>åº”è¯¥ç”¨ call Effect ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">yield</span> <span class="nx">call</span><span class="p">(</span><span class="nx">fetch</span><span class="p">,</span> <span class="nx">UrlMap</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ä»è€Œå¯ä»¥ä½¿ä»£ç å¯æµ‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">iterator</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span><span class="p">,</span> <span class="nx">call</span><span class="p">(</span><span class="nx">fetch</span><span class="p">,</span> <span class="nx">UrlMap</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>å…³äºå„ä¸ª Effect çš„å…·ä½“ä»‹ç»ï¼Œæ–‡æ¡£å·²ç»å†™å¾—å¾ˆè¯¦ç»†äº†ï¼Œè¿™é‡Œåªåšç®€è¦ä»‹ç»ã€‚</p>
<h2 id="ä¼ ç»Ÿå¼‚æ­¥ä¸­é—´ä»¶ç®€ä»‹">ä¼ ç»Ÿå¼‚æ­¥ä¸­é—´ä»¶ç®€ä»‹</h2>
<p>åœ¨ä»‹ç» redux-saga ä¼˜ç¼ºç‚¹ä¹‹å‰ï¼Œè¿™é‡Œå…ˆç®€è¦ä»‹ç»ä¼ ç»Ÿçš„ redux å¼‚æ­¥ä¸­é—´ä»¶ï¼Œä»¥ä¾¿å’Œ redux-saga åšæ¯”è¾ƒã€‚å¯¹ä¼ ç»Ÿå¼‚æ­¥ä¸­é—´ä»¶å·²ç»å……åˆ†äº†è§£çš„è¯»è€…ï¼Œå¯ä»¥ç›´æ¥è·³åˆ° â€œredux-saga ä¼˜ç¼ºç‚¹åˆ†æâ€ è¿›è¡Œé˜…è¯»ã€‚</p>
<h3 id="1-fetch-middleware">1. fetch-middleware</h3>
<p>ä½¿ç”¨reduxçš„å‰ç«¯æŠ€æœ¯å›¢é˜Ÿæˆ–ä¸ªäººï¼Œå¤§å¤šæ•°éƒ½æœ‰ä¸€å¥—è‡ªå·± fetch-middlewareï¼Œä¸€æ¥å¯ä»¥å°è£…å¼‚æ­¥è¯·æ±‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œé¿å…é‡å¤ä»£ç ï¼ŒäºŒæ¥å¯ä»¥å†™ä¸€äº›å…¬å…±çš„å¼‚æ­¥è¯·æ±‚é€»è¾‘ï¼Œæ¯”å¦‚å¼‚å¸¸æ¥å£æ•°æ®é‡‡é›†ã€æ¥å£ç¼“å­˜ã€æ¥å£å¤„ç†ç­‰ç­‰ã€‚ä¾‹å¦‚Â <a href="http://link.zhihu.com/?target=https%3A//github.com/jasonslyvia/redux-composable-fetch" target="_blank" rel="noreferrer noopener">redux-composable-fetch</a>ï¼Œ<a href="http://link.zhihu.com/?target=https%3A//github.com/agraboso/redux-api-middleware" target="_blank" rel="noreferrer noopener">redux-api-middleware</a>ã€‚</p>
<p>åœ¨å½“å‰ redux ç¤¾åŒºä¸­ï¼Œfetch-middleware å°è£…ç»“æœä¸€èˆ¬å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">loadData</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/api.json&#39;</span><span class="p">,</span>
    <span class="nx">types</span><span class="o">:</span> <span class="p">[</span><span class="nx">LOADING_ACTION_TYPE</span><span class="p">,</span> <span class="nx">SUCCESS_ACTION_TYPE</span><span class="p">,</span> <span class="nx">FAILURE_ACTION_TYPE</span><span class="p">],</span>
    <span class="nx">params</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">id</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¤§å¤šæ•° fetch-middleware éƒ½ä¼šç”¨åˆ°ä¸€ä¸ªå°æŠ€å·§ â€”â€” æŠŠæœ€ç»ˆå¤„ç†å¥½çš„ promise è¿”å›å‡ºæ¥ï¼Œä»¥ä¾¿åœ¨ thunk-middleware ä¸­å¤ç”¨ï¼Œå¹¶ç»„ç»‡ä¸åŒå¼‚æ­¥è¿‡ç¨‹çš„å…ˆåé€»è¾‘ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">loadDetailThunk</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// å…ˆè¯·æ±‚åˆ° loadData çš„ç»“æœï¼Œå†è¯·æ±‚ loadDetail
</span><span class="c1"></span>    <span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadData</span><span class="p">(</span><span class="nx">id</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">detailId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
      <span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadDetail</span><span class="p">(</span><span class="nx">detailId</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæŠ€å·§åœ¨ redux-saga ä¸­ä¹ŸåŒæ ·æœ‰æ•ˆã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span><span class="o">*</span> <span class="nx">loadDetailSaga</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">put</span><span class="p">.</span><span class="nx">sync</span><span class="p">(</span><span class="nx">loadData</span><span class="p">(</span><span class="nx">id</span><span class="p">));</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">detailId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>

  <span class="k">yield</span> <span class="nx">put</span><span class="p">.</span><span class="nx">sync</span><span class="p">(</span><span class="nx">loadDetail</span><span class="p">(</span><span class="nx">detailId</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="redux-saga-ä¼˜ç¼ºç‚¹åˆ†æ">redux-saga ä¼˜ç¼ºç‚¹åˆ†æ</h2>
<h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3>
<ul>
<li>
<p>redux-saga ä¸å¼ºè¿«æˆ‘ä»¬æ•è·å¼‚å¸¸ï¼Œè¿™å¾€å¾€ä¼šé€ æˆå¼‚å¸¸å‘ç”Ÿæ—¶éš¾ä»¥å‘ç°åŸå› ã€‚å› æ­¤ï¼Œä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯æ˜¯ï¼Œç›¸ä¿¡ä»»ä½•ä¸€ä¸ªè¿‡ç¨‹éƒ½æœ‰å¯èƒ½å‘ç”Ÿå¼‚å¸¸ã€‚å¦‚æœå‡ºç°å¼‚å¸¸ä½†æ²¡æœ‰è¢«æ•è·ï¼Œredux-saga çš„é”™è¯¯æ ˆä¼šç»™ä½ ä¸€ç§ä¸€è„¸æ‡µé€¼çš„æ„Ÿè§‰ã€‚</p>
</li>
<li>
<p>generator çš„è°ƒè¯•ç¯å¢ƒæ¯”è¾ƒç³Ÿç³•ï¼Œbabel çš„ source-map ç»å¸¸é”™ä½ï¼Œç»å¸¸è¦æ‰‹åŠ¨åŠ  debugger æ¥è°ƒè¯•ã€‚</p>
</li>
<li>
<p>ä½ å›¢é˜Ÿä¸­ä½¿ç”¨çš„å…¶å®ƒå¼‚æ­¥ä¸­é—´ä»¶ï¼Œæˆ–è®¸éš¾ä»¥å’Œ redux-saga æ­é…è‰¯å¥½ã€‚æˆ–è®¸éœ€è¦èŠ±è´¹ä¸€äº›ä»£ä»·ï¼Œç”¨ redux-saga æ¥é‡æ„ä¸€éƒ¨åˆ†ä¸­é—´ä»¶ã€‚</p>
</li>
</ul>
<h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3>
<ul>
<li>ä¿æŒ action çš„ç®€å•çº¯ç²¹ï¼Œaciton ä¸å†åƒåŸæ¥é‚£æ ·äº”èŠ±å…«é—¨ï¼Œè®©äººçœ¼èŠ±ç¼­ä¹±ã€‚task çš„æ¨¡å¼ä½¿ä»£ç æ›´åŠ æ¸…æ™°ã€‚</li>
<li>redux-saga æä¾›äº†ä¸°å¯Œçš„ Effectsï¼Œä»¥åŠ sagas çš„æœºåˆ¶ï¼ˆæ‰€æœ‰çš„ saga éƒ½å¯ä»¥è¢«ä¸­æ–­ï¼‰ï¼Œåœ¨å¤„ç†å¤æ‚çš„å¼‚æ­¥é—®é¢˜ä¸Šååˆ†è¶æ‰‹ã€‚å¦‚æœä½ çš„åº”ç”¨å±äºå†™æ“ä½œå¯†é›†å‹æˆ–è€…ä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œå¿«è®© redux-saga æ¥æ‹¯æ•‘ä½ ã€‚</li>
<li>æ‰©å±•æ€§å¼ºã€‚</li>
<li>å£°æ˜å¼çš„ Effectsï¼Œä½¿ä»£ç æ›´æ˜“æµ‹è¯•ï¼Œ<a href="http://link.zhihu.com/?target=http%3A//leonshi.com/redux-saga-in-chinese/docs/basics/DeclarativeEffects.html" target="_blank" rel="noreferrer noopener">æŸ¥çœ‹è¯¦æƒ…</a>ã€‚</li>
</ul>
<h2 id="åˆ©ç”¨-redux-saga-å†™-redux-ä¸­é—´ä»¶">åˆ©ç”¨ redux-saga å†™ redux ä¸­é—´ä»¶</h2>
<p>ç”¨ redux-saga æ¥å†™ä¸­é—´ä»¶ï¼Œå¯è°“äº‹åŠåŠŸå€ã€‚è¿™é‡Œä¸¾ä¸€ä¸ªè½®è¯¢ä¸­é—´ä»¶çš„ä¾‹å­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span><span class="o">*</span> <span class="nx">pollingSaga</span><span class="p">(</span><span class="nx">fetchAction</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">defaultInterval</span><span class="p">,</span> <span class="nx">mockInterval</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">fetchAction</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">put</span><span class="p">.</span><span class="nx">sync</span><span class="p">(</span><span class="nx">fetchAction</span><span class="p">);</span>
      <span class="kr">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">mockInterval</span> <span class="o">||</span> <span class="nx">result</span><span class="p">.</span><span class="nx">interval</span><span class="p">;</span>

      <span class="k">yield</span> <span class="nx">delay</span><span class="p">(</span><span class="nx">interval</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">yield</span> <span class="nx">delay</span><span class="p">(</span><span class="nx">defaultInterval</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span><span class="o">*</span> <span class="nx">beginPolling</span><span class="p">(</span><span class="nx">pollingAction</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">pollingUrl</span><span class="p">,</span> <span class="nx">defaultInterval</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span> <span class="nx">mockInterval</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span>
    <span class="nx">params</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">pollingAction</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">types</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;pollingAction pattern error&#39;</span><span class="p">,</span> <span class="nx">pollingAction</span><span class="p">);</span>
    <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;pollingAction types[1] is null&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kr">const</span> <span class="nx">fetchAction</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">url</span><span class="o">:</span> <span class="nx">pollingUrl</span><span class="p">,</span>
    <span class="nx">types</span><span class="p">,</span>
    <span class="nx">params</span><span class="p">,</span>
    <span class="nx">mockInterval</span><span class="p">,</span>
    <span class="nx">defaultInterval</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="kr">const</span> <span class="nx">pollingTaskId</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">fork</span><span class="p">(</span><span class="nx">pollingSaga</span><span class="p">,</span> <span class="nx">fetchAction</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">pattern</span> <span class="o">=</span> <span class="nx">action</span> <span class="p">=&gt;</span> <span class="nx">action</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">types</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">action</span><span class="p">.</span><span class="nx">stopPolling</span><span class="p">;</span>

  <span class="k">yield</span> <span class="nx">take</span><span class="p">(</span><span class="nx">pattern</span><span class="p">);</span>
  <span class="k">yield</span> <span class="nx">cancel</span><span class="p">(</span><span class="nx">pollingTaskId</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span><span class="o">*</span> <span class="nx">pollingSagaMiddleware</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">yield</span> <span class="nx">takeEvery</span><span class="p">(</span><span class="nx">action</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="p">{</span> <span class="nx">pollingUrl</span><span class="p">,</span> <span class="nx">types</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">action</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">pollingUrl</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">},</span> <span class="nx">beginPolling</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><pre class="wp-block-verse">æœ¬æ–‡æ¥è‡ªçŸ¥ä¹â€œ<a href="https://zhuanlan.zhihu.com/p/23012870">redux-saga å®è·µæ€»ç»“</a>â€ï¼Œä½œè€…â€œ<a rel="noreferrer noopener" target="_blank" href="https://www.zhihu.com/people/huang-jason">Jason</a>â€ï¼Œ<a href="https://zhuanlan.zhihu.com/p/23012870">åŸæ–‡é“¾æ¥</a></pre>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>Redux æ¦‚è¦</title>
                <link>https://wss.cool/posts/%E5%89%8D%E7%AB%AF/react/redux-%E6%A6%82%E8%A6%81/</link>
                <guid isPermaLink="true">https://wss.cool/posts/%E5%89%8D%E7%AB%AF/react/redux-%E6%A6%82%E8%A6%81/</guid>
                <pubDate>Wed, 28 Nov 2018 14:24:04 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p id="page-title" class="asset-name entry-title">
  å‚è€ƒï¼š<a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html">Redux å…¥é—¨æ•™ç¨‹</a>
</p>
<h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2>
<p>storeï¼šä¿å­˜æ•°æ®çš„å®¹å™¨ï¼Œæ•´ä¸ªåº”ç”¨é€šå¸¸åªæœ‰ä¸€ä¸ªstoreã€‚</p>
<p>stateï¼šstoreåœ¨æŸæ—¶ç‚¹çš„ä¸€ä¸ªå¿«ç…§ï¼Œä¸€ä¸ªstateå¯¹åº”ä¸€ä¸ªviewã€‚</p>
<p>actionï¼šå®šä¹‰ä¸€ä¸ªç”¨æˆ·å¯¹viewçš„æ“ä½œã€‚</p>
<p>å¯ä»¥æš‚æ—¶è¿™æ ·ç†è§£ï¼š<br>
<img class="aligncenter size-medium wp-image-81" src="http://58.87.109.73/wpBlog/wp-content/uploads/2018/11/å±å¹•å¿«ç…§-2018-11-28-ä¸‹åˆ10.24.34-300x184.png" alt="" width="300" height="184"   /><br>
storeç”Ÿæˆä¸€ä¸ªå¿«ç…§stateï¼Œstateå¯¹åº”ä¸€ä¸ªviewï¼Œviewå‘å‡ºactionæ¥é€šçŸ¥storeå˜åŒ–ï¼Œä½¿storeå˜åŒ–è€Œç”Ÿæˆä¸€ä¸ªæ–°çš„stateï¼Œæ–°çš„stateåˆå¯¹åº”æ–°çš„viewã€‚</p>
<p>ActionCreatorï¼šé€šå¸¸actionåªæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸”åªæœ‰typeå±æ€§ä½¿å¿…é¡»çš„ã€‚æˆ‘ä»¬çŸ¥é“actionä»£è¡¨ç€viewçš„æ“ä½œï¼Œæ‰€ä»¥actionå¯èƒ½æœ‰å¾ˆå¤šä¸ªåˆè¢«ç»å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆå„ç§actionæ˜¯æ¯”è¾ƒåˆç†çš„æ“ä½œï¼Œè¿™ä¸ªå‡½æ•°å°±å«åšActionCreatorã€‚</p>
<pre><code class="language-javascript">const ADD_TODO = 'æ·»åŠ  TODO';
function addTodo(text) {
  return {
    type: ADD_TODO,
    text
  }
}
const action = addTodo('Learn Redux');</code></pre>
<h2 id="reduxçš„api">Reduxçš„API</h2>
<p>ç”Ÿæˆstoreã€è·å¾—state</p>
<pre><code class="language-javascript">import { createStore } from 'redux';
const store = createStore(fn);
const state = store.getState();</code></pre>
<p>viewé€šè¿‡store.dispatch() å‘å‡ºactionï¼š</p>
<pre><code class="language-javascript">store.dispatch({
  type: 'ADD_TODO',
  payload: 'Learn Redux'
});
//Â store.dispatch(addTodo('learnÂ Redux'));</code></pre>
<p>storeåœ¨æ¥æ”¶åˆ°actionæ—¶ï¼Œä¼šæ ¹æ®actionç”Ÿæˆä¸€ä¸ªæ–°çš„stateï¼Œé‚£ä¹ˆå¦‚ä½•ç”Ÿæˆæ–°çš„stateï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹æ€ä¹ˆå®šä¹‰å‘¢ï¼Ÿ</p>
<h3 id="reducer">Reducer</h3>
<p>Reduceræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®šä¹‰storeåœ¨æ¥æ”¶åˆ°actionæ—¶stateå¦‚ä½•å‘ç”Ÿå˜åŒ–ã€‚actionåªæè¿°å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè€Œreduceræè¿°stateå¦‚ä½•å˜åŒ–ã€‚è¿™ä¸ªå‡½æ•°æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="language-javascript">const reducer = function (state, action) {
  // ...
  return new_state;
};
//Â æˆ–
const defaultState = 0;
const reducer = (state = defaultState, action) =&gt; {
  switch (action.type) {
    case 'ADD':
      return state + action.payload;
    default: 
      return state;
  }
};
const state = reducer(1, {
  type: 'ADD',
  payload: 2
});
</code></pre>
<p>å®é™…åº”ç”¨ä¸­ï¼ŒReducer å‡½æ•°ä¸ç”¨åƒä¸Šé¢è¿™æ ·æ‰‹åŠ¨è°ƒç”¨ï¼Œstore.dispatchæ–¹æ³•ä¼šè§¦å‘ Reducer çš„è‡ªåŠ¨æ‰§è¡Œã€‚ä¸ºæ­¤ï¼ŒStore éœ€è¦çŸ¥é“ Reducer å‡½æ•°ï¼Œåšæ³•å°±æ˜¯åœ¨ç”Ÿæˆ Store çš„æ—¶å€™ï¼Œå°† Reducer ä¼ å…¥createStoreæ–¹æ³•ï¼š</p>
<pre><code class="language-javascript">import { createStore } from 'redux';
const store = createStore(reducer);</code></pre>
<p>âš ï¸Â Reducerå¿…é¡»æ˜¯çº¯å‡½æ•°ï¼šåªè¦æ˜¯åŒæ ·çš„è¾“å…¥ï¼Œå¿…å®šå¾—åˆ°åŒæ ·çš„è¾“å‡ºï¼Œå¿…é¡»éµå®ˆä»¥ä¸‹ä¸€äº›çº¦æŸï¼š</p>
<ul>
<li>ä¸å¾—æ”¹å†™å‚æ•°</li>
<li>ä¸èƒ½è°ƒç”¨ç³»ç»Ÿ I/O çš„API</li>
<li>ä¸èƒ½è°ƒç”¨<code>Date.now()</code>æˆ–è€…<code>Math.random()</code>ç­‰ä¸çº¯çš„æ–¹æ³•ï¼Œå› ä¸ºæ¯æ¬¡ä¼šå¾—åˆ°ä¸ä¸€æ ·çš„ç»“æœ</li>
</ul>
<p>âš ï¸Â Reducer å‡½æ•°é‡Œé¢ä¸èƒ½æ”¹å˜ Stateï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼š</p>
<pre><code class="language-javascript">return { ...state, ...newState };
// return [...state, newItem];</code></pre>
<p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†Ruduceræ˜¯å¤„ç†stateå˜åŒ–è¿‡ç¨‹çš„ï¼Œé‚£ä¹ˆstateå˜åŒ–ä»¥ååˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¸Šé¢è¯´è¿‡ï¼Œé€šå¸¸ä¸€ä¸ªstateå¯¹åº”ä¸€ä¸ªviewï¼Œä¹Ÿå°±æ˜¯è¯´stateæ”¹å˜åviewä¹Ÿè¦éšä¹‹å˜åŒ–ï¼Œä½†æ˜¯viewæ€ä¹ˆçŸ¥é“è‡ªå·±åº”è¯¥æ”¹å˜å‘¢ï¼Ÿ</p>
<h3 id="storesubscribe">store.subscribe()</h3>
<p>Store å…è®¸ä½¿ç”¨<code>store.subscribe</code>æ–¹æ³•è®¾ç½®ç›‘å¬å‡½æ•°ï¼Œä¸€æ—¦ State å‘ç”Ÿå˜åŒ–ï¼Œå°±è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªç›‘å¬å‡½æ•°ï¼Œviewä¹Ÿå°±å¯ä»¥é€šè¿‡å®ƒæ¥æ›´æ–°ã€‚æ¯”å¦‚Reactçš„setState()ã€‚</p>
<h3 id="å·¥ä½œæµç¨‹å¤§æ¦‚å¯ä»¥è¿™æ ·ç†è§£">å·¥ä½œæµç¨‹å¤§æ¦‚å¯ä»¥è¿™æ ·ç†è§£ï¼š</h3>
<div style="width: 640px;" class="wp-video">
  <!--[if lt IE 9]><![endif]--><video class="wp-video-shortcode" id="video-78-1" width="640" height="436" preload="metadata" controls="controls"><source type="video/mp4" src="http://58.87.109.73/wpBlog/wp-content/uploads/2018/11/redux.mp4?_=1" />
<p><a href="http://58.87.109.73/wpBlog/wp-content/uploads/2018/11/redux.mp4">http://58.87.109.73/wpBlog/wp-content/uploads/2018/11/redux.mp4</a></video></p>
</div>
<p>Â </p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/api/">api</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>React ä¸­çš„å…ƒç´ ä¸ç»„ä»¶</title>
                <link>https://wss.cool/react-element-and-component.html</link>
                <guid isPermaLink="true">https://wss.cool/react-element-and-component.html</guid>
                <pubDate>Sat, 24 Nov 2018 04:49:54 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html">React Components, Elements, and Instances</a></p>
<h2 id="ä»€ä¹ˆæ˜¯reactå…ƒç´ element">ä»€ä¹ˆæ˜¯Reactå…ƒç´ (element)ï¼Ÿ</h2>
<p><strong>å…ƒç´ (element)æ˜¯æè¿°ç»„ä»¶å®ä¾‹æˆ–DOMèŠ‚ç‚¹åŠå…¶æ‰€éœ€å±æ€§çš„æ™®é€šå¯¹è±¡</strong>è¿™ä¸ªå¯¹è±¡ä»…ä»…åŒ…å«äº†æœ‰å…³ç»„ä»¶ç±»å‹ã€å±æ€§ã€å­å…ƒç´ çš„ä¿¡æ¯ã€‚</p>
<p>å…ƒç´ ä¸æ˜¯å®é™…çš„å®ä¾‹ã€‚ç›¸åï¼Œå®ƒæ˜¯ä¸€ç§å‘Šè¯‰Reactä½ æƒ³åœ¨å±å¹•ä¸Šçœ‹åˆ°ä»€ä¹ˆçš„æ–¹æ³•ã€‚ä½ ä¸èƒ½åœ¨å…ƒç´ ä¸Šè°ƒç”¨ä»»ä½•æ–¹æ³•ã€‚å®ƒåªæ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå­—æ®µçš„ä¸å¯å˜æè¿°å¯¹è±¡ï¼štype:(string | ReactClass) å’Œ props: Object ã€‚</p>
<p>å¯ä»¥æŠŠä¸€ä¸ªè¿™æ ·çš„DOMèŠ‚ç‚¹æè¿°æˆä¸‹é¢è¿™æ ·çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±å«å…ƒç´ ï¼ˆelementï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;div&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">children</span><span class="o">:</span> <span class="s1">&#39;Login&#39;</span><span class="p">,</span>
    <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;login-btn&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å…ƒç´ å¯ä»¥é€šè¿‡createElementæ–¹æ³•åˆ›å»ºã€‚</p>
<h2 id="domå…ƒç´ ">DOMå…ƒç´ </h2>
<p>å½“elementçš„typeä¸ºè‹±æ–‡å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒè¡¨ç¤ºåŒåçš„DOMèŠ‚ç‚¹ï¼Œelementçš„propså¯¹åº”å…¶å±æ€§ã€‚è¿™å°±æ˜¯Reactå°†å‘ˆç°çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;button&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;button button-blue&#39;</span><span class="p">,</span>
    <span class="nx">children</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span>
      <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">children</span><span class="o">:</span> <span class="s1">&#39;OK!&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æ­¤å…ƒç´ åªæ˜¯å°†ä»¥ä¸‹HTMLè¡¨ç¤ºä¸ºæ™®é€šå¯¹è±¡çš„ä¸€ç§æ–¹æ³•ï¼š</p>
<h2 id="ç»„ä»¶å…ƒç´ ">ç»„ä»¶å…ƒç´ </h2>
<p>ä½†æ˜¯ï¼Œelementçš„typeä¹Ÿå¯ä»¥æ˜¯ä¸Reactç»„ä»¶å¯¹åº”çš„å‡½æ•°æˆ–ç±»ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">Button</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
    <span class="nx">children</span><span class="o">:</span> <span class="s1">&#39;OK!&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æè¿°ç»„ä»¶çš„elementä¸æè¿°DOMèŠ‚ç‚¹çš„elementä¸€æ ·ï¼Œéƒ½æ˜¯elementï¼Œå®ƒä»¬å¯ä»¥åµŒå¥—å¹¶äº’ç›¸æ··åˆã€‚</p>
<p>æ­¤åŠŸèƒ½å…è®¸æ‚¨å°†DangerButtonç»„ä»¶å®šä¹‰ä¸ºå…·æœ‰ç‰¹å®šcolorå±æ€§å€¼çš„Buttonç»„ä»¶ï¼Œè€Œæ— éœ€å…³å¿ƒæ˜¯å¦å®Œå…¨Buttonç»„ä»¶ä¼šå‘ˆç°ä¸ºDOMçš„buttonè¿˜æ˜¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">DangerButton</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">({</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">Button</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
    <span class="nx">children</span><span class="o">:</span> <span class="nx">children</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>ä½ å¯ä»¥åœ¨å•ä¸ªå…ƒç´ æ ‘ä¸­æ··åˆDOMå’Œç»„ä»¶å…ƒç´ ï¼š</p>
<pre><code>const DeleteAccount = () =&gt; ({
  type: 'div',
  props: {
    children: [{
      type: 'p',
      props: {
        children: 'Are you sure?'
      }
    }, {
      type: DangerButton,
      props: {
        children: 'Yep'
      }
    }]
});
</code></pre><p>ä¹Ÿå¯ä»¥ç”¨JSXå†™ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">DeleteAccount</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Are</span> <span class="nx">you</span> <span class="nx">sure</span><span class="o">?&lt;</span><span class="err">/p&gt;</span>
    <span class="o">&lt;</span><span class="nx">DangerButton</span><span class="o">&gt;</span><span class="nx">Yep</span><span class="o">&lt;</span><span class="err">/DangerButton&gt;</span>
  <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ç§æ··åˆæœ‰åŠ©äºä¿æŒç»„ä»¶å½¼æ­¤åˆ†ç¦»ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é€šè¿‡ç»„åˆè¡¨è¾¾is-aå’Œhas-aå…³ç³»ï¼š</p>
<ul>
<li>DangerButtonæ˜¯ä¸€ä¸ªButtonå…·æœ‰ç‰¹å®šå±æ€§çš„</li>
<li>DeleteAccountåŒ…å«ä¸€ä¸ªButtonå’Œä¸€ä¸ªDangerButtonå†…éƒ¨</code></li>
</ul>
<h2 id="components-encapsulate-element-trees">ç»„ä»¶å°è£…å…ƒç´ æ ‘</h2>
<p>å½“Reactå‘ç°ä¸€ä¸ªelementçš„typeæ—¶å‡½æ•°æˆ–è€…ç±»æ—¶ï¼Œå®ƒä¼šé—®é‚£ä¸ªç»„ä»¶ï¼Œç»™ä½ ç›¸å…³çš„propsä½ ä¼šrenderä¸€ä¸ªæ€æ ·çš„elementã€‚</p>
<p>æ¯”å¦‚å½“Reactçœ‹åˆ°è¿™ä¸ªelementæ—¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-hs" data-lang="hs"><span class="p">{</span>
  <span class="kr">type</span><span class="kt">:</span> <span class="kt">Button</span><span class="p">,</span>
  <span class="n">props</span><span class="kt">:</span> <span class="p">{</span>
    <span class="n">color</span><span class="kt">:</span> <span class="n">&#39;blue&#39;</span><span class="p">,</span>
    <span class="n">children</span><span class="kt">:</span> <span class="kt">&#39;OK</span><span class="o">!</span><span class="sc">&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>React ä¼šé—®Â ButtonÂ ç»„ä»¶æƒ³renderä¸€ä¸ªä»€ä¹ˆæ ·çš„elementï¼Œ Â ButtonÂ ç»„ä»¶è¿”å›ä¸€ä¸ªè¿™æ ·çš„ element ç»™React:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;button&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;button button-blue&#39;</span><span class="p">,</span>
    <span class="nx">children</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span>
      <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">children</span><span class="o">:</span> <span class="s1">&#39;OK!&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Reactå°†é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°å®ƒçŸ¥é“äº†é¡µé¢å†…çš„æ‰€æœ‰ç»„ä»¶çš„elementéƒ½æ˜¯åŸºæœ¬DOMæ ‡ç­¾elementã€‚</p>
<p>Reactå°±åƒä¸€ä¸ªå­©å­ï¼Œé—®ä½ æ¯ä¸ªâ€œXæ˜¯Yâ€çš„â€œYæ˜¯ä»€ä¹ˆâ€ï¼Œä½ å‘ä»–ä»¬è§£é‡Šï¼Œç›´åˆ°ä»–ä»¬å¼„æ¸…æ¥šä¸–ç•Œä¸Šçš„æ¯ä¸€ä»¶å°äº‹ã€‚</p>
<p>å¯¹äºReactç»„ä»¶ï¼Œpropsæ˜¯è¾“å…¥ï¼Œå…ƒç´ æ ‘æ˜¯è¾“å‡ºã€‚</p>
<p><strong>è¿”å›çš„å…ƒç´ æ ‘å¯ä»¥åŒ…å«æè¿°DOMèŠ‚ç‚¹çš„å…ƒç´ å’Œæè¿°å…¶ä»–ç»„ä»¶çš„å…ƒç´ ã€‚è¿™ä½¿å¾—æ‚¨å¯ä»¥åœ¨ä¸ä¾èµ–äºå…¶å†…éƒ¨DOMç»“æ„çš„æƒ…å†µä¸‹ç»„æˆUIçš„ç‹¬ç«‹éƒ¨åˆ†ã€‚</strong></p>
<h2 id="top-down-reconciliation">Top-Down Reconciliation</h2>
<p>å½“ä½ è¿™æ ·è°ƒç”¨æ—¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">Form</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">isSubmitted</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">buttonText</span><span class="o">:</span> <span class="s1">&#39;OK!&#39;</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">));</span>
</code></pre></td></tr></table>
</div>
</div><p>React ä¼šé—®Â FormÂ ç»„ä»¶ï¼Œç»“åˆæ‰€ç»™çš„propsè¿”å›æ€æ ·çš„å…ƒç´ æ ‘ã€‚å®ƒå°†é€æ­¥â€œæ”¹è¿›â€å¯¹ç»„ä»¶æ ‘çš„ç†è§£ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// React: You told me this...
</span><span class="c1"></span><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">Form</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">isSubmitted</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">buttonText</span><span class="o">:</span> <span class="s1">&#39;OK!&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// React: ...And Form told me this...
</span><span class="c1"></span><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">Button</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">children</span><span class="o">:</span> <span class="s1">&#39;OK!&#39;</span><span class="p">,</span>
    <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;blue&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// React: ...and Button told me this! I guess I&#39;m done.
</span><span class="c1"></span><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;button&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;button button-blue&#39;</span><span class="p">,</span>
    <span class="nx">children</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span>
      <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">children</span><span class="o">:</span> <span class="s1">&#39;OK!&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™å°±æ˜¯è¢«å«åšreconciliationçš„è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œå½“ä½ è°ƒç”¨Â <a href="https://reactjs.org/docs/top-level-api.html#reactdom.render">ReactDOM.render()</a>Â orÂ <a href="https://reactjs.org/docs/component-api.html#setstate">setState()</a>Â æ—¶Â reconciliation å°±ä¼šå¼€å§‹ã€‚å½“Â reconciliation ç»“æŸæ—¶ï¼ŒReactå°±çŸ¥é“äº†æœ€åçš„DOMæ ‘ ï¼Œç„¶åä¸€ä¸ªåƒÂ react-domÂ orÂ react-nativeÂ è¿™æ ·çš„æ¸²æŸ“å™¨å°†åº”ç”¨æœ€å°å˜æ›´é›†æ¥æ›´æ–°DOMèŠ‚ç‚¹ã€‚</p>
<h2 id="å®ä¾‹instances">å®ä¾‹instances</h2>
<p>æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæ­¤åšå®¢æ¡ç›®å¯¹ç»„ä»¶å’Œå…ƒç´ è¿›è¡Œäº†å¤§é‡è®¨è®ºï¼Œè€Œä¸æ˜¯å®ä¾‹ã€‚äº‹å®ä¸Šï¼Œå®ä¾‹åœ¨Reactä¸­çš„é‡è¦æ€§è¿œè¿œä½äºå¤§å¤šæ•°é¢å‘å¯¹è±¡çš„UIæ¡†æ¶ã€‚</p>
<p>åªæœ‰å£°æ˜ä¸ºç±»çš„ç»„ä»¶æ‰æœ‰å®ä¾‹ï¼Œè€Œä¸”ä½ æ°¸è¿œä¸ä¼šç›´æ¥åˆ›å»ºå®ƒä»¬ï¼šReactä¼šä¸ºä½ åšè¿™ä»¶äº‹ã€‚è™½ç„¶<a href="https://reactjs.org/docs/more-about-refs.html">å­˜åœ¨çˆ¶ç»„ä»¶å®ä¾‹è®¿é—®å­ç»„ä»¶å®ä¾‹çš„æœºåˆ¶</a>ï¼Œä½†å®ƒä»¬ä»…ç”¨äºå‘½ä»¤æ€§æ“ä½œï¼ˆä¾‹å¦‚å°†ç„¦ç‚¹è®¾ç½®åœ¨å­—æ®µä¸Šï¼‰ï¼Œå¹¶ä¸”é€šå¸¸åº”è¯¥é¿å…ã€‚</p>
<p>Reactè´Ÿè´£ä¸ºæ¯ä¸ªç±»ç»„ä»¶åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨æ–¹æ³•å’Œæœ¬åœ°çŠ¶æ€ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼ç¼–å†™ç»„ä»¶ï¼Œä½†é™¤æ­¤ä¹‹å¤–ï¼Œå®ä¾‹åœ¨Reactçš„ç¼–ç¨‹æ¨¡å‹ä¸­ä¸æ˜¯å¾ˆé‡è¦ï¼Œå¹¶ä¸”ç”±Reactæœ¬èº«ç®¡ç†ã€‚</p>
<h2 id="æ‘˜è¦summary">æ‘˜è¦Summary</h2>
<p><strong>å…ƒç´ </strong>æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œç”¨æ¥æè¿°ä½ æƒ³è®©ä»€ä¹ˆæ ·çš„DOMèŠ‚ç‚¹æˆ–ç»„ä»¶å‡ºç°åœ¨å±å¹•ä¸Šã€‚å…ƒç´ å¯ä»¥åœ¨å…¶propsä¸­åŒ…å«å…¶ä»–å…ƒç´ ã€‚åˆ›å»ºReactå…ƒç´ å¾ˆç®€å•ã€‚ä¸€æ—¦åˆ›å»ºäº†ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå°±æ°¸è¿œä¸ä¼šå‘ç”Ÿå˜å¼‚(mutated)ã€‚</p>
<p><strong>ç»„ä»¶</strong>å¯ä»¥ä»¥å¤šç§ä¸åŒçš„æ–¹å¼æ¥å£°æ˜(declared)ã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå¸¦æœ‰render()æ–¹æ³•çš„ç±»ã€‚æˆ–è€…ï¼Œåœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å°†å…¶å®šä¹‰ä¸ºå‡½æ•°ã€‚åœ¨ä»»ä½•ä¸€ç§æƒ…å†µä¸‹ï¼Œå®ƒéƒ½å°†propsä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªå…ƒç´ æ ‘ä½œä¸ºè¾“å‡ºã€‚</p>
<p>å½“ä¸€ä¸ªç»„ä»¶æ¥æ”¶propsä½œä¸ºè¾“å…¥æ—¶ï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªç‰¹å®šçš„çˆ¶ç»„ä»¶è¿”å›äº†ä¸€ä¸ªå¸¦æœ‰å®ƒçš„typeå’Œpropsçš„å…ƒç´ ã€‚è¿™å°±æ˜¯äººä»¬è¯´é“å…·åœ¨Reactä¸­ä»¥ä¸€ç§æ–¹å¼æµåŠ¨çš„åŸå› ï¼šä»çˆ¶æ¯åˆ°å­©å­ã€‚</p>
<p>åœ¨æ‚¨ç¼–å†™çš„ç»„ä»¶ç±»ä¸­å¯ä»¥ç”¨thiså¼•ç”¨çš„<strong>å®ä¾‹</strong>ã€‚å®ƒå¯¹äº<a href="https://reactjs.org/docs/component-api.html">å­˜å‚¨æœ¬åœ°çŠ¶æ€å’Œå¯¹ç”Ÿå‘½å‘¨æœŸäº‹ä»¶åšå‡ºååº”</a>éå¸¸æœ‰ç”¨ã€‚</p>
<p>åŠŸèƒ½ç»„ä»¶æ ¹æœ¬æ²¡æœ‰å®ä¾‹ã€‚ç±»ç»„ä»¶æœ‰å®ä¾‹ï¼Œä½†æ‚¨æ°¸è¿œä¸éœ€è¦ç›´æ¥åˆ›å»ºç»„ä»¶å®ä¾‹â€“Reactè´Ÿè´£è¿™ä¸€ç‚¹ã€‚</p>
<p>æœ€åï¼Œä¸ºäº†åˆ›å»ºå…ƒç´ ï¼Œä½¿ç”¨<a href="https://reactjs.org/docs/top-level-api.html#react.createelement">React.createElement()</a>ï¼Œ<a href="https://reactjs.org/docs/jsx-in-depth.html">JSX</a>æˆ–<a href="https://reactjs.org/docs/top-level-api.html#react.createfactory">å…ƒç´ å·¥å‚å¸®æ‰‹</a>ã€‚ä¸è¦åœ¨çœŸå®ä»£ç ä¸­å°†å…ƒç´ å†™ä¸ºæ™®é€šå¯¹è±¡ â€“ åªè¦çŸ¥é“å®ƒä»¬æ˜¯å¼•æ“ä¸‹çš„æ™®é€šå¯¹è±¡ã€‚</p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/knowledge/">knowledge</category>
                                
                            
                        
                    
                
            </item>
        
            <item>
                <title>Reactçš„diff</title>
                <link>https://wss.cool/react-reconciliation.html</link>
                <guid isPermaLink="true">https://wss.cool/react-reconciliation.html</guid>
                <pubDate>Sat, 17 Nov 2018 08:33:37 +0000</pubDate>
                
                    <author>wss.six@foxmail.com (ç‹ä¹¦ç¡•)</author>
                
                <copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright>
                
                    <description><![CDATA[<h2 id="react-element">React Element</h2>
<p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“reactçš„diffæ¯”è¾ƒçš„æ˜¯æ–°æ—§ä¸¤é¢— react element æ ‘ã€‚é‚£ä»€ä¹ˆæ˜¯ react element å‘¢ï¼Ÿ</p>
<p>react element æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå®ƒæè¿°ç»„ä»¶å®ä¾‹æˆ–DOMèŠ‚ç‚¹ã€‚</p>
<p>å®ƒæ˜¯è¿™æ ·çš„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;div&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">children</span><span class="o">:</span> <span class="s1">&#39;Login&#39;</span><span class="p">,</span>
    <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;login-btn&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ–è¿™æ ·çš„ï¼ˆåŒºåˆ«æ˜¯typeä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°æˆ–ç±»ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">Button</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
    <span class="nx">children</span><span class="o">:</span> <span class="s1">&#39;OK!&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>React.render()æ–¹æ³•ï¼Œä¼šæŠŠ react element è§£ææˆæ‰€æœ‰typeéƒ½æ˜¯å­—ç¬¦ä¸²ï¼ˆDOMæ ‡ç­¾ï¼‰ï¼Œå½¢æˆä¸€æ£µè™šæ‹ŸDOMæ ‘ã€‚</p>
<p>å½“ state æˆ– props æ›´æ–°æ—¶ï¼Œrenderæ–¹æ³•ä¼šè§£æå‡ºå¦ä¸€ä¸ªæ ‘ã€‚Reactä¸ä¼šç›´æ¥å°†æ–°çš„æ ‘æ¸²æŸ“ä¸ºçœŸå®çš„DOMï¼Œè€Œæ˜¯æ‰¾å‡ºæ–°æ—§æ ‘ä¹‹é—´çš„å·®å¼‚ï¼Œåªæ›´æ–°å·®å¼‚éƒ¨åˆ†çš„çœŸå®DOMã€‚è¿™ä¸ªâ€œæ‰¾å‡ºæ–°æ—§æ ‘ä¹‹é—´çš„å·®å¼‚â€çš„ç®—æ³•å°±æ˜¯diffã€‚</p>
<p>å¦‚æœç›´æ¥æ¯”è¾ƒä¸¤é¢—æ ‘ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n<sup>3</sup>) ï¼Œä¸ä½¿ç”¨äºreactçš„åœºæ™¯ã€‚</p>
<p>ReactåŸºäºä¸¤ç‚¹å‡è®¾ï¼Œå®ç°äº†ä¸€ä¸ªå¤æ‚åº¦ä¸ºO(n)çš„ç®—æ³•ï¼š</p>
<ol>
<li>ä¸¤ä¸ªä¸åŒç±»å‹çš„å…ƒç´ å°†äº§ç”Ÿä¸åŒçš„æ ‘ã€‚</li>
<li>å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡keyå‚æ•°æç¤ºå“ªäº›å­å…ƒç´ å¯ä»¥åœ¨ä¸åŒæ¸²æŸ“ä¸­ä¿æŒç¨³å®šã€‚</li>
</ol>
<p>å®è·µä¸­ï¼Œä¸Šè¿°å‡è®¾é€‚ç”¨äºå¤§éƒ¨åˆ†åº”ç”¨åœºæ™¯ã€‚</p>
<h2 id="diffç®—æ³•">diffç®—æ³•</h2>
<p>åœ¨å¯¹æ¯”æ–°æ—§ä¸¤æ£µæ ‘æ—¶ï¼ŒReacté¦–å…ˆæ¯”è¾ƒä¸¤ä¸ªæ ¹å…ƒç´ çš„ç±»å‹ï¼Œç„¶åæ ¹æ®ä¸¤ä¸ªå…ƒç´ çš„ç±»å‹é‡‡å–ä¸åŒçš„è¡ŒåŠ¨ã€‚</p>
<h3 id="æ ¹å…ƒç´ çš„ç±»å‹">æ ¹å…ƒç´ çš„ç±»å‹</h3>
<p>å¯¹æ¯”ä¸¤ä¸ªæ ¹å…ƒç´ çš„ç±»å‹å¯èƒ½ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ul>
<li>elements of different typesï¼Œä¸åŒç±»å‹çš„å…ƒç´ </li>
<li>DOM elements of the same typeï¼Œç›¸åŒç±»å‹çš„DOMå…ƒç´ </li>
<li>component elements of the same typeï¼Œç›¸åŒç±»å‹çš„ç»„ä»¶å…ƒç´ </li>
</ul>
<h3 id="ä¸åŒç±»å‹çš„å…ƒç´ ">ä¸åŒç±»å‹çš„å…ƒç´ </h3>
<p>æ¯å½“æ ¹å…ƒç´ å…·æœ‰ä¸åŒçš„ç±»å‹æ—¶ï¼ŒReactå°†æ‹†é™¤æ—§æ ‘å¹¶ä»å¤´å¼€å§‹æ„å»ºæ–°æ ‘ã€‚æ— è®ºä»<code>&lt;a&gt;</code>åˆ°<code>&lt;img&gt;</code>æˆ–ä»<code>&lt;Article&gt;</code>åˆ°<code>&lt;Comment&gt;</code>ï¼Œæˆ–ä»<code>&lt;Button&gt;</code> åˆ° <code>&lt;div&gt;</code>ï¼Œä»»ä½•çš„è°ƒæ•´éƒ½ä¼šå¯¼è‡´å…¨éƒ¨é‡å»ºã€‚</p>
<p>å½“æ ‘è¢«å¸è½½ï¼Œæ—§çš„DOMèŠ‚ç‚¹å°†è¢«é”€æ¯ã€‚ç»„ä»¶å®ä¾‹ä¼šè°ƒç”¨<code>componentWillUnmount()</code>ã€‚å½“æ„å»ºä¸€æ£µæ–°æ ‘ï¼Œæ–°çš„DOMèŠ‚ç‚¹è¢«æ’å…¥åˆ°DOMä¸­ã€‚ç»„ä»¶å®ä¾‹å°†ä¾æ¬¡è°ƒç”¨<code>componentWillMount()</code>å’Œ<code>componentDidMount()</code>ã€‚ä»»ä½•ä¸æ—§æ ‘æœ‰å…³çš„çŠ¶æ€éƒ½å°†ä¸¢å¼ƒã€‚</p>
<p>è¿™ä¸ªæ ¹èŠ‚ç‚¹ä¸‹æ‰€æœ‰çš„ç»„ä»¶éƒ½å°†ä¼šè¢«å¸è½½ï¼ŒåŒæ—¶ä»–ä»¬çš„çŠ¶æ€å°†è¢«é”€æ¯ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹èŠ‚ç‚¹å¯¹æ¯”ä¹‹åï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Counter</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Counter</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™å°†ä¼šé”€æ¯æ—§çš„<code>Counter</code>å¹¶é‡è£…æ–°çš„<code>Counter</code>ã€‚</p>
<h3 id="ç›¸åŒç±»å‹çš„domå…ƒç´ ">ç›¸åŒç±»å‹çš„DOMå…ƒç´ </h3>
<p>å½“æ¯”è¾ƒä¸¤ä¸ªç›¸åŒç±»å‹çš„React DOMå…ƒç´ æ—¶ï¼ŒReactåˆ™ä¼šè§‚å¯ŸäºŒè€…çš„å±æ€§ï¼Œä¿æŒç›¸åŒçš„åº•å±‚DOMèŠ‚ç‚¹ï¼Œå¹¶ä»…æ›´æ–°å˜åŒ–çš„å±æ€§ã€‚</p>
<h3 id="ç›¸åŒç±»å‹çš„ç»„ä»¶å…ƒç´ ">ç›¸åŒç±»å‹çš„ç»„ä»¶å…ƒç´ </h3>
<p>å½“ç»„ä»¶æ›´æ–°æ—¶ï¼Œå®ä¾‹ä»ä¿æŒä¸€è‡´ï¼Œä»¥è®©çŠ¶æ€èƒ½å¤Ÿåœ¨æ¸²æŸ“ä¹‹é—´ä¿ç•™ã€‚Reacté€šè¿‡æ›´æ–°åº•å±‚ç»„ä»¶å®ä¾‹çš„propsæ¥äº§ç”Ÿæ–°å…ƒç´ ï¼Œå¹¶åœ¨åº•å±‚å®ä¾‹ä¸Šä¾æ¬¡è°ƒç”¨<code>componentWillReceiveProps()</code> å’Œ <code>componentWillUpdate()</code> æ–¹æ³•ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œ<code>render()</code>æ–¹æ³•è¢«è°ƒç”¨ï¼ŒåŒæ—¶å¯¹æ¯”ç®—æ³•ä¼šé€’å½’å¤„ç†ä¹‹å‰çš„ç»“æœå’Œæ–°çš„ç»“æœã€‚</p>
<h2 id="é€’å½’å­èŠ‚ç‚¹">é€’å½’å­èŠ‚ç‚¹</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“å¯¹DOMèŠ‚ç‚¹çš„å­èŠ‚ç‚¹è¿›è¡Œé€’å½’æ—¶ï¼ŒReactä¼šåŒæ—¶è¿­ä»£ä¸¤ä¸ª<strong>å­é¡¹åˆ—è¡¨</strong>ï¼Œå¹¶åœ¨å‡ºç°å·®å¼‚æ—¶ç”Ÿæˆå˜å¼‚ã€‚ï¼ˆåº”è¯¥æ˜¯ä¸¤ä¸ªæ ‘çš„å­é¡¹åˆ—è¡¨å§ï¼Ÿï¼‰</p>
<p>ä¾‹å¦‚ï¼Œå½“åœ¨å­èŠ‚ç‚¹æœ«å°¾å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œä¸¤æ£µæ ‘çš„è½¬æ¢æ•ˆæœå¾ˆå¥½ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>first<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>second<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>first<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>second<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>third<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Reactå°†ä¼šåŒ¹é…ä¸¤æ£µæ ‘çš„<code>&lt;li&gt;first&lt;/li&gt;</code>ï¼ŒåŒ¹é…ä¸¤æ£µæ ‘çš„<code>&lt;li&gt;second&lt;/li&gt;</code> èŠ‚ç‚¹ï¼Œç„¶åæ’å…¥<code>&lt;li&gt;third&lt;/li&gt;</code>èŠ‚ç‚¹æ ‘ã€‚</p>
<p>å¦‚æœä½ å¤©çœŸåœ°åœ¨å¼€å¤´æ’å…¥ä¸€ä¸ªå…ƒç´ å°±ä¼šæœ‰ç³Ÿç³•çš„è¡¨ç°ã€‚ ä¾‹å¦‚ï¼Œåœ¨è¿™ä¸¤æ£µæ ‘ä¹‹é—´è¿›è¡Œè½¬æ¢æ•ˆæœä¸ä½³ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Duke<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Villanova<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Connecticut<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Duke<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Villanova<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Reactä¼šè°ƒæ•´æ¯ä¸ªå­èŠ‚ç‚¹ï¼Œè€Œéæ„è¯†åˆ°å¯ä»¥å®Œæ•´ä¿ç•™<code>&lt;li&gt;Duke&lt;/li&gt;</code> å’Œ <code>&lt;li&gt;Villanova&lt;/li&gt;</code>å­æ ‘ã€‚ä½æ•ˆæˆäº†ä¸€ä¸ªé—®é¢˜ã€‚</p>
<h2 id="key">Key</h2>
<p>Reactæä¾›äº†ä¸€ä¸ªkeyå±æ€§æ¥è§£å†³è¿™ç§ä½æ•ˆé—®é¢˜ã€‚å½“å­å…ƒç´ æœ‰keyå±æ€§æ—¶ï¼ŒReactä½¿ç”¨keyå°†æ—§æ ‘ä¸­çš„å­å…ƒç´ ä¸æ–°æ ‘ä¸­çš„å­å…ƒç´ ç›¸åŒ¹é…å¹¶æ¯”è¾ƒã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¢åŠ ä¸€ä¸ª<code>key</code>åœ¨ä¹‹å‰æ•ˆç‡ä¸é«˜çš„æ ·ä¾‹ä¸­èƒ½è®©æ ‘çš„è½¬æ¢å˜å¾—é«˜æ•ˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="s">&#34;2015&#34;</span><span class="p">&gt;</span>Duke<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="s">&#34;2016&#34;</span><span class="p">&gt;</span>Villanova<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="s">&#34;2014&#34;</span><span class="p">&gt;</span>Connecticut<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="s">&#34;2015&#34;</span><span class="p">&gt;</span>Duke<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="s">&#34;2016&#34;</span><span class="p">&gt;</span>Villanova<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨ReactçŸ¥é“å¸¦æœ‰<code>2014</code>çš„keyçš„å…ƒç´ æ˜¯æ–°çš„ï¼Œä»…ç§»åŠ¨å¸¦æœ‰<code>2015</code>å’Œ<code>2016</code>çš„keyçš„å…ƒç´ ã€‚</p>
<p>å®è·µä¸­ï¼Œä¸ºå…ƒç´ æ‰¾åˆ°ä¸€ä¸ªkeyé€šå¸¸ä¸éš¾ã€‚ä½ å°†å±•ç¤ºçš„å…ƒç´ å¯èƒ½å·²ç»å¸¦æœ‰ä¸€ä¸ªå”¯ä¸€çš„IDï¼Œæ¯”å¦‚keyå¯ä»¥æ¥è‡ªäºä½ çš„æ•°æ®ä¸­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="s">{item.id}</span><span class="p">&gt;</span>{item.name}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>å½“è¿™å·²ä¸å†æ˜¯é—®é¢˜ï¼Œä½ å¯ä»¥ç»™ä½ çš„æ•°æ®å¢åŠ ä¸€ä¸ªæ–°çš„IDå±æ€§ï¼Œæˆ–æ ¹æ®æ•°æ®çš„æŸäº›å†…å®¹åˆ›å»ºä¸€ä¸ªå“ˆå¸Œå€¼æ¥ä½œä¸ºkeyã€‚keyå¿…é¡»åœ¨å…¶å…„å¼ŸèŠ‚ç‚¹ä¸­æ˜¯å”¯ä¸€çš„ï¼Œè€Œéå…¨å±€å”¯ä¸€ã€‚</p>
<h2 id="æƒè¡¡">æƒè¡¡</h2>
<p>é‡è¦çš„æ˜¯è¦è®°ä½ï¼Œåè°ƒç®—æ³•æ˜¯ä¸€ä¸ªå®ç°ç»†èŠ‚ã€‚ Reactå¯ä»¥åœ¨æ¯ä¸ªåŠ¨ä½œä¸Šé‡æ–°å‘ˆç°æ•´ä¸ªåº”ç”¨ç¨‹åº; æœ€ç»ˆç»“æœæ˜¯ä¸€æ ·çš„ã€‚ ä¸ºäº†æ¸…æ¥šèµ·è§ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹é‡æ–°æ¸²æŸ“æ„å‘³ç€ä¸ºæ‰€æœ‰ç»„ä»¶è°ƒç”¨æ¸²æŸ“ï¼Œè¿™å¹¶ä¸æ„å‘³ç€Reactå°†å¸è½½å¹¶é‡æ–°å®‰è£…å®ƒä»¬ã€‚ å®ƒåªä¼šæŒ‰ç…§å‰é¢ç« èŠ‚ä¸­è§„å®šçš„è§„åˆ™<strong>åº”ç”¨å·®å¼‚(apply the differences)</strong>ã€‚(ä»€ä¹ˆå«apply the differences)</p>
<p>æˆ‘ä»¬ç»å¸¸æ”¹è¿›å¯å‘å¼æ–¹æ³•ï¼Œä»¥ä¾¿ä½¿å¸¸è§ç”¨ä¾‹æ›´å¿«ã€‚ åœ¨å½“å‰çš„å®ç°ä¸­ï¼Œæ‚¨å¯ä»¥è¡¨è¾¾ä¸€ä¸ªå­æ ‘å·²ç»åœ¨å…¶å…„å¼Ÿä¹‹é—´ç§»åŠ¨çš„äº‹å®ï¼Œä½†æ‚¨ä¸èƒ½è¯´å®ƒå·²ç§»åŠ¨åˆ°å…¶ä»–åœ°æ–¹ã€‚<em>ç®—æ³•å°†é‡æ–°æ¸²æŸ“å®Œæ•´çš„å­æ ‘ã€‚(æœ€åä¸€å¥è¯æ ¹å‰é¢ä¸¤å¥æ˜¯ä»€ä¹ˆé€»è¾‘å…³ç³»ï¼Ÿ)</em></p>
<p>å› ä¸ºReactä¾èµ–äºå¯å‘å¼ï¼Œå¦‚æœä¸æ»¡è¶³å®ƒä»¬èƒŒåçš„å‡è®¾ï¼Œæ€§èƒ½å°†å—åˆ°å½±å“ã€‚</p>
<ol>
<li>è¯¥ç®—æ³•ä¸ä¼šå°è¯•åŒ¹é…ä¸åŒç»„ä»¶ç±»å‹çš„å­æ ‘ã€‚ å¦‚æœæ‚¨å‘ç°è‡ªå·±åœ¨å…·æœ‰éå¸¸ç›¸ä¼¼è¾“å‡ºçš„ä¸¤ç§ç»„ä»¶ç±»å‹ä¹‹é—´äº¤æ›¿ï¼Œåˆ™å¯èƒ½éœ€è¦ä½¿å…¶æˆä¸ºç›¸åŒç±»å‹ã€‚ åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰å‘ç°è¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</li>
<li>keyåº”è¯¥æ˜¯ç¨³å®šçš„ï¼Œå¯é¢„æµ‹çš„å’Œç‹¬ç‰¹çš„ã€‚ ä¸ç¨³å®šçš„keyï¼ˆå¦‚Math.randomï¼ˆï¼‰ç”Ÿæˆçš„é”®ï¼‰å°†å¯¼è‡´è®¸å¤šç»„ä»¶å®ä¾‹å’ŒDOMèŠ‚ç‚¹è¢«ä¸å¿…è¦åœ°é‡æ–°åˆ›å»ºï¼Œè¿™å¯èƒ½å¯¼è‡´å­ç»„ä»¶ä¸­çš„æ€§èƒ½ä¸‹é™å’Œä¸¢å¤±çŠ¶æ€ã€‚</li>
</ol>
<p>Â </p>
]]></description>
                
                
                
                
                
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/categories/react/">react</category>
                                
                            
                        
                    
                        
                            
                                
                                
                                
                                    <category domain="https://wss.cool/tags/knowledge/">knowledge</category>
                                
                            
                        
                    
                
            </item>
        
    </channel>
</rss>
